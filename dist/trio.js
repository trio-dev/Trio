(function(){
"use strict";
function ajax(opts) {
    var xhr = new XMLHttpRequest();
    var vow = Vow();

    if (opts.encode) {
        opts.url += encodeURI(opts.encode(opts.payload));
    }

    xhr.open(opts.type.toUpperCase(), opts.url);
    xhr.setRequestHeader('Content-Type', opts.contentType);

    for (var header in opts.headers) {
        xhr.setRequestHeader(header, opts.headers[header]);
    }

    xhr.onload = function() {
        if (xhr.status >= 200 && xhr.status <= 299) {
            vow.resolve(xhr.responseText);
        } else {
            vow.reject(xhr.responseText);
        }
    };

    if (opts.encode) {
        xhr.send();
    } else {
        xhr.send(JSON.stringify(opts.payload));
    }

    return vow.promise;
}
function defaults(obj, def) {
    def = def || {};
    
    for (var key in def) {
        if (!obj[key]) {
            obj[key] = def[key];
        }
    }

    return obj;
}
function extend(methods) {
    var parent = this._constructor;

    if (!parent) {
        return;
    }

    var staticAttr = {};
    var child = function() {
        for (var key in staticAttr) {
            this[key] = staticAttr[key];
        }
        parent.apply(this, arguments);
    };
    
    var extended = {};

    for (var prop in parent.prototype) {
        if (Object.prototype.hasOwnProperty.call(parent.prototype, prop)) {
            extended[prop] = parent.prototype[prop];
        }
    }

    for (var met in methods) {
        if (Object.prototype.hasOwnProperty.call(methods, met)) {
            var method = methods[met];
            if (typeof method === 'function') {
                extended[met] = methods[met];
            } else {
                staticAttr[met] = methods[met];
            }
        }
    }

    child.prototype = Object.create(extended);

    return child;
}

function idGenerator(str) {
    var count = 1;

    return function() {
        var id = str + count;
        count++;
        return id;
    };
}

function param(object) {
    var encodedString = '';
    for (var prop in object) {
        if (object.hasOwnProperty(prop)) {
            if (encodedString.length > 0) {
                encodedString += '&';
            }
            encodedString += encodeURI(prop + '=' + object[prop]);
        }
    }
    return encodedString;
}

/**
 * @license
 * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
 */
// @version 0.7.12-86a041b
window.WebComponents=window.WebComponents||{},function(e){var t=e.flags||{},n="webcomponents.js",r=document.querySelector('script[src*="'+n+'"]');if(!t.noOpts){if(location.search.slice(1).split("&").forEach(function(e){var n,r=e.split("=");r[0]&&(n=r[0].match(/wc-(.+)/))&&(t[n[1]]=r[1]||!0)}),r)for(var o,i=0;o=r.attributes[i];i++)"src"!==o.name&&(t[o.name]=o.value||!0);if(t.log&&t.log.split){var a=t.log.split(",");t.log={},a.forEach(function(e){t.log[e]=!0})}else t.log={}}t.shadow=t.shadow||t.shadowdom||t.polyfill,"native"===t.shadow?t.shadow=!1:t.shadow=t.shadow||!HTMLElement.prototype.createShadowRoot,t.register&&(window.CustomElements=window.CustomElements||{flags:{}},window.CustomElements.flags.register=t.register),e.flags=t}(WebComponents),WebComponents.flags.shadow&&("undefined"==typeof WeakMap&&!function(){var e=Object.defineProperty,t=Date.now()%1e9,n=function(){this.name="__st"+(1e9*Math.random()>>>0)+(t++ +"__")};n.prototype={set:function(t,n){var r=t[this.name];return r&&r[0]===t?r[1]=n:e(t,this.name,{value:[t,n],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},"delete":function(e){var t=e[this.name];return t&&t[0]===e?(t[0]=t[1]=void 0,!0):!1},has:function(e){var t=e[this.name];return t?t[0]===e:!1}},window.WeakMap=n}(),window.ShadowDOMPolyfill={},function(e){"use strict";function t(){if("undefined"!=typeof chrome&&chrome.app&&chrome.app.runtime)return!1;if(navigator.getDeviceStorage)return!1;try{var e=new Function("return true;");return e()}catch(t){return!1}}function n(e){if(!e)throw new Error("Assertion failed")}function r(e,t){for(var n=W(t),r=0;r<n.length;r++){var o=n[r];A(e,o,F(t,o))}return e}function o(e,t){for(var n=W(t),r=0;r<n.length;r++){var o=n[r];switch(o){case"arguments":case"caller":case"length":case"name":case"prototype":case"toString":continue}A(e,o,F(t,o))}return e}function i(e,t){for(var n=0;n<t.length;n++)if(t[n]in e)return t[n]}function a(e,t,n){U.value=n,A(e,t,U)}function s(e,t){var n=e.__proto__||Object.getPrototypeOf(e);if(q)try{W(n)}catch(r){n=n.__proto__}var o=R.get(n);if(o)return o;var i=s(n),a=E(i);return g(n,a,t),a}function c(e,t){w(e,t,!0)}function l(e,t){w(t,e,!1)}function u(e){return/^on[a-z]+$/.test(e)}function d(e){return/^[a-zA-Z_$][a-zA-Z_$0-9]*$/.test(e)}function p(e){return k&&d(e)?new Function("return this.__impl4cf1e782hg__."+e):function(){return this.__impl4cf1e782hg__[e]}}function h(e){return k&&d(e)?new Function("v","this.__impl4cf1e782hg__."+e+" = v"):function(t){this.__impl4cf1e782hg__[e]=t}}function f(e){return k&&d(e)?new Function("return this.__impl4cf1e782hg__."+e+".apply(this.__impl4cf1e782hg__, arguments)"):function(){return this.__impl4cf1e782hg__[e].apply(this.__impl4cf1e782hg__,arguments)}}function m(e,t){try{return Object.getOwnPropertyDescriptor(e,t)}catch(n){return B}}function w(t,n,r,o){for(var i=W(t),a=0;a<i.length;a++){var s=i[a];if("polymerBlackList_"!==s&&!(s in n||t.polymerBlackList_&&t.polymerBlackList_[s])){q&&t.__lookupGetter__(s);var c,l,d=m(t,s);if("function"!=typeof d.value){var w=u(s);c=w?e.getEventHandlerGetter(s):p(s),(d.writable||d.set||V)&&(l=w?e.getEventHandlerSetter(s):h(s));var v=V||d.configurable;A(n,s,{get:c,set:l,configurable:v,enumerable:d.enumerable})}else r&&(n[s]=f(s))}}}function v(e,t,n){if(null!=e){var r=e.prototype;g(r,t,n),o(t,e)}}function g(e,t,r){var o=t.prototype;n(void 0===R.get(e)),R.set(e,t),I.set(o,e),c(e,o),r&&l(o,r),a(o,"constructor",t),t.prototype=o}function b(e,t){return R.get(t.prototype)===e}function y(e){var t=Object.getPrototypeOf(e),n=s(t),r=E(n);return g(t,r,e),r}function E(e){function t(t){e.call(this,t)}var n=Object.create(e.prototype);return n.constructor=t,t.prototype=n,t}function _(e){return e&&e.__impl4cf1e782hg__}function S(e){return!_(e)}function T(e){if(null===e)return null;n(S(e));var t=e.__wrapper8e3dd93a60__;return null!=t?t:e.__wrapper8e3dd93a60__=new(s(e,e))(e)}function M(e){return null===e?null:(n(_(e)),e.__impl4cf1e782hg__)}function O(e){return e.__impl4cf1e782hg__}function L(e,t){t.__impl4cf1e782hg__=e,e.__wrapper8e3dd93a60__=t}function N(e){return e&&_(e)?M(e):e}function C(e){return e&&!_(e)?T(e):e}function j(e,t){null!==t&&(n(S(e)),n(void 0===t||_(t)),e.__wrapper8e3dd93a60__=t)}function D(e,t,n){G.get=n,A(e.prototype,t,G)}function H(e,t){D(e,t,function(){return T(this.__impl4cf1e782hg__[t])})}function x(e,t){e.forEach(function(e){t.forEach(function(t){e.prototype[t]=function(){var e=C(this);return e[t].apply(e,arguments)}})})}var R=new WeakMap,I=new WeakMap,P=Object.create(null),k=t(),A=Object.defineProperty,W=Object.getOwnPropertyNames,F=Object.getOwnPropertyDescriptor,U={value:void 0,configurable:!0,enumerable:!1,writable:!0};W(window);var q=/Firefox/.test(navigator.userAgent),B={get:function(){},set:function(e){},configurable:!0,enumerable:!0},V=function(){var e=Object.getOwnPropertyDescriptor(Node.prototype,"nodeType");return e&&!e.get&&!e.set}(),G={get:void 0,configurable:!0,enumerable:!0};e.assert=n,e.constructorTable=R,e.defineGetter=D,e.defineWrapGetter=H,e.forwardMethodsToWrapper=x,e.isIdentifierName=d,e.isWrapper=_,e.isWrapperFor=b,e.mixin=r,e.nativePrototypeTable=I,e.oneOf=i,e.registerObject=y,e.registerWrapper=v,e.rewrap=j,e.setWrapper=L,e.unsafeUnwrap=O,e.unwrap=M,e.unwrapIfNeeded=N,e.wrap=T,e.wrapIfNeeded=C,e.wrappers=P}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e,t,n){return{index:e,removed:t,addedCount:n}}function n(){}var r=0,o=1,i=2,a=3;n.prototype={calcEditDistances:function(e,t,n,r,o,i){for(var a=i-o+1,s=n-t+1,c=new Array(a),l=0;a>l;l++)c[l]=new Array(s),c[l][0]=l;for(var u=0;s>u;u++)c[0][u]=u;for(var l=1;a>l;l++)for(var u=1;s>u;u++)if(this.equals(e[t+u-1],r[o+l-1]))c[l][u]=c[l-1][u-1];else{var d=c[l-1][u]+1,p=c[l][u-1]+1;c[l][u]=p>d?d:p}return c},spliceOperationsFromEditDistances:function(e){for(var t=e.length-1,n=e[0].length-1,s=e[t][n],c=[];t>0||n>0;)if(0!=t)if(0!=n){var l,u=e[t-1][n-1],d=e[t-1][n],p=e[t][n-1];l=p>d?u>d?d:u:u>p?p:u,l==u?(u==s?c.push(r):(c.push(o),s=u),t--,n--):l==d?(c.push(a),t--,s=d):(c.push(i),n--,s=p)}else c.push(a),t--;else c.push(i),n--;return c.reverse(),c},calcSplices:function(e,n,s,c,l,u){var d=0,p=0,h=Math.min(s-n,u-l);if(0==n&&0==l&&(d=this.sharedPrefix(e,c,h)),s==e.length&&u==c.length&&(p=this.sharedSuffix(e,c,h-d)),n+=d,l+=d,s-=p,u-=p,s-n==0&&u-l==0)return[];if(n==s){for(var f=t(n,[],0);u>l;)f.removed.push(c[l++]);return[f]}if(l==u)return[t(n,[],s-n)];for(var m=this.spliceOperationsFromEditDistances(this.calcEditDistances(e,n,s,c,l,u)),f=void 0,w=[],v=n,g=l,b=0;b<m.length;b++)switch(m[b]){case r:f&&(w.push(f),f=void 0),v++,g++;break;case o:f||(f=t(v,[],0)),f.addedCount++,v++,f.removed.push(c[g]),g++;break;case i:f||(f=t(v,[],0)),f.addedCount++,v++;break;case a:f||(f=t(v,[],0)),f.removed.push(c[g]),g++}return f&&w.push(f),w},sharedPrefix:function(e,t,n){for(var r=0;n>r;r++)if(!this.equals(e[r],t[r]))return r;return n},sharedSuffix:function(e,t,n){for(var r=e.length,o=t.length,i=0;n>i&&this.equals(e[--r],t[--o]);)i++;return i},calculateSplices:function(e,t){return this.calcSplices(e,0,e.length,t,0,t.length)},equals:function(e,t){return e===t}},e.ArraySplice=n}(window.ShadowDOMPolyfill),function(e){"use strict";function t(){a=!1;var e=i.slice(0);i=[];for(var t=0;t<e.length;t++)e[t]()}function n(e){i.push(e),a||(a=!0,r(t,0))}var r,o=window.MutationObserver,i=[],a=!1;if(o){var s=1,c=new o(t),l=document.createTextNode(s);c.observe(l,{characterData:!0}),r=function(){s=(s+1)%2,l.data=s}}else r=window.setTimeout;e.setEndOfMicrotask=n}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){e.scheduled_||(e.scheduled_=!0,f.push(e),m||(u(n),m=!0))}function n(){for(m=!1;f.length;){var e=f;f=[],e.sort(function(e,t){return e.uid_-t.uid_});for(var t=0;t<e.length;t++){var n=e[t];n.scheduled_=!1;var r=n.takeRecords();i(n),r.length&&n.callback_(r,n)}}}function r(e,t){this.type=e,this.target=t,this.addedNodes=new p.NodeList,this.removedNodes=new p.NodeList,this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function o(e,t){for(;e;e=e.parentNode){var n=h.get(e);if(n)for(var r=0;r<n.length;r++){var o=n[r];o.options.subtree&&o.addTransientObserver(t)}}}function i(e){for(var t=0;t<e.nodes_.length;t++){var n=e.nodes_[t],r=h.get(n);if(!r)return;for(var o=0;o<r.length;o++){var i=r[o];i.observer===e&&i.removeTransientObservers()}}}function a(e,n,o){for(var i=Object.create(null),a=Object.create(null),s=e;s;s=s.parentNode){var c=h.get(s);if(c)for(var l=0;l<c.length;l++){var u=c[l],d=u.options;if((s===e||d.subtree)&&("attributes"!==n||d.attributes)&&("attributes"!==n||!d.attributeFilter||null===o.namespace&&-1!==d.attributeFilter.indexOf(o.name))&&("characterData"!==n||d.characterData)&&("childList"!==n||d.childList)){var p=u.observer;i[p.uid_]=p,("attributes"===n&&d.attributeOldValue||"characterData"===n&&d.characterDataOldValue)&&(a[p.uid_]=o.oldValue)}}}for(var f in i){var p=i[f],m=new r(n,e);"name"in o&&"namespace"in o&&(m.attributeName=o.name,m.attributeNamespace=o.namespace),o.addedNodes&&(m.addedNodes=o.addedNodes),o.removedNodes&&(m.removedNodes=o.removedNodes),o.previousSibling&&(m.previousSibling=o.previousSibling),o.nextSibling&&(m.nextSibling=o.nextSibling),void 0!==a[f]&&(m.oldValue=a[f]),t(p),p.records_.push(m)}}function s(e){if(this.childList=!!e.childList,this.subtree=!!e.subtree,"attributes"in e||!("attributeOldValue"in e||"attributeFilter"in e)?this.attributes=!!e.attributes:this.attributes=!0,"characterDataOldValue"in e&&!("characterData"in e)?this.characterData=!0:this.characterData=!!e.characterData,!this.attributes&&(e.attributeOldValue||"attributeFilter"in e)||!this.characterData&&e.characterDataOldValue)throw new TypeError;if(this.characterData=!!e.characterData,this.attributeOldValue=!!e.attributeOldValue,this.characterDataOldValue=!!e.characterDataOldValue,"attributeFilter"in e){if(null==e.attributeFilter||"object"!=typeof e.attributeFilter)throw new TypeError;this.attributeFilter=w.call(e.attributeFilter)}else this.attributeFilter=null}function c(e){this.callback_=e,this.nodes_=[],this.records_=[],this.uid_=++v,this.scheduled_=!1}function l(e,t,n){this.observer=e,this.target=t,this.options=n,this.transientObservedNodes=[]}var u=e.setEndOfMicrotask,d=e.wrapIfNeeded,p=e.wrappers,h=new WeakMap,f=[],m=!1,w=Array.prototype.slice,v=0;c.prototype={constructor:c,observe:function(e,t){e=d(e);var n,r=new s(t),o=h.get(e);o||h.set(e,o=[]);for(var i=0;i<o.length;i++)o[i].observer===this&&(n=o[i],n.removeTransientObservers(),n.options=r);n||(n=new l(this,e,r),o.push(n),this.nodes_.push(e))},disconnect:function(){this.nodes_.forEach(function(e){for(var t=h.get(e),n=0;n<t.length;n++){var r=t[n];if(r.observer===this){t.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var e=this.records_;return this.records_=[],e}},l.prototype={addTransientObserver:function(e){if(e!==this.target){t(this.observer),this.transientObservedNodes.push(e);var n=h.get(e);n||h.set(e,n=[]),n.push(this)}},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[];for(var t=0;t<e.length;t++)for(var n=e[t],r=h.get(n),o=0;o<r.length;o++)if(r[o]===this){r.splice(o,1);break}}},e.enqueueMutation=a,e.registerTransientObservers=o,e.wrappers.MutationObserver=c,e.wrappers.MutationRecord=r}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e,t){this.root=e,this.parent=t}function n(e,t){if(e.treeScope_!==t){e.treeScope_=t;for(var r=e.shadowRoot;r;r=r.olderShadowRoot)r.treeScope_.parent=t;for(var o=e.firstChild;o;o=o.nextSibling)n(o,t)}}function r(n){if(n instanceof e.wrappers.Window,n.treeScope_)return n.treeScope_;var o,i=n.parentNode;return o=i?r(i):new t(n,null),n.treeScope_=o}t.prototype={get renderer(){return this.root instanceof e.wrappers.ShadowRoot?e.getRendererForHost(this.root.host):null},contains:function(e){for(;e;e=e.parent)if(e===this)return!0;return!1}},e.TreeScope=t,e.getTreeScope=r,e.setTreeScope=n}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){return e instanceof G.ShadowRoot}function n(e){return A(e).root}function r(e,r){var s=[],c=e;for(s.push(c);c;){var l=a(c);if(l&&l.length>0){for(var u=0;u<l.length;u++){var p=l[u];if(i(p)){var h=n(p),f=h.olderShadowRoot;f&&s.push(f)}s.push(p)}c=l[l.length-1]}else if(t(c)){if(d(e,c)&&o(r))break;c=c.host,s.push(c)}else c=c.parentNode,c&&s.push(c)}return s}function o(e){if(!e)return!1;switch(e.type){case"abort":case"error":case"select":case"change":case"load":case"reset":case"resize":case"scroll":case"selectstart":return!0}return!1}function i(e){return e instanceof HTMLShadowElement}function a(t){return e.getDestinationInsertionPoints(t)}function s(e,t){if(0===e.length)return t;t instanceof G.Window&&(t=t.document);for(var n=A(t),r=e[0],o=A(r),i=l(n,o),a=0;a<e.length;a++){var s=e[a];if(A(s)===i)return s}return e[e.length-1]}function c(e){for(var t=[];e;e=e.parent)t.push(e);return t}function l(e,t){for(var n=c(e),r=c(t),o=null;n.length>0&&r.length>0;){var i=n.pop(),a=r.pop();if(i!==a)break;o=i}return o}function u(e,t,n){t instanceof G.Window&&(t=t.document);var o,i=A(t),a=A(n),s=r(n,e),o=l(i,a);o||(o=a.root);for(var c=o;c;c=c.parent)for(var u=0;u<s.length;u++){var d=s[u];if(A(d)===c)return d}return null}function d(e,t){return A(e)===A(t)}function p(e){if(!K.get(e)&&(K.set(e,!0),f(V(e),V(e.target)),P)){var t=P;throw P=null,t}}function h(e){switch(e.type){case"load":case"beforeunload":case"unload":return!0}return!1}function f(t,n){if($.get(t))throw new Error("InvalidStateError");$.set(t,!0),e.renderAllPending();var o,i,a;if(h(t)&&!t.bubbles){var s=n;s instanceof G.Document&&(a=s.defaultView)&&(i=s,o=[])}if(!o)if(n instanceof G.Window)a=n,o=[];else if(o=r(n,t),!h(t)){var s=o[o.length-1];s instanceof G.Document&&(a=s.defaultView)}return ne.set(t,o),m(t,o,a,i)&&w(t,o,a,i)&&v(t,o,a,i),J.set(t,re),Y["delete"](t,null),$["delete"](t),t.defaultPrevented}function m(e,t,n,r){var o=oe;if(n&&!g(n,e,o,t,r))return!1;for(var i=t.length-1;i>0;i--)if(!g(t[i],e,o,t,r))return!1;return!0}function w(e,t,n,r){var o=ie,i=t[0]||n;return g(i,e,o,t,r)}function v(e,t,n,r){for(var o=ae,i=1;i<t.length;i++)if(!g(t[i],e,o,t,r))return;n&&t.length>0&&g(n,e,o,t,r)}function g(e,t,n,r,o){var i=z.get(e);if(!i)return!0;var a=o||s(r,e);if(a===e){if(n===oe)return!0;n===ae&&(n=ie)}else if(n===ae&&!t.bubbles)return!0;if("relatedTarget"in t){var c=B(t),l=c.relatedTarget;if(l){if(l instanceof Object&&l.addEventListener){var d=V(l),p=u(t,e,d);if(p===a)return!0}else p=null;Z.set(t,p)}}J.set(t,n);var h=t.type,f=!1;X.set(t,a),Y.set(t,e),i.depth++;for(var m=0,w=i.length;w>m;m++){var v=i[m];if(v.removed)f=!0;else if(!(v.type!==h||!v.capture&&n===oe||v.capture&&n===ae))try{if("function"==typeof v.handler?v.handler.call(e,t):v.handler.handleEvent(t),ee.get(t))return!1}catch(g){P||(P=g)}}if(i.depth--,f&&0===i.depth){var b=i.slice();i.length=0;for(var m=0;m<b.length;m++)b[m].removed||i.push(b[m])}return!Q.get(t)}function b(e,t,n){this.type=e,this.handler=t,this.capture=Boolean(n)}function y(e,t){if(!(e instanceof se))return V(T(se,"Event",e,t));var n=e;return ge||"beforeunload"!==n.type||this instanceof M?void U(n,this):new M(n)}function E(e){return e&&e.relatedTarget?Object.create(e,{relatedTarget:{value:B(e.relatedTarget)}}):e}function _(e,t,n){var r=window[e],o=function(t,n){return t instanceof r?void U(t,this):V(T(r,e,t,n))};if(o.prototype=Object.create(t.prototype),n&&W(o.prototype,n),r)try{F(r,o,new r("temp"))}catch(i){F(r,o,document.createEvent(e))}return o}function S(e,t){return function(){arguments[t]=B(arguments[t]);var n=B(this);n[e].apply(n,arguments)}}function T(e,t,n,r){if(we)return new e(n,E(r));var o=B(document.createEvent(t)),i=me[t],a=[n];return Object.keys(i).forEach(function(e){var t=null!=r&&e in r?r[e]:i[e];"relatedTarget"===e&&(t=B(t)),a.push(t)}),o["init"+t].apply(o,a),o}function M(e){y.call(this,e)}function O(e){return"function"==typeof e?!0:e&&e.handleEvent}function L(e){switch(e){case"DOMAttrModified":case"DOMAttributeNameChanged":case"DOMCharacterDataModified":case"DOMElementNameChanged":case"DOMNodeInserted":case"DOMNodeInsertedIntoDocument":case"DOMNodeRemoved":case"DOMNodeRemovedFromDocument":case"DOMSubtreeModified":return!0}return!1}function N(e){U(e,this)}function C(e){return e instanceof G.ShadowRoot&&(e=e.host),B(e)}function j(e,t){var n=z.get(e);if(n)for(var r=0;r<n.length;r++)if(!n[r].removed&&n[r].type===t)return!0;return!1}function D(e,t){for(var n=B(e);n;n=n.parentNode)if(j(V(n),t))return!0;return!1}function H(e){k(e,ye)}function x(t,n,o,i){e.renderAllPending();var a=V(Ee.call(q(n),o,i));if(!a)return null;var c=r(a,null),l=c.lastIndexOf(t);return-1==l?null:(c=c.slice(0,l),s(c,t))}function R(e){return function(){var t=te.get(this);return t&&t[e]&&t[e].value||null}}function I(e){var t=e.slice(2);return function(n){var r=te.get(this);r||(r=Object.create(null),te.set(this,r));var o=r[e];if(o&&this.removeEventListener(t,o.wrapped,!1),"function"==typeof n){var i=function(t){var r=n.call(this,t);r===!1?t.preventDefault():"onbeforeunload"===e&&"string"==typeof r&&(t.returnValue=r)};this.addEventListener(t,i,!1),r[e]={value:n,wrapped:i}}}}var P,k=e.forwardMethodsToWrapper,A=e.getTreeScope,W=e.mixin,F=e.registerWrapper,U=e.setWrapper,q=e.unsafeUnwrap,B=e.unwrap,V=e.wrap,G=e.wrappers,z=(new WeakMap,new WeakMap),K=new WeakMap,$=new WeakMap,X=new WeakMap,Y=new WeakMap,Z=new WeakMap,J=new WeakMap,Q=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakMap,re=0,oe=1,ie=2,ae=3;b.prototype={equals:function(e){return this.handler===e.handler&&this.type===e.type&&this.capture===e.capture},get removed(){return null===this.handler},remove:function(){this.handler=null}};var se=window.Event;se.prototype.polymerBlackList_={returnValue:!0,keyLocation:!0},y.prototype={get target(){return X.get(this)},get currentTarget(){return Y.get(this)},get eventPhase(){return J.get(this)},get path(){var e=ne.get(this);return e?e.slice():[]},stopPropagation:function(){Q.set(this,!0)},stopImmediatePropagation:function(){Q.set(this,!0),ee.set(this,!0)}},F(se,y,document.createEvent("Event"));var ce=_("UIEvent",y),le=_("CustomEvent",y),ue={get relatedTarget(){var e=Z.get(this);return void 0!==e?e:V(B(this).relatedTarget)}},de=W({initMouseEvent:S("initMouseEvent",14)},ue),pe=W({initFocusEvent:S("initFocusEvent",5)},ue),he=_("MouseEvent",ce,de),fe=_("FocusEvent",ce,pe),me=Object.create(null),we=function(){try{new window.FocusEvent("focus")}catch(e){return!1}return!0}();if(!we){var ve=function(e,t,n){if(n){var r=me[n];t=W(W({},r),t)}me[e]=t};ve("Event",{bubbles:!1,cancelable:!1}),ve("CustomEvent",{detail:null},"Event"),ve("UIEvent",{view:null,detail:0},"Event"),ve("MouseEvent",{screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null},"UIEvent"),ve("FocusEvent",{relatedTarget:null},"UIEvent")}var ge=window.BeforeUnloadEvent;M.prototype=Object.create(y.prototype),W(M.prototype,{get returnValue(){return q(this).returnValue},set returnValue(e){q(this).returnValue=e}}),ge&&F(ge,M);var be=window.EventTarget,ye=["addEventListener","removeEventListener","dispatchEvent"];[Node,Window].forEach(function(e){var t=e.prototype;ye.forEach(function(e){Object.defineProperty(t,e+"_",{value:t[e]})})}),N.prototype={addEventListener:function(e,t,n){if(O(t)&&!L(e)){var r=new b(e,t,n),o=z.get(this);if(o){for(var i=0;i<o.length;i++)if(r.equals(o[i]))return}else o=[],o.depth=0,z.set(this,o);o.push(r);var a=C(this);a.addEventListener_(e,p,!0)}},removeEventListener:function(e,t,n){n=Boolean(n);var r=z.get(this);if(r){for(var o=0,i=!1,a=0;a<r.length;a++)r[a].type===e&&r[a].capture===n&&(o++,r[a].handler===t&&(i=!0,r[a].remove()));if(i&&1===o){var s=C(this);s.removeEventListener_(e,p,!0)}}},dispatchEvent:function(t){var n=B(t),r=n.type;K.set(n,!1),e.renderAllPending();var o;D(this,r)||(o=function(){},this.addEventListener(r,o,!0));try{return B(this).dispatchEvent_(n)}finally{o&&this.removeEventListener(r,o,!0)}}},be&&F(be,N);var Ee=document.elementFromPoint;e.elementFromPoint=x,e.getEventHandlerGetter=R,e.getEventHandlerSetter=I,e.wrapEventTargetMethods=H,e.wrappers.BeforeUnloadEvent=M,e.wrappers.CustomEvent=le,e.wrappers.Event=y,e.wrappers.EventTarget=N,e.wrappers.FocusEvent=fe,e.wrappers.MouseEvent=he,e.wrappers.UIEvent=ce}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e,t){Object.defineProperty(e,t,m)}function n(e){l(e,this)}function r(){this.length=0,t(this,"length")}function o(e){for(var t=new r,o=0;o<e.length;o++)t[o]=new n(e[o]);return t.length=o,t}function i(e){a.call(this,e)}var a=e.wrappers.UIEvent,s=e.mixin,c=e.registerWrapper,l=e.setWrapper,u=e.unsafeUnwrap,d=e.wrap,p=window.TouchEvent;if(p){var h;try{h=document.createEvent("TouchEvent")}catch(f){return}var m={enumerable:!1};n.prototype={get target(){return d(u(this).target)}};var w={configurable:!0,enumerable:!0,get:null};["clientX","clientY","screenX","screenY","pageX","pageY","identifier","webkitRadiusX","webkitRadiusY","webkitRotationAngle","webkitForce"].forEach(function(e){w.get=function(){return u(this)[e]},Object.defineProperty(n.prototype,e,w)}),r.prototype={item:function(e){return this[e]}},i.prototype=Object.create(a.prototype),s(i.prototype,{get touches(){return o(u(this).touches)},get targetTouches(){return o(u(this).targetTouches)},get changedTouches(){return o(u(this).changedTouches)},initTouchEvent:function(){throw new Error("Not implemented")}}),c(p,i,h),e.wrappers.Touch=n,e.wrappers.TouchEvent=i,e.wrappers.TouchList=r}}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e,t){Object.defineProperty(e,t,s)}function n(){this.length=0,t(this,"length")}function r(e){if(null==e)return e;for(var t=new n,r=0,o=e.length;o>r;r++)t[r]=a(e[r]);return t.length=o,t}function o(e,t){e.prototype[t]=function(){return r(i(this)[t].apply(i(this),arguments))}}var i=e.unsafeUnwrap,a=e.wrap,s={enumerable:!1};n.prototype={item:function(e){return this[e]}},t(n.prototype,"item"),e.wrappers.NodeList=n,e.addWrapNodeListMethod=o,e.wrapNodeList=r}(window.ShadowDOMPolyfill),function(e){"use strict";e.wrapHTMLCollection=e.wrapNodeList,e.wrappers.HTMLCollection=e.wrappers.NodeList}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){O(e instanceof _)}function n(e){var t=new T;return t[0]=e,t.length=1,t}function r(e,t,n){N(t,"childList",{removedNodes:n,previousSibling:e.previousSibling,nextSibling:e.nextSibling})}function o(e,t){N(e,"childList",{removedNodes:t})}function i(e,t,r,o){if(e instanceof DocumentFragment){var i=s(e);U=!0;for(var a=i.length-1;a>=0;a--)e.removeChild(i[a]),i[a].parentNode_=t;U=!1;for(var a=0;a<i.length;a++)i[a].previousSibling_=i[a-1]||r,i[a].nextSibling_=i[a+1]||o;return r&&(r.nextSibling_=i[0]),o&&(o.previousSibling_=i[i.length-1]),i}var i=n(e),c=e.parentNode;return c&&c.removeChild(e),e.parentNode_=t,e.previousSibling_=r,e.nextSibling_=o,r&&(r.nextSibling_=e),o&&(o.previousSibling_=e),i}function a(e){if(e instanceof DocumentFragment)return s(e);var t=n(e),o=e.parentNode;return o&&r(e,o,t),t}function s(e){for(var t=new T,n=0,r=e.firstChild;r;r=r.nextSibling)t[n++]=r;return t.length=n,o(e,t),t}function c(e){return e}function l(e,t){R(e,t),e.nodeIsInserted_()}function u(e,t){for(var n=C(t),r=0;r<e.length;r++)l(e[r],n)}function d(e){R(e,new M(e,null))}function p(e){for(var t=0;t<e.length;t++)d(e[t])}function h(e,t){var n=e.nodeType===_.DOCUMENT_NODE?e:e.ownerDocument;n!==t.ownerDocument&&n.adoptNode(t)}function f(t,n){if(n.length){var r=t.ownerDocument;if(r!==n[0].ownerDocument)for(var o=0;o<n.length;o++)e.adoptNodeNoRemove(n[o],r)}}function m(e,t){f(e,t);var n=t.length;if(1===n)return P(t[0]);for(var r=P(e.ownerDocument.createDocumentFragment()),o=0;n>o;o++)r.appendChild(P(t[o]));return r}function w(e){if(void 0!==e.firstChild_)for(var t=e.firstChild_;t;){var n=t;t=t.nextSibling_,n.parentNode_=n.previousSibling_=n.nextSibling_=void 0}e.firstChild_=e.lastChild_=void 0}function v(e){if(e.invalidateShadowRenderer()){for(var t=e.firstChild;t;){O(t.parentNode===e);var n=t.nextSibling,r=P(t),o=r.parentNode;o&&X.call(o,r),t.previousSibling_=t.nextSibling_=t.parentNode_=null,t=n}e.firstChild_=e.lastChild_=null}else for(var n,i=P(e),a=i.firstChild;a;)n=a.nextSibling,X.call(i,a),a=n}function g(e){var t=e.parentNode;return t&&t.invalidateShadowRenderer()}function b(e){for(var t,n=0;n<e.length;n++)t=e[n],t.parentNode.removeChild(t)}function y(e,t,n){var r;if(r=A(n?q.call(n,I(e),!1):B.call(I(e),!1)),t){for(var o=e.firstChild;o;o=o.nextSibling)r.appendChild(y(o,!0,n));if(e instanceof F.HTMLTemplateElement)for(var i=r.content,o=e.content.firstChild;o;o=o.nextSibling)i.appendChild(y(o,!0,n))}return r}function E(e,t){if(!t||C(e)!==C(t))return!1;for(var n=t;n;n=n.parentNode)if(n===e)return!0;return!1}function _(e){O(e instanceof V),S.call(this,e),this.parentNode_=void 0,this.firstChild_=void 0,this.lastChild_=void 0,this.nextSibling_=void 0,this.previousSibling_=void 0,this.treeScope_=void 0}var S=e.wrappers.EventTarget,T=e.wrappers.NodeList,M=e.TreeScope,O=e.assert,L=e.defineWrapGetter,N=e.enqueueMutation,C=e.getTreeScope,j=e.isWrapper,D=e.mixin,H=e.registerTransientObservers,x=e.registerWrapper,R=e.setTreeScope,I=e.unsafeUnwrap,P=e.unwrap,k=e.unwrapIfNeeded,A=e.wrap,W=e.wrapIfNeeded,F=e.wrappers,U=!1,q=document.importNode,B=window.Node.prototype.cloneNode,V=window.Node,G=window.DocumentFragment,z=(V.prototype.appendChild,V.prototype.compareDocumentPosition),K=V.prototype.isEqualNode,$=V.prototype.insertBefore,X=V.prototype.removeChild,Y=V.prototype.replaceChild,Z=/Trident|Edge/.test(navigator.userAgent),J=Z?function(e,t){try{X.call(e,t)}catch(n){if(!(e instanceof G))throw n}}:function(e,t){X.call(e,t)};_.prototype=Object.create(S.prototype),D(_.prototype,{appendChild:function(e){return this.insertBefore(e,null)},insertBefore:function(e,n){t(e);var r;n?j(n)?r=P(n):(r=n,n=A(r)):(n=null,r=null),n&&O(n.parentNode===this);var o,s=n?n.previousSibling:this.lastChild,c=!this.invalidateShadowRenderer()&&!g(e);if(o=c?a(e):i(e,this,s,n),c)h(this,e),w(this),$.call(I(this),P(e),r);else{s||(this.firstChild_=o[0]),n||(this.lastChild_=o[o.length-1],void 0===this.firstChild_&&(this.firstChild_=this.firstChild));var l=r?r.parentNode:I(this);l?$.call(l,m(this,o),r):f(this,o)}return N(this,"childList",{addedNodes:o,nextSibling:n,previousSibling:s}),u(o,this),e},removeChild:function(e){if(t(e),e.parentNode!==this){for(var r=!1,o=(this.childNodes,this.firstChild);o;o=o.nextSibling)if(o===e){r=!0;break}if(!r)throw new Error("NotFoundError")}var i=P(e),a=e.nextSibling,s=e.previousSibling;if(this.invalidateShadowRenderer()){var c=this.firstChild,l=this.lastChild,u=i.parentNode;u&&J(u,i),c===e&&(this.firstChild_=a),l===e&&(this.lastChild_=s),s&&(s.nextSibling_=a),a&&(a.previousSibling_=s),e.previousSibling_=e.nextSibling_=e.parentNode_=void 0}else w(this),J(I(this),i);return U||N(this,"childList",{removedNodes:n(e),nextSibling:a,previousSibling:s}),H(this,e),e},replaceChild:function(e,r){t(e);var o;if(j(r)?o=P(r):(o=r,r=A(o)),r.parentNode!==this)throw new Error("NotFoundError");var s,c=r.nextSibling,l=r.previousSibling,p=!this.invalidateShadowRenderer()&&!g(e);return p?s=a(e):(c===e&&(c=e.nextSibling),s=i(e,this,l,c)),p?(h(this,e),w(this),Y.call(I(this),P(e),o)):(this.firstChild===r&&(this.firstChild_=s[0]),this.lastChild===r&&(this.lastChild_=s[s.length-1]),r.previousSibling_=r.nextSibling_=r.parentNode_=void 0,o.parentNode&&Y.call(o.parentNode,m(this,s),o)),N(this,"childList",{addedNodes:s,removedNodes:n(r),nextSibling:c,previousSibling:l}),d(r),u(s,this),r},nodeIsInserted_:function(){for(var e=this.firstChild;e;e=e.nextSibling)e.nodeIsInserted_()},hasChildNodes:function(){return null!==this.firstChild},get parentNode(){return void 0!==this.parentNode_?this.parentNode_:A(I(this).parentNode)},get firstChild(){return void 0!==this.firstChild_?this.firstChild_:A(I(this).firstChild)},get lastChild(){return void 0!==this.lastChild_?this.lastChild_:A(I(this).lastChild)},get nextSibling(){return void 0!==this.nextSibling_?this.nextSibling_:A(I(this).nextSibling)},get previousSibling(){return void 0!==this.previousSibling_?this.previousSibling_:A(I(this).previousSibling)},get parentElement(){for(var e=this.parentNode;e&&e.nodeType!==_.ELEMENT_NODE;)e=e.parentNode;return e},get textContent(){for(var e="",t=this.firstChild;t;t=t.nextSibling)t.nodeType!=_.COMMENT_NODE&&(e+=t.textContent);return e},set textContent(e){null==e&&(e="");var t=c(this.childNodes);if(this.invalidateShadowRenderer()){if(v(this),""!==e){var n=I(this).ownerDocument.createTextNode(e);this.appendChild(n)}}else w(this),I(this).textContent=e;var r=c(this.childNodes);N(this,"childList",{addedNodes:r,removedNodes:t}),p(t),u(r,this)},get childNodes(){for(var e=new T,t=0,n=this.firstChild;n;n=n.nextSibling)e[t++]=n;return e.length=t,e},cloneNode:function(e){return y(this,e)},contains:function(e){return E(this,W(e))},compareDocumentPosition:function(e){return z.call(I(this),k(e))},isEqualNode:function(e){return K.call(I(this),k(e))},normalize:function(){for(var e,t,n=c(this.childNodes),r=[],o="",i=0;i<n.length;i++)t=n[i],t.nodeType===_.TEXT_NODE?e||t.data.length?e?(o+=t.data,r.push(t)):e=t:this.removeChild(t):(e&&r.length&&(e.data+=o,b(r)),r=[],o="",e=null,t.childNodes.length&&t.normalize());e&&r.length&&(e.data+=o,b(r))}}),L(_,"ownerDocument"),x(V,_,document.createDocumentFragment()),delete _.prototype.querySelector,delete _.prototype.querySelectorAll,_.prototype=D(Object.create(S.prototype),_.prototype),e.cloneNode=y,e.nodeWasAdded=l,e.nodeWasRemoved=d,e.nodesWereAdded=u,e.nodesWereRemoved=p,e.originalInsertBefore=$,e.originalRemoveChild=X,e.snapshotNodeList=c,e.wrappers.Node=_}(window.ShadowDOMPolyfill),function(e){"use strict";function t(t,n,r,o){for(var i=null,a=null,s=0,c=t.length;c>s;s++)i=b(t[s]),!o&&(a=v(i).root)&&a instanceof e.wrappers.ShadowRoot||(r[n++]=i);return n}function n(e){return String(e).replace(/\/deep\/|::shadow|>>>/g," ")}function r(e){return String(e).replace(/:host\(([^\s]+)\)/g,"$1").replace(/([^\s]):host/g,"$1").replace(":host","*").replace(/\^|\/shadow\/|\/shadow-deep\/|::shadow|\/deep\/|::content|>>>/g," ")}function o(e,t){for(var n,r=e.firstElementChild;r;){if(r.matches(t))return r;if(n=o(r,t))return n;r=r.nextElementSibling}return null}function i(e,t){return e.matches(t)}function a(e,t,n){var r=e.localName;return r===t||r===n&&e.namespaceURI===j}function s(){return!0}function c(e,t,n){return e.localName===n}function l(e,t){return e.namespaceURI===t}function u(e,t,n){return e.namespaceURI===t&&e.localName===n}function d(e,t,n,r,o,i){for(var a=e.firstElementChild;a;)r(a,o,i)&&(n[t++]=a),t=d(a,t,n,r,o,i),a=a.nextElementSibling;return t}function p(n,r,o,i,a){var s,c=g(this),l=v(this).root;if(l instanceof e.wrappers.ShadowRoot)return d(this,r,o,n,i,null);if(c instanceof N)s=S.call(c,i);else{if(!(c instanceof C))return d(this,r,o,n,i,null);s=_.call(c,i)}return t(s,r,o,a)}function h(n,r,o,i,a){var s,c=g(this),l=v(this).root;if(l instanceof e.wrappers.ShadowRoot)return d(this,r,o,n,i,a);if(c instanceof N)s=M.call(c,i,a);else{if(!(c instanceof C))return d(this,r,o,n,i,a);s=T.call(c,i,a)}return t(s,r,o,!1)}function f(n,r,o,i,a){var s,c=g(this),l=v(this).root;if(l instanceof e.wrappers.ShadowRoot)return d(this,r,o,n,i,a);if(c instanceof N)s=L.call(c,i,a);else{if(!(c instanceof C))return d(this,r,o,n,i,a);s=O.call(c,i,a)}return t(s,r,o,!1)}var m=e.wrappers.HTMLCollection,w=e.wrappers.NodeList,v=e.getTreeScope,g=e.unsafeUnwrap,b=e.wrap,y=document.querySelector,E=document.documentElement.querySelector,_=document.querySelectorAll,S=document.documentElement.querySelectorAll,T=document.getElementsByTagName,M=document.documentElement.getElementsByTagName,O=document.getElementsByTagNameNS,L=document.documentElement.getElementsByTagNameNS,N=window.Element,C=window.HTMLDocument||window.Document,j="http://www.w3.org/1999/xhtml",D={querySelector:function(t){var r=n(t),i=r!==t;t=r;var a,s=g(this),c=v(this).root;if(c instanceof e.wrappers.ShadowRoot)return o(this,t);if(s instanceof N)a=b(E.call(s,t));else{
if(!(s instanceof C))return o(this,t);a=b(y.call(s,t))}return a&&!i&&(c=v(a).root)&&c instanceof e.wrappers.ShadowRoot?o(this,t):a},querySelectorAll:function(e){var t=n(e),r=t!==e;e=t;var o=new w;return o.length=p.call(this,i,0,o,e,r),o}},H={matches:function(t){return t=r(t),e.originalMatches.call(g(this),t)}},x={getElementsByTagName:function(e){var t=new m,n="*"===e?s:a;return t.length=h.call(this,n,0,t,e,e.toLowerCase()),t},getElementsByClassName:function(e){return this.querySelectorAll("."+e)},getElementsByTagNameNS:function(e,t){var n=new m,r=null;return r="*"===e?"*"===t?s:c:"*"===t?l:u,n.length=f.call(this,r,0,n,e||null,t),n}};e.GetElementsByInterface=x,e.SelectorsInterface=D,e.MatchesInterface=H}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){for(;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.nextSibling;return e}function n(e){for(;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.previousSibling;return e}var r=e.wrappers.NodeList,o={get firstElementChild(){return t(this.firstChild)},get lastElementChild(){return n(this.lastChild)},get childElementCount(){for(var e=0,t=this.firstElementChild;t;t=t.nextElementSibling)e++;return e},get children(){for(var e=new r,t=0,n=this.firstElementChild;n;n=n.nextElementSibling)e[t++]=n;return e.length=t,e},remove:function(){var e=this.parentNode;e&&e.removeChild(this)}},i={get nextElementSibling(){return t(this.nextSibling)},get previousElementSibling(){return n(this.previousSibling)}},a={getElementById:function(e){return/[ \t\n\r\f]/.test(e)?null:this.querySelector('[id="'+e+'"]')}};e.ChildNodeInterface=i,e.NonElementParentNodeInterface=a,e.ParentNodeInterface=o}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){r.call(this,e)}var n=e.ChildNodeInterface,r=e.wrappers.Node,o=e.enqueueMutation,i=e.mixin,a=e.registerWrapper,s=e.unsafeUnwrap,c=window.CharacterData;t.prototype=Object.create(r.prototype),i(t.prototype,{get nodeValue(){return this.data},set nodeValue(e){this.data=e},get textContent(){return this.data},set textContent(e){this.data=e},get data(){return s(this).data},set data(e){var t=s(this).data;o(this,"characterData",{oldValue:t}),s(this).data=e}}),i(t.prototype,n),a(c,t,document.createTextNode("")),e.wrappers.CharacterData=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){return e>>>0}function n(e){r.call(this,e)}var r=e.wrappers.CharacterData,o=(e.enqueueMutation,e.mixin),i=e.registerWrapper,a=window.Text;n.prototype=Object.create(r.prototype),o(n.prototype,{splitText:function(e){e=t(e);var n=this.data;if(e>n.length)throw new Error("IndexSizeError");var r=n.slice(0,e),o=n.slice(e);this.data=r;var i=this.ownerDocument.createTextNode(o);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}}),i(a,n,document.createTextNode("")),e.wrappers.Text=n}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){return i(e).getAttribute("class")}function n(e,t){a(e,"attributes",{name:"class",namespace:null,oldValue:t})}function r(t){e.invalidateRendererBasedOnAttribute(t,"class")}function o(e,o,i){var a=e.ownerElement_;if(null==a)return o.apply(e,i);var s=t(a),c=o.apply(e,i);return t(a)!==s&&(n(a,s),r(a)),c}if(!window.DOMTokenList)return void console.warn("Missing DOMTokenList prototype, please include a compatible classList polyfill such as http://goo.gl/uTcepH.");var i=e.unsafeUnwrap,a=e.enqueueMutation,s=DOMTokenList.prototype.add;DOMTokenList.prototype.add=function(){o(this,s,arguments)};var c=DOMTokenList.prototype.remove;DOMTokenList.prototype.remove=function(){o(this,c,arguments)};var l=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(){return o(this,l,arguments)}}(window.ShadowDOMPolyfill),function(e){"use strict";function t(t,n){var r=t.parentNode;if(r&&r.shadowRoot){var o=e.getRendererForHost(r);o.dependsOnAttribute(n)&&o.invalidate()}}function n(e,t,n){u(e,"attributes",{name:t,namespace:null,oldValue:n})}function r(e){a.call(this,e)}var o=e.ChildNodeInterface,i=e.GetElementsByInterface,a=e.wrappers.Node,s=e.ParentNodeInterface,c=e.SelectorsInterface,l=e.MatchesInterface,u=(e.addWrapNodeListMethod,e.enqueueMutation),d=e.mixin,p=(e.oneOf,e.registerWrapper),h=e.unsafeUnwrap,f=e.wrappers,m=window.Element,w=["matches","mozMatchesSelector","msMatchesSelector","webkitMatchesSelector"].filter(function(e){return m.prototype[e]}),v=w[0],g=m.prototype[v],b=new WeakMap;r.prototype=Object.create(a.prototype),d(r.prototype,{createShadowRoot:function(){var t=new f.ShadowRoot(this);h(this).polymerShadowRoot_=t;var n=e.getRendererForHost(this);return n.invalidate(),t},get shadowRoot(){return h(this).polymerShadowRoot_||null},setAttribute:function(e,r){var o=h(this).getAttribute(e);h(this).setAttribute(e,r),n(this,e,o),t(this,e)},removeAttribute:function(e){var r=h(this).getAttribute(e);h(this).removeAttribute(e),n(this,e,r),t(this,e)},get classList(){var e=b.get(this);if(!e){if(e=h(this).classList,!e)return;e.ownerElement_=this,b.set(this,e)}return e},get className(){return h(this).className},set className(e){this.setAttribute("class",e)},get id(){return h(this).id},set id(e){this.setAttribute("id",e)}}),w.forEach(function(e){"matches"!==e&&(r.prototype[e]=function(e){return this.matches(e)})}),m.prototype.webkitCreateShadowRoot&&(r.prototype.webkitCreateShadowRoot=r.prototype.createShadowRoot),d(r.prototype,o),d(r.prototype,i),d(r.prototype,s),d(r.prototype,c),d(r.prototype,l),p(m,r,document.createElementNS(null,"x")),e.invalidateRendererBasedOnAttribute=t,e.matchesNames=w,e.originalMatches=g,e.wrappers.Element=r}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"Â ":return"&nbsp;"}}function n(e){return e.replace(L,t)}function r(e){return e.replace(N,t)}function o(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return t}function i(e){if(e.namespaceURI!==D)return!0;var t=e.ownerDocument.doctype;return t&&t.publicId&&t.systemId}function a(e,t){switch(e.nodeType){case Node.ELEMENT_NODE:for(var o,a=e.tagName.toLowerCase(),c="<"+a,l=e.attributes,u=0;o=l[u];u++)c+=" "+o.name+'="'+n(o.value)+'"';return C[a]?(i(e)&&(c+="/"),c+">"):c+">"+s(e)+"</"+a+">";case Node.TEXT_NODE:var d=e.data;return t&&j[t.localName]?d:r(d);case Node.COMMENT_NODE:return"<!--"+e.data+"-->";default:throw console.error(e),new Error("not implemented")}}function s(e){e instanceof O.HTMLTemplateElement&&(e=e.content);for(var t="",n=e.firstChild;n;n=n.nextSibling)t+=a(n,e);return t}function c(e,t,n){var r=n||"div";e.textContent="";var o=T(e.ownerDocument.createElement(r));o.innerHTML=t;for(var i;i=o.firstChild;)e.appendChild(M(i))}function l(e){m.call(this,e)}function u(e,t){var n=T(e.cloneNode(!1));n.innerHTML=t;for(var r,o=T(document.createDocumentFragment());r=n.firstChild;)o.appendChild(r);return M(o)}function d(t){return function(){return e.renderAllPending(),S(this)[t]}}function p(e){w(l,e,d(e))}function h(t){Object.defineProperty(l.prototype,t,{get:d(t),set:function(n){e.renderAllPending(),S(this)[t]=n},configurable:!0,enumerable:!0})}function f(t){Object.defineProperty(l.prototype,t,{value:function(){return e.renderAllPending(),S(this)[t].apply(S(this),arguments)},configurable:!0,enumerable:!0})}var m=e.wrappers.Element,w=e.defineGetter,v=e.enqueueMutation,g=e.mixin,b=e.nodesWereAdded,y=e.nodesWereRemoved,E=e.registerWrapper,_=e.snapshotNodeList,S=e.unsafeUnwrap,T=e.unwrap,M=e.wrap,O=e.wrappers,L=/[&\u00A0"]/g,N=/[&\u00A0<>]/g,C=o(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),j=o(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]),D="http://www.w3.org/1999/xhtml",H=/MSIE/.test(navigator.userAgent),x=window.HTMLElement,R=window.HTMLTemplateElement;l.prototype=Object.create(m.prototype),g(l.prototype,{get innerHTML(){return s(this)},set innerHTML(e){if(H&&j[this.localName])return void(this.textContent=e);var t=_(this.childNodes);this.invalidateShadowRenderer()?this instanceof O.HTMLTemplateElement?c(this.content,e):c(this,e,this.tagName):!R&&this instanceof O.HTMLTemplateElement?c(this.content,e):S(this).innerHTML=e;var n=_(this.childNodes);v(this,"childList",{addedNodes:n,removedNodes:t}),y(t),b(n,this)},get outerHTML(){return a(this,this.parentNode)},set outerHTML(e){var t=this.parentNode;if(t){t.invalidateShadowRenderer();var n=u(t,e);t.replaceChild(n,this)}},insertAdjacentHTML:function(e,t){var n,r;switch(String(e).toLowerCase()){case"beforebegin":n=this.parentNode,r=this;break;case"afterend":n=this.parentNode,r=this.nextSibling;break;case"afterbegin":n=this,r=this.firstChild;break;case"beforeend":n=this,r=null;break;default:return}var o=u(n,t);n.insertBefore(o,r)},get hidden(){return this.hasAttribute("hidden")},set hidden(e){e?this.setAttribute("hidden",""):this.removeAttribute("hidden")}}),["clientHeight","clientLeft","clientTop","clientWidth","offsetHeight","offsetLeft","offsetTop","offsetWidth","scrollHeight","scrollWidth"].forEach(p),["scrollLeft","scrollTop"].forEach(h),["getBoundingClientRect","getClientRects","scrollIntoView"].forEach(f),E(x,l,document.createElement("b")),e.wrappers.HTMLElement=l,e.getInnerHTML=s,e.setInnerHTML=c}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=e.mixin,o=e.registerWrapper,i=e.unsafeUnwrap,a=e.wrap,s=window.HTMLCanvasElement;t.prototype=Object.create(n.prototype),r(t.prototype,{getContext:function(){var e=i(this).getContext.apply(i(this),arguments);return e&&a(e)}}),o(s,t,document.createElement("canvas")),e.wrappers.HTMLCanvasElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=e.mixin,o=e.registerWrapper,i=window.HTMLContentElement;t.prototype=Object.create(n.prototype),r(t.prototype,{constructor:t,get select(){return this.getAttribute("select")},set select(e){this.setAttribute("select",e)},setAttribute:function(e,t){n.prototype.setAttribute.call(this,e,t),"select"===String(e).toLowerCase()&&this.invalidateShadowRenderer(!0)}}),i&&o(i,t),e.wrappers.HTMLContentElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=e.mixin,o=e.registerWrapper,i=e.wrapHTMLCollection,a=e.unwrap,s=window.HTMLFormElement;t.prototype=Object.create(n.prototype),r(t.prototype,{get elements(){return i(a(this).elements)}}),o(s,t,document.createElement("form")),e.wrappers.HTMLFormElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){r.call(this,e)}function n(e,t){if(!(this instanceof n))throw new TypeError("DOM object constructor cannot be called as a function.");var o=i(document.createElement("img"));r.call(this,o),a(o,this),void 0!==e&&(o.width=e),void 0!==t&&(o.height=t)}var r=e.wrappers.HTMLElement,o=e.registerWrapper,i=e.unwrap,a=e.rewrap,s=window.HTMLImageElement;t.prototype=Object.create(r.prototype),o(s,t,document.createElement("img")),n.prototype=t.prototype,e.wrappers.HTMLImageElement=t,e.wrappers.Image=n}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=(e.mixin,e.wrappers.NodeList,e.registerWrapper),o=window.HTMLShadowElement;t.prototype=Object.create(n.prototype),t.prototype.constructor=t,o&&r(o,t),e.wrappers.HTMLShadowElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){if(!e.defaultView)return e;var t=d.get(e);if(!t){for(t=e.implementation.createHTMLDocument("");t.lastChild;)t.removeChild(t.lastChild);d.set(e,t)}return t}function n(e){for(var n,r=t(e.ownerDocument),o=c(r.createDocumentFragment());n=e.firstChild;)o.appendChild(n);return o}function r(e){if(o.call(this,e),!p){var t=n(e);u.set(this,l(t))}}var o=e.wrappers.HTMLElement,i=e.mixin,a=e.registerWrapper,s=e.unsafeUnwrap,c=e.unwrap,l=e.wrap,u=new WeakMap,d=new WeakMap,p=window.HTMLTemplateElement;r.prototype=Object.create(o.prototype),i(r.prototype,{constructor:r,get content(){return p?l(s(this).content):u.get(this)}}),p&&a(p,r),e.wrappers.HTMLTemplateElement=r}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=e.registerWrapper,o=window.HTMLMediaElement;o&&(t.prototype=Object.create(n.prototype),r(o,t,document.createElement("audio")),e.wrappers.HTMLMediaElement=t)}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){r.call(this,e)}function n(e){if(!(this instanceof n))throw new TypeError("DOM object constructor cannot be called as a function.");var t=i(document.createElement("audio"));r.call(this,t),a(t,this),t.setAttribute("preload","auto"),void 0!==e&&t.setAttribute("src",e)}var r=e.wrappers.HTMLMediaElement,o=e.registerWrapper,i=e.unwrap,a=e.rewrap,s=window.HTMLAudioElement;s&&(t.prototype=Object.create(r.prototype),o(s,t,document.createElement("audio")),n.prototype=t.prototype,e.wrappers.HTMLAudioElement=t,e.wrappers.Audio=n)}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){return e.replace(/\s+/g," ").trim()}function n(e){o.call(this,e)}function r(e,t,n,i){if(!(this instanceof r))throw new TypeError("DOM object constructor cannot be called as a function.");var a=c(document.createElement("option"));o.call(this,a),s(a,this),void 0!==e&&(a.text=e),void 0!==t&&a.setAttribute("value",t),n===!0&&a.setAttribute("selected",""),a.selected=i===!0}var o=e.wrappers.HTMLElement,i=e.mixin,a=e.registerWrapper,s=e.rewrap,c=e.unwrap,l=e.wrap,u=window.HTMLOptionElement;n.prototype=Object.create(o.prototype),i(n.prototype,{get text(){return t(this.textContent)},set text(e){this.textContent=t(String(e))},get form(){return l(c(this).form)}}),a(u,n,document.createElement("option")),r.prototype=n.prototype,e.wrappers.HTMLOptionElement=n,e.wrappers.Option=r}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=e.mixin,o=e.registerWrapper,i=e.unwrap,a=e.wrap,s=window.HTMLSelectElement;t.prototype=Object.create(n.prototype),r(t.prototype,{add:function(e,t){"object"==typeof t&&(t=i(t)),i(this).add(i(e),t)},remove:function(e){return void 0===e?void n.prototype.remove.call(this):("object"==typeof e&&(e=i(e)),void i(this).remove(e))},get form(){return a(i(this).form)}}),o(s,t,document.createElement("select")),e.wrappers.HTMLSelectElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=e.mixin,o=e.registerWrapper,i=e.unwrap,a=e.wrap,s=e.wrapHTMLCollection,c=window.HTMLTableElement;t.prototype=Object.create(n.prototype),r(t.prototype,{get caption(){return a(i(this).caption)},createCaption:function(){return a(i(this).createCaption())},get tHead(){return a(i(this).tHead)},createTHead:function(){return a(i(this).createTHead())},createTFoot:function(){return a(i(this).createTFoot())},get tFoot(){return a(i(this).tFoot)},get tBodies(){return s(i(this).tBodies)},createTBody:function(){return a(i(this).createTBody())},get rows(){return s(i(this).rows)},insertRow:function(e){return a(i(this).insertRow(e))}}),o(c,t,document.createElement("table")),e.wrappers.HTMLTableElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=e.mixin,o=e.registerWrapper,i=e.wrapHTMLCollection,a=e.unwrap,s=e.wrap,c=window.HTMLTableSectionElement;t.prototype=Object.create(n.prototype),r(t.prototype,{constructor:t,get rows(){return i(a(this).rows)},insertRow:function(e){return s(a(this).insertRow(e))}}),o(c,t,document.createElement("thead")),e.wrappers.HTMLTableSectionElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=e.mixin,o=e.registerWrapper,i=e.wrapHTMLCollection,a=e.unwrap,s=e.wrap,c=window.HTMLTableRowElement;t.prototype=Object.create(n.prototype),r(t.prototype,{get cells(){return i(a(this).cells)},insertCell:function(e){return s(a(this).insertCell(e))}}),o(c,t,document.createElement("tr")),e.wrappers.HTMLTableRowElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){switch(e.localName){case"content":return new n(e);case"shadow":return new o(e);case"template":return new i(e)}r.call(this,e)}var n=e.wrappers.HTMLContentElement,r=e.wrappers.HTMLElement,o=e.wrappers.HTMLShadowElement,i=e.wrappers.HTMLTemplateElement,a=(e.mixin,e.registerWrapper),s=window.HTMLUnknownElement;t.prototype=Object.create(r.prototype),a(s,t),e.wrappers.HTMLUnknownElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.Element,r=e.wrappers.HTMLElement,o=e.registerWrapper,i=(e.defineWrapGetter,e.unsafeUnwrap),a=e.wrap,s=e.mixin,c="http://www.w3.org/2000/svg",l=window.SVGElement,u=document.createElementNS(c,"title");if(!("classList"in u)){var d=Object.getOwnPropertyDescriptor(n.prototype,"classList");Object.defineProperty(r.prototype,"classList",d),delete n.prototype.classList}t.prototype=Object.create(n.prototype),s(t.prototype,{get ownerSVGElement(){return a(i(this).ownerSVGElement)}}),o(l,t,document.createElementNS(c,"title")),e.wrappers.SVGElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){p.call(this,e)}var n=e.mixin,r=e.registerWrapper,o=e.unwrap,i=e.wrap,a=window.SVGUseElement,s="http://www.w3.org/2000/svg",c=i(document.createElementNS(s,"g")),l=document.createElementNS(s,"use"),u=c.constructor,d=Object.getPrototypeOf(u.prototype),p=d.constructor;t.prototype=Object.create(d),"instanceRoot"in l&&n(t.prototype,{get instanceRoot(){return i(o(this).instanceRoot)},get animatedInstanceRoot(){return i(o(this).animatedInstanceRoot)}}),r(a,t,l),e.wrappers.SVGUseElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.EventTarget,r=e.mixin,o=e.registerWrapper,i=e.unsafeUnwrap,a=e.wrap,s=window.SVGElementInstance;s&&(t.prototype=Object.create(n.prototype),r(t.prototype,{get correspondingElement(){return a(i(this).correspondingElement)},get correspondingUseElement(){return a(i(this).correspondingUseElement)},get parentNode(){return a(i(this).parentNode)},get childNodes(){throw new Error("Not implemented")},get firstChild(){return a(i(this).firstChild)},get lastChild(){return a(i(this).lastChild)},get previousSibling(){return a(i(this).previousSibling)},get nextSibling(){return a(i(this).nextSibling)}}),o(s,t),e.wrappers.SVGElementInstance=t)}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){o(e,this)}var n=e.mixin,r=e.registerWrapper,o=e.setWrapper,i=e.unsafeUnwrap,a=e.unwrap,s=e.unwrapIfNeeded,c=e.wrap,l=window.CanvasRenderingContext2D;n(t.prototype,{get canvas(){return c(i(this).canvas)},drawImage:function(){arguments[0]=s(arguments[0]),i(this).drawImage.apply(i(this),arguments)},createPattern:function(){return arguments[0]=a(arguments[0]),i(this).createPattern.apply(i(this),arguments)}}),r(l,t,document.createElement("canvas").getContext("2d")),e.wrappers.CanvasRenderingContext2D=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){o(e,this)}var n=e.mixin,r=e.registerWrapper,o=e.setWrapper,i=e.unsafeUnwrap,a=e.unwrapIfNeeded,s=e.wrap,c=window.WebGLRenderingContext;if(c){n(t.prototype,{get canvas(){return s(i(this).canvas)},texImage2D:function(){arguments[5]=a(arguments[5]),i(this).texImage2D.apply(i(this),arguments)},texSubImage2D:function(){arguments[6]=a(arguments[6]),i(this).texSubImage2D.apply(i(this),arguments)}});var l=/WebKit/.test(navigator.userAgent)?{drawingBufferHeight:null,drawingBufferWidth:null}:{};r(c,t,l),e.wrappers.WebGLRenderingContext=t}}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.Node,r=e.GetElementsByInterface,o=e.NonElementParentNodeInterface,i=e.ParentNodeInterface,a=e.SelectorsInterface,s=e.mixin,c=e.registerObject,l=e.registerWrapper,u=window.DocumentFragment;t.prototype=Object.create(n.prototype),s(t.prototype,i),s(t.prototype,a),s(t.prototype,r),s(t.prototype,o),l(u,t,document.createDocumentFragment()),e.wrappers.DocumentFragment=t;var d=c(document.createComment(""));e.wrappers.Comment=d}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){var t=d(u(e).ownerDocument.createDocumentFragment());n.call(this,t),c(t,this);var o=e.shadowRoot;h.set(this,o),this.treeScope_=new r(this,a(o||e)),p.set(this,e)}var n=e.wrappers.DocumentFragment,r=e.TreeScope,o=e.elementFromPoint,i=e.getInnerHTML,a=e.getTreeScope,s=e.mixin,c=e.rewrap,l=e.setInnerHTML,u=e.unsafeUnwrap,d=e.unwrap,p=new WeakMap,h=new WeakMap;t.prototype=Object.create(n.prototype),s(t.prototype,{constructor:t,get innerHTML(){return i(this)},set innerHTML(e){l(this,e),this.invalidateShadowRenderer()},get olderShadowRoot(){return h.get(this)||null},get host(){return p.get(this)||null},invalidateShadowRenderer:function(){return p.get(this).invalidateShadowRenderer()},elementFromPoint:function(e,t){return o(this,this.ownerDocument,e,t)}}),e.wrappers.ShadowRoot=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){var t=d(e).root;return t instanceof h?t.host:null}function n(t,n){if(t.shadowRoot){n=Math.min(t.childNodes.length-1,n);var r=t.childNodes[n];if(r){var o=e.getDestinationInsertionPoints(r);if(o.length>0){var i=o[0].parentNode;i.nodeType==Node.ELEMENT_NODE&&(t=i)}}}return t}function r(e){return e=u(e),t(e)||e}function o(e){a(e,this)}var i=e.registerWrapper,a=e.setWrapper,s=e.unsafeUnwrap,c=e.unwrap,l=e.unwrapIfNeeded,u=e.wrap,d=e.getTreeScope,p=window.Range,h=e.wrappers.ShadowRoot;o.prototype={get startContainer(){return r(s(this).startContainer)},get endContainer(){return r(s(this).endContainer)},get commonAncestorContainer(){return r(s(this).commonAncestorContainer)},setStart:function(e,t){e=n(e,t),s(this).setStart(l(e),t)},setEnd:function(e,t){e=n(e,t),s(this).setEnd(l(e),t)},setStartBefore:function(e){s(this).setStartBefore(l(e))},setStartAfter:function(e){s(this).setStartAfter(l(e))},setEndBefore:function(e){s(this).setEndBefore(l(e))},setEndAfter:function(e){s(this).setEndAfter(l(e))},selectNode:function(e){s(this).selectNode(l(e))},selectNodeContents:function(e){s(this).selectNodeContents(l(e))},compareBoundaryPoints:function(e,t){return s(this).compareBoundaryPoints(e,c(t))},extractContents:function(){return u(s(this).extractContents())},cloneContents:function(){return u(s(this).cloneContents())},insertNode:function(e){s(this).insertNode(l(e))},surroundContents:function(e){s(this).surroundContents(l(e))},cloneRange:function(){return u(s(this).cloneRange())},isPointInRange:function(e,t){return s(this).isPointInRange(l(e),t)},comparePoint:function(e,t){return s(this).comparePoint(l(e),t)},intersectsNode:function(e){return s(this).intersectsNode(l(e))},toString:function(){return s(this).toString()}},p.prototype.createContextualFragment&&(o.prototype.createContextualFragment=function(e){return u(s(this).createContextualFragment(e))}),i(window.Range,o,document.createRange()),e.wrappers.Range=o}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){e.previousSibling_=e.previousSibling,e.nextSibling_=e.nextSibling,e.parentNode_=e.parentNode}function n(n,o,i){var a=x(n),s=x(o),c=i?x(i):null;if(r(o),t(o),i)n.firstChild===i&&(n.firstChild_=i),i.previousSibling_=i.previousSibling;else{n.lastChild_=n.lastChild,n.lastChild===n.firstChild&&(n.firstChild_=n.firstChild);var l=R(a.lastChild);l&&(l.nextSibling_=l.nextSibling)}e.originalInsertBefore.call(a,s,c)}function r(n){var r=x(n),o=r.parentNode;if(o){var i=R(o);t(n),n.previousSibling&&(n.previousSibling.nextSibling_=n),n.nextSibling&&(n.nextSibling.previousSibling_=n),i.lastChild===n&&(i.lastChild_=n),i.firstChild===n&&(i.firstChild_=n),e.originalRemoveChild.call(o,r)}}function o(e){P.set(e,[])}function i(e){var t=P.get(e);return t||P.set(e,t=[]),t}function a(e){for(var t=[],n=0,r=e.firstChild;r;r=r.nextSibling)t[n++]=r;return t}function s(){for(var e=0;e<F.length;e++){var t=F[e],n=t.parentRenderer;n&&n.dirty||t.render()}F=[]}function c(){T=null,s()}function l(e){var t=A.get(e);return t||(t=new h(e),A.set(e,t)),t}function u(e){var t=j(e).root;return t instanceof C?t:null}function d(e){return l(e.host)}function p(e){this.skip=!1,this.node=e,this.childNodes=[]}function h(e){this.host=e,this.dirty=!1,this.invalidateAttributes(),this.associateNode(e)}function f(e){for(var t=[],n=e.firstChild;n;n=n.nextSibling)E(n)?t.push.apply(t,i(n)):t.push(n);return t}function m(e){if(e instanceof L)return e;if(e instanceof O)return null;for(var t=e.firstChild;t;t=t.nextSibling){var n=m(t);if(n)return n}return null}function w(e,t){i(t).push(e);var n=k.get(e);n?n.push(t):k.set(e,[t])}function v(e){return k.get(e)}function g(e){k.set(e,void 0)}function b(e,t){var n=t.getAttribute("select");if(!n)return!0;if(n=n.trim(),!n)return!0;if(!(e instanceof M))return!1;if(!q.test(n))return!1;try{return e.matches(n)}catch(r){return!1}}function y(e,t){var n=v(t);return n&&n[n.length-1]===e}function E(e){return e instanceof O||e instanceof L}function _(e){return e.shadowRoot}function S(e){for(var t=[],n=e.shadowRoot;n;n=n.olderShadowRoot)t.push(n);return t}var T,M=e.wrappers.Element,O=e.wrappers.HTMLContentElement,L=e.wrappers.HTMLShadowElement,N=e.wrappers.Node,C=e.wrappers.ShadowRoot,j=(e.assert,e.getTreeScope),D=(e.mixin,e.oneOf),H=e.unsafeUnwrap,x=e.unwrap,R=e.wrap,I=e.ArraySplice,P=new WeakMap,k=new WeakMap,A=new WeakMap,W=D(window,["requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","setTimeout"]),F=[],U=new I;U.equals=function(e,t){return x(e.node)===t},p.prototype={append:function(e){var t=new p(e);return this.childNodes.push(t),t},sync:function(e){if(!this.skip){for(var t=this.node,o=this.childNodes,i=a(x(t)),s=e||new WeakMap,c=U.calculateSplices(o,i),l=0,u=0,d=0,p=0;p<c.length;p++){for(var h=c[p];d<h.index;d++)u++,o[l++].sync(s);for(var f=h.removed.length,m=0;f>m;m++){var w=R(i[u++]);s.get(w)||r(w)}for(var v=h.addedCount,g=i[u]&&R(i[u]),m=0;v>m;m++){var b=o[l++],y=b.node;n(t,y,g),s.set(y,!0),b.sync(s)}d+=v}for(var p=d;p<o.length;p++)o[p].sync(s)}}},h.prototype={render:function(e){if(this.dirty){this.invalidateAttributes();var t=this.host;this.distribution(t);var n=e||new p(t);this.buildRenderTree(n,t);var r=!e;r&&n.sync(),this.dirty=!1}},get parentRenderer(){return j(this.host).renderer},invalidate:function(){if(!this.dirty){this.dirty=!0;var e=this.parentRenderer;if(e&&e.invalidate(),F.push(this),T)return;T=window[W](c,0)}},distribution:function(e){this.resetAllSubtrees(e),this.distributionResolution(e)},resetAll:function(e){E(e)?o(e):g(e),this.resetAllSubtrees(e)},resetAllSubtrees:function(e){for(var t=e.firstChild;t;t=t.nextSibling)this.resetAll(t);e.shadowRoot&&this.resetAll(e.shadowRoot),e.olderShadowRoot&&this.resetAll(e.olderShadowRoot)},distributionResolution:function(e){if(_(e)){for(var t=e,n=f(t),r=S(t),o=0;o<r.length;o++)this.poolDistribution(r[o],n);for(var o=r.length-1;o>=0;o--){var i=r[o],a=m(i);if(a){var s=i.olderShadowRoot;s&&(n=f(s));for(var c=0;c<n.length;c++)w(n[c],a)}this.distributionResolution(i)}}for(var l=e.firstChild;l;l=l.nextSibling)this.distributionResolution(l)},poolDistribution:function(e,t){if(!(e instanceof L))if(e instanceof O){var n=e;this.updateDependentAttributes(n.getAttribute("select"));for(var r=!1,o=0;o<t.length;o++){var e=t[o];e&&b(e,n)&&(w(e,n),t[o]=void 0,r=!0)}if(!r)for(var i=n.firstChild;i;i=i.nextSibling)w(i,n)}else for(var i=e.firstChild;i;i=i.nextSibling)this.poolDistribution(i,t)},buildRenderTree:function(e,t){for(var n=this.compose(t),r=0;r<n.length;r++){var o=n[r],i=e.append(o);this.buildRenderTree(i,o)}if(_(t)){var a=l(t);a.dirty=!1}},compose:function(e){for(var t=[],n=e.shadowRoot||e,r=n.firstChild;r;r=r.nextSibling)if(E(r)){this.associateNode(n);for(var o=i(r),a=0;a<o.length;a++){var s=o[a];y(r,s)&&t.push(s)}}else t.push(r);return t},invalidateAttributes:function(){this.attributes=Object.create(null)},updateDependentAttributes:function(e){if(e){var t=this.attributes;/\.\w+/.test(e)&&(t["class"]=!0),/#\w+/.test(e)&&(t.id=!0),e.replace(/\[\s*([^\s=\|~\]]+)/g,function(e,n){t[n]=!0})}},dependsOnAttribute:function(e){return this.attributes[e]},associateNode:function(e){H(e).polymerShadowRenderer_=this}};var q=/^(:not\()?[*.#[a-zA-Z_|]/;N.prototype.invalidateShadowRenderer=function(e){var t=H(this).polymerShadowRenderer_;return t?(t.invalidate(),!0):!1},O.prototype.getDistributedNodes=L.prototype.getDistributedNodes=function(){return s(),i(this)},M.prototype.getDestinationInsertionPoints=function(){return s(),v(this)||[]},O.prototype.nodeIsInserted_=L.prototype.nodeIsInserted_=function(){this.invalidateShadowRenderer();var e,t=u(this);t&&(e=d(t)),H(this).polymerShadowRenderer_=e,e&&e.invalidate()},e.getRendererForHost=l,e.getShadowTrees=S,e.renderAllPending=s,e.getDestinationInsertionPoints=v,e.visual={insertBefore:n,remove:r}}(window.ShadowDOMPolyfill),function(e){"use strict";function t(t){if(window[t]){r(!e.wrappers[t]);var c=function(e){n.call(this,e)};c.prototype=Object.create(n.prototype),o(c.prototype,{get form(){return s(a(this).form)}}),i(window[t],c,document.createElement(t.slice(4,-7))),e.wrappers[t]=c}}var n=e.wrappers.HTMLElement,r=e.assert,o=e.mixin,i=e.registerWrapper,a=e.unwrap,s=e.wrap,c=["HTMLButtonElement","HTMLFieldSetElement","HTMLInputElement","HTMLKeygenElement","HTMLLabelElement","HTMLLegendElement","HTMLObjectElement","HTMLOutputElement","HTMLTextAreaElement"];c.forEach(t)}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){r(e,this)}var n=e.registerWrapper,r=e.setWrapper,o=e.unsafeUnwrap,i=e.unwrap,a=e.unwrapIfNeeded,s=e.wrap,c=window.Selection;t.prototype={get anchorNode(){return s(o(this).anchorNode)},get focusNode(){return s(o(this).focusNode)},addRange:function(e){o(this).addRange(a(e))},collapse:function(e,t){o(this).collapse(a(e),t)},containsNode:function(e,t){return o(this).containsNode(a(e),t)},getRangeAt:function(e){return s(o(this).getRangeAt(e))},removeRange:function(e){o(this).removeRange(i(e))},selectAllChildren:function(e){o(this).selectAllChildren(a(e))},toString:function(){return o(this).toString()}},c.prototype.extend&&(t.prototype.extend=function(e,t){o(this).extend(a(e),t)}),n(window.Selection,t,window.getSelection()),e.wrappers.Selection=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){r(e,this)}var n=e.registerWrapper,r=e.setWrapper,o=e.unsafeUnwrap,i=e.unwrapIfNeeded,a=e.wrap,s=window.TreeWalker;t.prototype={get root(){return a(o(this).root)},get currentNode(){return a(o(this).currentNode)},set currentNode(e){o(this).currentNode=i(e)},get filter(){return o(this).filter},parentNode:function(){return a(o(this).parentNode())},firstChild:function(){return a(o(this).firstChild())},lastChild:function(){return a(o(this).lastChild())},previousSibling:function(){return a(o(this).previousSibling())},previousNode:function(){return a(o(this).previousNode())},nextNode:function(){return a(o(this).nextNode())}},n(s,t),e.wrappers.TreeWalker=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){u.call(this,e),this.treeScope_=new w(this,null)}function n(e){var n=document[e];t.prototype[e]=function(){return C(n.apply(L(this),arguments))}}function r(e,t){H.call(L(t),N(e)),o(e,t)}function o(e,t){e.shadowRoot&&t.adoptNode(e.shadowRoot),e instanceof m&&i(e,t);for(var n=e.firstChild;n;n=n.nextSibling)o(n,t)}function i(e,t){var n=e.olderShadowRoot;n&&t.adoptNode(n)}function a(e){O(e,this)}function s(e,t){var n=document.implementation[t];e.prototype[t]=function(){return C(n.apply(L(this),arguments))}}function c(e,t){var n=document.implementation[t];e.prototype[t]=function(){return n.apply(L(this),arguments)}}var l=e.GetElementsByInterface,u=e.wrappers.Node,d=e.ParentNodeInterface,p=e.NonElementParentNodeInterface,h=e.wrappers.Selection,f=e.SelectorsInterface,m=e.wrappers.ShadowRoot,w=e.TreeScope,v=e.cloneNode,g=e.defineWrapGetter,b=e.elementFromPoint,y=e.forwardMethodsToWrapper,E=e.matchesNames,_=e.mixin,S=e.registerWrapper,T=e.renderAllPending,M=e.rewrap,O=e.setWrapper,L=e.unsafeUnwrap,N=e.unwrap,C=e.wrap,j=e.wrapEventTargetMethods,D=(e.wrapNodeList,
new WeakMap);t.prototype=Object.create(u.prototype),g(t,"documentElement"),g(t,"body"),g(t,"head"),["createComment","createDocumentFragment","createElement","createElementNS","createEvent","createEventNS","createRange","createTextNode"].forEach(n);var H=document.adoptNode,x=document.getSelection;_(t.prototype,{adoptNode:function(e){return e.parentNode&&e.parentNode.removeChild(e),r(e,this),e},elementFromPoint:function(e,t){return b(this,this,e,t)},importNode:function(e,t){return v(e,t,L(this))},getSelection:function(){return T(),new h(x.call(N(this)))},getElementsByName:function(e){return f.querySelectorAll.call(this,"[name="+JSON.stringify(String(e))+"]")}});var R=document.createTreeWalker,I=e.wrappers.TreeWalker;if(t.prototype.createTreeWalker=function(e,t,n,r){var o=null;return n&&(n.acceptNode&&"function"==typeof n.acceptNode?o={acceptNode:function(e){return n.acceptNode(C(e))}}:"function"==typeof n&&(o=function(e){return n(C(e))})),new I(R.call(N(this),N(e),t,o,r))},document.registerElement){var P=document.registerElement;t.prototype.registerElement=function(t,n){function r(e){return e?void O(e,this):i?document.createElement(i,t):document.createElement(t)}var o,i;if(void 0!==n&&(o=n.prototype,i=n["extends"]),o||(o=Object.create(HTMLElement.prototype)),e.nativePrototypeTable.get(o))throw new Error("NotSupportedError");for(var a,s=Object.getPrototypeOf(o),c=[];s&&!(a=e.nativePrototypeTable.get(s));)c.push(s),s=Object.getPrototypeOf(s);if(!a)throw new Error("NotSupportedError");for(var l=Object.create(a),u=c.length-1;u>=0;u--)l=Object.create(l);["createdCallback","attachedCallback","detachedCallback","attributeChangedCallback"].forEach(function(e){var t=o[e];t&&(l[e]=function(){C(this)instanceof r||M(this),t.apply(C(this),arguments)})});var d={prototype:l};i&&(d["extends"]=i),r.prototype=o,r.prototype.constructor=r,e.constructorTable.set(l,r),e.nativePrototypeTable.set(o,l);P.call(N(this),t,d);return r},y([window.HTMLDocument||window.Document],["registerElement"])}y([window.HTMLBodyElement,window.HTMLDocument||window.Document,window.HTMLHeadElement,window.HTMLHtmlElement],["appendChild","compareDocumentPosition","contains","getElementsByClassName","getElementsByTagName","getElementsByTagNameNS","insertBefore","querySelector","querySelectorAll","removeChild","replaceChild"]),y([window.HTMLBodyElement,window.HTMLHeadElement,window.HTMLHtmlElement],E),y([window.HTMLDocument||window.Document],["adoptNode","importNode","contains","createComment","createDocumentFragment","createElement","createElementNS","createEvent","createEventNS","createRange","createTextNode","createTreeWalker","elementFromPoint","getElementById","getElementsByName","getSelection"]),_(t.prototype,l),_(t.prototype,d),_(t.prototype,f),_(t.prototype,p),_(t.prototype,{get implementation(){var e=D.get(this);return e?e:(e=new a(N(this).implementation),D.set(this,e),e)},get defaultView(){return C(N(this).defaultView)}}),S(window.Document,t,document.implementation.createHTMLDocument("")),window.HTMLDocument&&S(window.HTMLDocument,t),j([window.HTMLBodyElement,window.HTMLDocument||window.Document,window.HTMLHeadElement]);var k=document.implementation.createDocument;a.prototype.createDocument=function(){return arguments[2]=N(arguments[2]),C(k.apply(L(this),arguments))},s(a,"createDocumentType"),s(a,"createHTMLDocument"),c(a,"hasFeature"),S(window.DOMImplementation,a),y([window.DOMImplementation],["createDocument","createDocumentType","createHTMLDocument","hasFeature"]),e.adoptNodeNoRemove=r,e.wrappers.DOMImplementation=a,e.wrappers.Document=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.EventTarget,r=e.wrappers.Selection,o=e.mixin,i=e.registerWrapper,a=e.renderAllPending,s=e.unwrap,c=e.unwrapIfNeeded,l=e.wrap,u=window.Window,d=window.getComputedStyle,p=window.getDefaultComputedStyle,h=window.getSelection;t.prototype=Object.create(n.prototype),u.prototype.getComputedStyle=function(e,t){return l(this||window).getComputedStyle(c(e),t)},p&&(u.prototype.getDefaultComputedStyle=function(e,t){return l(this||window).getDefaultComputedStyle(c(e),t)}),u.prototype.getSelection=function(){return l(this||window).getSelection()},delete window.getComputedStyle,delete window.getDefaultComputedStyle,delete window.getSelection,["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){u.prototype[e]=function(){var t=l(this||window);return t[e].apply(t,arguments)},delete window[e]}),o(t.prototype,{getComputedStyle:function(e,t){return a(),d.call(s(this),c(e),t)},getSelection:function(){return a(),new r(h.call(s(this)))},get document(){return l(s(this).document)}}),p&&(t.prototype.getDefaultComputedStyle=function(e,t){return a(),p.call(s(this),c(e),t)}),i(u,t,window),e.wrappers.Window=t}(window.ShadowDOMPolyfill),function(e){"use strict";var t=e.unwrap,n=window.DataTransfer||window.Clipboard,r=n.prototype.setDragImage;r&&(n.prototype.setDragImage=function(e,n,o){r.call(this,t(e),n,o)})}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){var t;t=e instanceof i?e:new i(e&&o(e)),r(t,this)}var n=e.registerWrapper,r=e.setWrapper,o=e.unwrap,i=window.FormData;i&&(n(i,t,new i),e.wrappers.FormData=t)}(window.ShadowDOMPolyfill),function(e){"use strict";var t=e.unwrapIfNeeded,n=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(e){return n.call(this,t(e))}}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){var t=n[e],r=window[t];if(r){var o=document.createElement(e),i=o.constructor;window[t]=i}}var n=(e.isWrapperFor,{a:"HTMLAnchorElement",area:"HTMLAreaElement",audio:"HTMLAudioElement",base:"HTMLBaseElement",body:"HTMLBodyElement",br:"HTMLBRElement",button:"HTMLButtonElement",canvas:"HTMLCanvasElement",caption:"HTMLTableCaptionElement",col:"HTMLTableColElement",content:"HTMLContentElement",data:"HTMLDataElement",datalist:"HTMLDataListElement",del:"HTMLModElement",dir:"HTMLDirectoryElement",div:"HTMLDivElement",dl:"HTMLDListElement",embed:"HTMLEmbedElement",fieldset:"HTMLFieldSetElement",font:"HTMLFontElement",form:"HTMLFormElement",frame:"HTMLFrameElement",frameset:"HTMLFrameSetElement",h1:"HTMLHeadingElement",head:"HTMLHeadElement",hr:"HTMLHRElement",html:"HTMLHtmlElement",iframe:"HTMLIFrameElement",img:"HTMLImageElement",input:"HTMLInputElement",keygen:"HTMLKeygenElement",label:"HTMLLabelElement",legend:"HTMLLegendElement",li:"HTMLLIElement",link:"HTMLLinkElement",map:"HTMLMapElement",marquee:"HTMLMarqueeElement",menu:"HTMLMenuElement",menuitem:"HTMLMenuItemElement",meta:"HTMLMetaElement",meter:"HTMLMeterElement",object:"HTMLObjectElement",ol:"HTMLOListElement",optgroup:"HTMLOptGroupElement",option:"HTMLOptionElement",output:"HTMLOutputElement",p:"HTMLParagraphElement",param:"HTMLParamElement",pre:"HTMLPreElement",progress:"HTMLProgressElement",q:"HTMLQuoteElement",script:"HTMLScriptElement",select:"HTMLSelectElement",shadow:"HTMLShadowElement",source:"HTMLSourceElement",span:"HTMLSpanElement",style:"HTMLStyleElement",table:"HTMLTableElement",tbody:"HTMLTableSectionElement",template:"HTMLTemplateElement",textarea:"HTMLTextAreaElement",thead:"HTMLTableSectionElement",time:"HTMLTimeElement",title:"HTMLTitleElement",tr:"HTMLTableRowElement",track:"HTMLTrackElement",ul:"HTMLUListElement",video:"HTMLVideoElement"});Object.keys(n).forEach(t),Object.getOwnPropertyNames(e.wrappers).forEach(function(t){window[t]=e.wrappers[t]})}(window.ShadowDOMPolyfill),function(e){function t(e,t){var n="";return Array.prototype.forEach.call(e,function(e){n+=e.textContent+"\n\n"}),t||(n=n.replace(d,"")),n}function n(e){var t=document.createElement("style");return t.textContent=e,t}function r(e){var t=n(e);document.head.appendChild(t);var r=[];if(t.sheet)try{r=t.sheet.cssRules}catch(o){}else console.warn("sheet not found",t);return t.parentNode.removeChild(t),r}function o(){C.initialized=!0,document.body.appendChild(C);var e=C.contentDocument,t=e.createElement("base");t.href=document.baseURI,e.head.appendChild(t)}function i(e){C.initialized||o(),document.body.appendChild(C),e(C.contentDocument),document.body.removeChild(C)}function a(e,t){if(t){var o;if(e.match("@import")&&D){var a=n(e);i(function(e){e.head.appendChild(a.impl),o=Array.prototype.slice.call(a.sheet.cssRules,0),t(o)})}else o=r(e),t(o)}}function s(e){e&&l().appendChild(document.createTextNode(e))}function c(e,t){var r=n(e);r.setAttribute(t,""),r.setAttribute(x,""),document.head.appendChild(r)}function l(){return j||(j=document.createElement("style"),j.setAttribute(x,""),j[x]=!0),j}var u={strictStyling:!1,registry:{},shimStyling:function(e,n,r){var o=this.prepareRoot(e,n,r),i=this.isTypeExtension(r),a=this.makeScopeSelector(n,i),s=t(o,!0);s=this.scopeCssText(s,a),e&&(e.shimmedStyle=s),this.addCssToDocument(s,n)},shimStyle:function(e,t){return this.shimCssText(e.textContent,t)},shimCssText:function(e,t){return e=this.insertDirectives(e),this.scopeCssText(e,t)},makeScopeSelector:function(e,t){return e?t?"[is="+e+"]":e:""},isTypeExtension:function(e){return e&&e.indexOf("-")<0},prepareRoot:function(e,t,n){var r=this.registerRoot(e,t,n);return this.replaceTextInStyles(r.rootStyles,this.insertDirectives),this.removeStyles(e,r.rootStyles),this.strictStyling&&this.applyScopeToContent(e,t),r.scopeStyles},removeStyles:function(e,t){for(var n,r=0,o=t.length;o>r&&(n=t[r]);r++)n.parentNode.removeChild(n)},registerRoot:function(e,t,n){var r=this.registry[t]={root:e,name:t,extendsName:n},o=this.findStyles(e);r.rootStyles=o,r.scopeStyles=r.rootStyles;var i=this.registry[r.extendsName];return i&&(r.scopeStyles=i.scopeStyles.concat(r.scopeStyles)),r},findStyles:function(e){if(!e)return[];var t=e.querySelectorAll("style");return Array.prototype.filter.call(t,function(e){return!e.hasAttribute(R)})},applyScopeToContent:function(e,t){e&&(Array.prototype.forEach.call(e.querySelectorAll("*"),function(e){e.setAttribute(t,"")}),Array.prototype.forEach.call(e.querySelectorAll("template"),function(e){this.applyScopeToContent(e.content,t)},this))},insertDirectives:function(e){return e=this.insertPolyfillDirectivesInCssText(e),this.insertPolyfillRulesInCssText(e)},insertPolyfillDirectivesInCssText:function(e){return e=e.replace(p,function(e,t){return t.slice(0,-2)+"{"}),e.replace(h,function(e,t){return t+" {"})},insertPolyfillRulesInCssText:function(e){return e=e.replace(f,function(e,t){return t.slice(0,-1)}),e.replace(m,function(e,t,n,r){var o=e.replace(t,"").replace(n,"");return r+o})},scopeCssText:function(e,t){var n=this.extractUnscopedRulesFromCssText(e);if(e=this.insertPolyfillHostInCssText(e),e=this.convertColonHost(e),e=this.convertColonHostContext(e),e=this.convertShadowDOMSelectors(e),t){var e,r=this;a(e,function(n){e=r.scopeRules(n,t)})}return e=e+"\n"+n,e.trim()},extractUnscopedRulesFromCssText:function(e){for(var t,n="";t=w.exec(e);)n+=t[1].slice(0,-1)+"\n\n";for(;t=v.exec(e);)n+=t[0].replace(t[2],"").replace(t[1],t[3])+"\n\n";return n},convertColonHost:function(e){return this.convertColonRule(e,E,this.colonHostPartReplacer)},convertColonHostContext:function(e){return this.convertColonRule(e,_,this.colonHostContextPartReplacer)},convertColonRule:function(e,t,n){return e.replace(t,function(e,t,r,o){if(t=O,r){for(var i,a=r.split(","),s=[],c=0,l=a.length;l>c&&(i=a[c]);c++)i=i.trim(),s.push(n(t,i,o));return s.join(",")}return t+o})},colonHostContextPartReplacer:function(e,t,n){return t.match(g)?this.colonHostPartReplacer(e,t,n):e+t+n+", "+t+" "+e+n},colonHostPartReplacer:function(e,t,n){return e+t.replace(g,"")+n},convertShadowDOMSelectors:function(e){for(var t=0;t<N.length;t++)e=e.replace(N[t]," ");return e},scopeRules:function(e,t){var n="";return e&&Array.prototype.forEach.call(e,function(e){if(e.selectorText&&e.style&&void 0!==e.style.cssText)n+=this.scopeSelector(e.selectorText,t,this.strictStyling)+" {\n ",n+=this.propertiesFromRule(e)+"\n}\n\n";else if(e.type===CSSRule.MEDIA_RULE)n+="@media "+e.media.mediaText+" {\n",n+=this.scopeRules(e.cssRules,t),n+="\n}\n\n";else try{e.cssText&&(n+=e.cssText+"\n\n")}catch(r){e.type===CSSRule.KEYFRAMES_RULE&&e.cssRules&&(n+=this.ieSafeCssTextFromKeyFrameRule(e))}},this),n},ieSafeCssTextFromKeyFrameRule:function(e){var t="@keyframes "+e.name+" {";return Array.prototype.forEach.call(e.cssRules,function(e){t+=" "+e.keyText+" {"+e.style.cssText+"}"}),t+=" }"},scopeSelector:function(e,t,n){var r=[],o=e.split(",");return o.forEach(function(e){e=e.trim(),this.selectorNeedsScoping(e,t)&&(e=n&&!e.match(O)?this.applyStrictSelectorScope(e,t):this.applySelectorScope(e,t)),r.push(e)},this),r.join(", ")},selectorNeedsScoping:function(e,t){if(Array.isArray(t))return!0;var n=this.makeScopeMatcher(t);return!e.match(n)},makeScopeMatcher:function(e){return e=e.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),new RegExp("^("+e+")"+S,"m")},applySelectorScope:function(e,t){return Array.isArray(t)?this.applySelectorScopeList(e,t):this.applySimpleSelectorScope(e,t)},applySelectorScopeList:function(e,t){for(var n,r=[],o=0;n=t[o];o++)r.push(this.applySimpleSelectorScope(e,n));return r.join(", ")},applySimpleSelectorScope:function(e,t){return e.match(L)?(e=e.replace(O,t),e.replace(L,t+" ")):t+" "+e},applyStrictSelectorScope:function(e,t){t=t.replace(/\[is=([^\]]*)\]/g,"$1");var n=[" ",">","+","~"],r=e,o="["+t+"]";return n.forEach(function(e){var t=r.split(e);r=t.map(function(e){var t=e.trim().replace(L,"");return t&&n.indexOf(t)<0&&t.indexOf(o)<0&&(e=t.replace(/([^:]*)(:*)(.*)/,"$1"+o+"$2$3")),e}).join(e)}),r},insertPolyfillHostInCssText:function(e){return e.replace(M,b).replace(T,g)},propertiesFromRule:function(e){var t=e.style.cssText;e.style.content&&!e.style.content.match(/['"]+|attr/)&&(t=t.replace(/content:[^;]*;/g,"content: '"+e.style.content+"';"));var n=e.style;for(var r in n)"initial"===n[r]&&(t+=r+": initial; ");return t},replaceTextInStyles:function(e,t){e&&t&&(e instanceof Array||(e=[e]),Array.prototype.forEach.call(e,function(e){e.textContent=t.call(this,e.textContent)},this))},addCssToDocument:function(e,t){e.match("@import")?c(e,t):s(e)}},d=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,p=/\/\*\s*@polyfill ([^*]*\*+([^/*][^*]*\*+)*\/)([^{]*?){/gim,h=/polyfill-next-selector[^}]*content\:[\s]*?['"](.*?)['"][;\s]*}([^{]*?){/gim,f=/\/\*\s@polyfill-rule([^*]*\*+([^/*][^*]*\*+)*)\//gim,m=/(polyfill-rule)[^}]*(content\:[\s]*['"](.*?)['"])[;\s]*[^}]*}/gim,w=/\/\*\s@polyfill-unscoped-rule([^*]*\*+([^/*][^*]*\*+)*)\//gim,v=/(polyfill-unscoped-rule)[^}]*(content\:[\s]*['"](.*?)['"])[;\s]*[^}]*}/gim,g="-shadowcsshost",b="-shadowcsscontext",y=")(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)",E=new RegExp("("+g+y,"gim"),_=new RegExp("("+b+y,"gim"),S="([>\\s~+[.,{:][\\s\\S]*)?$",T=/\:host/gim,M=/\:host-context/gim,O=g+"-no-combinator",L=new RegExp(g,"gim"),N=(new RegExp(b,"gim"),[/>>>/g,/::shadow/g,/::content/g,/\/deep\//g,/\/shadow\//g,/\/shadow-deep\//g,/\^\^/g,/\^/g]),C=document.createElement("iframe");C.style.display="none";var j,D=navigator.userAgent.match("Chrome"),H="shim-shadowdom",x="shim-shadowdom-css",R="no-shim";if(window.ShadowDOMPolyfill){s("style { display: none !important; }\n");var I=ShadowDOMPolyfill.wrap(document),P=I.querySelector("head");P.insertBefore(l(),P.childNodes[0]),document.addEventListener("DOMContentLoaded",function(){e.urlResolver;if(window.HTMLImports&&!HTMLImports.useNative){var t="link[rel=stylesheet]["+H+"]",n="style["+H+"]";HTMLImports.importer.documentPreloadSelectors+=","+t,HTMLImports.importer.importsPreloadSelectors+=","+t,HTMLImports.parser.documentSelectors=[HTMLImports.parser.documentSelectors,t,n].join(",");var r=HTMLImports.parser.parseGeneric;HTMLImports.parser.parseGeneric=function(e){if(!e[x]){var t=e.__importElement||e;if(!t.hasAttribute(H))return void r.call(this,e);e.__resource&&(t=e.ownerDocument.createElement("style"),t.textContent=e.__resource),HTMLImports.path.resolveUrlsInStyle(t,e.href),t.textContent=u.shimStyle(t),t.removeAttribute(H,""),t.setAttribute(x,""),t[x]=!0,t.parentNode!==P&&(e.parentNode===P?P.replaceChild(t,e):this.addElementToDocument(t)),t.__importParsed=!0,this.markParsingComplete(e),this.parseNext()}};var o=HTMLImports.parser.hasResource;HTMLImports.parser.hasResource=function(e){return"link"===e.localName&&"stylesheet"===e.rel&&e.hasAttribute(H)?e.__resource:o.call(this,e)}}})}e.ShadowCSS=u}(window.WebComponents)),function(e){window.ShadowDOMPolyfill?(window.wrap=ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(e){return e}}(window.WebComponents),function(e){"use strict";function t(e){return void 0!==p[e]}function n(){s.call(this),this._isInvalid=!0}function r(e){return""==e&&n.call(this),e.toLowerCase()}function o(e){var t=e.charCodeAt(0);return t>32&&127>t&&-1==[34,35,60,62,63,96].indexOf(t)?e:encodeURIComponent(e)}function i(e){var t=e.charCodeAt(0);return t>32&&127>t&&-1==[34,35,60,62,96].indexOf(t)?e:encodeURIComponent(e)}function a(e,a,s){function c(e){b.push(e)}var l=a||"scheme start",u=0,d="",v=!1,g=!1,b=[];e:for(;(e[u-1]!=f||0==u)&&!this._isInvalid;){var y=e[u];switch(l){case"scheme start":if(!y||!m.test(y)){if(a){c("Invalid scheme.");break e}d="",l="no scheme";continue}d+=y.toLowerCase(),l="scheme";break;case"scheme":if(y&&w.test(y))d+=y.toLowerCase();else{if(":"!=y){if(a){if(f==y)break e;c("Code point not allowed in scheme: "+y);break e}d="",u=0,l="no scheme";continue}if(this._scheme=d,d="",a)break e;t(this._scheme)&&(this._isRelative=!0),l="file"==this._scheme?"relative":this._isRelative&&s&&s._scheme==this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}break;case"scheme data":"?"==y?(this._query="?",l="query"):"#"==y?(this._fragment="#",l="fragment"):f!=y&&" "!=y&&"\n"!=y&&"\r"!=y&&(this._schemeData+=o(y));break;case"no scheme":if(s&&t(s._scheme)){l="relative";continue}c("Missing scheme."),n.call(this);break;case"relative or authority":if("/"!=y||"/"!=e[u+1]){c("Expected /, got: "+y),l="relative";continue}l="authority ignore slashes";break;case"relative":if(this._isRelative=!0,"file"!=this._scheme&&(this._scheme=s._scheme),f==y){this._host=s._host,this._port=s._port,this._path=s._path.slice(),this._query=s._query,this._username=s._username,this._password=s._password;break e}if("/"==y||"\\"==y)"\\"==y&&c("\\ is an invalid code point."),l="relative slash";else if("?"==y)this._host=s._host,this._port=s._port,this._path=s._path.slice(),this._query="?",this._username=s._username,this._password=s._password,l="query";else{if("#"!=y){var E=e[u+1],_=e[u+2];("file"!=this._scheme||!m.test(y)||":"!=E&&"|"!=E||f!=_&&"/"!=_&&"\\"!=_&&"?"!=_&&"#"!=_)&&(this._host=s._host,this._port=s._port,this._username=s._username,this._password=s._password,this._path=s._path.slice(),this._path.pop()),l="relative path";continue}this._host=s._host,this._port=s._port,this._path=s._path.slice(),this._query=s._query,this._fragment="#",this._username=s._username,this._password=s._password,l="fragment"}break;case"relative slash":if("/"!=y&&"\\"!=y){"file"!=this._scheme&&(this._host=s._host,this._port=s._port,this._username=s._username,this._password=s._password),l="relative path";continue}"\\"==y&&c("\\ is an invalid code point."),l="file"==this._scheme?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!=y){c("Expected '/', got: "+y),l="authority ignore slashes";continue}l="authority second slash";break;case"authority second slash":if(l="authority ignore slashes","/"!=y){c("Expected '/', got: "+y);continue}break;case"authority ignore slashes":if("/"!=y&&"\\"!=y){l="authority";continue}c("Expected authority, got: "+y);break;case"authority":if("@"==y){v&&(c("@ already seen."),d+="%40"),v=!0;for(var S=0;S<d.length;S++){var T=d[S];if("   "!=T&&"\n"!=T&&"\r"!=T)if(":"!=T||null!==this._password){var M=o(T);null!==this._password?this._password+=M:this._username+=M}else this._password="";else c("Invalid whitespace in authority.")}d=""}else{if(f==y||"/"==y||"\\"==y||"?"==y||"#"==y){u-=d.length,d="",l="host";continue}d+=y}break;case"file host":if(f==y||"/"==y||"\\"==y||"?"==y||"#"==y){2!=d.length||!m.test(d[0])||":"!=d[1]&&"|"!=d[1]?0==d.length?l="relative path start":(this._host=r.call(this,d),d="",l="relative path start"):l="relative path";continue}"  "==y||"\n"==y||"\r"==y?c("Invalid whitespace in file host."):d+=y;break;case"host":case"hostname":if(":"!=y||g){if(f==y||"/"==y||"\\"==y||"?"==y||"#"==y){if(this._host=r.call(this,d),d="",l="relative path start",a)break e;continue}"    "!=y&&"\n"!=y&&"\r"!=y?("["==y?g=!0:"]"==y&&(g=!1),d+=y):c("Invalid code point in host/hostname: "+y)}else if(this._host=r.call(this,d),d="",l="port","hostname"==a)break e;break;case"port":if(/[0-9]/.test(y))d+=y;else{if(f==y||"/"==y||"\\"==y||"?"==y||"#"==y||a){if(""!=d){var O=parseInt(d,10);O!=p[this._scheme]&&(this._port=O+""),d=""}if(a)break e;l="relative path start";continue}"    "==y||"\n"==y||"\r"==y?c("Invalid code point in port: "+y):n.call(this)}break;case"relative path start":if("\\"==y&&c("'\\' not allowed in path."),l="relative path","/"!=y&&"\\"!=y)continue;break;case"relative path":if(f!=y&&"/"!=y&&"\\"!=y&&(a||"?"!=y&&"#"!=y))" "!=y&&"\n"!=y&&"\r"!=y&&(d+=o(y));else{"\\"==y&&c("\\ not allowed in relative path.");var L;(L=h[d.toLowerCase()])&&(d=L),".."==d?(this._path.pop(),"/"!=y&&"\\"!=y&&this._path.push("")):"."==d&&"/"!=y&&"\\"!=y?this._path.push(""):"."!=d&&("file"==this._scheme&&0==this._path.length&&2==d.length&&m.test(d[0])&&"|"==d[1]&&(d=d[0]+":"),this._path.push(d)),d="","?"==y?(this._query="?",l="query"):"#"==y&&(this._fragment="#",l="fragment")}break;case"query":a||"#"!=y?f!=y&&" "!=y&&"\n"!=y&&"\r"!=y&&(this._query+=i(y)):(this._fragment="#",l="fragment");break;case"fragment":f!=y&&"  "!=y&&"\n"!=y&&"\r"!=y&&(this._fragment+=y)}u++}}function s(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function c(e,t){void 0===t||t instanceof c||(t=new c(String(t))),this._url=e,s.call(this);var n=e.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");a.call(this,n,null,t)}var l=!1;if(!e.forceJURL)try{var u=new URL("b","http://a");u.pathname="c%20d",l="http://a/c%20d"===u.href}catch(d){}if(!l){var p=Object.create(null);p.ftp=21,p.file=0,p.gopher=70,p.http=80,p.https=443,p.ws=80,p.wss=443;var h=Object.create(null);h["%2e"]=".",h[".%2e"]="..",h["%2e."]="..",h["%2e%2e"]="..";var f=void 0,m=/[a-zA-Z]/,w=/[a-zA-Z0-9\+\-\.]/;c.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var e="";return(""!=this._username||null!=this._password)&&(e=this._username+(null!=this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+e+this.host:"")+this.pathname+this._query+this._fragment},set href(e){s.call(this),a.call(this,e)},get protocol(){return this._scheme+":"},set protocol(e){this._isInvalid||a.call(this,e+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(e){!this._isInvalid&&this._isRelative&&a.call(this,e,"host")},get hostname(){return this._host},set hostname(e){!this._isInvalid&&this._isRelative&&a.call(this,e,"hostname")},get port(){return this._port},set port(e){!this._isInvalid&&this._isRelative&&a.call(this,e,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(e){!this._isInvalid&&this._isRelative&&(this._path=[],a.call(this,e,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"==this._query?"":this._query},set search(e){!this._isInvalid&&this._isRelative&&(this._query="?","?"==e[0]&&(e=e.slice(1)),a.call(this,e,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"==this._fragment?"":this._fragment},set hash(e){this._isInvalid||(this._fragment="#","#"==e[0]&&(e=e.slice(1)),a.call(this,e,"fragment"))},get origin(){var e;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null"}return e=this.host,e?this._scheme+"://"+e:""}};var v=e.URL;v&&(c.createObjectURL=function(e){return v.createObjectURL.apply(v,arguments)},c.revokeObjectURL=function(e){v.revokeObjectURL(e)}),e.URL=c}}(self),function(e){function t(e){y.push(e),b||(b=!0,m(r))}function n(e){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(e)||e}function r(){b=!1;var e=y;y=[],e.sort(function(e,t){return e.uid_-t.uid_});var t=!1;e.forEach(function(e){var n=e.takeRecords();o(e),n.length&&(e.callback_(n,e),t=!0)}),t&&r()}function o(e){e.nodes_.forEach(function(t){var n=w.get(t);n&&n.forEach(function(t){t.observer===e&&t.removeTransientObservers()})})}function i(e,t){for(var n=e;n;n=n.parentNode){var r=w.get(n);if(r)for(var o=0;o<r.length;o++){var i=r[o],a=i.options;if(n===e||a.subtree){var s=t(a);s&&i.enqueue(s)}}}}function a(e){this.callback_=e,this.nodes_=[],this.records_=[],this.uid_=++E}function s(e,t){this.type=e,this.target=t,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function c(e){var t=new s(e.type,e.target);return t.addedNodes=e.addedNodes.slice(),t.removedNodes=e.removedNodes.slice(),t.previousSibling=e.previousSibling,t.nextSibling=e.nextSibling,t.attributeName=e.attributeName,t.attributeNamespace=e.attributeNamespace,t.oldValue=e.oldValue,t}function l(e,t){return _=new s(e,t)}function u(e){return S?S:(S=c(_),S.oldValue=e,S)}function d(){_=S=void 0}function p(e){return e===S||e===_}function h(e,t){return e===t?e:S&&p(e)?S:null}function f(e,t,n){this.observer=e,this.target=t,this.options=n,this.transientObservedNodes=[]}var m,w=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))m=setTimeout;else if(window.setImmediate)m=window.setImmediate;else{var v=[],g=String(Math.random());window.addEventListener("message",function(e){if(e.data===g){var t=v;v=[],t.forEach(function(e){e()})}}),m=function(e){v.push(e),window.postMessage(g,"*")}}var b=!1,y=[],E=0;a.prototype={observe:function(e,t){if(e=n(e),!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||t.attributeFilter&&t.attributeFilter.length&&!t.attributes||t.characterDataOldValue&&!t.characterData)throw new SyntaxError;var r=w.get(e);r||w.set(e,r=[]);for(var o,i=0;i<r.length;i++)if(r[i].observer===this){o=r[i],o.removeListeners(),o.options=t;break}o||(o=new f(this,e,t),r.push(o),this.nodes_.push(e)),o.addListeners()},disconnect:function(){this.nodes_.forEach(function(e){for(var t=w.get(e),n=0;n<t.length;n++){var r=t[n];if(r.observer===this){r.removeListeners(),t.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var e=this.records_;return this.records_=[],e}};var _,S;f.prototype={enqueue:function(e){var n=this.observer.records_,r=n.length;if(n.length>0){var o=n[r-1],i=h(o,e);if(i)return void(n[r-1]=i)}else t(this.observer);n[r]=e},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(e){var t=this.options;t.attributes&&e.addEventListener("DOMAttrModified",this,!0),t.characterData&&e.addEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.addEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(e){var t=this.options;t.attributes&&e.removeEventListener("DOMAttrModified",this,!0),t.characterData&&e.removeEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.removeEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(e){if(e!==this.target){this.addListeners_(e),this.transientObservedNodes.push(e);var t=w.get(e);t||w.set(e,t=[]),t.push(this)}},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach(function(e){this.removeListeners_(e);for(var t=w.get(e),n=0;n<t.length;n++)if(t[n]===this){t.splice(n,1);break}},this)},handleEvent:function(e){switch(e.stopImmediatePropagation(),e.type){case"DOMAttrModified":var t=e.attrName,n=e.relatedNode.namespaceURI,r=e.target,o=new l("attributes",r);o.attributeName=t,o.attributeNamespace=n;var a=e.attrChange===MutationEvent.ADDITION?null:e.prevValue;i(r,function(e){return!e.attributes||e.attributeFilter&&e.attributeFilter.length&&-1===e.attributeFilter.indexOf(t)&&-1===e.attributeFilter.indexOf(n)?void 0:e.attributeOldValue?u(a):o});break;case"DOMCharacterDataModified":var r=e.target,o=l("characterData",r),a=e.prevValue;i(r,function(e){return e.characterData?e.characterDataOldValue?u(a):o:void 0});break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":var s,c,p=e.target;"DOMNodeInserted"===e.type?(s=[p],c=[]):(s=[],c=[p]);var h=p.previousSibling,f=p.nextSibling,o=l("childList",e.target.parentNode);o.addedNodes=s,o.removedNodes=c,o.previousSibling=h,o.nextSibling=f,i(e.relatedNode,function(e){return e.childList?o:void 0})}d()}},e.JsMutationObserver=a,e.MutationObserver||(e.MutationObserver=a)}(self),window.HTMLImports=window.HTMLImports||{flags:{}},function(e){function t(e,t){t=t||f,r(function(){i(e,t)},t)}function n(e){return"complete"===e.readyState||e.readyState===v}function r(e,t){if(n(t))e&&e();else{var o=function(){("complete"===t.readyState||t.readyState===v)&&(t.removeEventListener(g,o),r(e,t))};t.addEventListener(g,o)}}function o(e){e.target.__loaded=!0}function i(e,t){function n(){c==l&&e&&e({allImports:s,loadedImports:u,errorImports:d})}function r(e){o(e),u.push(this),c++,n()}function i(e){d.push(this),c++,n()}var s=t.querySelectorAll("link[rel=import]"),c=0,l=s.length,u=[],d=[];if(l)for(var p,h=0;l>h&&(p=s[h]);h++)a(p)?(c++,n()):(p.addEventListener("load",r),p.addEventListener("error",i));else n()}function a(e){return d?e.__loaded||e["import"]&&"loading"!==e["import"].readyState:e.__importParsed}function s(e){for(var t,n=0,r=e.length;r>n&&(t=e[n]);n++)c(t)&&l(t)}function c(e){return"link"===e.localName&&"import"===e.rel}function l(e){var t=e["import"];t?o({target:e}):(e.addEventListener("load",o),e.addEventListener("error",o))}var u="import",d=Boolean(u in document.createElement("link")),p=Boolean(window.ShadowDOMPolyfill),h=function(e){return p?window.ShadowDOMPolyfill.wrapIfNeeded(e):e},f=h(document),m={get:function(){var e=window.HTMLImports.currentScript||document.currentScript||("complete"!==document.readyState?document.scripts[document.scripts.length-1]:null);return h(e)},configurable:!0};Object.defineProperty(document,"_currentScript",m),Object.defineProperty(f,"_currentScript",m);var w=/Trident/.test(navigator.userAgent),v=w?"complete":"interactive",g="readystatechange";d&&(new MutationObserver(function(e){for(var t,n=0,r=e.length;r>n&&(t=e[n]);n++)t.addedNodes&&s(t.addedNodes)}).observe(document.head,{childList:!0}),function(){if("loading"===document.readyState)for(var e,t=document.querySelectorAll("link[rel=import]"),n=0,r=t.length;r>n&&(e=t[n]);n++)l(e)}()),t(function(e){window.HTMLImports.ready=!0,window.HTMLImports.readyTime=(new Date).getTime();var t=f.createEvent("CustomEvent");t.initCustomEvent("HTMLImportsLoaded",!0,!0,e),f.dispatchEvent(t)}),e.IMPORT_LINK_TYPE=u,e.useNative=d,e.rootDocument=f,e.whenReady=t,e.isIE=w}(window.HTMLImports),function(e){var t=[],n=function(e){t.push(e)},r=function(){t.forEach(function(t){t(e)})};e.addModule=n,e.initializeModules=r}(window.HTMLImports),window.HTMLImports.addModule(function(e){var t=/(url\()([^)]*)(\))/g,n=/(@import[\s]+(?!url\())([^;]*)(;)/g,r={resolveUrlsInStyle:function(e,t){var n=e.ownerDocument,r=n.createElement("a");return e.textContent=this.resolveUrlsInCssText(e.textContent,t,r),e},resolveUrlsInCssText:function(e,r,o){var i=this.replaceUrls(e,o,r,t);return i=this.replaceUrls(i,o,r,n)},replaceUrls:function(e,t,n,r){return e.replace(r,function(e,r,o,i){var a=o.replace(/["']/g,"");return n&&(a=new URL(a,n).href),t.href=a,a=t.href,r+"'"+a+"'"+i})}};e.path=r}),window.HTMLImports.addModule(function(e){
var t={async:!0,ok:function(e){return e.status>=200&&e.status<300||304===e.status||0===e.status},load:function(n,r,o){var i=new XMLHttpRequest;return(e.flags.debug||e.flags.bust)&&(n+="?"+Math.random()),i.open("GET",n,t.async),i.addEventListener("readystatechange",function(e){if(4===i.readyState){var n=i.getResponseHeader("Location"),a=null;if(n)var a="/"===n.substr(0,1)?location.origin+n:n;r.call(o,!t.ok(i)&&i,i.response||i.responseText,a)}}),i.send(),i},loadDocument:function(e,t,n){this.load(e,t,n).responseType="document"}};e.xhr=t}),window.HTMLImports.addModule(function(e){var t=e.xhr,n=e.flags,r=function(e,t){this.cache={},this.onload=e,this.oncomplete=t,this.inflight=0,this.pending={}};r.prototype={addNodes:function(e){this.inflight+=e.length;for(var t,n=0,r=e.length;r>n&&(t=e[n]);n++)this.require(t);this.checkDone()},addNode:function(e){this.inflight++,this.require(e),this.checkDone()},require:function(e){var t=e.src||e.href;e.__nodeUrl=t,this.dedupe(t,e)||this.fetch(t,e)},dedupe:function(e,t){if(this.pending[e])return this.pending[e].push(t),!0;return this.cache[e]?(this.onload(e,t,this.cache[e]),this.tail(),!0):(this.pending[e]=[t],!1)},fetch:function(e,r){if(n.load&&console.log("fetch",e,r),e)if(e.match(/^data:/)){var o=e.split(","),i=o[0],a=o[1];a=i.indexOf(";base64")>-1?atob(a):decodeURIComponent(a),setTimeout(function(){this.receive(e,r,null,a)}.bind(this),0)}else{var s=function(t,n,o){this.receive(e,r,t,n,o)}.bind(this);t.load(e,s)}else setTimeout(function(){this.receive(e,r,{error:"href must be specified"},null)}.bind(this),0)},receive:function(e,t,n,r,o){this.cache[e]=r;for(var i,a=this.pending[e],s=0,c=a.length;c>s&&(i=a[s]);s++)this.onload(e,i,r,n,o),this.tail();this.pending[e]=null},tail:function(){--this.inflight,this.checkDone()},checkDone:function(){this.inflight||this.oncomplete()}},e.Loader=r}),window.HTMLImports.addModule(function(e){var t=function(e){this.addCallback=e,this.mo=new MutationObserver(this.handler.bind(this))};t.prototype={handler:function(e){for(var t,n=0,r=e.length;r>n&&(t=e[n]);n++)"childList"===t.type&&t.addedNodes.length&&this.addedNodes(t.addedNodes)},addedNodes:function(e){this.addCallback&&this.addCallback(e);for(var t,n=0,r=e.length;r>n&&(t=e[n]);n++)t.children&&t.children.length&&this.addedNodes(t.children)},observe:function(e){this.mo.observe(e,{childList:!0,subtree:!0})}},e.Observer=t}),window.HTMLImports.addModule(function(e){function t(e){return"link"===e.localName&&e.rel===u}function n(e){var t=r(e);return"data:text/javascript;charset=utf-8,"+encodeURIComponent(t)}function r(e){return e.textContent+o(e)}function o(e){var t=e.ownerDocument;t.__importedScripts=t.__importedScripts||0;var n=e.ownerDocument.baseURI,r=t.__importedScripts?"-"+t.__importedScripts:"";return t.__importedScripts++,"\n//# sourceURL="+n+r+".js\n"}function i(e){var t=e.ownerDocument.createElement("style");return t.textContent=e.textContent,a.resolveUrlsInStyle(t),t}var a=e.path,s=e.rootDocument,c=e.flags,l=e.isIE,u=e.IMPORT_LINK_TYPE,d="link[rel="+u+"]",p={documentSelectors:d,importsSelectors:[d,"link[rel=stylesheet]:not([type])","style:not([type])","script:not([type])",'script[type="application/javascript"]','script[type="text/javascript"]'].join(","),map:{link:"parseLink",script:"parseScript",style:"parseStyle"},dynamicElements:[],parseNext:function(){var e=this.nextToParse();e&&this.parse(e)},parse:function(e){if(this.isParsed(e))return void(c.parse&&console.log("[%s] is already parsed",e.localName));var t=this[this.map[e.localName]];t&&(this.markParsing(e),t.call(this,e))},parseDynamic:function(e,t){this.dynamicElements.push(e),t||this.parseNext()},markParsing:function(e){c.parse&&console.log("parsing",e),this.parsingElement=e},markParsingComplete:function(e){e.__importParsed=!0,this.markDynamicParsingComplete(e),e.__importElement&&(e.__importElement.__importParsed=!0,this.markDynamicParsingComplete(e.__importElement)),this.parsingElement=null,c.parse&&console.log("completed",e)},markDynamicParsingComplete:function(e){var t=this.dynamicElements.indexOf(e);t>=0&&this.dynamicElements.splice(t,1)},parseImport:function(e){if(e["import"]=e.__doc,window.HTMLImports.__importsParsingHook&&window.HTMLImports.__importsParsingHook(e),e["import"]&&(e["import"].__importParsed=!0),this.markParsingComplete(e),e.__resource&&!e.__error?e.dispatchEvent(new CustomEvent("load",{bubbles:!1})):e.dispatchEvent(new CustomEvent("error",{bubbles:!1})),e.__pending)for(var t;e.__pending.length;)t=e.__pending.shift(),t&&t({target:e});this.parseNext()},parseLink:function(e){t(e)?this.parseImport(e):(e.href=e.href,this.parseGeneric(e))},parseStyle:function(e){var t=e;e=i(e),t.__appliedElement=e,e.__importElement=t,this.parseGeneric(e)},parseGeneric:function(e){this.trackElement(e),this.addElementToDocument(e)},rootImportForElement:function(e){for(var t=e;t.ownerDocument.__importLink;)t=t.ownerDocument.__importLink;return t},addElementToDocument:function(e){var t=this.rootImportForElement(e.__importElement||e);t.parentNode.insertBefore(e,t)},trackElement:function(e,t){var n=this,r=function(o){e.removeEventListener("load",r),e.removeEventListener("error",r),t&&t(o),n.markParsingComplete(e),n.parseNext()};if(e.addEventListener("load",r),e.addEventListener("error",r),l&&"style"===e.localName){var o=!1;if(-1==e.textContent.indexOf("@import"))o=!0;else if(e.sheet){o=!0;for(var i,a=e.sheet.cssRules,s=a?a.length:0,c=0;s>c&&(i=a[c]);c++)i.type===CSSRule.IMPORT_RULE&&(o=o&&Boolean(i.styleSheet))}o&&setTimeout(function(){e.dispatchEvent(new CustomEvent("load",{bubbles:!1}))})}},parseScript:function(t){var r=document.createElement("script");r.__importElement=t,r.src=t.src?t.src:n(t),e.currentScript=t,this.trackElement(r,function(t){r.parentNode&&r.parentNode.removeChild(r),e.currentScript=null}),this.addElementToDocument(r)},nextToParse:function(){return this._mayParse=[],!this.parsingElement&&(this.nextToParseInDoc(s)||this.nextToParseDynamic())},nextToParseInDoc:function(e,n){if(e&&this._mayParse.indexOf(e)<0){this._mayParse.push(e);for(var r,o=e.querySelectorAll(this.parseSelectorsForNode(e)),i=0,a=o.length;a>i&&(r=o[i]);i++)if(!this.isParsed(r))return this.hasResource(r)?t(r)?this.nextToParseInDoc(r.__doc,r):r:void 0}return n},nextToParseDynamic:function(){return this.dynamicElements[0]},parseSelectorsForNode:function(e){var t=e.ownerDocument||e;return t===s?this.documentSelectors:this.importsSelectors},isParsed:function(e){return e.__importParsed},needsDynamicParsing:function(e){return this.dynamicElements.indexOf(e)>=0},hasResource:function(e){return t(e)&&void 0===e.__doc?!1:!0}};e.parser=p,e.IMPORT_SELECTOR=d}),window.HTMLImports.addModule(function(e){function t(e){return n(e,a)}function n(e,t){return"link"===e.localName&&e.getAttribute("rel")===t}function r(e){return!!Object.getOwnPropertyDescriptor(e,"baseURI")}function o(e,t){var n=document.implementation.createHTMLDocument(a);n._URL=t;var o=n.createElement("base");o.setAttribute("href",t),n.baseURI||r(n)||Object.defineProperty(n,"baseURI",{value:t});var i=n.createElement("meta");return i.setAttribute("charset","utf-8"),n.head.appendChild(i),n.head.appendChild(o),n.body.innerHTML=e,window.HTMLTemplateElement&&HTMLTemplateElement.bootstrap&&HTMLTemplateElement.bootstrap(n),n}var i=e.flags,a=e.IMPORT_LINK_TYPE,s=e.IMPORT_SELECTOR,c=e.rootDocument,l=e.Loader,u=e.Observer,d=e.parser,p={documents:{},documentPreloadSelectors:s,importsPreloadSelectors:[s].join(","),loadNode:function(e){h.addNode(e)},loadSubtree:function(e){var t=this.marshalNodes(e);h.addNodes(t)},marshalNodes:function(e){return e.querySelectorAll(this.loadSelectorsForNode(e))},loadSelectorsForNode:function(e){var t=e.ownerDocument||e;return t===c?this.documentPreloadSelectors:this.importsPreloadSelectors},loaded:function(e,n,r,a,s){if(i.load&&console.log("loaded",e,n),n.__resource=r,n.__error=a,t(n)){var c=this.documents[e];void 0===c&&(c=a?null:o(r,s||e),c&&(c.__importLink=n,this.bootDocument(c)),this.documents[e]=c),n.__doc=c}d.parseNext()},bootDocument:function(e){this.loadSubtree(e),this.observer.observe(e),d.parseNext()},loadedAll:function(){d.parseNext()}},h=new l(p.loaded.bind(p),p.loadedAll.bind(p));if(p.observer=new u,!document.baseURI){var f={get:function(){var e=document.querySelector("base");return e?e.href:window.location.href},configurable:!0};Object.defineProperty(document,"baseURI",f),Object.defineProperty(c,"baseURI",f)}e.importer=p,e.importLoader=h}),window.HTMLImports.addModule(function(e){var t=e.parser,n=e.importer,r={added:function(e){for(var r,o,i,a,s=0,c=e.length;c>s&&(a=e[s]);s++)r||(r=a.ownerDocument,o=t.isParsed(r)),i=this.shouldLoadNode(a),i&&n.loadNode(a),this.shouldParseNode(a)&&o&&t.parseDynamic(a,i)},shouldLoadNode:function(e){return 1===e.nodeType&&o.call(e,n.loadSelectorsForNode(e))},shouldParseNode:function(e){return 1===e.nodeType&&o.call(e,t.parseSelectorsForNode(e))}};n.observer.addCallback=r.added.bind(r);var o=HTMLElement.prototype.matches||HTMLElement.prototype.matchesSelector||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector}),function(e){function t(){window.HTMLImports.importer.bootDocument(o)}var n=e.initializeModules,r=e.isIE;if(!e.useNative){r&&"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,Boolean(t.bubbles),Boolean(t.cancelable),t.detail),n.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})},n},window.CustomEvent.prototype=window.Event.prototype),n();var o=e.rootDocument;"complete"===document.readyState||"interactive"===document.readyState&&!window.attachEvent?t():document.addEventListener("DOMContentLoaded",t)}}(window.HTMLImports),window.CustomElements=window.CustomElements||{flags:{}},function(e){var t=e.flags,n=[],r=function(e){n.push(e)},o=function(){n.forEach(function(t){t(e)})};e.addModule=r,e.initializeModules=o,e.hasNative=Boolean(document.registerElement),e.isIE=/Trident/.test(navigator.userAgent),e.useNative=!t.register&&e.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative)}(window.CustomElements),window.CustomElements.addModule(function(e){function t(e,t){n(e,function(e){return t(e)?!0:void r(e,t)}),r(e,t)}function n(e,t,r){var o=e.firstElementChild;if(!o)for(o=e.firstChild;o&&o.nodeType!==Node.ELEMENT_NODE;)o=o.nextSibling;for(;o;)t(o,r)!==!0&&n(o,t,r),o=o.nextElementSibling;return null}function r(e,n){for(var r=e.shadowRoot;r;)t(r,n),r=r.olderShadowRoot}function o(e,t){i(e,t,[])}function i(e,t,n){if(e=window.wrap(e),!(n.indexOf(e)>=0)){n.push(e);for(var r,o=e.querySelectorAll("link[rel="+a+"]"),s=0,c=o.length;c>s&&(r=o[s]);s++)r["import"]&&i(r["import"],t,n);t(e)}}var a=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";e.forDocumentTree=o,e.forSubtree=t}),window.CustomElements.addModule(function(e){function t(e,t){return n(e,t)||r(e,t)}function n(t,n){return e.upgrade(t,n)?!0:void(n&&a(t))}function r(e,t){b(e,function(e){return n(e,t)?!0:void 0})}function o(e){S.push(e),_||(_=!0,setTimeout(i))}function i(){_=!1;for(var e,t=S,n=0,r=t.length;r>n&&(e=t[n]);n++)e();S=[]}function a(e){E?o(function(){s(e)}):s(e)}function s(e){e.__upgraded__&&!e.__attached&&(e.__attached=!0,e.attachedCallback&&e.attachedCallback())}function c(e){l(e),b(e,function(e){l(e)})}function l(e){E?o(function(){u(e)}):u(e)}function u(e){e.__upgraded__&&e.__attached&&(e.__attached=!1,e.detachedCallback&&e.detachedCallback())}function d(e){for(var t=e,n=window.wrap(document);t;){if(t==n)return!0;t=t.parentNode||t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t.host}}function p(e){if(e.shadowRoot&&!e.shadowRoot.__watched){g.dom&&console.log("watching shadow-root for: ",e.localName);for(var t=e.shadowRoot;t;)m(t),t=t.olderShadowRoot}}function h(e,n){if(g.dom){var r=n[0];if(r&&"childList"===r.type&&r.addedNodes&&r.addedNodes){for(var o=r.addedNodes[0];o&&o!==document&&!o.host;)o=o.parentNode;var i=o&&(o.URL||o._URL||o.host&&o.host.localName)||"";i=i.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",n.length,i||"")}var a=d(e);n.forEach(function(e){"childList"===e.type&&(T(e.addedNodes,function(e){e.localName&&t(e,a)}),T(e.removedNodes,function(e){e.localName&&c(e)}))}),g.dom&&console.groupEnd()}function f(e){for(e=window.wrap(e),e||(e=window.wrap(document));e.parentNode;)e=e.parentNode;var t=e.__observer;t&&(h(e,t.takeRecords()),i())}function m(e){if(!e.__observer){var t=new MutationObserver(h.bind(this,e));t.observe(e,{childList:!0,subtree:!0}),e.__observer=t}}function w(e){e=window.wrap(e),g.dom&&console.group("upgradeDocument: ",e.baseURI.split("/").pop());var n=e===window.wrap(document);t(e,n),m(e),g.dom&&console.groupEnd()}function v(e){y(e,w)}var g=e.flags,b=e.forSubtree,y=e.forDocumentTree,E=!window.MutationObserver||window.MutationObserver===window.JsMutationObserver;e.hasPolyfillMutations=E;var _=!1,S=[],T=Array.prototype.forEach.call.bind(Array.prototype.forEach),M=Element.prototype.createShadowRoot;M&&(Element.prototype.createShadowRoot=function(){var e=M.call(this);return window.CustomElements.watchShadow(this),e}),e.watchShadow=p,e.upgradeDocumentTree=v,e.upgradeDocument=w,e.upgradeSubtree=r,e.upgradeAll=t,e.attached=a,e.takeRecords=f}),window.CustomElements.addModule(function(e){function t(t,r){if(!t.__upgraded__&&t.nodeType===Node.ELEMENT_NODE){var o=t.getAttribute("is"),i=e.getRegisteredDefinition(t.localName)||e.getRegisteredDefinition(o);if(i&&(o&&i.tag==t.localName||!o&&!i["extends"]))return n(t,i,r)}}function n(t,n,o){return a.upgrade&&console.group("upgrade:",t.localName),n.is&&t.setAttribute("is",n.is),r(t,n),t.__upgraded__=!0,i(t),o&&e.attached(t),e.upgradeSubtree(t,o),a.upgrade&&console.groupEnd(),t}function r(e,t){Object.__proto__?e.__proto__=t.prototype:(o(e,t.prototype,t["native"]),e.__proto__=t.prototype)}function o(e,t,n){for(var r={},o=t;o!==n&&o!==HTMLElement.prototype;){for(var i,a=Object.getOwnPropertyNames(o),s=0;i=a[s];s++)r[i]||(Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(o,i)),r[i]=1);o=Object.getPrototypeOf(o)}}function i(e){e.createdCallback&&e.createdCallback()}var a=e.flags;e.upgrade=t,e.upgradeWithDefinition=n,e.implementPrototype=r}),window.CustomElements.addModule(function(e){function t(t,r){var c=r||{};if(!t)throw new Error("document.registerElement: first argument `name` must not be empty");if(t.indexOf("-")<0)throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(t)+"'.");if(o(t))throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(t)+"'. The type name is invalid.");if(l(t))throw new Error("DuplicateDefinitionError: a type with name '"+String(t)+"' is already registered");return c.prototype||(c.prototype=Object.create(HTMLElement.prototype)),c.__name=t.toLowerCase(),c.lifecycle=c.lifecycle||{},c.ancestry=i(c["extends"]),a(c),s(c),n(c.prototype),u(c.__name,c),c.ctor=d(c),c.ctor.prototype=c.prototype,c.prototype.constructor=c.ctor,e.ready&&v(document),c.ctor}function n(e){if(!e.setAttribute._polyfilled){var t=e.setAttribute;e.setAttribute=function(e,n){r.call(this,e,n,t)};var n=e.removeAttribute;e.removeAttribute=function(e){r.call(this,e,null,n)},e.setAttribute._polyfilled=!0}}function r(e,t,n){e=e.toLowerCase();var r=this.getAttribute(e);n.apply(this,arguments);var o=this.getAttribute(e);this.attributeChangedCallback&&o!==r&&this.attributeChangedCallback(e,r,o)}function o(e){for(var t=0;t<_.length;t++)if(e===_[t])return!0}function i(e){var t=l(e);return t?i(t["extends"]).concat([t]):[]}function a(e){for(var t,n=e["extends"],r=0;t=e.ancestry[r];r++)n=t.is&&t.tag;e.tag=n||e.__name,n&&(e.is=e.__name)}function s(e){if(!Object.__proto__){var t=HTMLElement.prototype;if(e.is){var n=document.createElement(e.tag);t=Object.getPrototypeOf(n)}for(var r,o=e.prototype,i=!1;o;)o==t&&(i=!0),r=Object.getPrototypeOf(o),r&&(o.__proto__=r),o=r;i||console.warn(e.tag+" prototype not found in prototype chain for "+e.is),e["native"]=t}}function c(e){return b(M(e.tag),e)}function l(e){return e?S[e.toLowerCase()]:void 0}function u(e,t){S[e]=t}function d(e){return function(){return c(e)}}function p(e,t,n){return e===T?h(t,n):O(e,t)}function h(e,t){e&&(e=e.toLowerCase()),t&&(t=t.toLowerCase());var n=l(t||e);if(n){if(e==n.tag&&t==n.is)return new n.ctor;if(!t&&!n.is)return new n.ctor}var r;return t?(r=h(e),r.setAttribute("is",t),r):(r=M(e),e.indexOf("-")>=0&&y(r,HTMLElement),r)}function f(e,t){var n=e[t];e[t]=function(){var e=n.apply(this,arguments);return g(e),e}}var m,w=e.isIE,v=e.upgradeDocumentTree,g=e.upgradeAll,b=e.upgradeWithDefinition,y=e.implementPrototype,E=e.useNative,_=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"],S={},T="http://www.w3.org/1999/xhtml",M=document.createElement.bind(document),O=document.createElementNS.bind(document);m=Object.__proto__||E?function(e,t){return e instanceof t}:function(e,t){if(e instanceof t)return!0;for(var n=e;n;){if(n===t.prototype)return!0;n=n.__proto__}return!1},f(Node.prototype,"cloneNode"),f(document,"importNode"),w&&!function(){var e=document.importNode;document.importNode=function(){var t=e.apply(document,arguments);if(t.nodeType==t.DOCUMENT_FRAGMENT_NODE){var n=document.createDocumentFragment();return n.appendChild(t),n}return t}}(),document.registerElement=t,document.createElement=h,document.createElementNS=p,e.registry=S,e["instanceof"]=m,e.reservedTagList=_,e.getRegisteredDefinition=l,document.register=document.registerElement}),function(e){function t(){a(window.wrap(document)),window.CustomElements.ready=!0;var e=window.requestAnimationFrame||function(e){setTimeout(e,16)};e(function(){setTimeout(function(){window.CustomElements.readyTime=Date.now(),window.HTMLImports&&(window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime),document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})})}var n=e.useNative,r=e.initializeModules,o=e.isIE;if(n){var i=function(){};e.watchShadow=i,e.upgrade=i,e.upgradeAll=i,e.upgradeDocumentTree=i,e.upgradeSubtree=i,e.takeRecords=i,e["instanceof"]=function(e,t){return e instanceof t}}else r();var a=e.upgradeDocumentTree,s=e.upgradeDocument;if(window.wrap||(window.ShadowDOMPolyfill?(window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(e){return e}),window.HTMLImports&&(window.HTMLImports.__importsParsingHook=function(e){e["import"]&&s(wrap(e["import"]))}),o&&"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,Boolean(t.bubbles),Boolean(t.cancelable),t.detail),n.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})},n},window.CustomEvent.prototype=window.Event.prototype),"complete"===document.readyState||e.flags.eager)t();else if("interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready){var c=window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(c,t)}else t()}(window.CustomElements),function(e){Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(e,r)}})}(window.WebComponents),function(e){"use strict";if(!window.performance){var t=Date.now();window.performance={now:function(){return Date.now()-t}}}window.requestAnimationFrame||(window.requestAnimationFrame=function(){var e=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return e?function(t){return e(function(){t(performance.now())})}:function(e){return window.setTimeout(e,1e3/60)}}()),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(){return window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}}())}(window.WebComponents),function(e){var t=document.createElement("style");t.textContent="body {transition: opacity ease-in 0.2s; } \nbody[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } \n";var n=document.querySelector("head");n.insertBefore(t,n.firstChild)}(window.WebComponents),function(e){window.Platform=e}(window.WebComponents);
var PENDING   = {},
    RESOLVED  = {},
    REJECTED  = {},
    FULFILLED = {};

var Vow = function() {
    var vow = {};
    var _promise = PromiseObj();

    vow.resolve = _promise.resolve;
    vow.reject  = _promise.reject;
    vow.promise = {
        then: _promise.then,
        catch: _promise.catch,
        done: _promise.done
    };

    return vow;

    function PromiseObj() {
        var state = PENDING;
        var value, onResolved, onRejected, onFullfilled, returnPromise;

        var ret = {

            resolve: function (val) {
                value = val;
                state = RESOLVED;

                if (onResolved) {
                    handleResolve(onResolved);
                } else if (onFullfilled) {
                    handleDone(onFullfilled);
                }
            },

            reject: function (err) {
                value = err;
                state = REJECTED;

                if (onRejected) {
                    handleReject(onRejected);
                } else if (onFullfilled) {
                    handleDone(onFullfilled);
                }
            },

            then: function (successCallback) {
                returnPromise = PromiseObj();
                handleResolve(successCallback);

                return {
                    then: returnPromise.then,
                    catch: returnPromise.catch,
                    done: returnPromise.done
                };
            },

            catch: function (failCallback) {
                returnPromise = PromiseObj();
                handleReject(failCallback);

                return {
                    then: returnPromise.then,
                    catch: returnPromise.catch,
                    done: returnPromise.done
                };
            },

            done: function (finallyCallback) {
                handleDone(finallyCallback);
            }
        };

        return ret;

        function handleDone(fn) {
            if (state === PENDING) {
                onFullfilled = fn || 'done';
                return;
            }

            if (state === RESOLVED && typeof fn === 'function') {
                state = FULFILLED;
                return fn.call(this, value);
            }

            if (state === REJECTED) {
                state = FULFILLED;
                throw value;
            }
        }

        function handleResolve(fn) {
            var error;
            if (state === PENDING) {
                onResolved = fn;
            }

            if (state === RESOLVED) {
                if (value && typeof value.then === 'function') {
                    value.then(ret.resolve);
                    return;
                }

                try {
                    value = fn.call(this, value);
                } catch (err) {
                    value = err;
                    error = true;
                }

                if (returnPromise) {
                    if (!error) {
                        returnPromise.resolve(value);
                        return;
                    }
                    returnPromise.reject(value);
                }
            }
        }

        function handleReject(fn) {
            var error;
            if (state === PENDING) {
                onRejected = fn;
            }

            if (state === REJECTED) {
                try {
                    value = fn.call(this, value);
                } catch (err) {
                    value = err;
                    error = true;
                }

                if (returnPromise) {
                    if (!error) {
                        returnPromise.resolve(value);
                        return;
                    }
                    returnPromise.reject(value);
                }
            }

            if (state === RESOLVED) {
                if (returnPromise) {
                    returnPromise.resolve(value);
                }
            }
        }
    }
};

var EventBus = function() {
    var events = {};
    this.register = function(id) {
        return (function(context) {
            var evt = {};
            evt.subscribe = function(event, func) {
                context._subscribe(event, func, id, events);
            };
            evt.publish = function(event, ctx, args) {
                context._publish(event, ctx, args, events);
            };
            evt.unsubscribe = function(event, func) {
                context._unsubscribe(event, func, id, events);
            };
            evt.unsubscribeAll = function(event) {
                context._unsubscribeAll(event, id, events);
            };
            return evt;
        })(this);
    };
};

EventBus.prototype._subscribe = function(event, func, id, events) {
    if (!events[event]) {
        events[event] = {};
    }

    if (!events[event][id]) {
        events[event][id] = [];
    }

    if (typeof func !== 'function') {
        throw new Error('A callback function must be passed in to subscribe');
    }
    
    events[event][id].push(func);
};

EventBus.prototype._publish = function(event, ctx, args, events) {
    ctx = ctx || null;
    args = args || null;

    var eventBucket = events[event];

    if (eventBucket) {
        for (var bucket in eventBucket) {
            var cbQueue = eventBucket[bucket];
            if (Array.isArray(cbQueue)) {
                cbQueue.forEach(makeEachHandler.call(this, ctx, args));
            }
        }
    }

    function makeEachHandler(ctx, args) {
        return function(cb) {
            cb.call(this, ctx, args);
        };
    }
};

EventBus.prototype._unsubscribe = function(event, func, id, events) {
    var bucket = events[event];

    if (bucket) {
        var queue = bucket[id];

        queue.forEach(function(fn, i) {
            if(fn === func) {
                queue.splice(i, 1);
                return;
            }
        }.bind(this));
    }
};

EventBus.prototype._unsubscribeAll = function(event, id, events) {
    if (event) {
        unsubsribeOne(event);
        return;
    } 

    for (var evt in events) {
        unsubsribeOne(evt);
    }

    function unsubsribeOne(event) {
        var bucket = events[event];

        if (bucket && bucket[id]) {
            delete bucket[id];
        }
    }
};

var Factory = {};
var factoryIdGenerator = idGenerator('factory');

Factory._constructor = function(opts) {
    this._initialize(opts);
};

Factory._constructor.prototype._initialize = function(opts) {
    var attributes = {};

    opts = opts || {};

    this.uuid = factoryIdGenerator();
    this.resources = {};
    this.eventBus = opts.eventBus || new EventBus();
    this.eventBus = this.eventBus.register(this.uuid);

    this.set = function(key, val) {
        this._set(key, val, attributes);
    };

    this.unset = function(key) {
        this._unset(key, attributes);
    };

    this.get = function(key) {
        return this._get(key, attributes);
    };

    this.clone = function() {
        return JSON.parse(JSON.stringify(attributes));
    };

    if (typeof this.initialize === 'function') {
        this.initialize.apply(this, arguments);
    }

    this.set(defaults(opts, this.defaults));
    this.eventBus.publish('initialize', this, opts);
};

Factory._constructor.prototype._set = function(key, val, attributes) {
    if (typeof key === 'object' && !Array.isArray(key)) {
        for (var k in key) {
            this._set(k, key[k], attributes);
        }
    }

    if (typeof key === 'string') {
        attributes[key] = val;
        var ret = {};
        ret[key] = val;
        this.eventBus.publish('change', this, ret);
        this.eventBus.publish('change:' + key, this, val);
    }
};

Factory._constructor.prototype._get = function(key, attributes) {
    if (typeof key === 'string') {
        return attributes[key];
    }  else if (typeof key === 'undefined') {
        return attributes;
    }
};

Factory._constructor.prototype._unset = function(key, attributes) {
    if (typeof key === 'string') {
        var ret = {};
        ret[key] = attributes[key];
        delete attributes[key];
        this.eventBus.publish('delete', this, ret);
        this.eventBus.publish('delete:' + key, this, ret[key]);
    } else if (typeof key === 'undefined') {
        for (var k in attributes) {
            this._unset(k, attributes);
        }
    }
};

Factory._constructor.prototype.sync = function(resource, id) {
    this.resources[resource] = resource;

    resource.eventBus.subscribe('change:' + id, function(ctx, attrs) {
        for (var k in attrs) {
            this.set(k, attrs[k]);
        }
    }.bind(this));

    resource.eventBus.subscribe('delete:' + id, function(ctx, attrs) {
        this.unset();
    }.bind(this));
};

Factory.extend = extend;

var serviceIdGenerator = idGenerator('service');

var Service = {};

Service._constructor = function(opts) {
    this._initialize(opts);
};

Service._constructor.prototype._initialize = function(opts) {
    this.uuid = serviceIdGenerator();

    if (typeof this.initialize === 'function') {
        this.initialize.apply(this, arguments);
    }
};

Service._constructor.prototype.subscribeAll = function(target, events) {
    for (var evt in events) {
        var handler = events[evt];
        var fn = this[handler] = this[handler].bind(this);
        target.eventBus.subscribe(evt, fn);
    }
};

Service.extend = extend;

var componentIdGenerator = idGenerator('component');
var componentsStore = {};
var Component = {};

Component.register = function(opts) {
    if (componentsStore[opts.tagName]) {
        return componentsStore[opts.tagName];
    }

    var param = {};

    // Set Prototype of custom element
    var proto = Object.create(HTMLElement.prototype);

    _extendPrototype.call(proto, opts);

    proto.createdCallback = function() {
        var shadow = this.createShadowRoot();
        shadow.appendChild(opts.fragment.cloneNode(true));

        this.uuid = componentIdGenerator();

        if (opts.style) {
            shadow.appendChild(opts.style.cloneNode(true));
        }
        if (opts.onCreate) {
            opts.onCreate.apply(this, arguments);
        }
    };

    proto.attachedCallback = function() {
        if (opts.onAttach) {
            opts.onAttach.apply(this, arguments);
        }
        _addEventListeners.call(this, opts.events);
    };

    proto.detachedCallback = function() {
        if (opts.onDetach) {
            opts.onDetach.apply(this, arguments);
        }
    };

    proto.attributeChangedCallback = function(attrName, oldVal, newVal) {
        if (opts.onAttributesChange) {
            opts.onAttributesChange[attrName].apply(this, [oldVal, newVal]);
        }
    };

    param.prototype = proto;

    // Set base element (Optional)
    if (opts.extends) {
        param.extends = opts.extends;
    }

    // Register custom element
    componentsStore[opts.tagName] = document.registerElement(opts.tagName, param);
    return componentsStore[opts.tagName];
};

Component.extend = function(baseComponent, opts) {
    var Base = componentsStore[baseComponent];
    var param = {};
    // Set Prototype of custom element
    var proto = Object.create(HTMLElement.prototype);

    _extendPrototype.call(proto, opts);

    proto.createdCallback = function() {
        Base.prototype.createdCallback.apply(this, arguments);
        if (opts.onCreate) {
            opts.onCreate.apply(this, arguments);
        }
    };

    proto.attachedCallback = function() {
        Base.prototype.attachedCallback.apply(this, arguments);
        if (opts.onAttach) {
            opts.onAttach.apply(this, arguments);
        }
        _addEventListeners.call(this, opts.events);
    };

    proto.detachedCallback = function() {
        Base.prototype.detachedCallback.apply(this, arguments);
        if (opts.onDetach) {
            opts.onDetach.apply(this, arguments);
        }
    };

    proto.attributeChangedCallback = function(attrName, oldVal, newVal) {
        Base.prototype.attributeChangedCallback.apply(this, arguments);
        if (opts.onAttributesChange) {
            opts.onAttributesChange[attrName].apply(this, [oldVal, newVal]);
        }
    };

    param.prototype = proto;

    // Register custom element
    return document.registerElement(opts.tagName, param);
};

function _addEventListeners(events) {
    for (var evt in events) {
        var param = evt.split(' ');
        var eventName = param[0];
        var element = this.shadowRoot.querySelector(param[1]);
        var handler = events[evt];
        var fn = this[handler] = this[handler].bind(this);
        
        element.addEventListener(eventName, fn);
    }
}

function _extendPrototype(protos) {
    for (var proto in protos) {
        switch (proto) {
            case 'exends':
                break;
            case 'onCreate':
                break;
            case 'onDetach':
                break;
            case 'onAttributesChange':
                break;
            case 'onAttach':
                break;
            case 'tagName':
                break;
            case 'fragment':
                break;
            case 'style':
                break;
            case 'events':
                break;
            default:
                this[proto] = protos[proto];
        }
    }
}

var mixins = {};
var variables = {};

var Stylizer = function() {};

Stylizer.prototype.stringify = function(style) {
    var ret = '';

    for (var selector in style) {
        ret += selector + '{';
        var properties = style[selector];
        for (var prop in properties) {
            var setting = properties[prop];
            ret += prop + ':' + setting + ';';
        }
        ret = ret.slice(0, ret.length - 1);
        ret += '}';
    }

    return ret;
};

Stylizer.prototype.createStyleTag = function(style) {
    var tag = document.createElement('style');
    style = this.stringify(style);
    tag.innerText = style;
    return tag;
};

Stylizer.prototype.registerMixins = function(key, func) {
    mixins[key] = func;
};

Stylizer.prototype.registerVariables = function(key, val) {
    variables[key] = val;
};

Stylizer.prototype.getVariable = function(key) {
    if (!variables[key]) {
        console.error('Variable ' + key + ' does not exist.');
        return;
    }
    return variables[key];
};

Stylizer.prototype.toHex = function(rgb) {
    rgb = rgb.replace(' ', '').split(',');
    return "#" + componentToHex(rgb[0]) + componentToHex(rgb[1]) + componentToHex(rgb[2]);

    function componentToHex(c) {
        var hex = (+c).toString(16);
        return hex.length == 1 ? "0" + hex : hex;
    }
};

Stylizer.prototype.toRGB = function(hex) {
    var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
    return result ? 'rgb(' + [
        parseInt(result[1], 16),
        parseInt(result[2], 16),
        parseInt(result[3], 16)
    ].join(',') + ')' : null;
};

Stylizer.prototype.toRGBa = function(hex, opacity) {
    var result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
    return result ? 'rgba(' + [
        parseInt(result[1], 16),
        parseInt(result[2], 16),
        parseInt(result[3], 16),
        opacity
    ].join(',') + ')' : null;
};

Stylizer.prototype.getMixins = function(key) {
    if (!mixins[key]) {
        console.error('Mixin ' + key + ' does not exist.');
        return;
    }
    return mixins[key];
};

var moduleStore = {};

var Module = function() {};

Module.prototype.export = function(key, func) {
    if (typeof key !== 'string') {
        throw new Error('Module name is not a string.');
    }

    if (typeof func !== 'function') {
        throw new Error('Module is not a function.');
    }
    moduleStore[key] = function(done) {
        done(func());
    };
};

Module.prototype.import = function(modules) {
    var loaded = 0;
    var count  = Object.keys(modules);
    var vow = Vow();
    var ret = {};
    var url;

    _import(count.pop(), vow);

    vow.promise.and = {};
    vow.promise.and.export = function(key, func) {
        moduleStore[key] = function(done) {
            vow.promise
                .then(function(ret) {
                    moduleStore[key] = func.bind(this, ret);
                    return func.call(this, ret);
                }.bind(this))
                .done(done);
        };
    }.bind(this);

    vow.promise.and.import = function(modules) {
        return vow.promise.then(this.import.bind(this, modules));
    }.bind(this);

    return vow.promise;

    function _import(key, promise) {
        var url = modules[key];

        if (typeof key !== 'string') {
            throw new Error('Module name is not a string.');
        }

        if (typeof url !== 'string') {
            throw new Error('URL is not a string.');
        }

        var module = moduleStore[key];
        
        if (!module) {
            var script = document.createElement('script');

            script.type = "text/javascript";
            script.src = url;
            script.onload = function() {
                var defer = Vow();

                console.log('Loading ' + key + '...');

                defer.promise.then(function(data) {
                    ret[key] = data;
                    loaded++;
                    if (count.length === 0) {
                        promise.resolve(ret);
                    } else {
                        _import(count.pop(), promise);
                    }
                });

                script.remove();
                moduleStore[key](defer.resolve);
            }.bind(this, key);

            document.body.appendChild(script);
        } else {
            promise.resolve(module());
        }
    }
};

var Data = Factory.extend({
    ajax: function(opts){
        if (!opts.url) throw new Error('Url is required.');
        if (!opts.type) throw new Error('Request type is required.');

        opts.contentType = opts.contentType || 'application/json';
        opts.encode      = opts.encode || null;
        opts.payload     = opts.payload || null;
        opts.indexBy     = opts.indexBy || 'id';

        return ajax(opts)
                .then(_parse.bind(this))
                .then(_updateStore.bind(this));

        function _updateStore(rsp) {
            if (opts.type.toUpperCase() === 'DELETE') {
                if (Array.isArray(rsp)) {
                    rsp.forEach(function(d) {
                        this.unset(d[opts.indexBy], d);
                    }.bind(this));
                } else if (typeof rsp === 'object') {
                    this.unset(rsp[opts.indexBy], rsp);
                }
            } else {
                if (Array.isArray(rsp)) {
                    rsp.forEach(function(d) {
                        this.set(d[opts.indexBy], d);
                    }.bind(this));
                } else if (typeof rsp === 'object') {
                    this.set(rsp[opts.indexBy], rsp);
                }
            }
            return rsp;
        }

        function _parse(rsp) {
            if (opts.parse) {
                return opts.parse(rsp);
            } 
            return this.parse(rsp);
        }
    },

    parse: function(rsp) {
        return JSON.parse(rsp);
    }
});

var datastore = {};
var Resource = function() {};

Resource.prototype.register = function(name) {
    if (datastore[name]) {
        throw new Error('Resource ' + name + ' already exist.');
    }

    datastore[name] = new Data();
    return datastore[name];
};

Resource.prototype.get = function(name) {
    return datastore[name] ? datastore[name] : this.register(name);
};

var Renderer = function(){};

Renderer.prototype.createTemplate = function() {
    return new Template();
};

var Template = function(){
    this._queue = [];
};

//////////////////////////////////////////////////////
/////////////// DOM Templating methods ///////////////
//////////////////////////////////////////////////////

// Each of the methods below push a command object to a command queue.
// The command queue will be executed by .render to create DOM fragments.
Template.prototype.open         = queueCommand('openTag');
Template.prototype.addClass     = queueCommand('addClass');
Template.prototype.text         = queueCommand('text');
Template.prototype.attr         = queueCommand('attribute');
Template.prototype.style        = queueCommand('style');
Template.prototype.close        = queueCommand('closeTag');
Template.prototype.if           = queueCommand('if');
Template.prototype.else         = queueCommand('else');
Template.prototype.each         = queueCommand('loop');
Template.prototype.done         = queueCommand('done');
Template.prototype.xif          = Template.prototype.done; 
Template.prototype.xeach        = Template.prototype.done;

function queueCommand(commandName) {
    return function() {
        this._queue.push({
            action: commandName,
            detail: Array.prototype.slice.call(arguments)
        });
        return this;
    };
}

//////////////////////////////////////////////////////
/////////////////////// Render ///////////////////////
//////////////////////////////////////////////////////

Template.prototype.render = function(data) {
    // Root element to store DOMs
    var root            = document.createDocumentFragment(),
    // Stacks to reference current context
        elements        = [],
        conditionals    = [],
        loops           = [],
        states          = [],
    // Reference index for current execution
        execIndex       = 0,
        el, condition, loop;

    handleCommand.call(this, this._queue[execIndex], data);

    return root;

    function handleCommand(command, execData) {
        // Grab current state: LOOP, CONDITIONAL, or undefined
        var state = getLastFrom(states);

        // Base case: exit if no command
        if (!command) {
            return;
        }

        // Change data in current execuation if in a loop
        // From [{a: 'a'}, {b: 'b'}, {c: 'c'}] to {a: 'a'}
        if (state === 'LOOP') {
            setDataContext();
        }

        // Handle IF, ELSE, EACH, or DONE
        // These methods change state of rendering
        handleStateActions();

        // Exit if condition is not met
        if ((state === 'CONDITIONAL' && !getLastFrom(conditionals)) || (state === 'LOOP' && !execData)) {
            handleCommand.call(this, this._queue[++execIndex], execData);
            return;
        }

        // Handle CREATE, APPEND, STYLE, ATTR, TEXT
        // These methods are purely rendering and do not change rendering state
        handleCommonActions();

        // Increment index for next execution
        execIndex++;

        // Execute next command
        handleCommand.call(this, this._queue[execIndex], execData);
        
        function setDataContext() {
            loop = getLastFrom(loops);
            execData = loop.data[loop.index];
        }

        function handleStateActions() {
            if (command.action === 'loop') {
                handleLoop();
            }

            if (command.action === 'done') {
                handleDone();
            }
            
            if (command.action === 'if') {
                handleIf();
            }

            if (command.action === 'else') {
                handleElse();
            }
        }

        function handleLoop() {
            states.push('LOOP');
            loops.push({
                data: evaluate(execData, command.detail[0]),
                index: 0,
                start: execIndex
            });
        }

        function handleDone() {
            states.pop();
            if (state === 'CONDITIONAL') {
                conditionals.pop();
            } else if (state === 'LOOP') {
                loop = getLastFrom(loops);
                loop.index = loop.index + 1;
                // If current loop is not done, set state back to loop
                // and set next execution at start of loop
                if (loop.index < loop.data.length) {
                    execIndex = loop.start;
                    states.push('LOOP');
                } else {
                    loops.pop();
                }
            }
        }

        function handleIf() {
            states.push('CONDITIONAL');
            condition = evaluate(execData, command.detail[0]);
            conditionals.push(condition);
        }

        function handleElse() {
            condition = !conditionals.pop();
            conditionals.push(condition);
        }

        function handleCommonActions() {
            switch (command.action) {
                case 'openTag':
                    elements.push(createTag.apply(null, command.detail));
                    break;
                case 'addClass':
                    el = getLastFrom(elements);
                    addClass.apply(el, [evaluate(execData, command.detail[0])]);
                    break;
                case 'style':
                    el = getLastFrom(elements);
                    addStyle.apply(el, [evaluate(execData, command.detail[0]), evaluate(execData, command.detail[1])]);
                    break;
                case 'attribute':
                    el = getLastFrom(elements);
                    addAttribute.apply(el, [evaluate(execData, command.detail[0]), evaluate(execData, command.detail[1])]);
                    break;
                case 'text':
                    el = getLastFrom(elements);
                    addText.apply(el, [evaluate(execData, command.detail[0])]);
                    break;
                case 'closeTag':
                    el = elements.pop();
                    if (elements.length === 0) {
                        root.appendChild(el);
                    } else {
                        getLastFrom(elements).appendChild(el);
                    }
                    break;
            }
        }
    }
};

//////////////////////////////////////////////////////
/////////////////////// Patch ////////////////////////
//////////////////////////////////////////////////////

Template.prototype.patch = function(root, data) {
    var frag = this.render(data);

    dfPatch(root, frag);

    function dfPatch(from, to) {
        var fromNode, toNode;
        var length = Math.max(from.childNodes.length, to.childNodes.length);

        for (var i = 0; i < length; i++) {
            fromNode = from.childNodes[i];
            toNode   = to.childNodes[i];

            if (!toNode && fromNode) {
                removeAllAfter(from, i);
                return;
            } else if (!fromNode && toNode) {
                from.appendChild(toNode.cloneNode(true));
            } else if (fromNode.tagName !== toNode.tagName) {
                from.replaceChild(toNode.cloneNode(true), fromNode);
            } else {
                patchNode(fromNode, toNode);
                dfPatch(fromNode, toNode);
            }
        }
    }

    function removeAllAfter(node, index) {
        for (var i = node.childNodes.length - 1; i >= index; i--) {
            node.childNodes[i].remove();
        }
    }

    function patchNode(from, to) {
        patchClass(from, to);
        patchStyle(from, to);
        patchAttributes(from, to);
        patchText(from, to);
    }

    function patchClass(from, to) {
        var map;
        var toClasses   = to.className ? to.className.split(' ') : [];
        var fromClasses = from.className ? from.className.split(' ') : [];
        
        map = toClasses.reduce(function(accumulator, cls) {
            if (cls === '') {
                return accumulator;
            }
            addClass.call(from, cls);
            accumulator[cls] = cls;
            return accumulator;
        }, {});

        fromClasses.forEach(function(cls) {
            if (!map[cls]) {
                removeClass.call(from, cls);
            }
        });
    }

    function patchText(from, to) {
        if (from.textContent !== to.textContent) {
            from.textContent = to.textContent;
        }
    }

    function patchStyle(from, to) {
        var map = {};
        var styleKey, styleVal, fromKeys;

        if (to.style) {
            for (var i = 0; i < to.style.length; i++) {
                styleKey = to.style[i];
                styleVal = to.style[to.style[i]];
                addStyle.call(from, styleKey, styleVal);
                map[styleKey] = styleVal;
            }
        }

        if (from.style) {
            fromKeys = Array.prototype.slice.call(from.style);
            for (var j = 0; j < fromKeys.length; j++) {
                styleKey = fromKeys[j];
                if (!map[styleKey]) {
                    addStyle.call(from, styleKey, '');
                }
            }
        }
    }

    function patchAttributes(from, to) {
        var map = {};
        var attr, attrKey, attrVal, fromKeys;

        if (to.attributes) {
            for (var i = 0; i < to.attributes.length; i++) {
                attr = to.attributes[i];
                attrKey = attr.name;
                if (attrKey !== 'style' && attrKey !== 'class') {
                    from.setAttribute(attrKey, attr.value);
                    map[attrKey] = attr.value;                 
                }
            }
        }

        if (from.attributes) {
            fromKeys = Array.prototype.slice.call(from.attributes);
            for (var j = 0; j < fromKeys.length; j++) {
                attr = fromKeys[j];
                attrKey = attr.name;
                if (attrKey !== 'style' && attrKey !== 'class') {
                    if (!map[attrKey]) {
                        from.setAttribute(attrKey, '');
                    }
                }
            }
        }
    }

};

//////////////////////////////////////////////////////
/////////////////// Helper Methods ///////////////////
//////////////////////////////////////////////////////

function createTag(tag) {
    var tagName = parseTag(tag);
    var el      = document.createElement(tagName[0]);

    if (tagName[1] === '.') {
        el.className = tagName[2];
    } else if (tagName[1] === '#') {
        el.id = tagName[2];
    }

    return el;
}

function addClass(className) {
    var separator = this.className.length > 0 ? ' ' : '';
    className = typeof className === 'string' ? className : '';

    if (!hasClass(this, className)) {
        this.className += separator + className;
    }
}

function removeClass(className) {
    if (hasClass(this, className)) {
        var old = this.className;
        var out = old.replace(new RegExp('(\\s|^)'+className+'(\\s|$)'), '');
        this.className = out;
    }
}

function addStyle(attr, val) {
    if (this.style[attr] !== val) {
        this.style[attr] = val;
    }
}

function addAttribute(attr, val) {
    this.setAttribute(attr, typeof val === 'undefined' ? '' : val);
}

function addText(content) {
    this.textContent = content;
}

function getLastFrom(array) {
    return array[array.length - 1];
}

function hasClass(el, className) {
  return !!el.className.match(new RegExp('(\\s|^)'+className+'(\\s|$)'));
}

function parseTag(tag) {
    tag = tag.replace(/[.#]/, function(d) { return ',' + d + ',';})
             .split(',');
    return tag;
}

function evaluate(data, funcOrVal) {
    switch (typeof funcOrVal) {
        case 'function':
            return funcOrVal.call(this, data);
        default:
            return funcOrVal;

    }
}

var gEventBus = new EventBus();

var Trio = {
    Factory: Factory,
    Service: Service,
    Component: Component,
    Vow: Vow,
    Stylizer: new Stylizer(),
    Renderer: new Renderer(),
    Module: new Module(),
    Resource: new Resource(),
    VERSION: '0.1.2'
};

Trio.registerGlobalEventBus = function(id) {
    return gEventBus.register(id);
};

if (module && module.exports) {
    module.exports = Trio;
} else {
    window.Trio = Trio;
}

})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFqYXguanMiLCJkZWZhdWx0cy5qcyIsImV4dGVuZC5qcyIsImlkR2VuZXJhdG9yLmpzIiwicGFyYW0uanMiLCJ3ZWJjb21wb25lbnRzLmpzIiwidm93LmpzIiwiZXZlbnRCdXMuanMiLCJmYWN0b3J5LmpzIiwic2VydmljZS5qcyIsImNvbXBvbmVudC5qcyIsInN0eWxpemVyLmpzIiwibW9kdWxlLmpzIiwicmVzb3VyY2UuanMiLCJyZW5kZXJlci5qcyIsImluZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDOUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNWQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN0Q0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNUQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ1pBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNiQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3pKQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzdGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDOUZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN6QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzlJQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ2pGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ3ZGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQy9EQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNsWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6InRyaW8uanMiLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBhamF4KG9wdHMpIHtcbiAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG4gICAgdmFyIHZvdyA9IFZvdygpO1xuXG4gICAgaWYgKG9wdHMuZW5jb2RlKSB7XG4gICAgICAgIG9wdHMudXJsICs9IGVuY29kZVVSSShvcHRzLmVuY29kZShvcHRzLnBheWxvYWQpKTtcbiAgICB9XG5cbiAgICB4aHIub3BlbihvcHRzLnR5cGUudG9VcHBlckNhc2UoKSwgb3B0cy51cmwpO1xuICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKCdDb250ZW50LVR5cGUnLCBvcHRzLmNvbnRlbnRUeXBlKTtcblxuICAgIGZvciAodmFyIGhlYWRlciBpbiBvcHRzLmhlYWRlcnMpIHtcbiAgICAgICAgeGhyLnNldFJlcXVlc3RIZWFkZXIoaGVhZGVyLCBvcHRzLmhlYWRlcnNbaGVhZGVyXSk7XG4gICAgfVxuXG4gICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoeGhyLnN0YXR1cyA+PSAyMDAgJiYgeGhyLnN0YXR1cyA8PSAyOTkpIHtcbiAgICAgICAgICAgIHZvdy5yZXNvbHZlKHhoci5yZXNwb25zZVRleHQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdm93LnJlamVjdCh4aHIucmVzcG9uc2VUZXh0KTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBpZiAob3B0cy5lbmNvZGUpIHtcbiAgICAgICAgeGhyLnNlbmQoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICB4aHIuc2VuZChKU09OLnN0cmluZ2lmeShvcHRzLnBheWxvYWQpKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdm93LnByb21pc2U7XG59IiwiZnVuY3Rpb24gZGVmYXVsdHMob2JqLCBkZWYpIHtcbiAgICBkZWYgPSBkZWYgfHwge307XG4gICAgXG4gICAgZm9yICh2YXIga2V5IGluIGRlZikge1xuICAgICAgICBpZiAoIW9ialtrZXldKSB7XG4gICAgICAgICAgICBvYmpba2V5XSA9IGRlZltrZXldO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG9iajtcbn0iLCJmdW5jdGlvbiBleHRlbmQobWV0aG9kcykge1xuICAgIHZhciBwYXJlbnQgPSB0aGlzLl9jb25zdHJ1Y3RvcjtcblxuICAgIGlmICghcGFyZW50KSB7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB2YXIgc3RhdGljQXR0ciA9IHt9O1xuICAgIHZhciBjaGlsZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBmb3IgKHZhciBrZXkgaW4gc3RhdGljQXR0cikge1xuICAgICAgICAgICAgdGhpc1trZXldID0gc3RhdGljQXR0cltrZXldO1xuICAgICAgICB9XG4gICAgICAgIHBhcmVudC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgIH07XG4gICAgXG4gICAgdmFyIGV4dGVuZGVkID0ge307XG5cbiAgICBmb3IgKHZhciBwcm9wIGluIHBhcmVudC5wcm90b3R5cGUpIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChwYXJlbnQucHJvdG90eXBlLCBwcm9wKSkge1xuICAgICAgICAgICAgZXh0ZW5kZWRbcHJvcF0gPSBwYXJlbnQucHJvdG90eXBlW3Byb3BdO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZm9yICh2YXIgbWV0IGluIG1ldGhvZHMpIHtcbiAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtZXRob2RzLCBtZXQpKSB7XG4gICAgICAgICAgICB2YXIgbWV0aG9kID0gbWV0aG9kc1ttZXRdO1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBtZXRob2QgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICBleHRlbmRlZFttZXRdID0gbWV0aG9kc1ttZXRdO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBzdGF0aWNBdHRyW21ldF0gPSBtZXRob2RzW21ldF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBjaGlsZC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKGV4dGVuZGVkKTtcblxuICAgIHJldHVybiBjaGlsZDtcbn1cbiIsImZ1bmN0aW9uIGlkR2VuZXJhdG9yKHN0cikge1xuICAgIHZhciBjb3VudCA9IDE7XG5cbiAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBpZCA9IHN0ciArIGNvdW50O1xuICAgICAgICBjb3VudCsrO1xuICAgICAgICByZXR1cm4gaWQ7XG4gICAgfTtcbn1cbiIsImZ1bmN0aW9uIHBhcmFtKG9iamVjdCkge1xuICAgIHZhciBlbmNvZGVkU3RyaW5nID0gJyc7XG4gICAgZm9yICh2YXIgcHJvcCBpbiBvYmplY3QpIHtcbiAgICAgICAgaWYgKG9iamVjdC5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICAgICAgaWYgKGVuY29kZWRTdHJpbmcubGVuZ3RoID4gMCkge1xuICAgICAgICAgICAgICAgIGVuY29kZWRTdHJpbmcgKz0gJyYnO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZW5jb2RlZFN0cmluZyArPSBlbmNvZGVVUkkocHJvcCArICc9JyArIG9iamVjdFtwcm9wXSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIGVuY29kZWRTdHJpbmc7XG59XG4iLCIvKipcbiAqIEBsaWNlbnNlXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTQgVGhlIFBvbHltZXIgUHJvamVjdCBBdXRob3JzLiBBbGwgcmlnaHRzIHJlc2VydmVkLlxuICogVGhpcyBjb2RlIG1heSBvbmx5IGJlIHVzZWQgdW5kZXIgdGhlIEJTRCBzdHlsZSBsaWNlbnNlIGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9MSUNFTlNFLnR4dFxuICogVGhlIGNvbXBsZXRlIHNldCBvZiBhdXRob3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQVVUSE9SUy50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgY29udHJpYnV0b3JzIG1heSBiZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vQ09OVFJJQlVUT1JTLnR4dFxuICogQ29kZSBkaXN0cmlidXRlZCBieSBHb29nbGUgYXMgcGFydCBvZiB0aGUgcG9seW1lciBwcm9qZWN0IGlzIGFsc29cbiAqIHN1YmplY3QgdG8gYW4gYWRkaXRpb25hbCBJUCByaWdodHMgZ3JhbnQgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL1BBVEVOVFMudHh0XG4gKi9cbi8vIEB2ZXJzaW9uIDAuNy4xMi04NmEwNDFiXG53aW5kb3cuV2ViQ29tcG9uZW50cz13aW5kb3cuV2ViQ29tcG9uZW50c3x8e30sZnVuY3Rpb24oZSl7dmFyIHQ9ZS5mbGFnc3x8e30sbj1cIndlYmNvbXBvbmVudHMuanNcIixyPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3NjcmlwdFtzcmMqPVwiJytuKydcIl0nKTtpZighdC5ub09wdHMpe2lmKGxvY2F0aW9uLnNlYXJjaC5zbGljZSgxKS5zcGxpdChcIiZcIikuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgbixyPWUuc3BsaXQoXCI9XCIpO3JbMF0mJihuPXJbMF0ubWF0Y2goL3djLSguKykvKSkmJih0W25bMV1dPXJbMV18fCEwKX0pLHIpZm9yKHZhciBvLGk9MDtvPXIuYXR0cmlidXRlc1tpXTtpKyspXCJzcmNcIiE9PW8ubmFtZSYmKHRbby5uYW1lXT1vLnZhbHVlfHwhMCk7aWYodC5sb2cmJnQubG9nLnNwbGl0KXt2YXIgYT10LmxvZy5zcGxpdChcIixcIik7dC5sb2c9e30sYS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3QubG9nW2VdPSEwfSl9ZWxzZSB0LmxvZz17fX10LnNoYWRvdz10LnNoYWRvd3x8dC5zaGFkb3dkb218fHQucG9seWZpbGwsXCJuYXRpdmVcIj09PXQuc2hhZG93P3Quc2hhZG93PSExOnQuc2hhZG93PXQuc2hhZG93fHwhSFRNTEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3QsdC5yZWdpc3RlciYmKHdpbmRvdy5DdXN0b21FbGVtZW50cz13aW5kb3cuQ3VzdG9tRWxlbWVudHN8fHtmbGFnczp7fX0sd2luZG93LkN1c3RvbUVsZW1lbnRzLmZsYWdzLnJlZ2lzdGVyPXQucmVnaXN0ZXIpLGUuZmxhZ3M9dH0oV2ViQ29tcG9uZW50cyksV2ViQ29tcG9uZW50cy5mbGFncy5zaGFkb3cmJihcInVuZGVmaW5lZFwiPT10eXBlb2YgV2Vha01hcCYmIWZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LmRlZmluZVByb3BlcnR5LHQ9RGF0ZS5ub3coKSUxZTksbj1mdW5jdGlvbigpe3RoaXMubmFtZT1cIl9fc3RcIisoMWU5Kk1hdGgucmFuZG9tKCk+Pj4wKSsodCsrICtcIl9fXCIpfTtuLnByb3RvdHlwZT17c2V0OmZ1bmN0aW9uKHQsbil7dmFyIHI9dFt0aGlzLm5hbWVdO3JldHVybiByJiZyWzBdPT09dD9yWzFdPW46ZSh0LHRoaXMubmFtZSx7dmFsdWU6W3Qsbl0sd3JpdGFibGU6ITB9KSx0aGlzfSxnZXQ6ZnVuY3Rpb24oZSl7dmFyIHQ7cmV0dXJuKHQ9ZVt0aGlzLm5hbWVdKSYmdFswXT09PWU/dFsxXTp2b2lkIDB9LFwiZGVsZXRlXCI6ZnVuY3Rpb24oZSl7dmFyIHQ9ZVt0aGlzLm5hbWVdO3JldHVybiB0JiZ0WzBdPT09ZT8odFswXT10WzFdPXZvaWQgMCwhMCk6ITF9LGhhczpmdW5jdGlvbihlKXt2YXIgdD1lW3RoaXMubmFtZV07cmV0dXJuIHQ/dFswXT09PWU6ITF9fSx3aW5kb3cuV2Vha01hcD1ufSgpLHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbD17fSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KCl7aWYoXCJ1bmRlZmluZWRcIiE9dHlwZW9mIGNocm9tZSYmY2hyb21lLmFwcCYmY2hyb21lLmFwcC5ydW50aW1lKXJldHVybiExO2lmKG5hdmlnYXRvci5nZXREZXZpY2VTdG9yYWdlKXJldHVybiExO3RyeXt2YXIgZT1uZXcgRnVuY3Rpb24oXCJyZXR1cm4gdHJ1ZTtcIik7cmV0dXJuIGUoKX1jYXRjaCh0KXtyZXR1cm4hMX19ZnVuY3Rpb24gbihlKXtpZighZSl0aHJvdyBuZXcgRXJyb3IoXCJBc3NlcnRpb24gZmFpbGVkXCIpfWZ1bmN0aW9uIHIoZSx0KXtmb3IodmFyIG49Vyh0KSxyPTA7cjxuLmxlbmd0aDtyKyspe3ZhciBvPW5bcl07QShlLG8sRih0LG8pKX1yZXR1cm4gZX1mdW5jdGlvbiBvKGUsdCl7Zm9yKHZhciBuPVcodCkscj0wO3I8bi5sZW5ndGg7cisrKXt2YXIgbz1uW3JdO3N3aXRjaChvKXtjYXNlXCJhcmd1bWVudHNcIjpjYXNlXCJjYWxsZXJcIjpjYXNlXCJsZW5ndGhcIjpjYXNlXCJuYW1lXCI6Y2FzZVwicHJvdG90eXBlXCI6Y2FzZVwidG9TdHJpbmdcIjpjb250aW51ZX1BKGUsbyxGKHQsbykpfXJldHVybiBlfWZ1bmN0aW9uIGkoZSx0KXtmb3IodmFyIG49MDtuPHQubGVuZ3RoO24rKylpZih0W25daW4gZSlyZXR1cm4gdFtuXX1mdW5jdGlvbiBhKGUsdCxuKXtVLnZhbHVlPW4sQShlLHQsVSl9ZnVuY3Rpb24gcyhlLHQpe3ZhciBuPWUuX19wcm90b19ffHxPYmplY3QuZ2V0UHJvdG90eXBlT2YoZSk7aWYocSl0cnl7VyhuKX1jYXRjaChyKXtuPW4uX19wcm90b19ffXZhciBvPVIuZ2V0KG4pO2lmKG8pcmV0dXJuIG87dmFyIGk9cyhuKSxhPUUoaSk7cmV0dXJuIGcobixhLHQpLGF9ZnVuY3Rpb24gYyhlLHQpe3coZSx0LCEwKX1mdW5jdGlvbiBsKGUsdCl7dyh0LGUsITEpfWZ1bmN0aW9uIHUoZSl7cmV0dXJuL15vblthLXpdKyQvLnRlc3QoZSl9ZnVuY3Rpb24gZChlKXtyZXR1cm4vXlthLXpBLVpfJF1bYS16QS1aXyQwLTldKiQvLnRlc3QoZSl9ZnVuY3Rpb24gcChlKXtyZXR1cm4gayYmZChlKT9uZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpcy5fX2ltcGw0Y2YxZTc4MmhnX18uXCIrZSk6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fX2ltcGw0Y2YxZTc4MmhnX19bZV19fWZ1bmN0aW9uIGgoZSl7cmV0dXJuIGsmJmQoZSk/bmV3IEZ1bmN0aW9uKFwidlwiLFwidGhpcy5fX2ltcGw0Y2YxZTc4MmhnX18uXCIrZStcIiA9IHZcIik6ZnVuY3Rpb24odCl7dGhpcy5fX2ltcGw0Y2YxZTc4MmhnX19bZV09dH19ZnVuY3Rpb24gZihlKXtyZXR1cm4gayYmZChlKT9uZXcgRnVuY3Rpb24oXCJyZXR1cm4gdGhpcy5fX2ltcGw0Y2YxZTc4MmhnX18uXCIrZStcIi5hcHBseSh0aGlzLl9faW1wbDRjZjFlNzgyaGdfXywgYXJndW1lbnRzKVwiKTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9faW1wbDRjZjFlNzgyaGdfX1tlXS5hcHBseSh0aGlzLl9faW1wbDRjZjFlNzgyaGdfXyxhcmd1bWVudHMpfX1mdW5jdGlvbiBtKGUsdCl7dHJ5e3JldHVybiBPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsdCl9Y2F0Y2gobil7cmV0dXJuIEJ9fWZ1bmN0aW9uIHcodCxuLHIsbyl7Zm9yKHZhciBpPVcodCksYT0wO2E8aS5sZW5ndGg7YSsrKXt2YXIgcz1pW2FdO2lmKFwicG9seW1lckJsYWNrTGlzdF9cIiE9PXMmJiEocyBpbiBufHx0LnBvbHltZXJCbGFja0xpc3RfJiZ0LnBvbHltZXJCbGFja0xpc3RfW3NdKSl7cSYmdC5fX2xvb2t1cEdldHRlcl9fKHMpO3ZhciBjLGwsZD1tKHQscyk7aWYoXCJmdW5jdGlvblwiIT10eXBlb2YgZC52YWx1ZSl7dmFyIHc9dShzKTtjPXc/ZS5nZXRFdmVudEhhbmRsZXJHZXR0ZXIocyk6cChzKSwoZC53cml0YWJsZXx8ZC5zZXR8fFYpJiYobD13P2UuZ2V0RXZlbnRIYW5kbGVyU2V0dGVyKHMpOmgocykpO3ZhciB2PVZ8fGQuY29uZmlndXJhYmxlO0EobixzLHtnZXQ6YyxzZXQ6bCxjb25maWd1cmFibGU6dixlbnVtZXJhYmxlOmQuZW51bWVyYWJsZX0pfWVsc2UgciYmKG5bc109ZihzKSl9fX1mdW5jdGlvbiB2KGUsdCxuKXtpZihudWxsIT1lKXt2YXIgcj1lLnByb3RvdHlwZTtnKHIsdCxuKSxvKHQsZSl9fWZ1bmN0aW9uIGcoZSx0LHIpe3ZhciBvPXQucHJvdG90eXBlO24odm9pZCAwPT09Ui5nZXQoZSkpLFIuc2V0KGUsdCksSS5zZXQobyxlKSxjKGUsbyksciYmbChvLHIpLGEobyxcImNvbnN0cnVjdG9yXCIsdCksdC5wcm90b3R5cGU9b31mdW5jdGlvbiBiKGUsdCl7cmV0dXJuIFIuZ2V0KHQucHJvdG90eXBlKT09PWV9ZnVuY3Rpb24geShlKXt2YXIgdD1PYmplY3QuZ2V0UHJvdG90eXBlT2YoZSksbj1zKHQpLHI9RShuKTtyZXR1cm4gZyh0LHIsZSkscn1mdW5jdGlvbiBFKGUpe2Z1bmN0aW9uIHQodCl7ZS5jYWxsKHRoaXMsdCl9dmFyIG49T2JqZWN0LmNyZWF0ZShlLnByb3RvdHlwZSk7cmV0dXJuIG4uY29uc3RydWN0b3I9dCx0LnByb3RvdHlwZT1uLHR9ZnVuY3Rpb24gXyhlKXtyZXR1cm4gZSYmZS5fX2ltcGw0Y2YxZTc4MmhnX199ZnVuY3Rpb24gUyhlKXtyZXR1cm4hXyhlKX1mdW5jdGlvbiBUKGUpe2lmKG51bGw9PT1lKXJldHVybiBudWxsO24oUyhlKSk7dmFyIHQ9ZS5fX3dyYXBwZXI4ZTNkZDkzYTYwX187cmV0dXJuIG51bGwhPXQ/dDplLl9fd3JhcHBlcjhlM2RkOTNhNjBfXz1uZXcocyhlLGUpKShlKX1mdW5jdGlvbiBNKGUpe3JldHVybiBudWxsPT09ZT9udWxsOihuKF8oZSkpLGUuX19pbXBsNGNmMWU3ODJoZ19fKX1mdW5jdGlvbiBPKGUpe3JldHVybiBlLl9faW1wbDRjZjFlNzgyaGdfX31mdW5jdGlvbiBMKGUsdCl7dC5fX2ltcGw0Y2YxZTc4MmhnX189ZSxlLl9fd3JhcHBlcjhlM2RkOTNhNjBfXz10fWZ1bmN0aW9uIE4oZSl7cmV0dXJuIGUmJl8oZSk/TShlKTplfWZ1bmN0aW9uIEMoZSl7cmV0dXJuIGUmJiFfKGUpP1QoZSk6ZX1mdW5jdGlvbiBqKGUsdCl7bnVsbCE9PXQmJihuKFMoZSkpLG4odm9pZCAwPT09dHx8Xyh0KSksZS5fX3dyYXBwZXI4ZTNkZDkzYTYwX189dCl9ZnVuY3Rpb24gRChlLHQsbil7Ry5nZXQ9bixBKGUucHJvdG90eXBlLHQsRyl9ZnVuY3Rpb24gSChlLHQpe0QoZSx0LGZ1bmN0aW9uKCl7cmV0dXJuIFQodGhpcy5fX2ltcGw0Y2YxZTc4MmhnX19bdF0pfSl9ZnVuY3Rpb24geChlLHQpe2UuZm9yRWFjaChmdW5jdGlvbihlKXt0LmZvckVhY2goZnVuY3Rpb24odCl7ZS5wcm90b3R5cGVbdF09ZnVuY3Rpb24oKXt2YXIgZT1DKHRoaXMpO3JldHVybiBlW3RdLmFwcGx5KGUsYXJndW1lbnRzKX19KX0pfXZhciBSPW5ldyBXZWFrTWFwLEk9bmV3IFdlYWtNYXAsUD1PYmplY3QuY3JlYXRlKG51bGwpLGs9dCgpLEE9T2JqZWN0LmRlZmluZVByb3BlcnR5LFc9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMsRj1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yLFU9e3ZhbHVlOnZvaWQgMCxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMSx3cml0YWJsZTohMH07Vyh3aW5kb3cpO3ZhciBxPS9GaXJlZm94Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLEI9e2dldDpmdW5jdGlvbigpe30sc2V0OmZ1bmN0aW9uKGUpe30sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9LFY9ZnVuY3Rpb24oKXt2YXIgZT1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKE5vZGUucHJvdG90eXBlLFwibm9kZVR5cGVcIik7cmV0dXJuIGUmJiFlLmdldCYmIWUuc2V0fSgpLEc9e2dldDp2b2lkIDAsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9O2UuYXNzZXJ0PW4sZS5jb25zdHJ1Y3RvclRhYmxlPVIsZS5kZWZpbmVHZXR0ZXI9RCxlLmRlZmluZVdyYXBHZXR0ZXI9SCxlLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyPXgsZS5pc0lkZW50aWZpZXJOYW1lPWQsZS5pc1dyYXBwZXI9XyxlLmlzV3JhcHBlckZvcj1iLGUubWl4aW49cixlLm5hdGl2ZVByb3RvdHlwZVRhYmxlPUksZS5vbmVPZj1pLGUucmVnaXN0ZXJPYmplY3Q9eSxlLnJlZ2lzdGVyV3JhcHBlcj12LGUucmV3cmFwPWosZS5zZXRXcmFwcGVyPUwsZS51bnNhZmVVbndyYXA9TyxlLnVud3JhcD1NLGUudW53cmFwSWZOZWVkZWQ9TixlLndyYXA9VCxlLndyYXBJZk5lZWRlZD1DLGUud3JhcHBlcnM9UH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUsdCxuKXtyZXR1cm57aW5kZXg6ZSxyZW1vdmVkOnQsYWRkZWRDb3VudDpufX1mdW5jdGlvbiBuKCl7fXZhciByPTAsbz0xLGk9MixhPTM7bi5wcm90b3R5cGU9e2NhbGNFZGl0RGlzdGFuY2VzOmZ1bmN0aW9uKGUsdCxuLHIsbyxpKXtmb3IodmFyIGE9aS1vKzEscz1uLXQrMSxjPW5ldyBBcnJheShhKSxsPTA7YT5sO2wrKyljW2xdPW5ldyBBcnJheShzKSxjW2xdWzBdPWw7Zm9yKHZhciB1PTA7cz51O3UrKyljWzBdW3VdPXU7Zm9yKHZhciBsPTE7YT5sO2wrKylmb3IodmFyIHU9MTtzPnU7dSsrKWlmKHRoaXMuZXF1YWxzKGVbdCt1LTFdLHJbbytsLTFdKSljW2xdW3VdPWNbbC0xXVt1LTFdO2Vsc2V7dmFyIGQ9Y1tsLTFdW3VdKzEscD1jW2xdW3UtMV0rMTtjW2xdW3VdPXA+ZD9kOnB9cmV0dXJuIGN9LHNwbGljZU9wZXJhdGlvbnNGcm9tRWRpdERpc3RhbmNlczpmdW5jdGlvbihlKXtmb3IodmFyIHQ9ZS5sZW5ndGgtMSxuPWVbMF0ubGVuZ3RoLTEscz1lW3RdW25dLGM9W107dD4wfHxuPjA7KWlmKDAhPXQpaWYoMCE9bil7dmFyIGwsdT1lW3QtMV1bbi0xXSxkPWVbdC0xXVtuXSxwPWVbdF1bbi0xXTtsPXA+ZD91PmQ/ZDp1OnU+cD9wOnUsbD09dT8odT09cz9jLnB1c2gocik6KGMucHVzaChvKSxzPXUpLHQtLSxuLS0pOmw9PWQ/KGMucHVzaChhKSx0LS0scz1kKTooYy5wdXNoKGkpLG4tLSxzPXApfWVsc2UgYy5wdXNoKGEpLHQtLTtlbHNlIGMucHVzaChpKSxuLS07cmV0dXJuIGMucmV2ZXJzZSgpLGN9LGNhbGNTcGxpY2VzOmZ1bmN0aW9uKGUsbixzLGMsbCx1KXt2YXIgZD0wLHA9MCxoPU1hdGgubWluKHMtbix1LWwpO2lmKDA9PW4mJjA9PWwmJihkPXRoaXMuc2hhcmVkUHJlZml4KGUsYyxoKSkscz09ZS5sZW5ndGgmJnU9PWMubGVuZ3RoJiYocD10aGlzLnNoYXJlZFN1ZmZpeChlLGMsaC1kKSksbis9ZCxsKz1kLHMtPXAsdS09cCxzLW49PTAmJnUtbD09MClyZXR1cm5bXTtpZihuPT1zKXtmb3IodmFyIGY9dChuLFtdLDApO3U+bDspZi5yZW1vdmVkLnB1c2goY1tsKytdKTtyZXR1cm5bZl19aWYobD09dSlyZXR1cm5bdChuLFtdLHMtbildO2Zvcih2YXIgbT10aGlzLnNwbGljZU9wZXJhdGlvbnNGcm9tRWRpdERpc3RhbmNlcyh0aGlzLmNhbGNFZGl0RGlzdGFuY2VzKGUsbixzLGMsbCx1KSksZj12b2lkIDAsdz1bXSx2PW4sZz1sLGI9MDtiPG0ubGVuZ3RoO2IrKylzd2l0Y2gobVtiXSl7Y2FzZSByOmYmJih3LnB1c2goZiksZj12b2lkIDApLHYrKyxnKys7YnJlYWs7Y2FzZSBvOmZ8fChmPXQodixbXSwwKSksZi5hZGRlZENvdW50KyssdisrLGYucmVtb3ZlZC5wdXNoKGNbZ10pLGcrKzticmVhaztjYXNlIGk6Znx8KGY9dCh2LFtdLDApKSxmLmFkZGVkQ291bnQrKyx2Kys7YnJlYWs7Y2FzZSBhOmZ8fChmPXQodixbXSwwKSksZi5yZW1vdmVkLnB1c2goY1tnXSksZysrfXJldHVybiBmJiZ3LnB1c2goZiksd30sc2hhcmVkUHJlZml4OmZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9MDtuPnI7cisrKWlmKCF0aGlzLmVxdWFscyhlW3JdLHRbcl0pKXJldHVybiByO3JldHVybiBufSxzaGFyZWRTdWZmaXg6ZnVuY3Rpb24oZSx0LG4pe2Zvcih2YXIgcj1lLmxlbmd0aCxvPXQubGVuZ3RoLGk9MDtuPmkmJnRoaXMuZXF1YWxzKGVbLS1yXSx0Wy0tb10pOylpKys7cmV0dXJuIGl9LGNhbGN1bGF0ZVNwbGljZXM6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdGhpcy5jYWxjU3BsaWNlcyhlLDAsZS5sZW5ndGgsdCwwLHQubGVuZ3RoKX0sZXF1YWxzOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9PT10fX0sZS5BcnJheVNwbGljZT1ufSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoKXthPSExO3ZhciBlPWkuc2xpY2UoMCk7aT1bXTtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKyllW3RdKCl9ZnVuY3Rpb24gbihlKXtpLnB1c2goZSksYXx8KGE9ITAscih0LDApKX12YXIgcixvPXdpbmRvdy5NdXRhdGlvbk9ic2VydmVyLGk9W10sYT0hMTtpZihvKXt2YXIgcz0xLGM9bmV3IG8odCksbD1kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShzKTtjLm9ic2VydmUobCx7Y2hhcmFjdGVyRGF0YTohMH0pLHI9ZnVuY3Rpb24oKXtzPShzKzEpJTIsbC5kYXRhPXN9fWVsc2Ugcj13aW5kb3cuc2V0VGltZW91dDtlLnNldEVuZE9mTWljcm90YXNrPW59KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtlLnNjaGVkdWxlZF98fChlLnNjaGVkdWxlZF89ITAsZi5wdXNoKGUpLG18fCh1KG4pLG09ITApKX1mdW5jdGlvbiBuKCl7Zm9yKG09ITE7Zi5sZW5ndGg7KXt2YXIgZT1mO2Y9W10sZS5zb3J0KGZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUudWlkXy10LnVpZF99KTtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKyl7dmFyIG49ZVt0XTtuLnNjaGVkdWxlZF89ITE7dmFyIHI9bi50YWtlUmVjb3JkcygpO2kobiksci5sZW5ndGgmJm4uY2FsbGJhY2tfKHIsbil9fX1mdW5jdGlvbiByKGUsdCl7dGhpcy50eXBlPWUsdGhpcy50YXJnZXQ9dCx0aGlzLmFkZGVkTm9kZXM9bmV3IHAuTm9kZUxpc3QsdGhpcy5yZW1vdmVkTm9kZXM9bmV3IHAuTm9kZUxpc3QsdGhpcy5wcmV2aW91c1NpYmxpbmc9bnVsbCx0aGlzLm5leHRTaWJsaW5nPW51bGwsdGhpcy5hdHRyaWJ1dGVOYW1lPW51bGwsdGhpcy5hdHRyaWJ1dGVOYW1lc3BhY2U9bnVsbCx0aGlzLm9sZFZhbHVlPW51bGx9ZnVuY3Rpb24gbyhlLHQpe2Zvcig7ZTtlPWUucGFyZW50Tm9kZSl7dmFyIG49aC5nZXQoZSk7aWYobilmb3IodmFyIHI9MDtyPG4ubGVuZ3RoO3IrKyl7dmFyIG89bltyXTtvLm9wdGlvbnMuc3VidHJlZSYmby5hZGRUcmFuc2llbnRPYnNlcnZlcih0KX19fWZ1bmN0aW9uIGkoZSl7Zm9yKHZhciB0PTA7dDxlLm5vZGVzXy5sZW5ndGg7dCsrKXt2YXIgbj1lLm5vZGVzX1t0XSxyPWguZ2V0KG4pO2lmKCFyKXJldHVybjtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKyl7dmFyIGk9cltvXTtpLm9ic2VydmVyPT09ZSYmaS5yZW1vdmVUcmFuc2llbnRPYnNlcnZlcnMoKX19fWZ1bmN0aW9uIGEoZSxuLG8pe2Zvcih2YXIgaT1PYmplY3QuY3JlYXRlKG51bGwpLGE9T2JqZWN0LmNyZWF0ZShudWxsKSxzPWU7cztzPXMucGFyZW50Tm9kZSl7dmFyIGM9aC5nZXQocyk7aWYoYylmb3IodmFyIGw9MDtsPGMubGVuZ3RoO2wrKyl7dmFyIHU9Y1tsXSxkPXUub3B0aW9ucztpZigocz09PWV8fGQuc3VidHJlZSkmJihcImF0dHJpYnV0ZXNcIiE9PW58fGQuYXR0cmlidXRlcykmJihcImF0dHJpYnV0ZXNcIiE9PW58fCFkLmF0dHJpYnV0ZUZpbHRlcnx8bnVsbD09PW8ubmFtZXNwYWNlJiYtMSE9PWQuYXR0cmlidXRlRmlsdGVyLmluZGV4T2Yoby5uYW1lKSkmJihcImNoYXJhY3RlckRhdGFcIiE9PW58fGQuY2hhcmFjdGVyRGF0YSkmJihcImNoaWxkTGlzdFwiIT09bnx8ZC5jaGlsZExpc3QpKXt2YXIgcD11Lm9ic2VydmVyO2lbcC51aWRfXT1wLChcImF0dHJpYnV0ZXNcIj09PW4mJmQuYXR0cmlidXRlT2xkVmFsdWV8fFwiY2hhcmFjdGVyRGF0YVwiPT09biYmZC5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUpJiYoYVtwLnVpZF9dPW8ub2xkVmFsdWUpfX19Zm9yKHZhciBmIGluIGkpe3ZhciBwPWlbZl0sbT1uZXcgcihuLGUpO1wibmFtZVwiaW4gbyYmXCJuYW1lc3BhY2VcImluIG8mJihtLmF0dHJpYnV0ZU5hbWU9by5uYW1lLG0uYXR0cmlidXRlTmFtZXNwYWNlPW8ubmFtZXNwYWNlKSxvLmFkZGVkTm9kZXMmJihtLmFkZGVkTm9kZXM9by5hZGRlZE5vZGVzKSxvLnJlbW92ZWROb2RlcyYmKG0ucmVtb3ZlZE5vZGVzPW8ucmVtb3ZlZE5vZGVzKSxvLnByZXZpb3VzU2libGluZyYmKG0ucHJldmlvdXNTaWJsaW5nPW8ucHJldmlvdXNTaWJsaW5nKSxvLm5leHRTaWJsaW5nJiYobS5uZXh0U2libGluZz1vLm5leHRTaWJsaW5nKSx2b2lkIDAhPT1hW2ZdJiYobS5vbGRWYWx1ZT1hW2ZdKSx0KHApLHAucmVjb3Jkc18ucHVzaChtKX19ZnVuY3Rpb24gcyhlKXtpZih0aGlzLmNoaWxkTGlzdD0hIWUuY2hpbGRMaXN0LHRoaXMuc3VidHJlZT0hIWUuc3VidHJlZSxcImF0dHJpYnV0ZXNcImluIGV8fCEoXCJhdHRyaWJ1dGVPbGRWYWx1ZVwiaW4gZXx8XCJhdHRyaWJ1dGVGaWx0ZXJcImluIGUpP3RoaXMuYXR0cmlidXRlcz0hIWUuYXR0cmlidXRlczp0aGlzLmF0dHJpYnV0ZXM9ITAsXCJjaGFyYWN0ZXJEYXRhT2xkVmFsdWVcImluIGUmJiEoXCJjaGFyYWN0ZXJEYXRhXCJpbiBlKT90aGlzLmNoYXJhY3RlckRhdGE9ITA6dGhpcy5jaGFyYWN0ZXJEYXRhPSEhZS5jaGFyYWN0ZXJEYXRhLCF0aGlzLmF0dHJpYnV0ZXMmJihlLmF0dHJpYnV0ZU9sZFZhbHVlfHxcImF0dHJpYnV0ZUZpbHRlclwiaW4gZSl8fCF0aGlzLmNoYXJhY3RlckRhdGEmJmUuY2hhcmFjdGVyRGF0YU9sZFZhbHVlKXRocm93IG5ldyBUeXBlRXJyb3I7aWYodGhpcy5jaGFyYWN0ZXJEYXRhPSEhZS5jaGFyYWN0ZXJEYXRhLHRoaXMuYXR0cmlidXRlT2xkVmFsdWU9ISFlLmF0dHJpYnV0ZU9sZFZhbHVlLHRoaXMuY2hhcmFjdGVyRGF0YU9sZFZhbHVlPSEhZS5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUsXCJhdHRyaWJ1dGVGaWx0ZXJcImluIGUpe2lmKG51bGw9PWUuYXR0cmlidXRlRmlsdGVyfHxcIm9iamVjdFwiIT10eXBlb2YgZS5hdHRyaWJ1dGVGaWx0ZXIpdGhyb3cgbmV3IFR5cGVFcnJvcjt0aGlzLmF0dHJpYnV0ZUZpbHRlcj13LmNhbGwoZS5hdHRyaWJ1dGVGaWx0ZXIpfWVsc2UgdGhpcy5hdHRyaWJ1dGVGaWx0ZXI9bnVsbH1mdW5jdGlvbiBjKGUpe3RoaXMuY2FsbGJhY2tfPWUsdGhpcy5ub2Rlc189W10sdGhpcy5yZWNvcmRzXz1bXSx0aGlzLnVpZF89Kyt2LHRoaXMuc2NoZWR1bGVkXz0hMX1mdW5jdGlvbiBsKGUsdCxuKXt0aGlzLm9ic2VydmVyPWUsdGhpcy50YXJnZXQ9dCx0aGlzLm9wdGlvbnM9bix0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM9W119dmFyIHU9ZS5zZXRFbmRPZk1pY3JvdGFzayxkPWUud3JhcElmTmVlZGVkLHA9ZS53cmFwcGVycyxoPW5ldyBXZWFrTWFwLGY9W10sbT0hMSx3PUFycmF5LnByb3RvdHlwZS5zbGljZSx2PTA7Yy5wcm90b3R5cGU9e2NvbnN0cnVjdG9yOmMsb2JzZXJ2ZTpmdW5jdGlvbihlLHQpe2U9ZChlKTt2YXIgbixyPW5ldyBzKHQpLG89aC5nZXQoZSk7b3x8aC5zZXQoZSxvPVtdKTtmb3IodmFyIGk9MDtpPG8ubGVuZ3RoO2krKylvW2ldLm9ic2VydmVyPT09dGhpcyYmKG49b1tpXSxuLnJlbW92ZVRyYW5zaWVudE9ic2VydmVycygpLG4ub3B0aW9ucz1yKTtufHwobj1uZXcgbCh0aGlzLGUsciksby5wdXNoKG4pLHRoaXMubm9kZXNfLnB1c2goZSkpfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7dGhpcy5ub2Rlc18uZm9yRWFjaChmdW5jdGlvbihlKXtmb3IodmFyIHQ9aC5nZXQoZSksbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dO2lmKHIub2JzZXJ2ZXI9PT10aGlzKXt0LnNwbGljZShuLDEpO2JyZWFrfX19LHRoaXMpLHRoaXMucmVjb3Jkc189W119LHRha2VSZWNvcmRzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5yZWNvcmRzXztyZXR1cm4gdGhpcy5yZWNvcmRzXz1bXSxlfX0sbC5wcm90b3R5cGU9e2FkZFRyYW5zaWVudE9ic2VydmVyOmZ1bmN0aW9uKGUpe2lmKGUhPT10aGlzLnRhcmdldCl7dCh0aGlzLm9ic2VydmVyKSx0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXMucHVzaChlKTt2YXIgbj1oLmdldChlKTtufHxoLnNldChlLG49W10pLG4ucHVzaCh0aGlzKX19LHJlbW92ZVRyYW5zaWVudE9ic2VydmVyczpmdW5jdGlvbigpe3ZhciBlPXRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlczt0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM9W107Zm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0KyspZm9yKHZhciBuPWVbdF0scj1oLmdldChuKSxvPTA7bzxyLmxlbmd0aDtvKyspaWYocltvXT09PXRoaXMpe3Iuc3BsaWNlKG8sMSk7YnJlYWt9fX0sZS5lbnF1ZXVlTXV0YXRpb249YSxlLnJlZ2lzdGVyVHJhbnNpZW50T2JzZXJ2ZXJzPW8sZS53cmFwcGVycy5NdXRhdGlvbk9ic2VydmVyPWMsZS53cmFwcGVycy5NdXRhdGlvblJlY29yZD1yfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSx0KXt0aGlzLnJvb3Q9ZSx0aGlzLnBhcmVudD10fWZ1bmN0aW9uIG4oZSx0KXtpZihlLnRyZWVTY29wZV8hPT10KXtlLnRyZWVTY29wZV89dDtmb3IodmFyIHI9ZS5zaGFkb3dSb290O3I7cj1yLm9sZGVyU2hhZG93Um9vdClyLnRyZWVTY29wZV8ucGFyZW50PXQ7Zm9yKHZhciBvPWUuZmlyc3RDaGlsZDtvO289by5uZXh0U2libGluZyluKG8sdCl9fWZ1bmN0aW9uIHIobil7aWYobiBpbnN0YW5jZW9mIGUud3JhcHBlcnMuV2luZG93LG4udHJlZVNjb3BlXylyZXR1cm4gbi50cmVlU2NvcGVfO3ZhciBvLGk9bi5wYXJlbnROb2RlO3JldHVybiBvPWk/cihpKTpuZXcgdChuLG51bGwpLG4udHJlZVNjb3BlXz1vfXQucHJvdG90eXBlPXtnZXQgcmVuZGVyZXIoKXtyZXR1cm4gdGhpcy5yb290IGluc3RhbmNlb2YgZS53cmFwcGVycy5TaGFkb3dSb290P2UuZ2V0UmVuZGVyZXJGb3JIb3N0KHRoaXMucm9vdC5ob3N0KTpudWxsfSxjb250YWluczpmdW5jdGlvbihlKXtmb3IoO2U7ZT1lLnBhcmVudClpZihlPT09dGhpcylyZXR1cm4hMDtyZXR1cm4hMX19LGUuVHJlZVNjb3BlPXQsZS5nZXRUcmVlU2NvcGU9cixlLnNldFRyZWVTY29wZT1ufSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBHLlNoYWRvd1Jvb3R9ZnVuY3Rpb24gbihlKXtyZXR1cm4gQShlKS5yb290fWZ1bmN0aW9uIHIoZSxyKXt2YXIgcz1bXSxjPWU7Zm9yKHMucHVzaChjKTtjOyl7dmFyIGw9YShjKTtpZihsJiZsLmxlbmd0aD4wKXtmb3IodmFyIHU9MDt1PGwubGVuZ3RoO3UrKyl7dmFyIHA9bFt1XTtpZihpKHApKXt2YXIgaD1uKHApLGY9aC5vbGRlclNoYWRvd1Jvb3Q7ZiYmcy5wdXNoKGYpfXMucHVzaChwKX1jPWxbbC5sZW5ndGgtMV19ZWxzZSBpZih0KGMpKXtpZihkKGUsYykmJm8ocikpYnJlYWs7Yz1jLmhvc3Qscy5wdXNoKGMpfWVsc2UgYz1jLnBhcmVudE5vZGUsYyYmcy5wdXNoKGMpfXJldHVybiBzfWZ1bmN0aW9uIG8oZSl7aWYoIWUpcmV0dXJuITE7c3dpdGNoKGUudHlwZSl7Y2FzZVwiYWJvcnRcIjpjYXNlXCJlcnJvclwiOmNhc2VcInNlbGVjdFwiOmNhc2VcImNoYW5nZVwiOmNhc2VcImxvYWRcIjpjYXNlXCJyZXNldFwiOmNhc2VcInJlc2l6ZVwiOmNhc2VcInNjcm9sbFwiOmNhc2VcInNlbGVjdHN0YXJ0XCI6cmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gaShlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIEhUTUxTaGFkb3dFbGVtZW50fWZ1bmN0aW9uIGEodCl7cmV0dXJuIGUuZ2V0RGVzdGluYXRpb25JbnNlcnRpb25Qb2ludHModCl9ZnVuY3Rpb24gcyhlLHQpe2lmKDA9PT1lLmxlbmd0aClyZXR1cm4gdDt0IGluc3RhbmNlb2YgRy5XaW5kb3cmJih0PXQuZG9jdW1lbnQpO2Zvcih2YXIgbj1BKHQpLHI9ZVswXSxvPUEociksaT1sKG4sbyksYT0wO2E8ZS5sZW5ndGg7YSsrKXt2YXIgcz1lW2FdO2lmKEEocyk9PT1pKXJldHVybiBzfXJldHVybiBlW2UubGVuZ3RoLTFdfWZ1bmN0aW9uIGMoZSl7Zm9yKHZhciB0PVtdO2U7ZT1lLnBhcmVudCl0LnB1c2goZSk7cmV0dXJuIHR9ZnVuY3Rpb24gbChlLHQpe2Zvcih2YXIgbj1jKGUpLHI9Yyh0KSxvPW51bGw7bi5sZW5ndGg+MCYmci5sZW5ndGg+MDspe3ZhciBpPW4ucG9wKCksYT1yLnBvcCgpO2lmKGkhPT1hKWJyZWFrO289aX1yZXR1cm4gb31mdW5jdGlvbiB1KGUsdCxuKXt0IGluc3RhbmNlb2YgRy5XaW5kb3cmJih0PXQuZG9jdW1lbnQpO3ZhciBvLGk9QSh0KSxhPUEobikscz1yKG4sZSksbz1sKGksYSk7b3x8KG89YS5yb290KTtmb3IodmFyIGM9bztjO2M9Yy5wYXJlbnQpZm9yKHZhciB1PTA7dTxzLmxlbmd0aDt1Kyspe3ZhciBkPXNbdV07aWYoQShkKT09PWMpcmV0dXJuIGR9cmV0dXJuIG51bGx9ZnVuY3Rpb24gZChlLHQpe3JldHVybiBBKGUpPT09QSh0KX1mdW5jdGlvbiBwKGUpe2lmKCFLLmdldChlKSYmKEsuc2V0KGUsITApLGYoVihlKSxWKGUudGFyZ2V0KSksUCkpe3ZhciB0PVA7dGhyb3cgUD1udWxsLHR9fWZ1bmN0aW9uIGgoZSl7c3dpdGNoKGUudHlwZSl7Y2FzZVwibG9hZFwiOmNhc2VcImJlZm9yZXVubG9hZFwiOmNhc2VcInVubG9hZFwiOnJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIGYodCxuKXtpZigkLmdldCh0KSl0aHJvdyBuZXcgRXJyb3IoXCJJbnZhbGlkU3RhdGVFcnJvclwiKTskLnNldCh0LCEwKSxlLnJlbmRlckFsbFBlbmRpbmcoKTt2YXIgbyxpLGE7aWYoaCh0KSYmIXQuYnViYmxlcyl7dmFyIHM9bjtzIGluc3RhbmNlb2YgRy5Eb2N1bWVudCYmKGE9cy5kZWZhdWx0VmlldykmJihpPXMsbz1bXSl9aWYoIW8paWYobiBpbnN0YW5jZW9mIEcuV2luZG93KWE9bixvPVtdO2Vsc2UgaWYobz1yKG4sdCksIWgodCkpe3ZhciBzPW9bby5sZW5ndGgtMV07cyBpbnN0YW5jZW9mIEcuRG9jdW1lbnQmJihhPXMuZGVmYXVsdFZpZXcpfXJldHVybiBuZS5zZXQodCxvKSxtKHQsbyxhLGkpJiZ3KHQsbyxhLGkpJiZ2KHQsbyxhLGkpLEouc2V0KHQscmUpLFlbXCJkZWxldGVcIl0odCxudWxsKSwkW1wiZGVsZXRlXCJdKHQpLHQuZGVmYXVsdFByZXZlbnRlZH1mdW5jdGlvbiBtKGUsdCxuLHIpe3ZhciBvPW9lO2lmKG4mJiFnKG4sZSxvLHQscikpcmV0dXJuITE7Zm9yKHZhciBpPXQubGVuZ3RoLTE7aT4wO2ktLSlpZighZyh0W2ldLGUsbyx0LHIpKXJldHVybiExO3JldHVybiEwfWZ1bmN0aW9uIHcoZSx0LG4scil7dmFyIG89aWUsaT10WzBdfHxuO3JldHVybiBnKGksZSxvLHQscil9ZnVuY3Rpb24gdihlLHQsbixyKXtmb3IodmFyIG89YWUsaT0xO2k8dC5sZW5ndGg7aSsrKWlmKCFnKHRbaV0sZSxvLHQscikpcmV0dXJuO24mJnQubGVuZ3RoPjAmJmcobixlLG8sdCxyKX1mdW5jdGlvbiBnKGUsdCxuLHIsbyl7dmFyIGk9ei5nZXQoZSk7aWYoIWkpcmV0dXJuITA7dmFyIGE9b3x8cyhyLGUpO2lmKGE9PT1lKXtpZihuPT09b2UpcmV0dXJuITA7bj09PWFlJiYobj1pZSl9ZWxzZSBpZihuPT09YWUmJiF0LmJ1YmJsZXMpcmV0dXJuITA7aWYoXCJyZWxhdGVkVGFyZ2V0XCJpbiB0KXt2YXIgYz1CKHQpLGw9Yy5yZWxhdGVkVGFyZ2V0O2lmKGwpe2lmKGwgaW5zdGFuY2VvZiBPYmplY3QmJmwuYWRkRXZlbnRMaXN0ZW5lcil7dmFyIGQ9VihsKSxwPXUodCxlLGQpO2lmKHA9PT1hKXJldHVybiEwfWVsc2UgcD1udWxsO1ouc2V0KHQscCl9fUouc2V0KHQsbik7dmFyIGg9dC50eXBlLGY9ITE7WC5zZXQodCxhKSxZLnNldCh0LGUpLGkuZGVwdGgrKztmb3IodmFyIG09MCx3PWkubGVuZ3RoO3c+bTttKyspe3ZhciB2PWlbbV07aWYodi5yZW1vdmVkKWY9ITA7ZWxzZSBpZighKHYudHlwZSE9PWh8fCF2LmNhcHR1cmUmJm49PT1vZXx8di5jYXB0dXJlJiZuPT09YWUpKXRyeXtpZihcImZ1bmN0aW9uXCI9PXR5cGVvZiB2LmhhbmRsZXI/di5oYW5kbGVyLmNhbGwoZSx0KTp2LmhhbmRsZXIuaGFuZGxlRXZlbnQodCksZWUuZ2V0KHQpKXJldHVybiExfWNhdGNoKGcpe1B8fChQPWcpfX1pZihpLmRlcHRoLS0sZiYmMD09PWkuZGVwdGgpe3ZhciBiPWkuc2xpY2UoKTtpLmxlbmd0aD0wO2Zvcih2YXIgbT0wO208Yi5sZW5ndGg7bSsrKWJbbV0ucmVtb3ZlZHx8aS5wdXNoKGJbbV0pfXJldHVybiFRLmdldCh0KX1mdW5jdGlvbiBiKGUsdCxuKXt0aGlzLnR5cGU9ZSx0aGlzLmhhbmRsZXI9dCx0aGlzLmNhcHR1cmU9Qm9vbGVhbihuKX1mdW5jdGlvbiB5KGUsdCl7aWYoIShlIGluc3RhbmNlb2Ygc2UpKXJldHVybiBWKFQoc2UsXCJFdmVudFwiLGUsdCkpO3ZhciBuPWU7cmV0dXJuIGdlfHxcImJlZm9yZXVubG9hZFwiIT09bi50eXBlfHx0aGlzIGluc3RhbmNlb2YgTT92b2lkIFUobix0aGlzKTpuZXcgTShuKX1mdW5jdGlvbiBFKGUpe3JldHVybiBlJiZlLnJlbGF0ZWRUYXJnZXQ/T2JqZWN0LmNyZWF0ZShlLHtyZWxhdGVkVGFyZ2V0Ont2YWx1ZTpCKGUucmVsYXRlZFRhcmdldCl9fSk6ZX1mdW5jdGlvbiBfKGUsdCxuKXt2YXIgcj13aW5kb3dbZV0sbz1mdW5jdGlvbih0LG4pe3JldHVybiB0IGluc3RhbmNlb2Ygcj92b2lkIFUodCx0aGlzKTpWKFQocixlLHQsbikpfTtpZihvLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHQucHJvdG90eXBlKSxuJiZXKG8ucHJvdG90eXBlLG4pLHIpdHJ5e0YocixvLG5ldyByKFwidGVtcFwiKSl9Y2F0Y2goaSl7RihyLG8sZG9jdW1lbnQuY3JlYXRlRXZlbnQoZSkpfXJldHVybiBvfWZ1bmN0aW9uIFMoZSx0KXtyZXR1cm4gZnVuY3Rpb24oKXthcmd1bWVudHNbdF09Qihhcmd1bWVudHNbdF0pO3ZhciBuPUIodGhpcyk7bltlXS5hcHBseShuLGFyZ3VtZW50cyl9fWZ1bmN0aW9uIFQoZSx0LG4scil7aWYod2UpcmV0dXJuIG5ldyBlKG4sRShyKSk7dmFyIG89Qihkb2N1bWVudC5jcmVhdGVFdmVudCh0KSksaT1tZVt0XSxhPVtuXTtyZXR1cm4gT2JqZWN0LmtleXMoaSkuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1udWxsIT1yJiZlIGluIHI/cltlXTppW2VdO1wicmVsYXRlZFRhcmdldFwiPT09ZSYmKHQ9Qih0KSksYS5wdXNoKHQpfSksb1tcImluaXRcIit0XS5hcHBseShvLGEpLG99ZnVuY3Rpb24gTShlKXt5LmNhbGwodGhpcyxlKX1mdW5jdGlvbiBPKGUpe3JldHVyblwiZnVuY3Rpb25cIj09dHlwZW9mIGU/ITA6ZSYmZS5oYW5kbGVFdmVudH1mdW5jdGlvbiBMKGUpe3N3aXRjaChlKXtjYXNlXCJET01BdHRyTW9kaWZpZWRcIjpjYXNlXCJET01BdHRyaWJ1dGVOYW1lQ2hhbmdlZFwiOmNhc2VcIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZFwiOmNhc2VcIkRPTUVsZW1lbnROYW1lQ2hhbmdlZFwiOmNhc2VcIkRPTU5vZGVJbnNlcnRlZFwiOmNhc2VcIkRPTU5vZGVJbnNlcnRlZEludG9Eb2N1bWVudFwiOmNhc2VcIkRPTU5vZGVSZW1vdmVkXCI6Y2FzZVwiRE9NTm9kZVJlbW92ZWRGcm9tRG9jdW1lbnRcIjpjYXNlXCJET01TdWJ0cmVlTW9kaWZpZWRcIjpyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBOKGUpe1UoZSx0aGlzKX1mdW5jdGlvbiBDKGUpe3JldHVybiBlIGluc3RhbmNlb2YgRy5TaGFkb3dSb290JiYoZT1lLmhvc3QpLEIoZSl9ZnVuY3Rpb24gaihlLHQpe3ZhciBuPXouZ2V0KGUpO2lmKG4pZm9yKHZhciByPTA7cjxuLmxlbmd0aDtyKyspaWYoIW5bcl0ucmVtb3ZlZCYmbltyXS50eXBlPT09dClyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBEKGUsdCl7Zm9yKHZhciBuPUIoZSk7bjtuPW4ucGFyZW50Tm9kZSlpZihqKFYobiksdCkpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gSChlKXtrKGUseWUpfWZ1bmN0aW9uIHgodCxuLG8saSl7ZS5yZW5kZXJBbGxQZW5kaW5nKCk7dmFyIGE9VihFZS5jYWxsKHEobiksbyxpKSk7aWYoIWEpcmV0dXJuIG51bGw7dmFyIGM9cihhLG51bGwpLGw9Yy5sYXN0SW5kZXhPZih0KTtyZXR1cm4tMT09bD9udWxsOihjPWMuc2xpY2UoMCxsKSxzKGMsdCkpfWZ1bmN0aW9uIFIoZSl7cmV0dXJuIGZ1bmN0aW9uKCl7dmFyIHQ9dGUuZ2V0KHRoaXMpO3JldHVybiB0JiZ0W2VdJiZ0W2VdLnZhbHVlfHxudWxsfX1mdW5jdGlvbiBJKGUpe3ZhciB0PWUuc2xpY2UoMik7cmV0dXJuIGZ1bmN0aW9uKG4pe3ZhciByPXRlLmdldCh0aGlzKTtyfHwocj1PYmplY3QuY3JlYXRlKG51bGwpLHRlLnNldCh0aGlzLHIpKTt2YXIgbz1yW2VdO2lmKG8mJnRoaXMucmVtb3ZlRXZlbnRMaXN0ZW5lcih0LG8ud3JhcHBlZCwhMSksXCJmdW5jdGlvblwiPT10eXBlb2Ygbil7dmFyIGk9ZnVuY3Rpb24odCl7dmFyIHI9bi5jYWxsKHRoaXMsdCk7cj09PSExP3QucHJldmVudERlZmF1bHQoKTpcIm9uYmVmb3JldW5sb2FkXCI9PT1lJiZcInN0cmluZ1wiPT10eXBlb2YgciYmKHQucmV0dXJuVmFsdWU9cil9O3RoaXMuYWRkRXZlbnRMaXN0ZW5lcih0LGksITEpLHJbZV09e3ZhbHVlOm4sd3JhcHBlZDppfX19fXZhciBQLGs9ZS5mb3J3YXJkTWV0aG9kc1RvV3JhcHBlcixBPWUuZ2V0VHJlZVNjb3BlLFc9ZS5taXhpbixGPWUucmVnaXN0ZXJXcmFwcGVyLFU9ZS5zZXRXcmFwcGVyLHE9ZS51bnNhZmVVbndyYXAsQj1lLnVud3JhcCxWPWUud3JhcCxHPWUud3JhcHBlcnMsej0obmV3IFdlYWtNYXAsbmV3IFdlYWtNYXApLEs9bmV3IFdlYWtNYXAsJD1uZXcgV2Vha01hcCxYPW5ldyBXZWFrTWFwLFk9bmV3IFdlYWtNYXAsWj1uZXcgV2Vha01hcCxKPW5ldyBXZWFrTWFwLFE9bmV3IFdlYWtNYXAsZWU9bmV3IFdlYWtNYXAsdGU9bmV3IFdlYWtNYXAsbmU9bmV3IFdlYWtNYXAscmU9MCxvZT0xLGllPTIsYWU9MztiLnByb3RvdHlwZT17ZXF1YWxzOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmhhbmRsZXI9PT1lLmhhbmRsZXImJnRoaXMudHlwZT09PWUudHlwZSYmdGhpcy5jYXB0dXJlPT09ZS5jYXB0dXJlfSxnZXQgcmVtb3ZlZCgpe3JldHVybiBudWxsPT09dGhpcy5oYW5kbGVyfSxyZW1vdmU6ZnVuY3Rpb24oKXt0aGlzLmhhbmRsZXI9bnVsbH19O3ZhciBzZT13aW5kb3cuRXZlbnQ7c2UucHJvdG90eXBlLnBvbHltZXJCbGFja0xpc3RfPXtyZXR1cm5WYWx1ZTohMCxrZXlMb2NhdGlvbjohMH0seS5wcm90b3R5cGU9e2dldCB0YXJnZXQoKXtyZXR1cm4gWC5nZXQodGhpcyl9LGdldCBjdXJyZW50VGFyZ2V0KCl7cmV0dXJuIFkuZ2V0KHRoaXMpfSxnZXQgZXZlbnRQaGFzZSgpe3JldHVybiBKLmdldCh0aGlzKX0sZ2V0IHBhdGgoKXt2YXIgZT1uZS5nZXQodGhpcyk7cmV0dXJuIGU/ZS5zbGljZSgpOltdfSxzdG9wUHJvcGFnYXRpb246ZnVuY3Rpb24oKXtRLnNldCh0aGlzLCEwKX0sc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7US5zZXQodGhpcywhMCksZWUuc2V0KHRoaXMsITApfX0sRihzZSx5LGRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiRXZlbnRcIikpO3ZhciBjZT1fKFwiVUlFdmVudFwiLHkpLGxlPV8oXCJDdXN0b21FdmVudFwiLHkpLHVlPXtnZXQgcmVsYXRlZFRhcmdldCgpe3ZhciBlPVouZ2V0KHRoaXMpO3JldHVybiB2b2lkIDAhPT1lP2U6VihCKHRoaXMpLnJlbGF0ZWRUYXJnZXQpfX0sZGU9Vyh7aW5pdE1vdXNlRXZlbnQ6UyhcImluaXRNb3VzZUV2ZW50XCIsMTQpfSx1ZSkscGU9Vyh7aW5pdEZvY3VzRXZlbnQ6UyhcImluaXRGb2N1c0V2ZW50XCIsNSl9LHVlKSxoZT1fKFwiTW91c2VFdmVudFwiLGNlLGRlKSxmZT1fKFwiRm9jdXNFdmVudFwiLGNlLHBlKSxtZT1PYmplY3QuY3JlYXRlKG51bGwpLHdlPWZ1bmN0aW9uKCl7dHJ5e25ldyB3aW5kb3cuRm9jdXNFdmVudChcImZvY3VzXCIpfWNhdGNoKGUpe3JldHVybiExfXJldHVybiEwfSgpO2lmKCF3ZSl7dmFyIHZlPWZ1bmN0aW9uKGUsdCxuKXtpZihuKXt2YXIgcj1tZVtuXTt0PVcoVyh7fSxyKSx0KX1tZVtlXT10fTt2ZShcIkV2ZW50XCIse2J1YmJsZXM6ITEsY2FuY2VsYWJsZTohMX0pLHZlKFwiQ3VzdG9tRXZlbnRcIix7ZGV0YWlsOm51bGx9LFwiRXZlbnRcIiksdmUoXCJVSUV2ZW50XCIse3ZpZXc6bnVsbCxkZXRhaWw6MH0sXCJFdmVudFwiKSx2ZShcIk1vdXNlRXZlbnRcIix7c2NyZWVuWDowLHNjcmVlblk6MCxjbGllbnRYOjAsY2xpZW50WTowLGN0cmxLZXk6ITEsYWx0S2V5OiExLHNoaWZ0S2V5OiExLG1ldGFLZXk6ITEsYnV0dG9uOjAscmVsYXRlZFRhcmdldDpudWxsfSxcIlVJRXZlbnRcIiksdmUoXCJGb2N1c0V2ZW50XCIse3JlbGF0ZWRUYXJnZXQ6bnVsbH0sXCJVSUV2ZW50XCIpfXZhciBnZT13aW5kb3cuQmVmb3JlVW5sb2FkRXZlbnQ7TS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh5LnByb3RvdHlwZSksVyhNLnByb3RvdHlwZSx7Z2V0IHJldHVyblZhbHVlKCl7cmV0dXJuIHEodGhpcykucmV0dXJuVmFsdWV9LHNldCByZXR1cm5WYWx1ZShlKXtxKHRoaXMpLnJldHVyblZhbHVlPWV9fSksZ2UmJkYoZ2UsTSk7dmFyIGJlPXdpbmRvdy5FdmVudFRhcmdldCx5ZT1bXCJhZGRFdmVudExpc3RlbmVyXCIsXCJyZW1vdmVFdmVudExpc3RlbmVyXCIsXCJkaXNwYXRjaEV2ZW50XCJdO1tOb2RlLFdpbmRvd10uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1lLnByb3RvdHlwZTt5ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0LGUrXCJfXCIse3ZhbHVlOnRbZV19KX0pfSksTi5wcm90b3R5cGU9e2FkZEV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oZSx0LG4pe2lmKE8odCkmJiFMKGUpKXt2YXIgcj1uZXcgYihlLHQsbiksbz16LmdldCh0aGlzKTtpZihvKXtmb3IodmFyIGk9MDtpPG8ubGVuZ3RoO2krKylpZihyLmVxdWFscyhvW2ldKSlyZXR1cm59ZWxzZSBvPVtdLG8uZGVwdGg9MCx6LnNldCh0aGlzLG8pO28ucHVzaChyKTt2YXIgYT1DKHRoaXMpO2EuYWRkRXZlbnRMaXN0ZW5lcl8oZSxwLCEwKX19LHJlbW92ZUV2ZW50TGlzdGVuZXI6ZnVuY3Rpb24oZSx0LG4pe249Qm9vbGVhbihuKTt2YXIgcj16LmdldCh0aGlzKTtpZihyKXtmb3IodmFyIG89MCxpPSExLGE9MDthPHIubGVuZ3RoO2ErKylyW2FdLnR5cGU9PT1lJiZyW2FdLmNhcHR1cmU9PT1uJiYobysrLHJbYV0uaGFuZGxlcj09PXQmJihpPSEwLHJbYV0ucmVtb3ZlKCkpKTtpZihpJiYxPT09byl7dmFyIHM9Qyh0aGlzKTtzLnJlbW92ZUV2ZW50TGlzdGVuZXJfKGUscCwhMCl9fX0sZGlzcGF0Y2hFdmVudDpmdW5jdGlvbih0KXt2YXIgbj1CKHQpLHI9bi50eXBlO0suc2V0KG4sITEpLGUucmVuZGVyQWxsUGVuZGluZygpO3ZhciBvO0QodGhpcyxyKXx8KG89ZnVuY3Rpb24oKXt9LHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihyLG8sITApKTt0cnl7cmV0dXJuIEIodGhpcykuZGlzcGF0Y2hFdmVudF8obil9ZmluYWxseXtvJiZ0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIocixvLCEwKX19fSxiZSYmRihiZSxOKTt2YXIgRWU9ZG9jdW1lbnQuZWxlbWVudEZyb21Qb2ludDtlLmVsZW1lbnRGcm9tUG9pbnQ9eCxlLmdldEV2ZW50SGFuZGxlckdldHRlcj1SLGUuZ2V0RXZlbnRIYW5kbGVyU2V0dGVyPUksZS53cmFwRXZlbnRUYXJnZXRNZXRob2RzPUgsZS53cmFwcGVycy5CZWZvcmVVbmxvYWRFdmVudD1NLGUud3JhcHBlcnMuQ3VzdG9tRXZlbnQ9bGUsZS53cmFwcGVycy5FdmVudD15LGUud3JhcHBlcnMuRXZlbnRUYXJnZXQ9TixlLndyYXBwZXJzLkZvY3VzRXZlbnQ9ZmUsZS53cmFwcGVycy5Nb3VzZUV2ZW50PWhlLGUud3JhcHBlcnMuVUlFdmVudD1jZX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUsdCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGUsdCxtKX1mdW5jdGlvbiBuKGUpe2woZSx0aGlzKX1mdW5jdGlvbiByKCl7dGhpcy5sZW5ndGg9MCx0KHRoaXMsXCJsZW5ndGhcIil9ZnVuY3Rpb24gbyhlKXtmb3IodmFyIHQ9bmV3IHIsbz0wO288ZS5sZW5ndGg7bysrKXRbb109bmV3IG4oZVtvXSk7cmV0dXJuIHQubGVuZ3RoPW8sdH1mdW5jdGlvbiBpKGUpe2EuY2FsbCh0aGlzLGUpfXZhciBhPWUud3JhcHBlcnMuVUlFdmVudCxzPWUubWl4aW4sYz1lLnJlZ2lzdGVyV3JhcHBlcixsPWUuc2V0V3JhcHBlcix1PWUudW5zYWZlVW53cmFwLGQ9ZS53cmFwLHA9d2luZG93LlRvdWNoRXZlbnQ7aWYocCl7dmFyIGg7dHJ5e2g9ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJUb3VjaEV2ZW50XCIpfWNhdGNoKGYpe3JldHVybn12YXIgbT17ZW51bWVyYWJsZTohMX07bi5wcm90b3R5cGU9e2dldCB0YXJnZXQoKXtyZXR1cm4gZCh1KHRoaXMpLnRhcmdldCl9fTt2YXIgdz17Y29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITAsZ2V0Om51bGx9O1tcImNsaWVudFhcIixcImNsaWVudFlcIixcInNjcmVlblhcIixcInNjcmVlbllcIixcInBhZ2VYXCIsXCJwYWdlWVwiLFwiaWRlbnRpZmllclwiLFwid2Via2l0UmFkaXVzWFwiLFwid2Via2l0UmFkaXVzWVwiLFwid2Via2l0Um90YXRpb25BbmdsZVwiLFwid2Via2l0Rm9yY2VcIl0uZm9yRWFjaChmdW5jdGlvbihlKXt3LmdldD1mdW5jdGlvbigpe3JldHVybiB1KHRoaXMpW2VdfSxPYmplY3QuZGVmaW5lUHJvcGVydHkobi5wcm90b3R5cGUsZSx3KX0pLHIucHJvdG90eXBlPXtpdGVtOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzW2VdfX0saS5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShhLnByb3RvdHlwZSkscyhpLnByb3RvdHlwZSx7Z2V0IHRvdWNoZXMoKXtyZXR1cm4gbyh1KHRoaXMpLnRvdWNoZXMpfSxnZXQgdGFyZ2V0VG91Y2hlcygpe3JldHVybiBvKHUodGhpcykudGFyZ2V0VG91Y2hlcyl9LGdldCBjaGFuZ2VkVG91Y2hlcygpe3JldHVybiBvKHUodGhpcykuY2hhbmdlZFRvdWNoZXMpfSxpbml0VG91Y2hFdmVudDpmdW5jdGlvbigpe3Rocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZFwiKX19KSxjKHAsaSxoKSxlLndyYXBwZXJzLlRvdWNoPW4sZS53cmFwcGVycy5Ub3VjaEV2ZW50PWksZS53cmFwcGVycy5Ub3VjaExpc3Q9cn19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlLHQpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQscyl9ZnVuY3Rpb24gbigpe3RoaXMubGVuZ3RoPTAsdCh0aGlzLFwibGVuZ3RoXCIpfWZ1bmN0aW9uIHIoZSl7aWYobnVsbD09ZSlyZXR1cm4gZTtmb3IodmFyIHQ9bmV3IG4scj0wLG89ZS5sZW5ndGg7bz5yO3IrKyl0W3JdPWEoZVtyXSk7cmV0dXJuIHQubGVuZ3RoPW8sdH1mdW5jdGlvbiBvKGUsdCl7ZS5wcm90b3R5cGVbdF09ZnVuY3Rpb24oKXtyZXR1cm4gcihpKHRoaXMpW3RdLmFwcGx5KGkodGhpcyksYXJndW1lbnRzKSl9fXZhciBpPWUudW5zYWZlVW53cmFwLGE9ZS53cmFwLHM9e2VudW1lcmFibGU6ITF9O24ucHJvdG90eXBlPXtpdGVtOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzW2VdfX0sdChuLnByb3RvdHlwZSxcIml0ZW1cIiksZS53cmFwcGVycy5Ob2RlTGlzdD1uLGUuYWRkV3JhcE5vZGVMaXN0TWV0aG9kPW8sZS53cmFwTm9kZUxpc3Q9cn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtlLndyYXBIVE1MQ29sbGVjdGlvbj1lLndyYXBOb2RlTGlzdCxlLndyYXBwZXJzLkhUTUxDb2xsZWN0aW9uPWUud3JhcHBlcnMuTm9kZUxpc3R9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtPKGUgaW5zdGFuY2VvZiBfKX1mdW5jdGlvbiBuKGUpe3ZhciB0PW5ldyBUO3JldHVybiB0WzBdPWUsdC5sZW5ndGg9MSx0fWZ1bmN0aW9uIHIoZSx0LG4pe04odCxcImNoaWxkTGlzdFwiLHtyZW1vdmVkTm9kZXM6bixwcmV2aW91c1NpYmxpbmc6ZS5wcmV2aW91c1NpYmxpbmcsbmV4dFNpYmxpbmc6ZS5uZXh0U2libGluZ30pfWZ1bmN0aW9uIG8oZSx0KXtOKGUsXCJjaGlsZExpc3RcIix7cmVtb3ZlZE5vZGVzOnR9KX1mdW5jdGlvbiBpKGUsdCxyLG8pe2lmKGUgaW5zdGFuY2VvZiBEb2N1bWVudEZyYWdtZW50KXt2YXIgaT1zKGUpO1U9ITA7Zm9yKHZhciBhPWkubGVuZ3RoLTE7YT49MDthLS0pZS5yZW1vdmVDaGlsZChpW2FdKSxpW2FdLnBhcmVudE5vZGVfPXQ7VT0hMTtmb3IodmFyIGE9MDthPGkubGVuZ3RoO2ErKylpW2FdLnByZXZpb3VzU2libGluZ189aVthLTFdfHxyLGlbYV0ubmV4dFNpYmxpbmdfPWlbYSsxXXx8bztyZXR1cm4gciYmKHIubmV4dFNpYmxpbmdfPWlbMF0pLG8mJihvLnByZXZpb3VzU2libGluZ189aVtpLmxlbmd0aC0xXSksaX12YXIgaT1uKGUpLGM9ZS5wYXJlbnROb2RlO3JldHVybiBjJiZjLnJlbW92ZUNoaWxkKGUpLGUucGFyZW50Tm9kZV89dCxlLnByZXZpb3VzU2libGluZ189cixlLm5leHRTaWJsaW5nXz1vLHImJihyLm5leHRTaWJsaW5nXz1lKSxvJiYoby5wcmV2aW91c1NpYmxpbmdfPWUpLGl9ZnVuY3Rpb24gYShlKXtpZihlIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudClyZXR1cm4gcyhlKTt2YXIgdD1uKGUpLG89ZS5wYXJlbnROb2RlO3JldHVybiBvJiZyKGUsbyx0KSx0fWZ1bmN0aW9uIHMoZSl7Zm9yKHZhciB0PW5ldyBULG49MCxyPWUuZmlyc3RDaGlsZDtyO3I9ci5uZXh0U2libGluZyl0W24rK109cjtyZXR1cm4gdC5sZW5ndGg9bixvKGUsdCksdH1mdW5jdGlvbiBjKGUpe3JldHVybiBlfWZ1bmN0aW9uIGwoZSx0KXtSKGUsdCksZS5ub2RlSXNJbnNlcnRlZF8oKX1mdW5jdGlvbiB1KGUsdCl7Zm9yKHZhciBuPUModCkscj0wO3I8ZS5sZW5ndGg7cisrKWwoZVtyXSxuKX1mdW5jdGlvbiBkKGUpe1IoZSxuZXcgTShlLG51bGwpKX1mdW5jdGlvbiBwKGUpe2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7dCsrKWQoZVt0XSl9ZnVuY3Rpb24gaChlLHQpe3ZhciBuPWUubm9kZVR5cGU9PT1fLkRPQ1VNRU5UX05PREU/ZTplLm93bmVyRG9jdW1lbnQ7biE9PXQub3duZXJEb2N1bWVudCYmbi5hZG9wdE5vZGUodCl9ZnVuY3Rpb24gZih0LG4pe2lmKG4ubGVuZ3RoKXt2YXIgcj10Lm93bmVyRG9jdW1lbnQ7aWYociE9PW5bMF0ub3duZXJEb2N1bWVudClmb3IodmFyIG89MDtvPG4ubGVuZ3RoO28rKyllLmFkb3B0Tm9kZU5vUmVtb3ZlKG5bb10scil9fWZ1bmN0aW9uIG0oZSx0KXtmKGUsdCk7dmFyIG49dC5sZW5ndGg7aWYoMT09PW4pcmV0dXJuIFAodFswXSk7Zm9yKHZhciByPVAoZS5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSksbz0wO24+bztvKyspci5hcHBlbmRDaGlsZChQKHRbb10pKTtyZXR1cm4gcn1mdW5jdGlvbiB3KGUpe2lmKHZvaWQgMCE9PWUuZmlyc3RDaGlsZF8pZm9yKHZhciB0PWUuZmlyc3RDaGlsZF87dDspe3ZhciBuPXQ7dD10Lm5leHRTaWJsaW5nXyxuLnBhcmVudE5vZGVfPW4ucHJldmlvdXNTaWJsaW5nXz1uLm5leHRTaWJsaW5nXz12b2lkIDB9ZS5maXJzdENoaWxkXz1lLmxhc3RDaGlsZF89dm9pZCAwfWZ1bmN0aW9uIHYoZSl7aWYoZS5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSl7Zm9yKHZhciB0PWUuZmlyc3RDaGlsZDt0Oyl7Tyh0LnBhcmVudE5vZGU9PT1lKTt2YXIgbj10Lm5leHRTaWJsaW5nLHI9UCh0KSxvPXIucGFyZW50Tm9kZTtvJiZYLmNhbGwobyxyKSx0LnByZXZpb3VzU2libGluZ189dC5uZXh0U2libGluZ189dC5wYXJlbnROb2RlXz1udWxsLHQ9bn1lLmZpcnN0Q2hpbGRfPWUubGFzdENoaWxkXz1udWxsfWVsc2UgZm9yKHZhciBuLGk9UChlKSxhPWkuZmlyc3RDaGlsZDthOyluPWEubmV4dFNpYmxpbmcsWC5jYWxsKGksYSksYT1ufWZ1bmN0aW9uIGcoZSl7dmFyIHQ9ZS5wYXJlbnROb2RlO3JldHVybiB0JiZ0LmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfWZ1bmN0aW9uIGIoZSl7Zm9yKHZhciB0LG49MDtuPGUubGVuZ3RoO24rKyl0PWVbbl0sdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpfWZ1bmN0aW9uIHkoZSx0LG4pe3ZhciByO2lmKHI9QShuP3EuY2FsbChuLEkoZSksITEpOkIuY2FsbChJKGUpLCExKSksdCl7Zm9yKHZhciBvPWUuZmlyc3RDaGlsZDtvO289by5uZXh0U2libGluZylyLmFwcGVuZENoaWxkKHkobywhMCxuKSk7aWYoZSBpbnN0YW5jZW9mIEYuSFRNTFRlbXBsYXRlRWxlbWVudClmb3IodmFyIGk9ci5jb250ZW50LG89ZS5jb250ZW50LmZpcnN0Q2hpbGQ7bztvPW8ubmV4dFNpYmxpbmcpaS5hcHBlbmRDaGlsZCh5KG8sITAsbikpfXJldHVybiByfWZ1bmN0aW9uIEUoZSx0KXtpZighdHx8QyhlKSE9PUModCkpcmV0dXJuITE7Zm9yKHZhciBuPXQ7bjtuPW4ucGFyZW50Tm9kZSlpZihuPT09ZSlyZXR1cm4hMDtyZXR1cm4hMX1mdW5jdGlvbiBfKGUpe08oZSBpbnN0YW5jZW9mIFYpLFMuY2FsbCh0aGlzLGUpLHRoaXMucGFyZW50Tm9kZV89dm9pZCAwLHRoaXMuZmlyc3RDaGlsZF89dm9pZCAwLHRoaXMubGFzdENoaWxkXz12b2lkIDAsdGhpcy5uZXh0U2libGluZ189dm9pZCAwLHRoaXMucHJldmlvdXNTaWJsaW5nXz12b2lkIDAsdGhpcy50cmVlU2NvcGVfPXZvaWQgMH12YXIgUz1lLndyYXBwZXJzLkV2ZW50VGFyZ2V0LFQ9ZS53cmFwcGVycy5Ob2RlTGlzdCxNPWUuVHJlZVNjb3BlLE89ZS5hc3NlcnQsTD1lLmRlZmluZVdyYXBHZXR0ZXIsTj1lLmVucXVldWVNdXRhdGlvbixDPWUuZ2V0VHJlZVNjb3BlLGo9ZS5pc1dyYXBwZXIsRD1lLm1peGluLEg9ZS5yZWdpc3RlclRyYW5zaWVudE9ic2VydmVycyx4PWUucmVnaXN0ZXJXcmFwcGVyLFI9ZS5zZXRUcmVlU2NvcGUsST1lLnVuc2FmZVVud3JhcCxQPWUudW53cmFwLGs9ZS51bndyYXBJZk5lZWRlZCxBPWUud3JhcCxXPWUud3JhcElmTmVlZGVkLEY9ZS53cmFwcGVycyxVPSExLHE9ZG9jdW1lbnQuaW1wb3J0Tm9kZSxCPXdpbmRvdy5Ob2RlLnByb3RvdHlwZS5jbG9uZU5vZGUsVj13aW5kb3cuTm9kZSxHPXdpbmRvdy5Eb2N1bWVudEZyYWdtZW50LHo9KFYucHJvdG90eXBlLmFwcGVuZENoaWxkLFYucHJvdG90eXBlLmNvbXBhcmVEb2N1bWVudFBvc2l0aW9uKSxLPVYucHJvdG90eXBlLmlzRXF1YWxOb2RlLCQ9Vi5wcm90b3R5cGUuaW5zZXJ0QmVmb3JlLFg9Vi5wcm90b3R5cGUucmVtb3ZlQ2hpbGQsWT1WLnByb3RvdHlwZS5yZXBsYWNlQ2hpbGQsWj0vVHJpZGVudHxFZGdlLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLEo9Wj9mdW5jdGlvbihlLHQpe3RyeXtYLmNhbGwoZSx0KX1jYXRjaChuKXtpZighKGUgaW5zdGFuY2VvZiBHKSl0aHJvdyBufX06ZnVuY3Rpb24oZSx0KXtYLmNhbGwoZSx0KX07Xy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShTLnByb3RvdHlwZSksRChfLnByb3RvdHlwZSx7YXBwZW5kQ2hpbGQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuaW5zZXJ0QmVmb3JlKGUsbnVsbCl9LGluc2VydEJlZm9yZTpmdW5jdGlvbihlLG4pe3QoZSk7dmFyIHI7bj9qKG4pP3I9UChuKToocj1uLG49QShyKSk6KG49bnVsbCxyPW51bGwpLG4mJk8obi5wYXJlbnROb2RlPT09dGhpcyk7dmFyIG8scz1uP24ucHJldmlvdXNTaWJsaW5nOnRoaXMubGFzdENoaWxkLGM9IXRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCkmJiFnKGUpO2lmKG89Yz9hKGUpOmkoZSx0aGlzLHMsbiksYyloKHRoaXMsZSksdyh0aGlzKSwkLmNhbGwoSSh0aGlzKSxQKGUpLHIpO2Vsc2V7c3x8KHRoaXMuZmlyc3RDaGlsZF89b1swXSksbnx8KHRoaXMubGFzdENoaWxkXz1vW28ubGVuZ3RoLTFdLHZvaWQgMD09PXRoaXMuZmlyc3RDaGlsZF8mJih0aGlzLmZpcnN0Q2hpbGRfPXRoaXMuZmlyc3RDaGlsZCkpO3ZhciBsPXI/ci5wYXJlbnROb2RlOkkodGhpcyk7bD8kLmNhbGwobCxtKHRoaXMsbykscik6Zih0aGlzLG8pfXJldHVybiBOKHRoaXMsXCJjaGlsZExpc3RcIix7YWRkZWROb2RlczpvLG5leHRTaWJsaW5nOm4scHJldmlvdXNTaWJsaW5nOnN9KSx1KG8sdGhpcyksZX0scmVtb3ZlQ2hpbGQ6ZnVuY3Rpb24oZSl7aWYodChlKSxlLnBhcmVudE5vZGUhPT10aGlzKXtmb3IodmFyIHI9ITEsbz0odGhpcy5jaGlsZE5vZGVzLHRoaXMuZmlyc3RDaGlsZCk7bztvPW8ubmV4dFNpYmxpbmcpaWYobz09PWUpe3I9ITA7YnJlYWt9aWYoIXIpdGhyb3cgbmV3IEVycm9yKFwiTm90Rm91bmRFcnJvclwiKX12YXIgaT1QKGUpLGE9ZS5uZXh0U2libGluZyxzPWUucHJldmlvdXNTaWJsaW5nO2lmKHRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCkpe3ZhciBjPXRoaXMuZmlyc3RDaGlsZCxsPXRoaXMubGFzdENoaWxkLHU9aS5wYXJlbnROb2RlO3UmJkoodSxpKSxjPT09ZSYmKHRoaXMuZmlyc3RDaGlsZF89YSksbD09PWUmJih0aGlzLmxhc3RDaGlsZF89cykscyYmKHMubmV4dFNpYmxpbmdfPWEpLGEmJihhLnByZXZpb3VzU2libGluZ189cyksZS5wcmV2aW91c1NpYmxpbmdfPWUubmV4dFNpYmxpbmdfPWUucGFyZW50Tm9kZV89dm9pZCAwfWVsc2Ugdyh0aGlzKSxKKEkodGhpcyksaSk7cmV0dXJuIFV8fE4odGhpcyxcImNoaWxkTGlzdFwiLHtyZW1vdmVkTm9kZXM6bihlKSxuZXh0U2libGluZzphLHByZXZpb3VzU2libGluZzpzfSksSCh0aGlzLGUpLGV9LHJlcGxhY2VDaGlsZDpmdW5jdGlvbihlLHIpe3QoZSk7dmFyIG87aWYoaihyKT9vPVAocik6KG89cixyPUEobykpLHIucGFyZW50Tm9kZSE9PXRoaXMpdGhyb3cgbmV3IEVycm9yKFwiTm90Rm91bmRFcnJvclwiKTt2YXIgcyxjPXIubmV4dFNpYmxpbmcsbD1yLnByZXZpb3VzU2libGluZyxwPSF0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpJiYhZyhlKTtyZXR1cm4gcD9zPWEoZSk6KGM9PT1lJiYoYz1lLm5leHRTaWJsaW5nKSxzPWkoZSx0aGlzLGwsYykpLHA/KGgodGhpcyxlKSx3KHRoaXMpLFkuY2FsbChJKHRoaXMpLFAoZSksbykpOih0aGlzLmZpcnN0Q2hpbGQ9PT1yJiYodGhpcy5maXJzdENoaWxkXz1zWzBdKSx0aGlzLmxhc3RDaGlsZD09PXImJih0aGlzLmxhc3RDaGlsZF89c1tzLmxlbmd0aC0xXSksci5wcmV2aW91c1NpYmxpbmdfPXIubmV4dFNpYmxpbmdfPXIucGFyZW50Tm9kZV89dm9pZCAwLG8ucGFyZW50Tm9kZSYmWS5jYWxsKG8ucGFyZW50Tm9kZSxtKHRoaXMscyksbykpLE4odGhpcyxcImNoaWxkTGlzdFwiLHthZGRlZE5vZGVzOnMscmVtb3ZlZE5vZGVzOm4ociksbmV4dFNpYmxpbmc6YyxwcmV2aW91c1NpYmxpbmc6bH0pLGQociksdShzLHRoaXMpLHJ9LG5vZGVJc0luc2VydGVkXzpmdW5jdGlvbigpe2Zvcih2YXIgZT10aGlzLmZpcnN0Q2hpbGQ7ZTtlPWUubmV4dFNpYmxpbmcpZS5ub2RlSXNJbnNlcnRlZF8oKX0saGFzQ2hpbGROb2RlczpmdW5jdGlvbigpe3JldHVybiBudWxsIT09dGhpcy5maXJzdENoaWxkfSxnZXQgcGFyZW50Tm9kZSgpe3JldHVybiB2b2lkIDAhPT10aGlzLnBhcmVudE5vZGVfP3RoaXMucGFyZW50Tm9kZV86QShJKHRoaXMpLnBhcmVudE5vZGUpfSxnZXQgZmlyc3RDaGlsZCgpe3JldHVybiB2b2lkIDAhPT10aGlzLmZpcnN0Q2hpbGRfP3RoaXMuZmlyc3RDaGlsZF86QShJKHRoaXMpLmZpcnN0Q2hpbGQpfSxnZXQgbGFzdENoaWxkKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMubGFzdENoaWxkXz90aGlzLmxhc3RDaGlsZF86QShJKHRoaXMpLmxhc3RDaGlsZCl9LGdldCBuZXh0U2libGluZygpe3JldHVybiB2b2lkIDAhPT10aGlzLm5leHRTaWJsaW5nXz90aGlzLm5leHRTaWJsaW5nXzpBKEkodGhpcykubmV4dFNpYmxpbmcpfSxnZXQgcHJldmlvdXNTaWJsaW5nKCl7cmV0dXJuIHZvaWQgMCE9PXRoaXMucHJldmlvdXNTaWJsaW5nXz90aGlzLnByZXZpb3VzU2libGluZ186QShJKHRoaXMpLnByZXZpb3VzU2libGluZyl9LGdldCBwYXJlbnRFbGVtZW50KCl7Zm9yKHZhciBlPXRoaXMucGFyZW50Tm9kZTtlJiZlLm5vZGVUeXBlIT09Xy5FTEVNRU5UX05PREU7KWU9ZS5wYXJlbnROb2RlO3JldHVybiBlfSxnZXQgdGV4dENvbnRlbnQoKXtmb3IodmFyIGU9XCJcIix0PXRoaXMuZmlyc3RDaGlsZDt0O3Q9dC5uZXh0U2libGluZyl0Lm5vZGVUeXBlIT1fLkNPTU1FTlRfTk9ERSYmKGUrPXQudGV4dENvbnRlbnQpO3JldHVybiBlfSxzZXQgdGV4dENvbnRlbnQoZSl7bnVsbD09ZSYmKGU9XCJcIik7dmFyIHQ9Yyh0aGlzLmNoaWxkTm9kZXMpO2lmKHRoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCkpe2lmKHYodGhpcyksXCJcIiE9PWUpe3ZhciBuPUkodGhpcykub3duZXJEb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShlKTt0aGlzLmFwcGVuZENoaWxkKG4pfX1lbHNlIHcodGhpcyksSSh0aGlzKS50ZXh0Q29udGVudD1lO3ZhciByPWModGhpcy5jaGlsZE5vZGVzKTtOKHRoaXMsXCJjaGlsZExpc3RcIix7YWRkZWROb2RlczpyLHJlbW92ZWROb2Rlczp0fSkscCh0KSx1KHIsdGhpcyl9LGdldCBjaGlsZE5vZGVzKCl7Zm9yKHZhciBlPW5ldyBULHQ9MCxuPXRoaXMuZmlyc3RDaGlsZDtuO249bi5uZXh0U2libGluZyllW3QrK109bjtyZXR1cm4gZS5sZW5ndGg9dCxlfSxjbG9uZU5vZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHkodGhpcyxlKX0sY29udGFpbnM6ZnVuY3Rpb24oZSl7cmV0dXJuIEUodGhpcyxXKGUpKX0sY29tcGFyZURvY3VtZW50UG9zaXRpb246ZnVuY3Rpb24oZSl7cmV0dXJuIHouY2FsbChJKHRoaXMpLGsoZSkpfSxpc0VxdWFsTm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gSy5jYWxsKEkodGhpcyksayhlKSl9LG5vcm1hbGl6ZTpmdW5jdGlvbigpe2Zvcih2YXIgZSx0LG49Yyh0aGlzLmNoaWxkTm9kZXMpLHI9W10sbz1cIlwiLGk9MDtpPG4ubGVuZ3RoO2krKyl0PW5baV0sdC5ub2RlVHlwZT09PV8uVEVYVF9OT0RFP2V8fHQuZGF0YS5sZW5ndGg/ZT8obys9dC5kYXRhLHIucHVzaCh0KSk6ZT10OnRoaXMucmVtb3ZlQ2hpbGQodCk6KGUmJnIubGVuZ3RoJiYoZS5kYXRhKz1vLGIocikpLHI9W10sbz1cIlwiLGU9bnVsbCx0LmNoaWxkTm9kZXMubGVuZ3RoJiZ0Lm5vcm1hbGl6ZSgpKTtlJiZyLmxlbmd0aCYmKGUuZGF0YSs9byxiKHIpKX19KSxMKF8sXCJvd25lckRvY3VtZW50XCIpLHgoVixfLGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSksZGVsZXRlIF8ucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3IsZGVsZXRlIF8ucHJvdG90eXBlLnF1ZXJ5U2VsZWN0b3JBbGwsXy5wcm90b3R5cGU9RChPYmplY3QuY3JlYXRlKFMucHJvdG90eXBlKSxfLnByb3RvdHlwZSksZS5jbG9uZU5vZGU9eSxlLm5vZGVXYXNBZGRlZD1sLGUubm9kZVdhc1JlbW92ZWQ9ZCxlLm5vZGVzV2VyZUFkZGVkPXUsZS5ub2Rlc1dlcmVSZW1vdmVkPXAsZS5vcmlnaW5hbEluc2VydEJlZm9yZT0kLGUub3JpZ2luYWxSZW1vdmVDaGlsZD1YLGUuc25hcHNob3ROb2RlTGlzdD1jLGUud3JhcHBlcnMuTm9kZT1ffSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQodCxuLHIsbyl7Zm9yKHZhciBpPW51bGwsYT1udWxsLHM9MCxjPXQubGVuZ3RoO2M+cztzKyspaT1iKHRbc10pLCFvJiYoYT12KGkpLnJvb3QpJiZhIGluc3RhbmNlb2YgZS53cmFwcGVycy5TaGFkb3dSb290fHwocltuKytdPWkpO3JldHVybiBufWZ1bmN0aW9uIG4oZSl7cmV0dXJuIFN0cmluZyhlKS5yZXBsYWNlKC9cXC9kZWVwXFwvfDo6c2hhZG93fD4+Pi9nLFwiIFwiKX1mdW5jdGlvbiByKGUpe3JldHVybiBTdHJpbmcoZSkucmVwbGFjZSgvOmhvc3RcXCgoW15cXHNdKylcXCkvZyxcIiQxXCIpLnJlcGxhY2UoLyhbXlxcc10pOmhvc3QvZyxcIiQxXCIpLnJlcGxhY2UoXCI6aG9zdFwiLFwiKlwiKS5yZXBsYWNlKC9cXF58XFwvc2hhZG93XFwvfFxcL3NoYWRvdy1kZWVwXFwvfDo6c2hhZG93fFxcL2RlZXBcXC98Ojpjb250ZW50fD4+Pi9nLFwiIFwiKX1mdW5jdGlvbiBvKGUsdCl7Zm9yKHZhciBuLHI9ZS5maXJzdEVsZW1lbnRDaGlsZDtyOyl7aWYoci5tYXRjaGVzKHQpKXJldHVybiByO2lmKG49byhyLHQpKXJldHVybiBuO3I9ci5uZXh0RWxlbWVudFNpYmxpbmd9cmV0dXJuIG51bGx9ZnVuY3Rpb24gaShlLHQpe3JldHVybiBlLm1hdGNoZXModCl9ZnVuY3Rpb24gYShlLHQsbil7dmFyIHI9ZS5sb2NhbE5hbWU7cmV0dXJuIHI9PT10fHxyPT09biYmZS5uYW1lc3BhY2VVUkk9PT1qfWZ1bmN0aW9uIHMoKXtyZXR1cm4hMH1mdW5jdGlvbiBjKGUsdCxuKXtyZXR1cm4gZS5sb2NhbE5hbWU9PT1ufWZ1bmN0aW9uIGwoZSx0KXtyZXR1cm4gZS5uYW1lc3BhY2VVUkk9PT10fWZ1bmN0aW9uIHUoZSx0LG4pe3JldHVybiBlLm5hbWVzcGFjZVVSST09PXQmJmUubG9jYWxOYW1lPT09bn1mdW5jdGlvbiBkKGUsdCxuLHIsbyxpKXtmb3IodmFyIGE9ZS5maXJzdEVsZW1lbnRDaGlsZDthOylyKGEsbyxpKSYmKG5bdCsrXT1hKSx0PWQoYSx0LG4scixvLGkpLGE9YS5uZXh0RWxlbWVudFNpYmxpbmc7cmV0dXJuIHR9ZnVuY3Rpb24gcChuLHIsbyxpLGEpe3ZhciBzLGM9Zyh0aGlzKSxsPXYodGhpcykucm9vdDtpZihsIGluc3RhbmNlb2YgZS53cmFwcGVycy5TaGFkb3dSb290KXJldHVybiBkKHRoaXMscixvLG4saSxudWxsKTtpZihjIGluc3RhbmNlb2YgTilzPVMuY2FsbChjLGkpO2Vsc2V7aWYoIShjIGluc3RhbmNlb2YgQykpcmV0dXJuIGQodGhpcyxyLG8sbixpLG51bGwpO3M9Xy5jYWxsKGMsaSl9cmV0dXJuIHQocyxyLG8sYSl9ZnVuY3Rpb24gaChuLHIsbyxpLGEpe3ZhciBzLGM9Zyh0aGlzKSxsPXYodGhpcykucm9vdDtpZihsIGluc3RhbmNlb2YgZS53cmFwcGVycy5TaGFkb3dSb290KXJldHVybiBkKHRoaXMscixvLG4saSxhKTtpZihjIGluc3RhbmNlb2YgTilzPU0uY2FsbChjLGksYSk7ZWxzZXtpZighKGMgaW5zdGFuY2VvZiBDKSlyZXR1cm4gZCh0aGlzLHIsbyxuLGksYSk7cz1ULmNhbGwoYyxpLGEpfXJldHVybiB0KHMscixvLCExKX1mdW5jdGlvbiBmKG4scixvLGksYSl7dmFyIHMsYz1nKHRoaXMpLGw9dih0aGlzKS5yb290O2lmKGwgaW5zdGFuY2VvZiBlLndyYXBwZXJzLlNoYWRvd1Jvb3QpcmV0dXJuIGQodGhpcyxyLG8sbixpLGEpO2lmKGMgaW5zdGFuY2VvZiBOKXM9TC5jYWxsKGMsaSxhKTtlbHNle2lmKCEoYyBpbnN0YW5jZW9mIEMpKXJldHVybiBkKHRoaXMscixvLG4saSxhKTtzPU8uY2FsbChjLGksYSl9cmV0dXJuIHQocyxyLG8sITEpfXZhciBtPWUud3JhcHBlcnMuSFRNTENvbGxlY3Rpb24sdz1lLndyYXBwZXJzLk5vZGVMaXN0LHY9ZS5nZXRUcmVlU2NvcGUsZz1lLnVuc2FmZVVud3JhcCxiPWUud3JhcCx5PWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IsRT1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucXVlcnlTZWxlY3RvcixfPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwsUz1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCxUPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lLE09ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lLE89ZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyxMPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZU5TLE49d2luZG93LkVsZW1lbnQsQz13aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnQsaj1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIixEPXtxdWVyeVNlbGVjdG9yOmZ1bmN0aW9uKHQpe3ZhciByPW4odCksaT1yIT09dDt0PXI7dmFyIGEscz1nKHRoaXMpLGM9dih0aGlzKS5yb290O2lmKGMgaW5zdGFuY2VvZiBlLndyYXBwZXJzLlNoYWRvd1Jvb3QpcmV0dXJuIG8odGhpcyx0KTtpZihzIGluc3RhbmNlb2YgTilhPWIoRS5jYWxsKHMsdCkpO2Vsc2V7XG5pZighKHMgaW5zdGFuY2VvZiBDKSlyZXR1cm4gbyh0aGlzLHQpO2E9Yih5LmNhbGwocyx0KSl9cmV0dXJuIGEmJiFpJiYoYz12KGEpLnJvb3QpJiZjIGluc3RhbmNlb2YgZS53cmFwcGVycy5TaGFkb3dSb290P28odGhpcyx0KTphfSxxdWVyeVNlbGVjdG9yQWxsOmZ1bmN0aW9uKGUpe3ZhciB0PW4oZSkscj10IT09ZTtlPXQ7dmFyIG89bmV3IHc7cmV0dXJuIG8ubGVuZ3RoPXAuY2FsbCh0aGlzLGksMCxvLGUsciksb319LEg9e21hdGNoZXM6ZnVuY3Rpb24odCl7cmV0dXJuIHQ9cih0KSxlLm9yaWdpbmFsTWF0Y2hlcy5jYWxsKGcodGhpcyksdCl9fSx4PXtnZXRFbGVtZW50c0J5VGFnTmFtZTpmdW5jdGlvbihlKXt2YXIgdD1uZXcgbSxuPVwiKlwiPT09ZT9zOmE7cmV0dXJuIHQubGVuZ3RoPWguY2FsbCh0aGlzLG4sMCx0LGUsZS50b0xvd2VyQ2FzZSgpKSx0fSxnZXRFbGVtZW50c0J5Q2xhc3NOYW1lOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuXCIrZSl9LGdldEVsZW1lbnRzQnlUYWdOYW1lTlM6ZnVuY3Rpb24oZSx0KXt2YXIgbj1uZXcgbSxyPW51bGw7cmV0dXJuIHI9XCIqXCI9PT1lP1wiKlwiPT09dD9zOmM6XCIqXCI9PT10P2w6dSxuLmxlbmd0aD1mLmNhbGwodGhpcyxyLDAsbixlfHxudWxsLHQpLG59fTtlLkdldEVsZW1lbnRzQnlJbnRlcmZhY2U9eCxlLlNlbGVjdG9yc0ludGVyZmFjZT1ELGUuTWF0Y2hlc0ludGVyZmFjZT1IfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7Zm9yKDtlJiZlLm5vZGVUeXBlIT09Tm9kZS5FTEVNRU5UX05PREU7KWU9ZS5uZXh0U2libGluZztyZXR1cm4gZX1mdW5jdGlvbiBuKGUpe2Zvcig7ZSYmZS5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFOyllPWUucHJldmlvdXNTaWJsaW5nO3JldHVybiBlfXZhciByPWUud3JhcHBlcnMuTm9kZUxpc3Qsbz17Z2V0IGZpcnN0RWxlbWVudENoaWxkKCl7cmV0dXJuIHQodGhpcy5maXJzdENoaWxkKX0sZ2V0IGxhc3RFbGVtZW50Q2hpbGQoKXtyZXR1cm4gbih0aGlzLmxhc3RDaGlsZCl9LGdldCBjaGlsZEVsZW1lbnRDb3VudCgpe2Zvcih2YXIgZT0wLHQ9dGhpcy5maXJzdEVsZW1lbnRDaGlsZDt0O3Q9dC5uZXh0RWxlbWVudFNpYmxpbmcpZSsrO3JldHVybiBlfSxnZXQgY2hpbGRyZW4oKXtmb3IodmFyIGU9bmV3IHIsdD0wLG49dGhpcy5maXJzdEVsZW1lbnRDaGlsZDtuO249bi5uZXh0RWxlbWVudFNpYmxpbmcpZVt0KytdPW47cmV0dXJuIGUubGVuZ3RoPXQsZX0scmVtb3ZlOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy5wYXJlbnROb2RlO2UmJmUucmVtb3ZlQ2hpbGQodGhpcyl9fSxpPXtnZXQgbmV4dEVsZW1lbnRTaWJsaW5nKCl7cmV0dXJuIHQodGhpcy5uZXh0U2libGluZyl9LGdldCBwcmV2aW91c0VsZW1lbnRTaWJsaW5nKCl7cmV0dXJuIG4odGhpcy5wcmV2aW91c1NpYmxpbmcpfX0sYT17Z2V0RWxlbWVudEJ5SWQ6ZnVuY3Rpb24oZSl7cmV0dXJuL1sgXFx0XFxuXFxyXFxmXS8udGVzdChlKT9udWxsOnRoaXMucXVlcnlTZWxlY3RvcignW2lkPVwiJytlKydcIl0nKX19O2UuQ2hpbGROb2RlSW50ZXJmYWNlPWksZS5Ob25FbGVtZW50UGFyZW50Tm9kZUludGVyZmFjZT1hLGUuUGFyZW50Tm9kZUludGVyZmFjZT1vfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7ci5jYWxsKHRoaXMsZSl9dmFyIG49ZS5DaGlsZE5vZGVJbnRlcmZhY2Uscj1lLndyYXBwZXJzLk5vZGUsbz1lLmVucXVldWVNdXRhdGlvbixpPWUubWl4aW4sYT1lLnJlZ2lzdGVyV3JhcHBlcixzPWUudW5zYWZlVW53cmFwLGM9d2luZG93LkNoYXJhY3RlckRhdGE7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyLnByb3RvdHlwZSksaSh0LnByb3RvdHlwZSx7Z2V0IG5vZGVWYWx1ZSgpe3JldHVybiB0aGlzLmRhdGF9LHNldCBub2RlVmFsdWUoZSl7dGhpcy5kYXRhPWV9LGdldCB0ZXh0Q29udGVudCgpe3JldHVybiB0aGlzLmRhdGF9LHNldCB0ZXh0Q29udGVudChlKXt0aGlzLmRhdGE9ZX0sZ2V0IGRhdGEoKXtyZXR1cm4gcyh0aGlzKS5kYXRhfSxzZXQgZGF0YShlKXt2YXIgdD1zKHRoaXMpLmRhdGE7byh0aGlzLFwiY2hhcmFjdGVyRGF0YVwiLHtvbGRWYWx1ZTp0fSkscyh0aGlzKS5kYXRhPWV9fSksaSh0LnByb3RvdHlwZSxuKSxhKGMsdCxkb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShcIlwiKSksZS53cmFwcGVycy5DaGFyYWN0ZXJEYXRhPXR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtyZXR1cm4gZT4+PjB9ZnVuY3Rpb24gbihlKXtyLmNhbGwodGhpcyxlKX12YXIgcj1lLndyYXBwZXJzLkNoYXJhY3RlckRhdGEsbz0oZS5lbnF1ZXVlTXV0YXRpb24sZS5taXhpbiksaT1lLnJlZ2lzdGVyV3JhcHBlcixhPXdpbmRvdy5UZXh0O24ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoci5wcm90b3R5cGUpLG8obi5wcm90b3R5cGUse3NwbGl0VGV4dDpmdW5jdGlvbihlKXtlPXQoZSk7dmFyIG49dGhpcy5kYXRhO2lmKGU+bi5sZW5ndGgpdGhyb3cgbmV3IEVycm9yKFwiSW5kZXhTaXplRXJyb3JcIik7dmFyIHI9bi5zbGljZSgwLGUpLG89bi5zbGljZShlKTt0aGlzLmRhdGE9cjt2YXIgaT10aGlzLm93bmVyRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUobyk7cmV0dXJuIHRoaXMucGFyZW50Tm9kZSYmdGhpcy5wYXJlbnROb2RlLmluc2VydEJlZm9yZShpLHRoaXMubmV4dFNpYmxpbmcpLGl9fSksaShhLG4sZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJcIikpLGUud3JhcHBlcnMuVGV4dD1ufSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7cmV0dXJuIGkoZSkuZ2V0QXR0cmlidXRlKFwiY2xhc3NcIil9ZnVuY3Rpb24gbihlLHQpe2EoZSxcImF0dHJpYnV0ZXNcIix7bmFtZTpcImNsYXNzXCIsbmFtZXNwYWNlOm51bGwsb2xkVmFsdWU6dH0pfWZ1bmN0aW9uIHIodCl7ZS5pbnZhbGlkYXRlUmVuZGVyZXJCYXNlZE9uQXR0cmlidXRlKHQsXCJjbGFzc1wiKX1mdW5jdGlvbiBvKGUsbyxpKXt2YXIgYT1lLm93bmVyRWxlbWVudF87aWYobnVsbD09YSlyZXR1cm4gby5hcHBseShlLGkpO3ZhciBzPXQoYSksYz1vLmFwcGx5KGUsaSk7cmV0dXJuIHQoYSkhPT1zJiYobihhLHMpLHIoYSkpLGN9aWYoIXdpbmRvdy5ET01Ub2tlbkxpc3QpcmV0dXJuIHZvaWQgY29uc29sZS53YXJuKFwiTWlzc2luZyBET01Ub2tlbkxpc3QgcHJvdG90eXBlLCBwbGVhc2UgaW5jbHVkZSBhIGNvbXBhdGlibGUgY2xhc3NMaXN0IHBvbHlmaWxsIHN1Y2ggYXMgaHR0cDovL2dvby5nbC91VGNlcEguXCIpO3ZhciBpPWUudW5zYWZlVW53cmFwLGE9ZS5lbnF1ZXVlTXV0YXRpb24scz1ET01Ub2tlbkxpc3QucHJvdG90eXBlLmFkZDtET01Ub2tlbkxpc3QucHJvdG90eXBlLmFkZD1mdW5jdGlvbigpe28odGhpcyxzLGFyZ3VtZW50cyl9O3ZhciBjPURPTVRva2VuTGlzdC5wcm90b3R5cGUucmVtb3ZlO0RPTVRva2VuTGlzdC5wcm90b3R5cGUucmVtb3ZlPWZ1bmN0aW9uKCl7byh0aGlzLGMsYXJndW1lbnRzKX07dmFyIGw9RE9NVG9rZW5MaXN0LnByb3RvdHlwZS50b2dnbGU7RE9NVG9rZW5MaXN0LnByb3RvdHlwZS50b2dnbGU9ZnVuY3Rpb24oKXtyZXR1cm4gbyh0aGlzLGwsYXJndW1lbnRzKX19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdCh0LG4pe3ZhciByPXQucGFyZW50Tm9kZTtpZihyJiZyLnNoYWRvd1Jvb3Qpe3ZhciBvPWUuZ2V0UmVuZGVyZXJGb3JIb3N0KHIpO28uZGVwZW5kc09uQXR0cmlidXRlKG4pJiZvLmludmFsaWRhdGUoKX19ZnVuY3Rpb24gbihlLHQsbil7dShlLFwiYXR0cmlidXRlc1wiLHtuYW1lOnQsbmFtZXNwYWNlOm51bGwsb2xkVmFsdWU6bn0pfWZ1bmN0aW9uIHIoZSl7YS5jYWxsKHRoaXMsZSl9dmFyIG89ZS5DaGlsZE5vZGVJbnRlcmZhY2UsaT1lLkdldEVsZW1lbnRzQnlJbnRlcmZhY2UsYT1lLndyYXBwZXJzLk5vZGUscz1lLlBhcmVudE5vZGVJbnRlcmZhY2UsYz1lLlNlbGVjdG9yc0ludGVyZmFjZSxsPWUuTWF0Y2hlc0ludGVyZmFjZSx1PShlLmFkZFdyYXBOb2RlTGlzdE1ldGhvZCxlLmVucXVldWVNdXRhdGlvbiksZD1lLm1peGluLHA9KGUub25lT2YsZS5yZWdpc3RlcldyYXBwZXIpLGg9ZS51bnNhZmVVbndyYXAsZj1lLndyYXBwZXJzLG09d2luZG93LkVsZW1lbnQsdz1bXCJtYXRjaGVzXCIsXCJtb3pNYXRjaGVzU2VsZWN0b3JcIixcIm1zTWF0Y2hlc1NlbGVjdG9yXCIsXCJ3ZWJraXRNYXRjaGVzU2VsZWN0b3JcIl0uZmlsdGVyKGZ1bmN0aW9uKGUpe3JldHVybiBtLnByb3RvdHlwZVtlXX0pLHY9d1swXSxnPW0ucHJvdG90eXBlW3ZdLGI9bmV3IFdlYWtNYXA7ci5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShhLnByb3RvdHlwZSksZChyLnByb3RvdHlwZSx7Y3JlYXRlU2hhZG93Um9vdDpmdW5jdGlvbigpe3ZhciB0PW5ldyBmLlNoYWRvd1Jvb3QodGhpcyk7aCh0aGlzKS5wb2x5bWVyU2hhZG93Um9vdF89dDt2YXIgbj1lLmdldFJlbmRlcmVyRm9ySG9zdCh0aGlzKTtyZXR1cm4gbi5pbnZhbGlkYXRlKCksdH0sZ2V0IHNoYWRvd1Jvb3QoKXtyZXR1cm4gaCh0aGlzKS5wb2x5bWVyU2hhZG93Um9vdF98fG51bGx9LHNldEF0dHJpYnV0ZTpmdW5jdGlvbihlLHIpe3ZhciBvPWgodGhpcykuZ2V0QXR0cmlidXRlKGUpO2godGhpcykuc2V0QXR0cmlidXRlKGUsciksbih0aGlzLGUsbyksdCh0aGlzLGUpfSxyZW1vdmVBdHRyaWJ1dGU6ZnVuY3Rpb24oZSl7dmFyIHI9aCh0aGlzKS5nZXRBdHRyaWJ1dGUoZSk7aCh0aGlzKS5yZW1vdmVBdHRyaWJ1dGUoZSksbih0aGlzLGUsciksdCh0aGlzLGUpfSxnZXQgY2xhc3NMaXN0KCl7dmFyIGU9Yi5nZXQodGhpcyk7aWYoIWUpe2lmKGU9aCh0aGlzKS5jbGFzc0xpc3QsIWUpcmV0dXJuO2Uub3duZXJFbGVtZW50Xz10aGlzLGIuc2V0KHRoaXMsZSl9cmV0dXJuIGV9LGdldCBjbGFzc05hbWUoKXtyZXR1cm4gaCh0aGlzKS5jbGFzc05hbWV9LHNldCBjbGFzc05hbWUoZSl7dGhpcy5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLGUpfSxnZXQgaWQoKXtyZXR1cm4gaCh0aGlzKS5pZH0sc2V0IGlkKGUpe3RoaXMuc2V0QXR0cmlidXRlKFwiaWRcIixlKX19KSx3LmZvckVhY2goZnVuY3Rpb24oZSl7XCJtYXRjaGVzXCIhPT1lJiYoci5wcm90b3R5cGVbZV09ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMubWF0Y2hlcyhlKX0pfSksbS5wcm90b3R5cGUud2Via2l0Q3JlYXRlU2hhZG93Um9vdCYmKHIucHJvdG90eXBlLndlYmtpdENyZWF0ZVNoYWRvd1Jvb3Q9ci5wcm90b3R5cGUuY3JlYXRlU2hhZG93Um9vdCksZChyLnByb3RvdHlwZSxvKSxkKHIucHJvdG90eXBlLGkpLGQoci5wcm90b3R5cGUscyksZChyLnByb3RvdHlwZSxjKSxkKHIucHJvdG90eXBlLGwpLHAobSxyLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhudWxsLFwieFwiKSksZS5pbnZhbGlkYXRlUmVuZGVyZXJCYXNlZE9uQXR0cmlidXRlPXQsZS5tYXRjaGVzTmFtZXM9dyxlLm9yaWdpbmFsTWF0Y2hlcz1nLGUud3JhcHBlcnMuRWxlbWVudD1yfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7c3dpdGNoKGUpe2Nhc2VcIiZcIjpyZXR1cm5cIiZhbXA7XCI7Y2FzZVwiPFwiOnJldHVyblwiJmx0O1wiO2Nhc2VcIj5cIjpyZXR1cm5cIiZndDtcIjtjYXNlJ1wiJzpyZXR1cm5cIiZxdW90O1wiO2Nhc2VcIsKgXCI6cmV0dXJuXCImbmJzcDtcIn19ZnVuY3Rpb24gbihlKXtyZXR1cm4gZS5yZXBsYWNlKEwsdCl9ZnVuY3Rpb24gcihlKXtyZXR1cm4gZS5yZXBsYWNlKE4sdCl9ZnVuY3Rpb24gbyhlKXtmb3IodmFyIHQ9e30sbj0wO248ZS5sZW5ndGg7bisrKXRbZVtuXV09ITA7cmV0dXJuIHR9ZnVuY3Rpb24gaShlKXtpZihlLm5hbWVzcGFjZVVSSSE9PUQpcmV0dXJuITA7dmFyIHQ9ZS5vd25lckRvY3VtZW50LmRvY3R5cGU7cmV0dXJuIHQmJnQucHVibGljSWQmJnQuc3lzdGVtSWR9ZnVuY3Rpb24gYShlLHQpe3N3aXRjaChlLm5vZGVUeXBlKXtjYXNlIE5vZGUuRUxFTUVOVF9OT0RFOmZvcih2YXIgbyxhPWUudGFnTmFtZS50b0xvd2VyQ2FzZSgpLGM9XCI8XCIrYSxsPWUuYXR0cmlidXRlcyx1PTA7bz1sW3VdO3UrKyljKz1cIiBcIitvLm5hbWUrJz1cIicrbihvLnZhbHVlKSsnXCInO3JldHVybiBDW2FdPyhpKGUpJiYoYys9XCIvXCIpLGMrXCI+XCIpOmMrXCI+XCIrcyhlKStcIjwvXCIrYStcIj5cIjtjYXNlIE5vZGUuVEVYVF9OT0RFOnZhciBkPWUuZGF0YTtyZXR1cm4gdCYmalt0LmxvY2FsTmFtZV0/ZDpyKGQpO2Nhc2UgTm9kZS5DT01NRU5UX05PREU6cmV0dXJuXCI8IS0tXCIrZS5kYXRhK1wiLS0+XCI7ZGVmYXVsdDp0aHJvdyBjb25zb2xlLmVycm9yKGUpLG5ldyBFcnJvcihcIm5vdCBpbXBsZW1lbnRlZFwiKX19ZnVuY3Rpb24gcyhlKXtlIGluc3RhbmNlb2YgTy5IVE1MVGVtcGxhdGVFbGVtZW50JiYoZT1lLmNvbnRlbnQpO2Zvcih2YXIgdD1cIlwiLG49ZS5maXJzdENoaWxkO247bj1uLm5leHRTaWJsaW5nKXQrPWEobixlKTtyZXR1cm4gdH1mdW5jdGlvbiBjKGUsdCxuKXt2YXIgcj1ufHxcImRpdlwiO2UudGV4dENvbnRlbnQ9XCJcIjt2YXIgbz1UKGUub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KHIpKTtvLmlubmVySFRNTD10O2Zvcih2YXIgaTtpPW8uZmlyc3RDaGlsZDspZS5hcHBlbmRDaGlsZChNKGkpKX1mdW5jdGlvbiBsKGUpe20uY2FsbCh0aGlzLGUpfWZ1bmN0aW9uIHUoZSx0KXt2YXIgbj1UKGUuY2xvbmVOb2RlKCExKSk7bi5pbm5lckhUTUw9dDtmb3IodmFyIHIsbz1UKGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7cj1uLmZpcnN0Q2hpbGQ7KW8uYXBwZW5kQ2hpbGQocik7cmV0dXJuIE0obyl9ZnVuY3Rpb24gZCh0KXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gZS5yZW5kZXJBbGxQZW5kaW5nKCksUyh0aGlzKVt0XX19ZnVuY3Rpb24gcChlKXt3KGwsZSxkKGUpKX1mdW5jdGlvbiBoKHQpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShsLnByb3RvdHlwZSx0LHtnZXQ6ZCh0KSxzZXQ6ZnVuY3Rpb24obil7ZS5yZW5kZXJBbGxQZW5kaW5nKCksUyh0aGlzKVt0XT1ufSxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMH0pfWZ1bmN0aW9uIGYodCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KGwucHJvdG90eXBlLHQse3ZhbHVlOmZ1bmN0aW9uKCl7cmV0dXJuIGUucmVuZGVyQWxsUGVuZGluZygpLFModGhpcylbdF0uYXBwbHkoUyh0aGlzKSxhcmd1bWVudHMpfSxjb25maWd1cmFibGU6ITAsZW51bWVyYWJsZTohMH0pfXZhciBtPWUud3JhcHBlcnMuRWxlbWVudCx3PWUuZGVmaW5lR2V0dGVyLHY9ZS5lbnF1ZXVlTXV0YXRpb24sZz1lLm1peGluLGI9ZS5ub2Rlc1dlcmVBZGRlZCx5PWUubm9kZXNXZXJlUmVtb3ZlZCxFPWUucmVnaXN0ZXJXcmFwcGVyLF89ZS5zbmFwc2hvdE5vZGVMaXN0LFM9ZS51bnNhZmVVbndyYXAsVD1lLnVud3JhcCxNPWUud3JhcCxPPWUud3JhcHBlcnMsTD0vWyZcXHUwMEEwXCJdL2csTj0vWyZcXHUwMEEwPD5dL2csQz1vKFtcImFyZWFcIixcImJhc2VcIixcImJyXCIsXCJjb2xcIixcImNvbW1hbmRcIixcImVtYmVkXCIsXCJoclwiLFwiaW1nXCIsXCJpbnB1dFwiLFwia2V5Z2VuXCIsXCJsaW5rXCIsXCJtZXRhXCIsXCJwYXJhbVwiLFwic291cmNlXCIsXCJ0cmFja1wiLFwid2JyXCJdKSxqPW8oW1wic3R5bGVcIixcInNjcmlwdFwiLFwieG1wXCIsXCJpZnJhbWVcIixcIm5vZW1iZWRcIixcIm5vZnJhbWVzXCIsXCJwbGFpbnRleHRcIixcIm5vc2NyaXB0XCJdKSxEPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLEg9L01TSUUvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkseD13aW5kb3cuSFRNTEVsZW1lbnQsUj13aW5kb3cuSFRNTFRlbXBsYXRlRWxlbWVudDtsLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG0ucHJvdG90eXBlKSxnKGwucHJvdG90eXBlLHtnZXQgaW5uZXJIVE1MKCl7cmV0dXJuIHModGhpcyl9LHNldCBpbm5lckhUTUwoZSl7aWYoSCYmalt0aGlzLmxvY2FsTmFtZV0pcmV0dXJuIHZvaWQodGhpcy50ZXh0Q29udGVudD1lKTt2YXIgdD1fKHRoaXMuY2hpbGROb2Rlcyk7dGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKT90aGlzIGluc3RhbmNlb2YgTy5IVE1MVGVtcGxhdGVFbGVtZW50P2ModGhpcy5jb250ZW50LGUpOmModGhpcyxlLHRoaXMudGFnTmFtZSk6IVImJnRoaXMgaW5zdGFuY2VvZiBPLkhUTUxUZW1wbGF0ZUVsZW1lbnQ/Yyh0aGlzLmNvbnRlbnQsZSk6Uyh0aGlzKS5pbm5lckhUTUw9ZTt2YXIgbj1fKHRoaXMuY2hpbGROb2Rlcyk7dih0aGlzLFwiY2hpbGRMaXN0XCIse2FkZGVkTm9kZXM6bixyZW1vdmVkTm9kZXM6dH0pLHkodCksYihuLHRoaXMpfSxnZXQgb3V0ZXJIVE1MKCl7cmV0dXJuIGEodGhpcyx0aGlzLnBhcmVudE5vZGUpfSxzZXQgb3V0ZXJIVE1MKGUpe3ZhciB0PXRoaXMucGFyZW50Tm9kZTtpZih0KXt0LmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpO3ZhciBuPXUodCxlKTt0LnJlcGxhY2VDaGlsZChuLHRoaXMpfX0saW5zZXJ0QWRqYWNlbnRIVE1MOmZ1bmN0aW9uKGUsdCl7dmFyIG4scjtzd2l0Y2goU3RyaW5nKGUpLnRvTG93ZXJDYXNlKCkpe2Nhc2VcImJlZm9yZWJlZ2luXCI6bj10aGlzLnBhcmVudE5vZGUscj10aGlzO2JyZWFrO2Nhc2VcImFmdGVyZW5kXCI6bj10aGlzLnBhcmVudE5vZGUscj10aGlzLm5leHRTaWJsaW5nO2JyZWFrO2Nhc2VcImFmdGVyYmVnaW5cIjpuPXRoaXMscj10aGlzLmZpcnN0Q2hpbGQ7YnJlYWs7Y2FzZVwiYmVmb3JlZW5kXCI6bj10aGlzLHI9bnVsbDticmVhaztkZWZhdWx0OnJldHVybn12YXIgbz11KG4sdCk7bi5pbnNlcnRCZWZvcmUobyxyKX0sZ2V0IGhpZGRlbigpe3JldHVybiB0aGlzLmhhc0F0dHJpYnV0ZShcImhpZGRlblwiKX0sc2V0IGhpZGRlbihlKXtlP3RoaXMuc2V0QXR0cmlidXRlKFwiaGlkZGVuXCIsXCJcIik6dGhpcy5yZW1vdmVBdHRyaWJ1dGUoXCJoaWRkZW5cIil9fSksW1wiY2xpZW50SGVpZ2h0XCIsXCJjbGllbnRMZWZ0XCIsXCJjbGllbnRUb3BcIixcImNsaWVudFdpZHRoXCIsXCJvZmZzZXRIZWlnaHRcIixcIm9mZnNldExlZnRcIixcIm9mZnNldFRvcFwiLFwib2Zmc2V0V2lkdGhcIixcInNjcm9sbEhlaWdodFwiLFwic2Nyb2xsV2lkdGhcIl0uZm9yRWFjaChwKSxbXCJzY3JvbGxMZWZ0XCIsXCJzY3JvbGxUb3BcIl0uZm9yRWFjaChoKSxbXCJnZXRCb3VuZGluZ0NsaWVudFJlY3RcIixcImdldENsaWVudFJlY3RzXCIsXCJzY3JvbGxJbnRvVmlld1wiXS5mb3JFYWNoKGYpLEUoeCxsLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJiXCIpKSxlLndyYXBwZXJzLkhUTUxFbGVtZW50PWwsZS5nZXRJbm5lckhUTUw9cyxlLnNldElubmVySFRNTD1jfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7bi5jYWxsKHRoaXMsZSl9dmFyIG49ZS53cmFwcGVycy5IVE1MRWxlbWVudCxyPWUubWl4aW4sbz1lLnJlZ2lzdGVyV3JhcHBlcixpPWUudW5zYWZlVW53cmFwLGE9ZS53cmFwLHM9d2luZG93LkhUTUxDYW52YXNFbGVtZW50O3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLHIodC5wcm90b3R5cGUse2dldENvbnRleHQ6ZnVuY3Rpb24oKXt2YXIgZT1pKHRoaXMpLmdldENvbnRleHQuYXBwbHkoaSh0aGlzKSxhcmd1bWVudHMpO3JldHVybiBlJiZhKGUpfX0pLG8ocyx0LGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikpLGUud3JhcHBlcnMuSFRNTENhbnZhc0VsZW1lbnQ9dH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe24uY2FsbCh0aGlzLGUpfXZhciBuPWUud3JhcHBlcnMuSFRNTEVsZW1lbnQscj1lLm1peGluLG89ZS5yZWdpc3RlcldyYXBwZXIsaT13aW5kb3cuSFRNTENvbnRlbnRFbGVtZW50O3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLHIodC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnQsZ2V0IHNlbGVjdCgpe3JldHVybiB0aGlzLmdldEF0dHJpYnV0ZShcInNlbGVjdFwiKX0sc2V0IHNlbGVjdChlKXt0aGlzLnNldEF0dHJpYnV0ZShcInNlbGVjdFwiLGUpfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oZSx0KXtuLnByb3RvdHlwZS5zZXRBdHRyaWJ1dGUuY2FsbCh0aGlzLGUsdCksXCJzZWxlY3RcIj09PVN0cmluZyhlKS50b0xvd2VyQ2FzZSgpJiZ0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcighMCl9fSksaSYmbyhpLHQpLGUud3JhcHBlcnMuSFRNTENvbnRlbnRFbGVtZW50PXR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtuLmNhbGwodGhpcyxlKX12YXIgbj1lLndyYXBwZXJzLkhUTUxFbGVtZW50LHI9ZS5taXhpbixvPWUucmVnaXN0ZXJXcmFwcGVyLGk9ZS53cmFwSFRNTENvbGxlY3Rpb24sYT1lLnVud3JhcCxzPXdpbmRvdy5IVE1MRm9ybUVsZW1lbnQ7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSkscih0LnByb3RvdHlwZSx7Z2V0IGVsZW1lbnRzKCl7cmV0dXJuIGkoYSh0aGlzKS5lbGVtZW50cyl9fSksbyhzLHQsZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImZvcm1cIikpLGUud3JhcHBlcnMuSFRNTEZvcm1FbGVtZW50PXR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtyLmNhbGwodGhpcyxlKX1mdW5jdGlvbiBuKGUsdCl7aWYoISh0aGlzIGluc3RhbmNlb2YgbikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRPTSBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLlwiKTt2YXIgbz1pKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIikpO3IuY2FsbCh0aGlzLG8pLGEobyx0aGlzKSx2b2lkIDAhPT1lJiYoby53aWR0aD1lKSx2b2lkIDAhPT10JiYoby5oZWlnaHQ9dCl9dmFyIHI9ZS53cmFwcGVycy5IVE1MRWxlbWVudCxvPWUucmVnaXN0ZXJXcmFwcGVyLGk9ZS51bndyYXAsYT1lLnJld3JhcCxzPXdpbmRvdy5IVE1MSW1hZ2VFbGVtZW50O3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoci5wcm90b3R5cGUpLG8ocyx0LGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpbWdcIikpLG4ucHJvdG90eXBlPXQucHJvdG90eXBlLGUud3JhcHBlcnMuSFRNTEltYWdlRWxlbWVudD10LGUud3JhcHBlcnMuSW1hZ2U9bn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe24uY2FsbCh0aGlzLGUpfXZhciBuPWUud3JhcHBlcnMuSFRNTEVsZW1lbnQscj0oZS5taXhpbixlLndyYXBwZXJzLk5vZGVMaXN0LGUucmVnaXN0ZXJXcmFwcGVyKSxvPXdpbmRvdy5IVE1MU2hhZG93RWxlbWVudDt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSx0LnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj10LG8mJnIobyx0KSxlLndyYXBwZXJzLkhUTUxTaGFkb3dFbGVtZW50PXR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtpZighZS5kZWZhdWx0VmlldylyZXR1cm4gZTt2YXIgdD1kLmdldChlKTtpZighdCl7Zm9yKHQ9ZS5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoXCJcIik7dC5sYXN0Q2hpbGQ7KXQucmVtb3ZlQ2hpbGQodC5sYXN0Q2hpbGQpO2Quc2V0KGUsdCl9cmV0dXJuIHR9ZnVuY3Rpb24gbihlKXtmb3IodmFyIG4scj10KGUub3duZXJEb2N1bWVudCksbz1jKHIuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtuPWUuZmlyc3RDaGlsZDspby5hcHBlbmRDaGlsZChuKTtyZXR1cm4gb31mdW5jdGlvbiByKGUpe2lmKG8uY2FsbCh0aGlzLGUpLCFwKXt2YXIgdD1uKGUpO3Uuc2V0KHRoaXMsbCh0KSl9fXZhciBvPWUud3JhcHBlcnMuSFRNTEVsZW1lbnQsaT1lLm1peGluLGE9ZS5yZWdpc3RlcldyYXBwZXIscz1lLnVuc2FmZVVud3JhcCxjPWUudW53cmFwLGw9ZS53cmFwLHU9bmV3IFdlYWtNYXAsZD1uZXcgV2Vha01hcCxwPXdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50O3IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoby5wcm90b3R5cGUpLGkoci5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnIsZ2V0IGNvbnRlbnQoKXtyZXR1cm4gcD9sKHModGhpcykuY29udGVudCk6dS5nZXQodGhpcyl9fSkscCYmYShwLHIpLGUud3JhcHBlcnMuSFRNTFRlbXBsYXRlRWxlbWVudD1yfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7bi5jYWxsKHRoaXMsZSl9dmFyIG49ZS53cmFwcGVycy5IVE1MRWxlbWVudCxyPWUucmVnaXN0ZXJXcmFwcGVyLG89d2luZG93LkhUTUxNZWRpYUVsZW1lbnQ7byYmKHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLHIobyx0LGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhdWRpb1wiKSksZS53cmFwcGVycy5IVE1MTWVkaWFFbGVtZW50PXQpfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7ci5jYWxsKHRoaXMsZSl9ZnVuY3Rpb24gbihlKXtpZighKHRoaXMgaW5zdGFuY2VvZiBuKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiRE9NIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uXCIpO3ZhciB0PWkoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImF1ZGlvXCIpKTtyLmNhbGwodGhpcyx0KSxhKHQsdGhpcyksdC5zZXRBdHRyaWJ1dGUoXCJwcmVsb2FkXCIsXCJhdXRvXCIpLHZvaWQgMCE9PWUmJnQuc2V0QXR0cmlidXRlKFwic3JjXCIsZSl9dmFyIHI9ZS53cmFwcGVycy5IVE1MTWVkaWFFbGVtZW50LG89ZS5yZWdpc3RlcldyYXBwZXIsaT1lLnVud3JhcCxhPWUucmV3cmFwLHM9d2luZG93LkhUTUxBdWRpb0VsZW1lbnQ7cyYmKHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoci5wcm90b3R5cGUpLG8ocyx0LGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhdWRpb1wiKSksbi5wcm90b3R5cGU9dC5wcm90b3R5cGUsZS53cmFwcGVycy5IVE1MQXVkaW9FbGVtZW50PXQsZS53cmFwcGVycy5BdWRpbz1uKX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe3JldHVybiBlLnJlcGxhY2UoL1xccysvZyxcIiBcIikudHJpbSgpfWZ1bmN0aW9uIG4oZSl7by5jYWxsKHRoaXMsZSl9ZnVuY3Rpb24gcihlLHQsbixpKXtpZighKHRoaXMgaW5zdGFuY2VvZiByKSl0aHJvdyBuZXcgVHlwZUVycm9yKFwiRE9NIG9iamVjdCBjb25zdHJ1Y3RvciBjYW5ub3QgYmUgY2FsbGVkIGFzIGEgZnVuY3Rpb24uXCIpO3ZhciBhPWMoZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKSk7by5jYWxsKHRoaXMsYSkscyhhLHRoaXMpLHZvaWQgMCE9PWUmJihhLnRleHQ9ZSksdm9pZCAwIT09dCYmYS5zZXRBdHRyaWJ1dGUoXCJ2YWx1ZVwiLHQpLG49PT0hMCYmYS5zZXRBdHRyaWJ1dGUoXCJzZWxlY3RlZFwiLFwiXCIpLGEuc2VsZWN0ZWQ9aT09PSEwfXZhciBvPWUud3JhcHBlcnMuSFRNTEVsZW1lbnQsaT1lLm1peGluLGE9ZS5yZWdpc3RlcldyYXBwZXIscz1lLnJld3JhcCxjPWUudW53cmFwLGw9ZS53cmFwLHU9d2luZG93LkhUTUxPcHRpb25FbGVtZW50O24ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoby5wcm90b3R5cGUpLGkobi5wcm90b3R5cGUse2dldCB0ZXh0KCl7cmV0dXJuIHQodGhpcy50ZXh0Q29udGVudCl9LHNldCB0ZXh0KGUpe3RoaXMudGV4dENvbnRlbnQ9dChTdHJpbmcoZSkpfSxnZXQgZm9ybSgpe3JldHVybiBsKGModGhpcykuZm9ybSl9fSksYSh1LG4sZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcIm9wdGlvblwiKSksci5wcm90b3R5cGU9bi5wcm90b3R5cGUsZS53cmFwcGVycy5IVE1MT3B0aW9uRWxlbWVudD1uLGUud3JhcHBlcnMuT3B0aW9uPXJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtuLmNhbGwodGhpcyxlKX12YXIgbj1lLndyYXBwZXJzLkhUTUxFbGVtZW50LHI9ZS5taXhpbixvPWUucmVnaXN0ZXJXcmFwcGVyLGk9ZS51bndyYXAsYT1lLndyYXAscz13aW5kb3cuSFRNTFNlbGVjdEVsZW1lbnQ7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSkscih0LnByb3RvdHlwZSx7YWRkOmZ1bmN0aW9uKGUsdCl7XCJvYmplY3RcIj09dHlwZW9mIHQmJih0PWkodCkpLGkodGhpcykuYWRkKGkoZSksdCl9LHJlbW92ZTpmdW5jdGlvbihlKXtyZXR1cm4gdm9pZCAwPT09ZT92b2lkIG4ucHJvdG90eXBlLnJlbW92ZS5jYWxsKHRoaXMpOihcIm9iamVjdFwiPT10eXBlb2YgZSYmKGU9aShlKSksdm9pZCBpKHRoaXMpLnJlbW92ZShlKSl9LGdldCBmb3JtKCl7cmV0dXJuIGEoaSh0aGlzKS5mb3JtKX19KSxvKHMsdCxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic2VsZWN0XCIpKSxlLndyYXBwZXJzLkhUTUxTZWxlY3RFbGVtZW50PXR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtuLmNhbGwodGhpcyxlKX12YXIgbj1lLndyYXBwZXJzLkhUTUxFbGVtZW50LHI9ZS5taXhpbixvPWUucmVnaXN0ZXJXcmFwcGVyLGk9ZS51bndyYXAsYT1lLndyYXAscz1lLndyYXBIVE1MQ29sbGVjdGlvbixjPXdpbmRvdy5IVE1MVGFibGVFbGVtZW50O3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLHIodC5wcm90b3R5cGUse2dldCBjYXB0aW9uKCl7cmV0dXJuIGEoaSh0aGlzKS5jYXB0aW9uKX0sY3JlYXRlQ2FwdGlvbjpmdW5jdGlvbigpe3JldHVybiBhKGkodGhpcykuY3JlYXRlQ2FwdGlvbigpKX0sZ2V0IHRIZWFkKCl7cmV0dXJuIGEoaSh0aGlzKS50SGVhZCl9LGNyZWF0ZVRIZWFkOmZ1bmN0aW9uKCl7cmV0dXJuIGEoaSh0aGlzKS5jcmVhdGVUSGVhZCgpKX0sY3JlYXRlVEZvb3Q6ZnVuY3Rpb24oKXtyZXR1cm4gYShpKHRoaXMpLmNyZWF0ZVRGb290KCkpfSxnZXQgdEZvb3QoKXtyZXR1cm4gYShpKHRoaXMpLnRGb290KX0sZ2V0IHRCb2RpZXMoKXtyZXR1cm4gcyhpKHRoaXMpLnRCb2RpZXMpfSxjcmVhdGVUQm9keTpmdW5jdGlvbigpe3JldHVybiBhKGkodGhpcykuY3JlYXRlVEJvZHkoKSl9LGdldCByb3dzKCl7cmV0dXJuIHMoaSh0aGlzKS5yb3dzKX0saW5zZXJ0Um93OmZ1bmN0aW9uKGUpe3JldHVybiBhKGkodGhpcykuaW5zZXJ0Um93KGUpKX19KSxvKGMsdCxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwidGFibGVcIikpLGUud3JhcHBlcnMuSFRNTFRhYmxlRWxlbWVudD10fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7bi5jYWxsKHRoaXMsZSl9dmFyIG49ZS53cmFwcGVycy5IVE1MRWxlbWVudCxyPWUubWl4aW4sbz1lLnJlZ2lzdGVyV3JhcHBlcixpPWUud3JhcEhUTUxDb2xsZWN0aW9uLGE9ZS51bndyYXAscz1lLndyYXAsYz13aW5kb3cuSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnQ7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSkscih0LnByb3RvdHlwZSx7Y29uc3RydWN0b3I6dCxnZXQgcm93cygpe3JldHVybiBpKGEodGhpcykucm93cyl9LGluc2VydFJvdzpmdW5jdGlvbihlKXtyZXR1cm4gcyhhKHRoaXMpLmluc2VydFJvdyhlKSl9fSksbyhjLHQsZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRoZWFkXCIpKSxlLndyYXBwZXJzLkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50PXR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtuLmNhbGwodGhpcyxlKX12YXIgbj1lLndyYXBwZXJzLkhUTUxFbGVtZW50LHI9ZS5taXhpbixvPWUucmVnaXN0ZXJXcmFwcGVyLGk9ZS53cmFwSFRNTENvbGxlY3Rpb24sYT1lLnVud3JhcCxzPWUud3JhcCxjPXdpbmRvdy5IVE1MVGFibGVSb3dFbGVtZW50O3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLHIodC5wcm90b3R5cGUse2dldCBjZWxscygpe3JldHVybiBpKGEodGhpcykuY2VsbHMpfSxpbnNlcnRDZWxsOmZ1bmN0aW9uKGUpe3JldHVybiBzKGEodGhpcykuaW5zZXJ0Q2VsbChlKSl9fSksbyhjLHQsZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRyXCIpKSxlLndyYXBwZXJzLkhUTUxUYWJsZVJvd0VsZW1lbnQ9dH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe3N3aXRjaChlLmxvY2FsTmFtZSl7Y2FzZVwiY29udGVudFwiOnJldHVybiBuZXcgbihlKTtjYXNlXCJzaGFkb3dcIjpyZXR1cm4gbmV3IG8oZSk7Y2FzZVwidGVtcGxhdGVcIjpyZXR1cm4gbmV3IGkoZSl9ci5jYWxsKHRoaXMsZSl9dmFyIG49ZS53cmFwcGVycy5IVE1MQ29udGVudEVsZW1lbnQscj1lLndyYXBwZXJzLkhUTUxFbGVtZW50LG89ZS53cmFwcGVycy5IVE1MU2hhZG93RWxlbWVudCxpPWUud3JhcHBlcnMuSFRNTFRlbXBsYXRlRWxlbWVudCxhPShlLm1peGluLGUucmVnaXN0ZXJXcmFwcGVyKSxzPXdpbmRvdy5IVE1MVW5rbm93bkVsZW1lbnQ7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShyLnByb3RvdHlwZSksYShzLHQpLGUud3JhcHBlcnMuSFRNTFVua25vd25FbGVtZW50PXR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtuLmNhbGwodGhpcyxlKX12YXIgbj1lLndyYXBwZXJzLkVsZW1lbnQscj1lLndyYXBwZXJzLkhUTUxFbGVtZW50LG89ZS5yZWdpc3RlcldyYXBwZXIsaT0oZS5kZWZpbmVXcmFwR2V0dGVyLGUudW5zYWZlVW53cmFwKSxhPWUud3JhcCxzPWUubWl4aW4sYz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsbD13aW5kb3cuU1ZHRWxlbWVudCx1PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhjLFwidGl0bGVcIik7aWYoIShcImNsYXNzTGlzdFwiaW4gdSkpe3ZhciBkPU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iobi5wcm90b3R5cGUsXCJjbGFzc0xpc3RcIik7T2JqZWN0LmRlZmluZVByb3BlcnR5KHIucHJvdG90eXBlLFwiY2xhc3NMaXN0XCIsZCksZGVsZXRlIG4ucHJvdG90eXBlLmNsYXNzTGlzdH10LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxzKHQucHJvdG90eXBlLHtnZXQgb3duZXJTVkdFbGVtZW50KCl7cmV0dXJuIGEoaSh0aGlzKS5vd25lclNWR0VsZW1lbnQpfX0pLG8obCx0LGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhjLFwidGl0bGVcIikpLGUud3JhcHBlcnMuU1ZHRWxlbWVudD10fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7cC5jYWxsKHRoaXMsZSl9dmFyIG49ZS5taXhpbixyPWUucmVnaXN0ZXJXcmFwcGVyLG89ZS51bndyYXAsaT1lLndyYXAsYT13aW5kb3cuU1ZHVXNlRWxlbWVudCxzPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIixjPWkoZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TKHMsXCJnXCIpKSxsPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhzLFwidXNlXCIpLHU9Yy5jb25zdHJ1Y3RvcixkPU9iamVjdC5nZXRQcm90b3R5cGVPZih1LnByb3RvdHlwZSkscD1kLmNvbnN0cnVjdG9yO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoZCksXCJpbnN0YW5jZVJvb3RcImluIGwmJm4odC5wcm90b3R5cGUse2dldCBpbnN0YW5jZVJvb3QoKXtyZXR1cm4gaShvKHRoaXMpLmluc3RhbmNlUm9vdCl9LGdldCBhbmltYXRlZEluc3RhbmNlUm9vdCgpe3JldHVybiBpKG8odGhpcykuYW5pbWF0ZWRJbnN0YW5jZVJvb3QpfX0pLHIoYSx0LGwpLGUud3JhcHBlcnMuU1ZHVXNlRWxlbWVudD10fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7bi5jYWxsKHRoaXMsZSl9dmFyIG49ZS53cmFwcGVycy5FdmVudFRhcmdldCxyPWUubWl4aW4sbz1lLnJlZ2lzdGVyV3JhcHBlcixpPWUudW5zYWZlVW53cmFwLGE9ZS53cmFwLHM9d2luZG93LlNWR0VsZW1lbnRJbnN0YW5jZTtzJiYodC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSkscih0LnByb3RvdHlwZSx7Z2V0IGNvcnJlc3BvbmRpbmdFbGVtZW50KCl7cmV0dXJuIGEoaSh0aGlzKS5jb3JyZXNwb25kaW5nRWxlbWVudCl9LGdldCBjb3JyZXNwb25kaW5nVXNlRWxlbWVudCgpe3JldHVybiBhKGkodGhpcykuY29ycmVzcG9uZGluZ1VzZUVsZW1lbnQpfSxnZXQgcGFyZW50Tm9kZSgpe3JldHVybiBhKGkodGhpcykucGFyZW50Tm9kZSl9LGdldCBjaGlsZE5vZGVzKCl7dGhyb3cgbmV3IEVycm9yKFwiTm90IGltcGxlbWVudGVkXCIpfSxnZXQgZmlyc3RDaGlsZCgpe3JldHVybiBhKGkodGhpcykuZmlyc3RDaGlsZCl9LGdldCBsYXN0Q2hpbGQoKXtyZXR1cm4gYShpKHRoaXMpLmxhc3RDaGlsZCl9LGdldCBwcmV2aW91c1NpYmxpbmcoKXtyZXR1cm4gYShpKHRoaXMpLnByZXZpb3VzU2libGluZyl9LGdldCBuZXh0U2libGluZygpe3JldHVybiBhKGkodGhpcykubmV4dFNpYmxpbmcpfX0pLG8ocyx0KSxlLndyYXBwZXJzLlNWR0VsZW1lbnRJbnN0YW5jZT10KX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe28oZSx0aGlzKX12YXIgbj1lLm1peGluLHI9ZS5yZWdpc3RlcldyYXBwZXIsbz1lLnNldFdyYXBwZXIsaT1lLnVuc2FmZVVud3JhcCxhPWUudW53cmFwLHM9ZS51bndyYXBJZk5lZWRlZCxjPWUud3JhcCxsPXdpbmRvdy5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ7bih0LnByb3RvdHlwZSx7Z2V0IGNhbnZhcygpe3JldHVybiBjKGkodGhpcykuY2FudmFzKX0sZHJhd0ltYWdlOmZ1bmN0aW9uKCl7YXJndW1lbnRzWzBdPXMoYXJndW1lbnRzWzBdKSxpKHRoaXMpLmRyYXdJbWFnZS5hcHBseShpKHRoaXMpLGFyZ3VtZW50cyl9LGNyZWF0ZVBhdHRlcm46ZnVuY3Rpb24oKXtyZXR1cm4gYXJndW1lbnRzWzBdPWEoYXJndW1lbnRzWzBdKSxpKHRoaXMpLmNyZWF0ZVBhdHRlcm4uYXBwbHkoaSh0aGlzKSxhcmd1bWVudHMpfX0pLHIobCx0LGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJjYW52YXNcIikuZ2V0Q29udGV4dChcIjJkXCIpKSxlLndyYXBwZXJzLkNhbnZhc1JlbmRlcmluZ0NvbnRleHQyRD10fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7byhlLHRoaXMpfXZhciBuPWUubWl4aW4scj1lLnJlZ2lzdGVyV3JhcHBlcixvPWUuc2V0V3JhcHBlcixpPWUudW5zYWZlVW53cmFwLGE9ZS51bndyYXBJZk5lZWRlZCxzPWUud3JhcCxjPXdpbmRvdy5XZWJHTFJlbmRlcmluZ0NvbnRleHQ7aWYoYyl7bih0LnByb3RvdHlwZSx7Z2V0IGNhbnZhcygpe3JldHVybiBzKGkodGhpcykuY2FudmFzKX0sdGV4SW1hZ2UyRDpmdW5jdGlvbigpe2FyZ3VtZW50c1s1XT1hKGFyZ3VtZW50c1s1XSksaSh0aGlzKS50ZXhJbWFnZTJELmFwcGx5KGkodGhpcyksYXJndW1lbnRzKX0sdGV4U3ViSW1hZ2UyRDpmdW5jdGlvbigpe2FyZ3VtZW50c1s2XT1hKGFyZ3VtZW50c1s2XSksaSh0aGlzKS50ZXhTdWJJbWFnZTJELmFwcGx5KGkodGhpcyksYXJndW1lbnRzKX19KTt2YXIgbD0vV2ViS2l0Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpP3tkcmF3aW5nQnVmZmVySGVpZ2h0Om51bGwsZHJhd2luZ0J1ZmZlcldpZHRoOm51bGx9Ont9O3IoYyx0LGwpLGUud3JhcHBlcnMuV2ViR0xSZW5kZXJpbmdDb250ZXh0PXR9fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7bi5jYWxsKHRoaXMsZSl9dmFyIG49ZS53cmFwcGVycy5Ob2RlLHI9ZS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlLG89ZS5Ob25FbGVtZW50UGFyZW50Tm9kZUludGVyZmFjZSxpPWUuUGFyZW50Tm9kZUludGVyZmFjZSxhPWUuU2VsZWN0b3JzSW50ZXJmYWNlLHM9ZS5taXhpbixjPWUucmVnaXN0ZXJPYmplY3QsbD1lLnJlZ2lzdGVyV3JhcHBlcix1PXdpbmRvdy5Eb2N1bWVudEZyYWdtZW50O3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLHModC5wcm90b3R5cGUsaSkscyh0LnByb3RvdHlwZSxhKSxzKHQucHJvdG90eXBlLHIpLHModC5wcm90b3R5cGUsbyksbCh1LHQsZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKSxlLndyYXBwZXJzLkRvY3VtZW50RnJhZ21lbnQ9dDt2YXIgZD1jKGRvY3VtZW50LmNyZWF0ZUNvbW1lbnQoXCJcIikpO2Uud3JhcHBlcnMuQ29tbWVudD1kfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7dmFyIHQ9ZCh1KGUpLm93bmVyRG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpKTtuLmNhbGwodGhpcyx0KSxjKHQsdGhpcyk7dmFyIG89ZS5zaGFkb3dSb290O2guc2V0KHRoaXMsbyksdGhpcy50cmVlU2NvcGVfPW5ldyByKHRoaXMsYShvfHxlKSkscC5zZXQodGhpcyxlKX12YXIgbj1lLndyYXBwZXJzLkRvY3VtZW50RnJhZ21lbnQscj1lLlRyZWVTY29wZSxvPWUuZWxlbWVudEZyb21Qb2ludCxpPWUuZ2V0SW5uZXJIVE1MLGE9ZS5nZXRUcmVlU2NvcGUscz1lLm1peGluLGM9ZS5yZXdyYXAsbD1lLnNldElubmVySFRNTCx1PWUudW5zYWZlVW53cmFwLGQ9ZS51bndyYXAscD1uZXcgV2Vha01hcCxoPW5ldyBXZWFrTWFwO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLHModC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnQsZ2V0IGlubmVySFRNTCgpe3JldHVybiBpKHRoaXMpfSxzZXQgaW5uZXJIVE1MKGUpe2wodGhpcyxlKSx0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfSxnZXQgb2xkZXJTaGFkb3dSb290KCl7cmV0dXJuIGguZ2V0KHRoaXMpfHxudWxsfSxnZXQgaG9zdCgpe3JldHVybiBwLmdldCh0aGlzKXx8bnVsbH0saW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyOmZ1bmN0aW9uKCl7cmV0dXJuIHAuZ2V0KHRoaXMpLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpfSxlbGVtZW50RnJvbVBvaW50OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG8odGhpcyx0aGlzLm93bmVyRG9jdW1lbnQsZSx0KX19KSxlLndyYXBwZXJzLlNoYWRvd1Jvb3Q9dH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe3ZhciB0PWQoZSkucm9vdDtyZXR1cm4gdCBpbnN0YW5jZW9mIGg/dC5ob3N0Om51bGx9ZnVuY3Rpb24gbih0LG4pe2lmKHQuc2hhZG93Um9vdCl7bj1NYXRoLm1pbih0LmNoaWxkTm9kZXMubGVuZ3RoLTEsbik7dmFyIHI9dC5jaGlsZE5vZGVzW25dO2lmKHIpe3ZhciBvPWUuZ2V0RGVzdGluYXRpb25JbnNlcnRpb25Qb2ludHMocik7aWYoby5sZW5ndGg+MCl7dmFyIGk9b1swXS5wYXJlbnROb2RlO2kubm9kZVR5cGU9PU5vZGUuRUxFTUVOVF9OT0RFJiYodD1pKX19fXJldHVybiB0fWZ1bmN0aW9uIHIoZSl7cmV0dXJuIGU9dShlKSx0KGUpfHxlfWZ1bmN0aW9uIG8oZSl7YShlLHRoaXMpfXZhciBpPWUucmVnaXN0ZXJXcmFwcGVyLGE9ZS5zZXRXcmFwcGVyLHM9ZS51bnNhZmVVbndyYXAsYz1lLnVud3JhcCxsPWUudW53cmFwSWZOZWVkZWQsdT1lLndyYXAsZD1lLmdldFRyZWVTY29wZSxwPXdpbmRvdy5SYW5nZSxoPWUud3JhcHBlcnMuU2hhZG93Um9vdDtvLnByb3RvdHlwZT17Z2V0IHN0YXJ0Q29udGFpbmVyKCl7cmV0dXJuIHIocyh0aGlzKS5zdGFydENvbnRhaW5lcil9LGdldCBlbmRDb250YWluZXIoKXtyZXR1cm4gcihzKHRoaXMpLmVuZENvbnRhaW5lcil9LGdldCBjb21tb25BbmNlc3RvckNvbnRhaW5lcigpe3JldHVybiByKHModGhpcykuY29tbW9uQW5jZXN0b3JDb250YWluZXIpfSxzZXRTdGFydDpmdW5jdGlvbihlLHQpe2U9bihlLHQpLHModGhpcykuc2V0U3RhcnQobChlKSx0KX0sc2V0RW5kOmZ1bmN0aW9uKGUsdCl7ZT1uKGUsdCkscyh0aGlzKS5zZXRFbmQobChlKSx0KX0sc2V0U3RhcnRCZWZvcmU6ZnVuY3Rpb24oZSl7cyh0aGlzKS5zZXRTdGFydEJlZm9yZShsKGUpKX0sc2V0U3RhcnRBZnRlcjpmdW5jdGlvbihlKXtzKHRoaXMpLnNldFN0YXJ0QWZ0ZXIobChlKSl9LHNldEVuZEJlZm9yZTpmdW5jdGlvbihlKXtzKHRoaXMpLnNldEVuZEJlZm9yZShsKGUpKX0sc2V0RW5kQWZ0ZXI6ZnVuY3Rpb24oZSl7cyh0aGlzKS5zZXRFbmRBZnRlcihsKGUpKX0sc2VsZWN0Tm9kZTpmdW5jdGlvbihlKXtzKHRoaXMpLnNlbGVjdE5vZGUobChlKSl9LHNlbGVjdE5vZGVDb250ZW50czpmdW5jdGlvbihlKXtzKHRoaXMpLnNlbGVjdE5vZGVDb250ZW50cyhsKGUpKX0sY29tcGFyZUJvdW5kYXJ5UG9pbnRzOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHModGhpcykuY29tcGFyZUJvdW5kYXJ5UG9pbnRzKGUsYyh0KSl9LGV4dHJhY3RDb250ZW50czpmdW5jdGlvbigpe3JldHVybiB1KHModGhpcykuZXh0cmFjdENvbnRlbnRzKCkpfSxjbG9uZUNvbnRlbnRzOmZ1bmN0aW9uKCl7cmV0dXJuIHUocyh0aGlzKS5jbG9uZUNvbnRlbnRzKCkpfSxpbnNlcnROb2RlOmZ1bmN0aW9uKGUpe3ModGhpcykuaW5zZXJ0Tm9kZShsKGUpKX0sc3Vycm91bmRDb250ZW50czpmdW5jdGlvbihlKXtzKHRoaXMpLnN1cnJvdW5kQ29udGVudHMobChlKSl9LGNsb25lUmFuZ2U6ZnVuY3Rpb24oKXtyZXR1cm4gdShzKHRoaXMpLmNsb25lUmFuZ2UoKSl9LGlzUG9pbnRJblJhbmdlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHModGhpcykuaXNQb2ludEluUmFuZ2UobChlKSx0KX0sY29tcGFyZVBvaW50OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHModGhpcykuY29tcGFyZVBvaW50KGwoZSksdCl9LGludGVyc2VjdHNOb2RlOmZ1bmN0aW9uKGUpe3JldHVybiBzKHRoaXMpLmludGVyc2VjdHNOb2RlKGwoZSkpfSx0b1N0cmluZzpmdW5jdGlvbigpe3JldHVybiBzKHRoaXMpLnRvU3RyaW5nKCl9fSxwLnByb3RvdHlwZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQmJihvLnByb3RvdHlwZS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQ9ZnVuY3Rpb24oZSl7cmV0dXJuIHUocyh0aGlzKS5jcmVhdGVDb250ZXh0dWFsRnJhZ21lbnQoZSkpfSksaSh3aW5kb3cuUmFuZ2Usbyxkb2N1bWVudC5jcmVhdGVSYW5nZSgpKSxlLndyYXBwZXJzLlJhbmdlPW99KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtlLnByZXZpb3VzU2libGluZ189ZS5wcmV2aW91c1NpYmxpbmcsZS5uZXh0U2libGluZ189ZS5uZXh0U2libGluZyxlLnBhcmVudE5vZGVfPWUucGFyZW50Tm9kZX1mdW5jdGlvbiBuKG4sbyxpKXt2YXIgYT14KG4pLHM9eChvKSxjPWk/eChpKTpudWxsO2lmKHIobyksdChvKSxpKW4uZmlyc3RDaGlsZD09PWkmJihuLmZpcnN0Q2hpbGRfPWkpLGkucHJldmlvdXNTaWJsaW5nXz1pLnByZXZpb3VzU2libGluZztlbHNle24ubGFzdENoaWxkXz1uLmxhc3RDaGlsZCxuLmxhc3RDaGlsZD09PW4uZmlyc3RDaGlsZCYmKG4uZmlyc3RDaGlsZF89bi5maXJzdENoaWxkKTt2YXIgbD1SKGEubGFzdENoaWxkKTtsJiYobC5uZXh0U2libGluZ189bC5uZXh0U2libGluZyl9ZS5vcmlnaW5hbEluc2VydEJlZm9yZS5jYWxsKGEscyxjKX1mdW5jdGlvbiByKG4pe3ZhciByPXgobiksbz1yLnBhcmVudE5vZGU7aWYobyl7dmFyIGk9UihvKTt0KG4pLG4ucHJldmlvdXNTaWJsaW5nJiYobi5wcmV2aW91c1NpYmxpbmcubmV4dFNpYmxpbmdfPW4pLG4ubmV4dFNpYmxpbmcmJihuLm5leHRTaWJsaW5nLnByZXZpb3VzU2libGluZ189biksaS5sYXN0Q2hpbGQ9PT1uJiYoaS5sYXN0Q2hpbGRfPW4pLGkuZmlyc3RDaGlsZD09PW4mJihpLmZpcnN0Q2hpbGRfPW4pLGUub3JpZ2luYWxSZW1vdmVDaGlsZC5jYWxsKG8scil9fWZ1bmN0aW9uIG8oZSl7UC5zZXQoZSxbXSl9ZnVuY3Rpb24gaShlKXt2YXIgdD1QLmdldChlKTtyZXR1cm4gdHx8UC5zZXQoZSx0PVtdKSx0fWZ1bmN0aW9uIGEoZSl7Zm9yKHZhciB0PVtdLG49MCxyPWUuZmlyc3RDaGlsZDtyO3I9ci5uZXh0U2libGluZyl0W24rK109cjtyZXR1cm4gdH1mdW5jdGlvbiBzKCl7Zm9yKHZhciBlPTA7ZTxGLmxlbmd0aDtlKyspe3ZhciB0PUZbZV0sbj10LnBhcmVudFJlbmRlcmVyO24mJm4uZGlydHl8fHQucmVuZGVyKCl9Rj1bXX1mdW5jdGlvbiBjKCl7VD1udWxsLHMoKX1mdW5jdGlvbiBsKGUpe3ZhciB0PUEuZ2V0KGUpO3JldHVybiB0fHwodD1uZXcgaChlKSxBLnNldChlLHQpKSx0fWZ1bmN0aW9uIHUoZSl7dmFyIHQ9aihlKS5yb290O3JldHVybiB0IGluc3RhbmNlb2YgQz90Om51bGx9ZnVuY3Rpb24gZChlKXtyZXR1cm4gbChlLmhvc3QpfWZ1bmN0aW9uIHAoZSl7dGhpcy5za2lwPSExLHRoaXMubm9kZT1lLHRoaXMuY2hpbGROb2Rlcz1bXX1mdW5jdGlvbiBoKGUpe3RoaXMuaG9zdD1lLHRoaXMuZGlydHk9ITEsdGhpcy5pbnZhbGlkYXRlQXR0cmlidXRlcygpLHRoaXMuYXNzb2NpYXRlTm9kZShlKX1mdW5jdGlvbiBmKGUpe2Zvcih2YXIgdD1bXSxuPWUuZmlyc3RDaGlsZDtuO249bi5uZXh0U2libGluZylFKG4pP3QucHVzaC5hcHBseSh0LGkobikpOnQucHVzaChuKTtyZXR1cm4gdH1mdW5jdGlvbiBtKGUpe2lmKGUgaW5zdGFuY2VvZiBMKXJldHVybiBlO2lmKGUgaW5zdGFuY2VvZiBPKXJldHVybiBudWxsO2Zvcih2YXIgdD1lLmZpcnN0Q2hpbGQ7dDt0PXQubmV4dFNpYmxpbmcpe3ZhciBuPW0odCk7aWYobilyZXR1cm4gbn1yZXR1cm4gbnVsbH1mdW5jdGlvbiB3KGUsdCl7aSh0KS5wdXNoKGUpO3ZhciBuPWsuZ2V0KGUpO24/bi5wdXNoKHQpOmsuc2V0KGUsW3RdKX1mdW5jdGlvbiB2KGUpe3JldHVybiBrLmdldChlKX1mdW5jdGlvbiBnKGUpe2suc2V0KGUsdm9pZCAwKX1mdW5jdGlvbiBiKGUsdCl7dmFyIG49dC5nZXRBdHRyaWJ1dGUoXCJzZWxlY3RcIik7aWYoIW4pcmV0dXJuITA7aWYobj1uLnRyaW0oKSwhbilyZXR1cm4hMDtpZighKGUgaW5zdGFuY2VvZiBNKSlyZXR1cm4hMTtpZighcS50ZXN0KG4pKXJldHVybiExO3RyeXtyZXR1cm4gZS5tYXRjaGVzKG4pfWNhdGNoKHIpe3JldHVybiExfX1mdW5jdGlvbiB5KGUsdCl7dmFyIG49dih0KTtyZXR1cm4gbiYmbltuLmxlbmd0aC0xXT09PWV9ZnVuY3Rpb24gRShlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIE98fGUgaW5zdGFuY2VvZiBMfWZ1bmN0aW9uIF8oZSl7cmV0dXJuIGUuc2hhZG93Um9vdH1mdW5jdGlvbiBTKGUpe2Zvcih2YXIgdD1bXSxuPWUuc2hhZG93Um9vdDtuO249bi5vbGRlclNoYWRvd1Jvb3QpdC5wdXNoKG4pO3JldHVybiB0fXZhciBULE09ZS53cmFwcGVycy5FbGVtZW50LE89ZS53cmFwcGVycy5IVE1MQ29udGVudEVsZW1lbnQsTD1lLndyYXBwZXJzLkhUTUxTaGFkb3dFbGVtZW50LE49ZS53cmFwcGVycy5Ob2RlLEM9ZS53cmFwcGVycy5TaGFkb3dSb290LGo9KGUuYXNzZXJ0LGUuZ2V0VHJlZVNjb3BlKSxEPShlLm1peGluLGUub25lT2YpLEg9ZS51bnNhZmVVbndyYXAseD1lLnVud3JhcCxSPWUud3JhcCxJPWUuQXJyYXlTcGxpY2UsUD1uZXcgV2Vha01hcCxrPW5ldyBXZWFrTWFwLEE9bmV3IFdlYWtNYXAsVz1EKHdpbmRvdyxbXCJyZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIixcIm1velJlcXVlc3RBbmltYXRpb25GcmFtZVwiLFwid2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lXCIsXCJzZXRUaW1lb3V0XCJdKSxGPVtdLFU9bmV3IEk7VS5lcXVhbHM9ZnVuY3Rpb24oZSx0KXtyZXR1cm4geChlLm5vZGUpPT09dH0scC5wcm90b3R5cGU9e2FwcGVuZDpmdW5jdGlvbihlKXt2YXIgdD1uZXcgcChlKTtyZXR1cm4gdGhpcy5jaGlsZE5vZGVzLnB1c2godCksdH0sc3luYzpmdW5jdGlvbihlKXtpZighdGhpcy5za2lwKXtmb3IodmFyIHQ9dGhpcy5ub2RlLG89dGhpcy5jaGlsZE5vZGVzLGk9YSh4KHQpKSxzPWV8fG5ldyBXZWFrTWFwLGM9VS5jYWxjdWxhdGVTcGxpY2VzKG8saSksbD0wLHU9MCxkPTAscD0wO3A8Yy5sZW5ndGg7cCsrKXtmb3IodmFyIGg9Y1twXTtkPGguaW5kZXg7ZCsrKXUrKyxvW2wrK10uc3luYyhzKTtmb3IodmFyIGY9aC5yZW1vdmVkLmxlbmd0aCxtPTA7Zj5tO20rKyl7dmFyIHc9UihpW3UrK10pO3MuZ2V0KHcpfHxyKHcpfWZvcih2YXIgdj1oLmFkZGVkQ291bnQsZz1pW3VdJiZSKGlbdV0pLG09MDt2Pm07bSsrKXt2YXIgYj1vW2wrK10seT1iLm5vZGU7bih0LHksZykscy5zZXQoeSwhMCksYi5zeW5jKHMpfWQrPXZ9Zm9yKHZhciBwPWQ7cDxvLmxlbmd0aDtwKyspb1twXS5zeW5jKHMpfX19LGgucHJvdG90eXBlPXtyZW5kZXI6ZnVuY3Rpb24oZSl7aWYodGhpcy5kaXJ0eSl7dGhpcy5pbnZhbGlkYXRlQXR0cmlidXRlcygpO3ZhciB0PXRoaXMuaG9zdDt0aGlzLmRpc3RyaWJ1dGlvbih0KTt2YXIgbj1lfHxuZXcgcCh0KTt0aGlzLmJ1aWxkUmVuZGVyVHJlZShuLHQpO3ZhciByPSFlO3ImJm4uc3luYygpLHRoaXMuZGlydHk9ITF9fSxnZXQgcGFyZW50UmVuZGVyZXIoKXtyZXR1cm4gaih0aGlzLmhvc3QpLnJlbmRlcmVyfSxpbnZhbGlkYXRlOmZ1bmN0aW9uKCl7aWYoIXRoaXMuZGlydHkpe3RoaXMuZGlydHk9ITA7dmFyIGU9dGhpcy5wYXJlbnRSZW5kZXJlcjtpZihlJiZlLmludmFsaWRhdGUoKSxGLnB1c2godGhpcyksVClyZXR1cm47VD13aW5kb3dbV10oYywwKX19LGRpc3RyaWJ1dGlvbjpmdW5jdGlvbihlKXt0aGlzLnJlc2V0QWxsU3VidHJlZXMoZSksdGhpcy5kaXN0cmlidXRpb25SZXNvbHV0aW9uKGUpfSxyZXNldEFsbDpmdW5jdGlvbihlKXtFKGUpP28oZSk6ZyhlKSx0aGlzLnJlc2V0QWxsU3VidHJlZXMoZSl9LHJlc2V0QWxsU3VidHJlZXM6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUuZmlyc3RDaGlsZDt0O3Q9dC5uZXh0U2libGluZyl0aGlzLnJlc2V0QWxsKHQpO2Uuc2hhZG93Um9vdCYmdGhpcy5yZXNldEFsbChlLnNoYWRvd1Jvb3QpLGUub2xkZXJTaGFkb3dSb290JiZ0aGlzLnJlc2V0QWxsKGUub2xkZXJTaGFkb3dSb290KX0sZGlzdHJpYnV0aW9uUmVzb2x1dGlvbjpmdW5jdGlvbihlKXtpZihfKGUpKXtmb3IodmFyIHQ9ZSxuPWYodCkscj1TKHQpLG89MDtvPHIubGVuZ3RoO28rKyl0aGlzLnBvb2xEaXN0cmlidXRpb24ocltvXSxuKTtmb3IodmFyIG89ci5sZW5ndGgtMTtvPj0wO28tLSl7dmFyIGk9cltvXSxhPW0oaSk7aWYoYSl7dmFyIHM9aS5vbGRlclNoYWRvd1Jvb3Q7cyYmKG49ZihzKSk7Zm9yKHZhciBjPTA7YzxuLmxlbmd0aDtjKyspdyhuW2NdLGEpfXRoaXMuZGlzdHJpYnV0aW9uUmVzb2x1dGlvbihpKX19Zm9yKHZhciBsPWUuZmlyc3RDaGlsZDtsO2w9bC5uZXh0U2libGluZyl0aGlzLmRpc3RyaWJ1dGlvblJlc29sdXRpb24obCl9LHBvb2xEaXN0cmlidXRpb246ZnVuY3Rpb24oZSx0KXtpZighKGUgaW5zdGFuY2VvZiBMKSlpZihlIGluc3RhbmNlb2YgTyl7dmFyIG49ZTt0aGlzLnVwZGF0ZURlcGVuZGVudEF0dHJpYnV0ZXMobi5nZXRBdHRyaWJ1dGUoXCJzZWxlY3RcIikpO2Zvcih2YXIgcj0hMSxvPTA7bzx0Lmxlbmd0aDtvKyspe3ZhciBlPXRbb107ZSYmYihlLG4pJiYodyhlLG4pLHRbb109dm9pZCAwLHI9ITApfWlmKCFyKWZvcih2YXIgaT1uLmZpcnN0Q2hpbGQ7aTtpPWkubmV4dFNpYmxpbmcpdyhpLG4pfWVsc2UgZm9yKHZhciBpPWUuZmlyc3RDaGlsZDtpO2k9aS5uZXh0U2libGluZyl0aGlzLnBvb2xEaXN0cmlidXRpb24oaSx0KX0sYnVpbGRSZW5kZXJUcmVlOmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuPXRoaXMuY29tcG9zZSh0KSxyPTA7cjxuLmxlbmd0aDtyKyspe3ZhciBvPW5bcl0saT1lLmFwcGVuZChvKTt0aGlzLmJ1aWxkUmVuZGVyVHJlZShpLG8pfWlmKF8odCkpe3ZhciBhPWwodCk7YS5kaXJ0eT0hMX19LGNvbXBvc2U6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PVtdLG49ZS5zaGFkb3dSb290fHxlLHI9bi5maXJzdENoaWxkO3I7cj1yLm5leHRTaWJsaW5nKWlmKEUocikpe3RoaXMuYXNzb2NpYXRlTm9kZShuKTtmb3IodmFyIG89aShyKSxhPTA7YTxvLmxlbmd0aDthKyspe3ZhciBzPW9bYV07eShyLHMpJiZ0LnB1c2gocyl9fWVsc2UgdC5wdXNoKHIpO3JldHVybiB0fSxpbnZhbGlkYXRlQXR0cmlidXRlczpmdW5jdGlvbigpe3RoaXMuYXR0cmlidXRlcz1PYmplY3QuY3JlYXRlKG51bGwpfSx1cGRhdGVEZXBlbmRlbnRBdHRyaWJ1dGVzOmZ1bmN0aW9uKGUpe2lmKGUpe3ZhciB0PXRoaXMuYXR0cmlidXRlczsvXFwuXFx3Ky8udGVzdChlKSYmKHRbXCJjbGFzc1wiXT0hMCksLyNcXHcrLy50ZXN0KGUpJiYodC5pZD0hMCksZS5yZXBsYWNlKC9cXFtcXHMqKFteXFxzPVxcfH5cXF1dKykvZyxmdW5jdGlvbihlLG4pe3Rbbl09ITB9KX19LGRlcGVuZHNPbkF0dHJpYnV0ZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5hdHRyaWJ1dGVzW2VdfSxhc3NvY2lhdGVOb2RlOmZ1bmN0aW9uKGUpe0goZSkucG9seW1lclNoYWRvd1JlbmRlcmVyXz10aGlzfX07dmFyIHE9L14oOm5vdFxcKCk/WyouI1thLXpBLVpffF0vO04ucHJvdG90eXBlLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcj1mdW5jdGlvbihlKXt2YXIgdD1IKHRoaXMpLnBvbHltZXJTaGFkb3dSZW5kZXJlcl87cmV0dXJuIHQ/KHQuaW52YWxpZGF0ZSgpLCEwKTohMX0sTy5wcm90b3R5cGUuZ2V0RGlzdHJpYnV0ZWROb2Rlcz1MLnByb3RvdHlwZS5nZXREaXN0cmlidXRlZE5vZGVzPWZ1bmN0aW9uKCl7cmV0dXJuIHMoKSxpKHRoaXMpfSxNLnByb3RvdHlwZS5nZXREZXN0aW5hdGlvbkluc2VydGlvblBvaW50cz1mdW5jdGlvbigpe3JldHVybiBzKCksdih0aGlzKXx8W119LE8ucHJvdG90eXBlLm5vZGVJc0luc2VydGVkXz1MLnByb3RvdHlwZS5ub2RlSXNJbnNlcnRlZF89ZnVuY3Rpb24oKXt0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpO3ZhciBlLHQ9dSh0aGlzKTt0JiYoZT1kKHQpKSxIKHRoaXMpLnBvbHltZXJTaGFkb3dSZW5kZXJlcl89ZSxlJiZlLmludmFsaWRhdGUoKX0sZS5nZXRSZW5kZXJlckZvckhvc3Q9bCxlLmdldFNoYWRvd1RyZWVzPVMsZS5yZW5kZXJBbGxQZW5kaW5nPXMsZS5nZXREZXN0aW5hdGlvbkluc2VydGlvblBvaW50cz12LGUudmlzdWFsPXtpbnNlcnRCZWZvcmU6bixyZW1vdmU6cn19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdCh0KXtpZih3aW5kb3dbdF0pe3IoIWUud3JhcHBlcnNbdF0pO3ZhciBjPWZ1bmN0aW9uKGUpe24uY2FsbCh0aGlzLGUpfTtjLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxvKGMucHJvdG90eXBlLHtnZXQgZm9ybSgpe3JldHVybiBzKGEodGhpcykuZm9ybSl9fSksaSh3aW5kb3dbdF0sYyxkb2N1bWVudC5jcmVhdGVFbGVtZW50KHQuc2xpY2UoNCwtNykpKSxlLndyYXBwZXJzW3RdPWN9fXZhciBuPWUud3JhcHBlcnMuSFRNTEVsZW1lbnQscj1lLmFzc2VydCxvPWUubWl4aW4saT1lLnJlZ2lzdGVyV3JhcHBlcixhPWUudW53cmFwLHM9ZS53cmFwLGM9W1wiSFRNTEJ1dHRvbkVsZW1lbnRcIixcIkhUTUxGaWVsZFNldEVsZW1lbnRcIixcIkhUTUxJbnB1dEVsZW1lbnRcIixcIkhUTUxLZXlnZW5FbGVtZW50XCIsXCJIVE1MTGFiZWxFbGVtZW50XCIsXCJIVE1MTGVnZW5kRWxlbWVudFwiLFwiSFRNTE9iamVjdEVsZW1lbnRcIixcIkhUTUxPdXRwdXRFbGVtZW50XCIsXCJIVE1MVGV4dEFyZWFFbGVtZW50XCJdO2MuZm9yRWFjaCh0KX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe3IoZSx0aGlzKX12YXIgbj1lLnJlZ2lzdGVyV3JhcHBlcixyPWUuc2V0V3JhcHBlcixvPWUudW5zYWZlVW53cmFwLGk9ZS51bndyYXAsYT1lLnVud3JhcElmTmVlZGVkLHM9ZS53cmFwLGM9d2luZG93LlNlbGVjdGlvbjt0LnByb3RvdHlwZT17Z2V0IGFuY2hvck5vZGUoKXtyZXR1cm4gcyhvKHRoaXMpLmFuY2hvck5vZGUpfSxnZXQgZm9jdXNOb2RlKCl7cmV0dXJuIHMobyh0aGlzKS5mb2N1c05vZGUpfSxhZGRSYW5nZTpmdW5jdGlvbihlKXtvKHRoaXMpLmFkZFJhbmdlKGEoZSkpfSxjb2xsYXBzZTpmdW5jdGlvbihlLHQpe28odGhpcykuY29sbGFwc2UoYShlKSx0KX0sY29udGFpbnNOb2RlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIG8odGhpcykuY29udGFpbnNOb2RlKGEoZSksdCl9LGdldFJhbmdlQXQ6ZnVuY3Rpb24oZSl7cmV0dXJuIHMobyh0aGlzKS5nZXRSYW5nZUF0KGUpKX0scmVtb3ZlUmFuZ2U6ZnVuY3Rpb24oZSl7byh0aGlzKS5yZW1vdmVSYW5nZShpKGUpKX0sc2VsZWN0QWxsQ2hpbGRyZW46ZnVuY3Rpb24oZSl7byh0aGlzKS5zZWxlY3RBbGxDaGlsZHJlbihhKGUpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gbyh0aGlzKS50b1N0cmluZygpfX0sYy5wcm90b3R5cGUuZXh0ZW5kJiYodC5wcm90b3R5cGUuZXh0ZW5kPWZ1bmN0aW9uKGUsdCl7byh0aGlzKS5leHRlbmQoYShlKSx0KX0pLG4od2luZG93LlNlbGVjdGlvbix0LHdpbmRvdy5nZXRTZWxlY3Rpb24oKSksZS53cmFwcGVycy5TZWxlY3Rpb249dH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe3IoZSx0aGlzKX12YXIgbj1lLnJlZ2lzdGVyV3JhcHBlcixyPWUuc2V0V3JhcHBlcixvPWUudW5zYWZlVW53cmFwLGk9ZS51bndyYXBJZk5lZWRlZCxhPWUud3JhcCxzPXdpbmRvdy5UcmVlV2Fsa2VyO3QucHJvdG90eXBlPXtnZXQgcm9vdCgpe3JldHVybiBhKG8odGhpcykucm9vdCl9LGdldCBjdXJyZW50Tm9kZSgpe3JldHVybiBhKG8odGhpcykuY3VycmVudE5vZGUpfSxzZXQgY3VycmVudE5vZGUoZSl7byh0aGlzKS5jdXJyZW50Tm9kZT1pKGUpfSxnZXQgZmlsdGVyKCl7cmV0dXJuIG8odGhpcykuZmlsdGVyfSxwYXJlbnROb2RlOmZ1bmN0aW9uKCl7cmV0dXJuIGEobyh0aGlzKS5wYXJlbnROb2RlKCkpfSxmaXJzdENoaWxkOmZ1bmN0aW9uKCl7cmV0dXJuIGEobyh0aGlzKS5maXJzdENoaWxkKCkpfSxsYXN0Q2hpbGQ6ZnVuY3Rpb24oKXtyZXR1cm4gYShvKHRoaXMpLmxhc3RDaGlsZCgpKX0scHJldmlvdXNTaWJsaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIGEobyh0aGlzKS5wcmV2aW91c1NpYmxpbmcoKSl9LHByZXZpb3VzTm9kZTpmdW5jdGlvbigpe3JldHVybiBhKG8odGhpcykucHJldmlvdXNOb2RlKCkpfSxuZXh0Tm9kZTpmdW5jdGlvbigpe3JldHVybiBhKG8odGhpcykubmV4dE5vZGUoKSl9fSxuKHMsdCksZS53cmFwcGVycy5UcmVlV2Fsa2VyPXR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXt1LmNhbGwodGhpcyxlKSx0aGlzLnRyZWVTY29wZV89bmV3IHcodGhpcyxudWxsKX1mdW5jdGlvbiBuKGUpe3ZhciBuPWRvY3VtZW50W2VdO3QucHJvdG90eXBlW2VdPWZ1bmN0aW9uKCl7cmV0dXJuIEMobi5hcHBseShMKHRoaXMpLGFyZ3VtZW50cykpfX1mdW5jdGlvbiByKGUsdCl7SC5jYWxsKEwodCksTihlKSksbyhlLHQpfWZ1bmN0aW9uIG8oZSx0KXtlLnNoYWRvd1Jvb3QmJnQuYWRvcHROb2RlKGUuc2hhZG93Um9vdCksZSBpbnN0YW5jZW9mIG0mJmkoZSx0KTtmb3IodmFyIG49ZS5maXJzdENoaWxkO247bj1uLm5leHRTaWJsaW5nKW8obix0KX1mdW5jdGlvbiBpKGUsdCl7dmFyIG49ZS5vbGRlclNoYWRvd1Jvb3Q7biYmdC5hZG9wdE5vZGUobil9ZnVuY3Rpb24gYShlKXtPKGUsdGhpcyl9ZnVuY3Rpb24gcyhlLHQpe3ZhciBuPWRvY3VtZW50LmltcGxlbWVudGF0aW9uW3RdO2UucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7cmV0dXJuIEMobi5hcHBseShMKHRoaXMpLGFyZ3VtZW50cykpfX1mdW5jdGlvbiBjKGUsdCl7dmFyIG49ZG9jdW1lbnQuaW1wbGVtZW50YXRpb25bdF07ZS5wcm90b3R5cGVbdF09ZnVuY3Rpb24oKXtyZXR1cm4gbi5hcHBseShMKHRoaXMpLGFyZ3VtZW50cyl9fXZhciBsPWUuR2V0RWxlbWVudHNCeUludGVyZmFjZSx1PWUud3JhcHBlcnMuTm9kZSxkPWUuUGFyZW50Tm9kZUludGVyZmFjZSxwPWUuTm9uRWxlbWVudFBhcmVudE5vZGVJbnRlcmZhY2UsaD1lLndyYXBwZXJzLlNlbGVjdGlvbixmPWUuU2VsZWN0b3JzSW50ZXJmYWNlLG09ZS53cmFwcGVycy5TaGFkb3dSb290LHc9ZS5UcmVlU2NvcGUsdj1lLmNsb25lTm9kZSxnPWUuZGVmaW5lV3JhcEdldHRlcixiPWUuZWxlbWVudEZyb21Qb2ludCx5PWUuZm9yd2FyZE1ldGhvZHNUb1dyYXBwZXIsRT1lLm1hdGNoZXNOYW1lcyxfPWUubWl4aW4sUz1lLnJlZ2lzdGVyV3JhcHBlcixUPWUucmVuZGVyQWxsUGVuZGluZyxNPWUucmV3cmFwLE89ZS5zZXRXcmFwcGVyLEw9ZS51bnNhZmVVbndyYXAsTj1lLnVud3JhcCxDPWUud3JhcCxqPWUud3JhcEV2ZW50VGFyZ2V0TWV0aG9kcyxEPShlLndyYXBOb2RlTGlzdCxcbm5ldyBXZWFrTWFwKTt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHUucHJvdG90eXBlKSxnKHQsXCJkb2N1bWVudEVsZW1lbnRcIiksZyh0LFwiYm9keVwiKSxnKHQsXCJoZWFkXCIpLFtcImNyZWF0ZUNvbW1lbnRcIixcImNyZWF0ZURvY3VtZW50RnJhZ21lbnRcIixcImNyZWF0ZUVsZW1lbnRcIixcImNyZWF0ZUVsZW1lbnROU1wiLFwiY3JlYXRlRXZlbnRcIixcImNyZWF0ZUV2ZW50TlNcIixcImNyZWF0ZVJhbmdlXCIsXCJjcmVhdGVUZXh0Tm9kZVwiXS5mb3JFYWNoKG4pO3ZhciBIPWRvY3VtZW50LmFkb3B0Tm9kZSx4PWRvY3VtZW50LmdldFNlbGVjdGlvbjtfKHQucHJvdG90eXBlLHthZG9wdE5vZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucGFyZW50Tm9kZSYmZS5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKGUpLHIoZSx0aGlzKSxlfSxlbGVtZW50RnJvbVBvaW50OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGIodGhpcyx0aGlzLGUsdCl9LGltcG9ydE5vZGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gdihlLHQsTCh0aGlzKSl9LGdldFNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiBUKCksbmV3IGgoeC5jYWxsKE4odGhpcykpKX0sZ2V0RWxlbWVudHNCeU5hbWU6ZnVuY3Rpb24oZSl7cmV0dXJuIGYucXVlcnlTZWxlY3RvckFsbC5jYWxsKHRoaXMsXCJbbmFtZT1cIitKU09OLnN0cmluZ2lmeShTdHJpbmcoZSkpK1wiXVwiKX19KTt2YXIgUj1kb2N1bWVudC5jcmVhdGVUcmVlV2Fsa2VyLEk9ZS53cmFwcGVycy5UcmVlV2Fsa2VyO2lmKHQucHJvdG90eXBlLmNyZWF0ZVRyZWVXYWxrZXI9ZnVuY3Rpb24oZSx0LG4scil7dmFyIG89bnVsbDtyZXR1cm4gbiYmKG4uYWNjZXB0Tm9kZSYmXCJmdW5jdGlvblwiPT10eXBlb2Ygbi5hY2NlcHROb2RlP289e2FjY2VwdE5vZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIG4uYWNjZXB0Tm9kZShDKGUpKX19OlwiZnVuY3Rpb25cIj09dHlwZW9mIG4mJihvPWZ1bmN0aW9uKGUpe3JldHVybiBuKEMoZSkpfSkpLG5ldyBJKFIuY2FsbChOKHRoaXMpLE4oZSksdCxvLHIpKX0sZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50KXt2YXIgUD1kb2N1bWVudC5yZWdpc3RlckVsZW1lbnQ7dC5wcm90b3R5cGUucmVnaXN0ZXJFbGVtZW50PWZ1bmN0aW9uKHQsbil7ZnVuY3Rpb24gcihlKXtyZXR1cm4gZT92b2lkIE8oZSx0aGlzKTppP2RvY3VtZW50LmNyZWF0ZUVsZW1lbnQoaSx0KTpkb2N1bWVudC5jcmVhdGVFbGVtZW50KHQpfXZhciBvLGk7aWYodm9pZCAwIT09biYmKG89bi5wcm90b3R5cGUsaT1uW1wiZXh0ZW5kc1wiXSksb3x8KG89T2JqZWN0LmNyZWF0ZShIVE1MRWxlbWVudC5wcm90b3R5cGUpKSxlLm5hdGl2ZVByb3RvdHlwZVRhYmxlLmdldChvKSl0aHJvdyBuZXcgRXJyb3IoXCJOb3RTdXBwb3J0ZWRFcnJvclwiKTtmb3IodmFyIGEscz1PYmplY3QuZ2V0UHJvdG90eXBlT2YobyksYz1bXTtzJiYhKGE9ZS5uYXRpdmVQcm90b3R5cGVUYWJsZS5nZXQocykpOyljLnB1c2gocykscz1PYmplY3QuZ2V0UHJvdG90eXBlT2Yocyk7aWYoIWEpdGhyb3cgbmV3IEVycm9yKFwiTm90U3VwcG9ydGVkRXJyb3JcIik7Zm9yKHZhciBsPU9iamVjdC5jcmVhdGUoYSksdT1jLmxlbmd0aC0xO3U+PTA7dS0tKWw9T2JqZWN0LmNyZWF0ZShsKTtbXCJjcmVhdGVkQ2FsbGJhY2tcIixcImF0dGFjaGVkQ2FsbGJhY2tcIixcImRldGFjaGVkQ2FsbGJhY2tcIixcImF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFja1wiXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PW9bZV07dCYmKGxbZV09ZnVuY3Rpb24oKXtDKHRoaXMpaW5zdGFuY2VvZiByfHxNKHRoaXMpLHQuYXBwbHkoQyh0aGlzKSxhcmd1bWVudHMpfSl9KTt2YXIgZD17cHJvdG90eXBlOmx9O2kmJihkW1wiZXh0ZW5kc1wiXT1pKSxyLnByb3RvdHlwZT1vLHIucHJvdG90eXBlLmNvbnN0cnVjdG9yPXIsZS5jb25zdHJ1Y3RvclRhYmxlLnNldChsLHIpLGUubmF0aXZlUHJvdG90eXBlVGFibGUuc2V0KG8sbCk7UC5jYWxsKE4odGhpcyksdCxkKTtyZXR1cm4gcn0seShbd2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50XSxbXCJyZWdpc3RlckVsZW1lbnRcIl0pfXkoW3dpbmRvdy5IVE1MQm9keUVsZW1lbnQsd2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50LHdpbmRvdy5IVE1MSGVhZEVsZW1lbnQsd2luZG93LkhUTUxIdG1sRWxlbWVudF0sW1wiYXBwZW5kQ2hpbGRcIixcImNvbXBhcmVEb2N1bWVudFBvc2l0aW9uXCIsXCJjb250YWluc1wiLFwiZ2V0RWxlbWVudHNCeUNsYXNzTmFtZVwiLFwiZ2V0RWxlbWVudHNCeVRhZ05hbWVcIixcImdldEVsZW1lbnRzQnlUYWdOYW1lTlNcIixcImluc2VydEJlZm9yZVwiLFwicXVlcnlTZWxlY3RvclwiLFwicXVlcnlTZWxlY3RvckFsbFwiLFwicmVtb3ZlQ2hpbGRcIixcInJlcGxhY2VDaGlsZFwiXSkseShbd2luZG93LkhUTUxCb2R5RWxlbWVudCx3aW5kb3cuSFRNTEhlYWRFbGVtZW50LHdpbmRvdy5IVE1MSHRtbEVsZW1lbnRdLEUpLHkoW3dpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudF0sW1wiYWRvcHROb2RlXCIsXCJpbXBvcnROb2RlXCIsXCJjb250YWluc1wiLFwiY3JlYXRlQ29tbWVudFwiLFwiY3JlYXRlRG9jdW1lbnRGcmFnbWVudFwiLFwiY3JlYXRlRWxlbWVudFwiLFwiY3JlYXRlRWxlbWVudE5TXCIsXCJjcmVhdGVFdmVudFwiLFwiY3JlYXRlRXZlbnROU1wiLFwiY3JlYXRlUmFuZ2VcIixcImNyZWF0ZVRleHROb2RlXCIsXCJjcmVhdGVUcmVlV2Fsa2VyXCIsXCJlbGVtZW50RnJvbVBvaW50XCIsXCJnZXRFbGVtZW50QnlJZFwiLFwiZ2V0RWxlbWVudHNCeU5hbWVcIixcImdldFNlbGVjdGlvblwiXSksXyh0LnByb3RvdHlwZSxsKSxfKHQucHJvdG90eXBlLGQpLF8odC5wcm90b3R5cGUsZiksXyh0LnByb3RvdHlwZSxwKSxfKHQucHJvdG90eXBlLHtnZXQgaW1wbGVtZW50YXRpb24oKXt2YXIgZT1ELmdldCh0aGlzKTtyZXR1cm4gZT9lOihlPW5ldyBhKE4odGhpcykuaW1wbGVtZW50YXRpb24pLEQuc2V0KHRoaXMsZSksZSl9LGdldCBkZWZhdWx0Vmlldygpe3JldHVybiBDKE4odGhpcykuZGVmYXVsdFZpZXcpfX0pLFMod2luZG93LkRvY3VtZW50LHQsZG9jdW1lbnQuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KFwiXCIpKSx3aW5kb3cuSFRNTERvY3VtZW50JiZTKHdpbmRvdy5IVE1MRG9jdW1lbnQsdCksaihbd2luZG93LkhUTUxCb2R5RWxlbWVudCx3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnQsd2luZG93LkhUTUxIZWFkRWxlbWVudF0pO3ZhciBrPWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZURvY3VtZW50O2EucHJvdG90eXBlLmNyZWF0ZURvY3VtZW50PWZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c1syXT1OKGFyZ3VtZW50c1syXSksQyhrLmFwcGx5KEwodGhpcyksYXJndW1lbnRzKSl9LHMoYSxcImNyZWF0ZURvY3VtZW50VHlwZVwiKSxzKGEsXCJjcmVhdGVIVE1MRG9jdW1lbnRcIiksYyhhLFwiaGFzRmVhdHVyZVwiKSxTKHdpbmRvdy5ET01JbXBsZW1lbnRhdGlvbixhKSx5KFt3aW5kb3cuRE9NSW1wbGVtZW50YXRpb25dLFtcImNyZWF0ZURvY3VtZW50XCIsXCJjcmVhdGVEb2N1bWVudFR5cGVcIixcImNyZWF0ZUhUTUxEb2N1bWVudFwiLFwiaGFzRmVhdHVyZVwiXSksZS5hZG9wdE5vZGVOb1JlbW92ZT1yLGUud3JhcHBlcnMuRE9NSW1wbGVtZW50YXRpb249YSxlLndyYXBwZXJzLkRvY3VtZW50PXR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtuLmNhbGwodGhpcyxlKX12YXIgbj1lLndyYXBwZXJzLkV2ZW50VGFyZ2V0LHI9ZS53cmFwcGVycy5TZWxlY3Rpb24sbz1lLm1peGluLGk9ZS5yZWdpc3RlcldyYXBwZXIsYT1lLnJlbmRlckFsbFBlbmRpbmcscz1lLnVud3JhcCxjPWUudW53cmFwSWZOZWVkZWQsbD1lLndyYXAsdT13aW5kb3cuV2luZG93LGQ9d2luZG93LmdldENvbXB1dGVkU3R5bGUscD13aW5kb3cuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUsaD13aW5kb3cuZ2V0U2VsZWN0aW9uO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLHUucHJvdG90eXBlLmdldENvbXB1dGVkU3R5bGU9ZnVuY3Rpb24oZSx0KXtyZXR1cm4gbCh0aGlzfHx3aW5kb3cpLmdldENvbXB1dGVkU3R5bGUoYyhlKSx0KX0scCYmKHUucHJvdG90eXBlLmdldERlZmF1bHRDb21wdXRlZFN0eWxlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGwodGhpc3x8d2luZG93KS5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZShjKGUpLHQpfSksdS5wcm90b3R5cGUuZ2V0U2VsZWN0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIGwodGhpc3x8d2luZG93KS5nZXRTZWxlY3Rpb24oKX0sZGVsZXRlIHdpbmRvdy5nZXRDb21wdXRlZFN0eWxlLGRlbGV0ZSB3aW5kb3cuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUsZGVsZXRlIHdpbmRvdy5nZXRTZWxlY3Rpb24sW1wiYWRkRXZlbnRMaXN0ZW5lclwiLFwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiLFwiZGlzcGF0Y2hFdmVudFwiXS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3UucHJvdG90eXBlW2VdPWZ1bmN0aW9uKCl7dmFyIHQ9bCh0aGlzfHx3aW5kb3cpO3JldHVybiB0W2VdLmFwcGx5KHQsYXJndW1lbnRzKX0sZGVsZXRlIHdpbmRvd1tlXX0pLG8odC5wcm90b3R5cGUse2dldENvbXB1dGVkU3R5bGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gYSgpLGQuY2FsbChzKHRoaXMpLGMoZSksdCl9LGdldFNlbGVjdGlvbjpmdW5jdGlvbigpe3JldHVybiBhKCksbmV3IHIoaC5jYWxsKHModGhpcykpKX0sZ2V0IGRvY3VtZW50KCl7cmV0dXJuIGwocyh0aGlzKS5kb2N1bWVudCl9fSkscCYmKHQucHJvdG90eXBlLmdldERlZmF1bHRDb21wdXRlZFN0eWxlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGEoKSxwLmNhbGwocyh0aGlzKSxjKGUpLHQpfSksaSh1LHQsd2luZG93KSxlLndyYXBwZXJzLldpbmRvdz10fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO3ZhciB0PWUudW53cmFwLG49d2luZG93LkRhdGFUcmFuc2Zlcnx8d2luZG93LkNsaXBib2FyZCxyPW4ucHJvdG90eXBlLnNldERyYWdJbWFnZTtyJiYobi5wcm90b3R5cGUuc2V0RHJhZ0ltYWdlPWZ1bmN0aW9uKGUsbixvKXtyLmNhbGwodGhpcyx0KGUpLG4sbyl9KX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe3ZhciB0O3Q9ZSBpbnN0YW5jZW9mIGk/ZTpuZXcgaShlJiZvKGUpKSxyKHQsdGhpcyl9dmFyIG49ZS5yZWdpc3RlcldyYXBwZXIscj1lLnNldFdyYXBwZXIsbz1lLnVud3JhcCxpPXdpbmRvdy5Gb3JtRGF0YTtpJiYobihpLHQsbmV3IGkpLGUud3JhcHBlcnMuRm9ybURhdGE9dCl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7dmFyIHQ9ZS51bndyYXBJZk5lZWRlZCxuPVhNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5zZW5kO1hNTEh0dHBSZXF1ZXN0LnByb3RvdHlwZS5zZW5kPWZ1bmN0aW9uKGUpe3JldHVybiBuLmNhbGwodGhpcyx0KGUpKX19KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXt2YXIgdD1uW2VdLHI9d2luZG93W3RdO2lmKHIpe3ZhciBvPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZSksaT1vLmNvbnN0cnVjdG9yO3dpbmRvd1t0XT1pfX12YXIgbj0oZS5pc1dyYXBwZXJGb3Ise2E6XCJIVE1MQW5jaG9yRWxlbWVudFwiLGFyZWE6XCJIVE1MQXJlYUVsZW1lbnRcIixhdWRpbzpcIkhUTUxBdWRpb0VsZW1lbnRcIixiYXNlOlwiSFRNTEJhc2VFbGVtZW50XCIsYm9keTpcIkhUTUxCb2R5RWxlbWVudFwiLGJyOlwiSFRNTEJSRWxlbWVudFwiLGJ1dHRvbjpcIkhUTUxCdXR0b25FbGVtZW50XCIsY2FudmFzOlwiSFRNTENhbnZhc0VsZW1lbnRcIixjYXB0aW9uOlwiSFRNTFRhYmxlQ2FwdGlvbkVsZW1lbnRcIixjb2w6XCJIVE1MVGFibGVDb2xFbGVtZW50XCIsY29udGVudDpcIkhUTUxDb250ZW50RWxlbWVudFwiLGRhdGE6XCJIVE1MRGF0YUVsZW1lbnRcIixkYXRhbGlzdDpcIkhUTUxEYXRhTGlzdEVsZW1lbnRcIixkZWw6XCJIVE1MTW9kRWxlbWVudFwiLGRpcjpcIkhUTUxEaXJlY3RvcnlFbGVtZW50XCIsZGl2OlwiSFRNTERpdkVsZW1lbnRcIixkbDpcIkhUTUxETGlzdEVsZW1lbnRcIixlbWJlZDpcIkhUTUxFbWJlZEVsZW1lbnRcIixmaWVsZHNldDpcIkhUTUxGaWVsZFNldEVsZW1lbnRcIixmb250OlwiSFRNTEZvbnRFbGVtZW50XCIsZm9ybTpcIkhUTUxGb3JtRWxlbWVudFwiLGZyYW1lOlwiSFRNTEZyYW1lRWxlbWVudFwiLGZyYW1lc2V0OlwiSFRNTEZyYW1lU2V0RWxlbWVudFwiLGgxOlwiSFRNTEhlYWRpbmdFbGVtZW50XCIsaGVhZDpcIkhUTUxIZWFkRWxlbWVudFwiLGhyOlwiSFRNTEhSRWxlbWVudFwiLGh0bWw6XCJIVE1MSHRtbEVsZW1lbnRcIixpZnJhbWU6XCJIVE1MSUZyYW1lRWxlbWVudFwiLGltZzpcIkhUTUxJbWFnZUVsZW1lbnRcIixpbnB1dDpcIkhUTUxJbnB1dEVsZW1lbnRcIixrZXlnZW46XCJIVE1MS2V5Z2VuRWxlbWVudFwiLGxhYmVsOlwiSFRNTExhYmVsRWxlbWVudFwiLGxlZ2VuZDpcIkhUTUxMZWdlbmRFbGVtZW50XCIsbGk6XCJIVE1MTElFbGVtZW50XCIsbGluazpcIkhUTUxMaW5rRWxlbWVudFwiLG1hcDpcIkhUTUxNYXBFbGVtZW50XCIsbWFycXVlZTpcIkhUTUxNYXJxdWVlRWxlbWVudFwiLG1lbnU6XCJIVE1MTWVudUVsZW1lbnRcIixtZW51aXRlbTpcIkhUTUxNZW51SXRlbUVsZW1lbnRcIixtZXRhOlwiSFRNTE1ldGFFbGVtZW50XCIsbWV0ZXI6XCJIVE1MTWV0ZXJFbGVtZW50XCIsb2JqZWN0OlwiSFRNTE9iamVjdEVsZW1lbnRcIixvbDpcIkhUTUxPTGlzdEVsZW1lbnRcIixvcHRncm91cDpcIkhUTUxPcHRHcm91cEVsZW1lbnRcIixvcHRpb246XCJIVE1MT3B0aW9uRWxlbWVudFwiLG91dHB1dDpcIkhUTUxPdXRwdXRFbGVtZW50XCIscDpcIkhUTUxQYXJhZ3JhcGhFbGVtZW50XCIscGFyYW06XCJIVE1MUGFyYW1FbGVtZW50XCIscHJlOlwiSFRNTFByZUVsZW1lbnRcIixwcm9ncmVzczpcIkhUTUxQcm9ncmVzc0VsZW1lbnRcIixxOlwiSFRNTFF1b3RlRWxlbWVudFwiLHNjcmlwdDpcIkhUTUxTY3JpcHRFbGVtZW50XCIsc2VsZWN0OlwiSFRNTFNlbGVjdEVsZW1lbnRcIixzaGFkb3c6XCJIVE1MU2hhZG93RWxlbWVudFwiLHNvdXJjZTpcIkhUTUxTb3VyY2VFbGVtZW50XCIsc3BhbjpcIkhUTUxTcGFuRWxlbWVudFwiLHN0eWxlOlwiSFRNTFN0eWxlRWxlbWVudFwiLHRhYmxlOlwiSFRNTFRhYmxlRWxlbWVudFwiLHRib2R5OlwiSFRNTFRhYmxlU2VjdGlvbkVsZW1lbnRcIix0ZW1wbGF0ZTpcIkhUTUxUZW1wbGF0ZUVsZW1lbnRcIix0ZXh0YXJlYTpcIkhUTUxUZXh0QXJlYUVsZW1lbnRcIix0aGVhZDpcIkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50XCIsdGltZTpcIkhUTUxUaW1lRWxlbWVudFwiLHRpdGxlOlwiSFRNTFRpdGxlRWxlbWVudFwiLHRyOlwiSFRNTFRhYmxlUm93RWxlbWVudFwiLHRyYWNrOlwiSFRNTFRyYWNrRWxlbWVudFwiLHVsOlwiSFRNTFVMaXN0RWxlbWVudFwiLHZpZGVvOlwiSFRNTFZpZGVvRWxlbWVudFwifSk7T2JqZWN0LmtleXMobikuZm9yRWFjaCh0KSxPYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhlLndyYXBwZXJzKS5mb3JFYWNoKGZ1bmN0aW9uKHQpe3dpbmRvd1t0XT1lLndyYXBwZXJzW3RdfSl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQpe3ZhciBuPVwiXCI7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZSxmdW5jdGlvbihlKXtuKz1lLnRleHRDb250ZW50K1wiXFxuXFxuXCJ9KSx0fHwobj1uLnJlcGxhY2UoZCxcIlwiKSksbn1mdW5jdGlvbiBuKGUpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtyZXR1cm4gdC50ZXh0Q29udGVudD1lLHR9ZnVuY3Rpb24gcihlKXt2YXIgdD1uKGUpO2RvY3VtZW50LmhlYWQuYXBwZW5kQ2hpbGQodCk7dmFyIHI9W107aWYodC5zaGVldCl0cnl7cj10LnNoZWV0LmNzc1J1bGVzfWNhdGNoKG8pe31lbHNlIGNvbnNvbGUud2FybihcInNoZWV0IG5vdCBmb3VuZFwiLHQpO3JldHVybiB0LnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQodCkscn1mdW5jdGlvbiBvKCl7Qy5pbml0aWFsaXplZD0hMCxkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKEMpO3ZhciBlPUMuY29udGVudERvY3VtZW50LHQ9ZS5jcmVhdGVFbGVtZW50KFwiYmFzZVwiKTt0LmhyZWY9ZG9jdW1lbnQuYmFzZVVSSSxlLmhlYWQuYXBwZW5kQ2hpbGQodCl9ZnVuY3Rpb24gaShlKXtDLmluaXRpYWxpemVkfHxvKCksZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChDKSxlKEMuY29udGVudERvY3VtZW50KSxkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKEMpfWZ1bmN0aW9uIGEoZSx0KXtpZih0KXt2YXIgbztpZihlLm1hdGNoKFwiQGltcG9ydFwiKSYmRCl7dmFyIGE9bihlKTtpKGZ1bmN0aW9uKGUpe2UuaGVhZC5hcHBlbmRDaGlsZChhLmltcGwpLG89QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYS5zaGVldC5jc3NSdWxlcywwKSx0KG8pfSl9ZWxzZSBvPXIoZSksdChvKX19ZnVuY3Rpb24gcyhlKXtlJiZsKCkuYXBwZW5kQ2hpbGQoZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZSkpfWZ1bmN0aW9uIGMoZSx0KXt2YXIgcj1uKGUpO3Iuc2V0QXR0cmlidXRlKHQsXCJcIiksci5zZXRBdHRyaWJ1dGUoeCxcIlwiKSxkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHIpfWZ1bmN0aW9uIGwoKXtyZXR1cm4ganx8KGo9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpLGouc2V0QXR0cmlidXRlKHgsXCJcIiksalt4XT0hMCksan12YXIgdT17c3RyaWN0U3R5bGluZzohMSxyZWdpc3RyeTp7fSxzaGltU3R5bGluZzpmdW5jdGlvbihlLG4scil7dmFyIG89dGhpcy5wcmVwYXJlUm9vdChlLG4sciksaT10aGlzLmlzVHlwZUV4dGVuc2lvbihyKSxhPXRoaXMubWFrZVNjb3BlU2VsZWN0b3IobixpKSxzPXQobywhMCk7cz10aGlzLnNjb3BlQ3NzVGV4dChzLGEpLGUmJihlLnNoaW1tZWRTdHlsZT1zKSx0aGlzLmFkZENzc1RvRG9jdW1lbnQocyxuKX0sc2hpbVN0eWxlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuc2hpbUNzc1RleHQoZS50ZXh0Q29udGVudCx0KX0sc2hpbUNzc1RleHQ6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT10aGlzLmluc2VydERpcmVjdGl2ZXMoZSksdGhpcy5zY29wZUNzc1RleHQoZSx0KX0sbWFrZVNjb3BlU2VsZWN0b3I6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZT90P1wiW2lzPVwiK2UrXCJdXCI6ZTpcIlwifSxpc1R5cGVFeHRlbnNpb246ZnVuY3Rpb24oZSl7cmV0dXJuIGUmJmUuaW5kZXhPZihcIi1cIik8MH0scHJlcGFyZVJvb3Q6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXRoaXMucmVnaXN0ZXJSb290KGUsdCxuKTtyZXR1cm4gdGhpcy5yZXBsYWNlVGV4dEluU3R5bGVzKHIucm9vdFN0eWxlcyx0aGlzLmluc2VydERpcmVjdGl2ZXMpLHRoaXMucmVtb3ZlU3R5bGVzKGUsci5yb290U3R5bGVzKSx0aGlzLnN0cmljdFN0eWxpbmcmJnRoaXMuYXBwbHlTY29wZVRvQ29udGVudChlLHQpLHIuc2NvcGVTdHlsZXN9LHJlbW92ZVN0eWxlczpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbixyPTAsbz10Lmxlbmd0aDtvPnImJihuPXRbcl0pO3IrKyluLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQobil9LHJlZ2lzdGVyUm9vdDpmdW5jdGlvbihlLHQsbil7dmFyIHI9dGhpcy5yZWdpc3RyeVt0XT17cm9vdDplLG5hbWU6dCxleHRlbmRzTmFtZTpufSxvPXRoaXMuZmluZFN0eWxlcyhlKTtyLnJvb3RTdHlsZXM9byxyLnNjb3BlU3R5bGVzPXIucm9vdFN0eWxlczt2YXIgaT10aGlzLnJlZ2lzdHJ5W3IuZXh0ZW5kc05hbWVdO3JldHVybiBpJiYoci5zY29wZVN0eWxlcz1pLnNjb3BlU3R5bGVzLmNvbmNhdChyLnNjb3BlU3R5bGVzKSkscn0sZmluZFN0eWxlczpmdW5jdGlvbihlKXtpZighZSlyZXR1cm5bXTt2YXIgdD1lLnF1ZXJ5U2VsZWN0b3JBbGwoXCJzdHlsZVwiKTtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmZpbHRlci5jYWxsKHQsZnVuY3Rpb24oZSl7cmV0dXJuIWUuaGFzQXR0cmlidXRlKFIpfSl9LGFwcGx5U2NvcGVUb0NvbnRlbnQ6ZnVuY3Rpb24oZSx0KXtlJiYoQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlLnF1ZXJ5U2VsZWN0b3JBbGwoXCIqXCIpLGZ1bmN0aW9uKGUpe2Uuc2V0QXR0cmlidXRlKHQsXCJcIil9KSxBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGUucXVlcnlTZWxlY3RvckFsbChcInRlbXBsYXRlXCIpLGZ1bmN0aW9uKGUpe3RoaXMuYXBwbHlTY29wZVRvQ29udGVudChlLmNvbnRlbnQsdCl9LHRoaXMpKX0saW5zZXJ0RGlyZWN0aXZlczpmdW5jdGlvbihlKXtyZXR1cm4gZT10aGlzLmluc2VydFBvbHlmaWxsRGlyZWN0aXZlc0luQ3NzVGV4dChlKSx0aGlzLmluc2VydFBvbHlmaWxsUnVsZXNJbkNzc1RleHQoZSl9LGluc2VydFBvbHlmaWxsRGlyZWN0aXZlc0luQ3NzVGV4dDpmdW5jdGlvbihlKXtyZXR1cm4gZT1lLnJlcGxhY2UocCxmdW5jdGlvbihlLHQpe3JldHVybiB0LnNsaWNlKDAsLTIpK1wie1wifSksZS5yZXBsYWNlKGgsZnVuY3Rpb24oZSx0KXtyZXR1cm4gdCtcIiB7XCJ9KX0saW5zZXJ0UG9seWZpbGxSdWxlc0luQ3NzVGV4dDpmdW5jdGlvbihlKXtyZXR1cm4gZT1lLnJlcGxhY2UoZixmdW5jdGlvbihlLHQpe3JldHVybiB0LnNsaWNlKDAsLTEpfSksZS5yZXBsYWNlKG0sZnVuY3Rpb24oZSx0LG4scil7dmFyIG89ZS5yZXBsYWNlKHQsXCJcIikucmVwbGFjZShuLFwiXCIpO3JldHVybiByK299KX0sc2NvcGVDc3NUZXh0OmZ1bmN0aW9uKGUsdCl7dmFyIG49dGhpcy5leHRyYWN0VW5zY29wZWRSdWxlc0Zyb21Dc3NUZXh0KGUpO2lmKGU9dGhpcy5pbnNlcnRQb2x5ZmlsbEhvc3RJbkNzc1RleHQoZSksZT10aGlzLmNvbnZlcnRDb2xvbkhvc3QoZSksZT10aGlzLmNvbnZlcnRDb2xvbkhvc3RDb250ZXh0KGUpLGU9dGhpcy5jb252ZXJ0U2hhZG93RE9NU2VsZWN0b3JzKGUpLHQpe3ZhciBlLHI9dGhpczthKGUsZnVuY3Rpb24obil7ZT1yLnNjb3BlUnVsZXMobix0KX0pfXJldHVybiBlPWUrXCJcXG5cIituLGUudHJpbSgpfSxleHRyYWN0VW5zY29wZWRSdWxlc0Zyb21Dc3NUZXh0OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPVwiXCI7dD13LmV4ZWMoZSk7KW4rPXRbMV0uc2xpY2UoMCwtMSkrXCJcXG5cXG5cIjtmb3IoO3Q9di5leGVjKGUpOyluKz10WzBdLnJlcGxhY2UodFsyXSxcIlwiKS5yZXBsYWNlKHRbMV0sdFszXSkrXCJcXG5cXG5cIjtyZXR1cm4gbn0sY29udmVydENvbG9uSG9zdDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jb252ZXJ0Q29sb25SdWxlKGUsRSx0aGlzLmNvbG9uSG9zdFBhcnRSZXBsYWNlcil9LGNvbnZlcnRDb2xvbkhvc3RDb250ZXh0OmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmNvbnZlcnRDb2xvblJ1bGUoZSxfLHRoaXMuY29sb25Ib3N0Q29udGV4dFBhcnRSZXBsYWNlcil9LGNvbnZlcnRDb2xvblJ1bGU6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlLnJlcGxhY2UodCxmdW5jdGlvbihlLHQscixvKXtpZih0PU8scil7Zm9yKHZhciBpLGE9ci5zcGxpdChcIixcIikscz1bXSxjPTAsbD1hLmxlbmd0aDtsPmMmJihpPWFbY10pO2MrKylpPWkudHJpbSgpLHMucHVzaChuKHQsaSxvKSk7cmV0dXJuIHMuam9pbihcIixcIil9cmV0dXJuIHQrb30pfSxjb2xvbkhvc3RDb250ZXh0UGFydFJlcGxhY2VyOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gdC5tYXRjaChnKT90aGlzLmNvbG9uSG9zdFBhcnRSZXBsYWNlcihlLHQsbik6ZSt0K24rXCIsIFwiK3QrXCIgXCIrZStufSxjb2xvbkhvc3RQYXJ0UmVwbGFjZXI6ZnVuY3Rpb24oZSx0LG4pe3JldHVybiBlK3QucmVwbGFjZShnLFwiXCIpK259LGNvbnZlcnRTaGFkb3dET01TZWxlY3RvcnM6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PTA7dDxOLmxlbmd0aDt0KyspZT1lLnJlcGxhY2UoTlt0XSxcIiBcIik7cmV0dXJuIGV9LHNjb3BlUnVsZXM6ZnVuY3Rpb24oZSx0KXt2YXIgbj1cIlwiO3JldHVybiBlJiZBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGUsZnVuY3Rpb24oZSl7aWYoZS5zZWxlY3RvclRleHQmJmUuc3R5bGUmJnZvaWQgMCE9PWUuc3R5bGUuY3NzVGV4dCluKz10aGlzLnNjb3BlU2VsZWN0b3IoZS5zZWxlY3RvclRleHQsdCx0aGlzLnN0cmljdFN0eWxpbmcpK1wiIHtcXG4gXCIsbis9dGhpcy5wcm9wZXJ0aWVzRnJvbVJ1bGUoZSkrXCJcXG59XFxuXFxuXCI7ZWxzZSBpZihlLnR5cGU9PT1DU1NSdWxlLk1FRElBX1JVTEUpbis9XCJAbWVkaWEgXCIrZS5tZWRpYS5tZWRpYVRleHQrXCIge1xcblwiLG4rPXRoaXMuc2NvcGVSdWxlcyhlLmNzc1J1bGVzLHQpLG4rPVwiXFxufVxcblxcblwiO2Vsc2UgdHJ5e2UuY3NzVGV4dCYmKG4rPWUuY3NzVGV4dCtcIlxcblxcblwiKX1jYXRjaChyKXtlLnR5cGU9PT1DU1NSdWxlLktFWUZSQU1FU19SVUxFJiZlLmNzc1J1bGVzJiYobis9dGhpcy5pZVNhZmVDc3NUZXh0RnJvbUtleUZyYW1lUnVsZShlKSl9fSx0aGlzKSxufSxpZVNhZmVDc3NUZXh0RnJvbUtleUZyYW1lUnVsZTpmdW5jdGlvbihlKXt2YXIgdD1cIkBrZXlmcmFtZXMgXCIrZS5uYW1lK1wiIHtcIjtyZXR1cm4gQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlLmNzc1J1bGVzLGZ1bmN0aW9uKGUpe3QrPVwiIFwiK2Uua2V5VGV4dCtcIiB7XCIrZS5zdHlsZS5jc3NUZXh0K1wifVwifSksdCs9XCIgfVwifSxzY29wZVNlbGVjdG9yOmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj1bXSxvPWUuc3BsaXQoXCIsXCIpO3JldHVybiBvLmZvckVhY2goZnVuY3Rpb24oZSl7ZT1lLnRyaW0oKSx0aGlzLnNlbGVjdG9yTmVlZHNTY29waW5nKGUsdCkmJihlPW4mJiFlLm1hdGNoKE8pP3RoaXMuYXBwbHlTdHJpY3RTZWxlY3RvclNjb3BlKGUsdCk6dGhpcy5hcHBseVNlbGVjdG9yU2NvcGUoZSx0KSksci5wdXNoKGUpfSx0aGlzKSxyLmpvaW4oXCIsIFwiKX0sc2VsZWN0b3JOZWVkc1Njb3Bpbmc6ZnVuY3Rpb24oZSx0KXtpZihBcnJheS5pc0FycmF5KHQpKXJldHVybiEwO3ZhciBuPXRoaXMubWFrZVNjb3BlTWF0Y2hlcih0KTtyZXR1cm4hZS5tYXRjaChuKX0sbWFrZVNjb3BlTWF0Y2hlcjpmdW5jdGlvbihlKXtyZXR1cm4gZT1lLnJlcGxhY2UoL1xcWy9nLFwiXFxcXFtcIikucmVwbGFjZSgvXFxdL2csXCJcXFxcXVwiKSxuZXcgUmVnRXhwKFwiXihcIitlK1wiKVwiK1MsXCJtXCIpfSxhcHBseVNlbGVjdG9yU2NvcGU6ZnVuY3Rpb24oZSx0KXtyZXR1cm4gQXJyYXkuaXNBcnJheSh0KT90aGlzLmFwcGx5U2VsZWN0b3JTY29wZUxpc3QoZSx0KTp0aGlzLmFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZShlLHQpfSxhcHBseVNlbGVjdG9yU2NvcGVMaXN0OmZ1bmN0aW9uKGUsdCl7Zm9yKHZhciBuLHI9W10sbz0wO249dFtvXTtvKyspci5wdXNoKHRoaXMuYXBwbHlTaW1wbGVTZWxlY3RvclNjb3BlKGUsbikpO3JldHVybiByLmpvaW4oXCIsIFwiKX0sYXBwbHlTaW1wbGVTZWxlY3RvclNjb3BlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUubWF0Y2goTCk/KGU9ZS5yZXBsYWNlKE8sdCksZS5yZXBsYWNlKEwsdCtcIiBcIikpOnQrXCIgXCIrZX0sYXBwbHlTdHJpY3RTZWxlY3RvclNjb3BlOmZ1bmN0aW9uKGUsdCl7dD10LnJlcGxhY2UoL1xcW2lzPShbXlxcXV0qKVxcXS9nLFwiJDFcIik7dmFyIG49W1wiIFwiLFwiPlwiLFwiK1wiLFwiflwiXSxyPWUsbz1cIltcIit0K1wiXVwiO3JldHVybiBuLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9ci5zcGxpdChlKTtyPXQubWFwKGZ1bmN0aW9uKGUpe3ZhciB0PWUudHJpbSgpLnJlcGxhY2UoTCxcIlwiKTtyZXR1cm4gdCYmbi5pbmRleE9mKHQpPDAmJnQuaW5kZXhPZihvKTwwJiYoZT10LnJlcGxhY2UoLyhbXjpdKikoOiopKC4qKS8sXCIkMVwiK28rXCIkMiQzXCIpKSxlfSkuam9pbihlKX0pLHJ9LGluc2VydFBvbHlmaWxsSG9zdEluQ3NzVGV4dDpmdW5jdGlvbihlKXtyZXR1cm4gZS5yZXBsYWNlKE0sYikucmVwbGFjZShULGcpfSxwcm9wZXJ0aWVzRnJvbVJ1bGU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zdHlsZS5jc3NUZXh0O2Uuc3R5bGUuY29udGVudCYmIWUuc3R5bGUuY29udGVudC5tYXRjaCgvWydcIl0rfGF0dHIvKSYmKHQ9dC5yZXBsYWNlKC9jb250ZW50OlteO10qOy9nLFwiY29udGVudDogJ1wiK2Uuc3R5bGUuY29udGVudCtcIic7XCIpKTt2YXIgbj1lLnN0eWxlO2Zvcih2YXIgciBpbiBuKVwiaW5pdGlhbFwiPT09bltyXSYmKHQrPXIrXCI6IGluaXRpYWw7IFwiKTtyZXR1cm4gdH0scmVwbGFjZVRleHRJblN0eWxlczpmdW5jdGlvbihlLHQpe2UmJnQmJihlIGluc3RhbmNlb2YgQXJyYXl8fChlPVtlXSksQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlLGZ1bmN0aW9uKGUpe2UudGV4dENvbnRlbnQ9dC5jYWxsKHRoaXMsZS50ZXh0Q29udGVudCl9LHRoaXMpKX0sYWRkQ3NzVG9Eb2N1bWVudDpmdW5jdGlvbihlLHQpe2UubWF0Y2goXCJAaW1wb3J0XCIpP2MoZSx0KTpzKGUpfX0sZD0vXFwvXFwqW14qXSpcXCorKFteLypdW14qXSpcXCorKSpcXC8vZ2ltLHA9L1xcL1xcKlxccypAcG9seWZpbGwgKFteKl0qXFwqKyhbXi8qXVteKl0qXFwqKykqXFwvKShbXntdKj8pey9naW0saD0vcG9seWZpbGwtbmV4dC1zZWxlY3RvcltefV0qY29udGVudFxcOltcXHNdKj9bJ1wiXSguKj8pWydcIl1bO1xcc10qfShbXntdKj8pey9naW0sZj0vXFwvXFwqXFxzQHBvbHlmaWxsLXJ1bGUoW14qXSpcXCorKFteLypdW14qXSpcXCorKSopXFwvL2dpbSxtPS8ocG9seWZpbGwtcnVsZSlbXn1dKihjb250ZW50XFw6W1xcc10qWydcIl0oLio/KVsnXCJdKVs7XFxzXSpbXn1dKn0vZ2ltLHc9L1xcL1xcKlxcc0Bwb2x5ZmlsbC11bnNjb3BlZC1ydWxlKFteKl0qXFwqKyhbXi8qXVteKl0qXFwqKykqKVxcLy9naW0sdj0vKHBvbHlmaWxsLXVuc2NvcGVkLXJ1bGUpW159XSooY29udGVudFxcOltcXHNdKlsnXCJdKC4qPylbJ1wiXSlbO1xcc10qW159XSp9L2dpbSxnPVwiLXNoYWRvd2Nzc2hvc3RcIixiPVwiLXNoYWRvd2Nzc2NvbnRleHRcIix5PVwiKSg/OlxcXFwoKCg/OlxcXFwoW14pKF0qXFxcXCl8W14pKF0qKSs/KVxcXFwpKT8oW14se10qKVwiLEU9bmV3IFJlZ0V4cChcIihcIitnK3ksXCJnaW1cIiksXz1uZXcgUmVnRXhwKFwiKFwiK2IreSxcImdpbVwiKSxTPVwiKFs+XFxcXHN+K1suLHs6XVtcXFxcc1xcXFxTXSopPyRcIixUPS9cXDpob3N0L2dpbSxNPS9cXDpob3N0LWNvbnRleHQvZ2ltLE89ZytcIi1uby1jb21iaW5hdG9yXCIsTD1uZXcgUmVnRXhwKGcsXCJnaW1cIiksTj0obmV3IFJlZ0V4cChiLFwiZ2ltXCIpLFsvPj4+L2csLzo6c2hhZG93L2csLzo6Y29udGVudC9nLC9cXC9kZWVwXFwvL2csL1xcL3NoYWRvd1xcLy9nLC9cXC9zaGFkb3ctZGVlcFxcLy9nLC9cXF5cXF4vZywvXFxeL2ddKSxDPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJpZnJhbWVcIik7Qy5zdHlsZS5kaXNwbGF5PVwibm9uZVwiO3ZhciBqLEQ9bmF2aWdhdG9yLnVzZXJBZ2VudC5tYXRjaChcIkNocm9tZVwiKSxIPVwic2hpbS1zaGFkb3dkb21cIix4PVwic2hpbS1zaGFkb3dkb20tY3NzXCIsUj1cIm5vLXNoaW1cIjtpZih3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpe3MoXCJzdHlsZSB7IGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDsgfVxcblwiKTt2YXIgST1TaGFkb3dET01Qb2x5ZmlsbC53cmFwKGRvY3VtZW50KSxQPUkucXVlcnlTZWxlY3RvcihcImhlYWRcIik7UC5pbnNlcnRCZWZvcmUobCgpLFAuY2hpbGROb2Rlc1swXSksZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNvbnRlbnRMb2FkZWRcIixmdW5jdGlvbigpe2UudXJsUmVzb2x2ZXI7aWYod2luZG93LkhUTUxJbXBvcnRzJiYhSFRNTEltcG9ydHMudXNlTmF0aXZlKXt2YXIgdD1cImxpbmtbcmVsPXN0eWxlc2hlZXRdW1wiK0grXCJdXCIsbj1cInN0eWxlW1wiK0grXCJdXCI7SFRNTEltcG9ydHMuaW1wb3J0ZXIuZG9jdW1lbnRQcmVsb2FkU2VsZWN0b3JzKz1cIixcIit0LEhUTUxJbXBvcnRzLmltcG9ydGVyLmltcG9ydHNQcmVsb2FkU2VsZWN0b3JzKz1cIixcIit0LEhUTUxJbXBvcnRzLnBhcnNlci5kb2N1bWVudFNlbGVjdG9ycz1bSFRNTEltcG9ydHMucGFyc2VyLmRvY3VtZW50U2VsZWN0b3JzLHQsbl0uam9pbihcIixcIik7dmFyIHI9SFRNTEltcG9ydHMucGFyc2VyLnBhcnNlR2VuZXJpYztIVE1MSW1wb3J0cy5wYXJzZXIucGFyc2VHZW5lcmljPWZ1bmN0aW9uKGUpe2lmKCFlW3hdKXt2YXIgdD1lLl9faW1wb3J0RWxlbWVudHx8ZTtpZighdC5oYXNBdHRyaWJ1dGUoSCkpcmV0dXJuIHZvaWQgci5jYWxsKHRoaXMsZSk7ZS5fX3Jlc291cmNlJiYodD1lLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpLHQudGV4dENvbnRlbnQ9ZS5fX3Jlc291cmNlKSxIVE1MSW1wb3J0cy5wYXRoLnJlc29sdmVVcmxzSW5TdHlsZSh0LGUuaHJlZiksdC50ZXh0Q29udGVudD11LnNoaW1TdHlsZSh0KSx0LnJlbW92ZUF0dHJpYnV0ZShILFwiXCIpLHQuc2V0QXR0cmlidXRlKHgsXCJcIiksdFt4XT0hMCx0LnBhcmVudE5vZGUhPT1QJiYoZS5wYXJlbnROb2RlPT09UD9QLnJlcGxhY2VDaGlsZCh0LGUpOnRoaXMuYWRkRWxlbWVudFRvRG9jdW1lbnQodCkpLHQuX19pbXBvcnRQYXJzZWQ9ITAsdGhpcy5tYXJrUGFyc2luZ0NvbXBsZXRlKGUpLHRoaXMucGFyc2VOZXh0KCl9fTt2YXIgbz1IVE1MSW1wb3J0cy5wYXJzZXIuaGFzUmVzb3VyY2U7SFRNTEltcG9ydHMucGFyc2VyLmhhc1Jlc291cmNlPWZ1bmN0aW9uKGUpe3JldHVyblwibGlua1wiPT09ZS5sb2NhbE5hbWUmJlwic3R5bGVzaGVldFwiPT09ZS5yZWwmJmUuaGFzQXR0cmlidXRlKEgpP2UuX19yZXNvdXJjZTpvLmNhbGwodGhpcyxlKX19fSl9ZS5TaGFkb3dDU1M9dX0od2luZG93LldlYkNvbXBvbmVudHMpKSxmdW5jdGlvbihlKXt3aW5kb3cuU2hhZG93RE9NUG9seWZpbGw/KHdpbmRvdy53cmFwPVNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZCx3aW5kb3cudW53cmFwPVNoYWRvd0RPTVBvbHlmaWxsLnVud3JhcElmTmVlZGVkKTp3aW5kb3cud3JhcD13aW5kb3cudW53cmFwPWZ1bmN0aW9uKGUpe3JldHVybiBlfX0od2luZG93LldlYkNvbXBvbmVudHMpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7cmV0dXJuIHZvaWQgMCE9PXBbZV19ZnVuY3Rpb24gbigpe3MuY2FsbCh0aGlzKSx0aGlzLl9pc0ludmFsaWQ9ITB9ZnVuY3Rpb24gcihlKXtyZXR1cm5cIlwiPT1lJiZuLmNhbGwodGhpcyksZS50b0xvd2VyQ2FzZSgpfWZ1bmN0aW9uIG8oZSl7dmFyIHQ9ZS5jaGFyQ29kZUF0KDApO3JldHVybiB0PjMyJiYxMjc+dCYmLTE9PVszNCwzNSw2MCw2Miw2Myw5Nl0uaW5kZXhPZih0KT9lOmVuY29kZVVSSUNvbXBvbmVudChlKX1mdW5jdGlvbiBpKGUpe3ZhciB0PWUuY2hhckNvZGVBdCgwKTtyZXR1cm4gdD4zMiYmMTI3PnQmJi0xPT1bMzQsMzUsNjAsNjIsOTZdLmluZGV4T2YodCk/ZTplbmNvZGVVUklDb21wb25lbnQoZSl9ZnVuY3Rpb24gYShlLGEscyl7ZnVuY3Rpb24gYyhlKXtiLnB1c2goZSl9dmFyIGw9YXx8XCJzY2hlbWUgc3RhcnRcIix1PTAsZD1cIlwiLHY9ITEsZz0hMSxiPVtdO2U6Zm9yKDsoZVt1LTFdIT1mfHwwPT11KSYmIXRoaXMuX2lzSW52YWxpZDspe3ZhciB5PWVbdV07c3dpdGNoKGwpe2Nhc2VcInNjaGVtZSBzdGFydFwiOmlmKCF5fHwhbS50ZXN0KHkpKXtpZihhKXtjKFwiSW52YWxpZCBzY2hlbWUuXCIpO2JyZWFrIGV9ZD1cIlwiLGw9XCJubyBzY2hlbWVcIjtjb250aW51ZX1kKz15LnRvTG93ZXJDYXNlKCksbD1cInNjaGVtZVwiO2JyZWFrO2Nhc2VcInNjaGVtZVwiOmlmKHkmJncudGVzdCh5KSlkKz15LnRvTG93ZXJDYXNlKCk7ZWxzZXtpZihcIjpcIiE9eSl7aWYoYSl7aWYoZj09eSlicmVhayBlO2MoXCJDb2RlIHBvaW50IG5vdCBhbGxvd2VkIGluIHNjaGVtZTogXCIreSk7YnJlYWsgZX1kPVwiXCIsdT0wLGw9XCJubyBzY2hlbWVcIjtjb250aW51ZX1pZih0aGlzLl9zY2hlbWU9ZCxkPVwiXCIsYSlicmVhayBlO3QodGhpcy5fc2NoZW1lKSYmKHRoaXMuX2lzUmVsYXRpdmU9ITApLGw9XCJmaWxlXCI9PXRoaXMuX3NjaGVtZT9cInJlbGF0aXZlXCI6dGhpcy5faXNSZWxhdGl2ZSYmcyYmcy5fc2NoZW1lPT10aGlzLl9zY2hlbWU/XCJyZWxhdGl2ZSBvciBhdXRob3JpdHlcIjp0aGlzLl9pc1JlbGF0aXZlP1wiYXV0aG9yaXR5IGZpcnN0IHNsYXNoXCI6XCJzY2hlbWUgZGF0YVwifWJyZWFrO2Nhc2VcInNjaGVtZSBkYXRhXCI6XCI/XCI9PXk/KHRoaXMuX3F1ZXJ5PVwiP1wiLGw9XCJxdWVyeVwiKTpcIiNcIj09eT8odGhpcy5fZnJhZ21lbnQ9XCIjXCIsbD1cImZyYWdtZW50XCIpOmYhPXkmJlwiIFwiIT15JiZcIlxcblwiIT15JiZcIlxcclwiIT15JiYodGhpcy5fc2NoZW1lRGF0YSs9byh5KSk7YnJlYWs7Y2FzZVwibm8gc2NoZW1lXCI6aWYocyYmdChzLl9zY2hlbWUpKXtsPVwicmVsYXRpdmVcIjtjb250aW51ZX1jKFwiTWlzc2luZyBzY2hlbWUuXCIpLG4uY2FsbCh0aGlzKTticmVhaztjYXNlXCJyZWxhdGl2ZSBvciBhdXRob3JpdHlcIjppZihcIi9cIiE9eXx8XCIvXCIhPWVbdSsxXSl7YyhcIkV4cGVjdGVkIC8sIGdvdDogXCIreSksbD1cInJlbGF0aXZlXCI7Y29udGludWV9bD1cImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlc1wiO2JyZWFrO2Nhc2VcInJlbGF0aXZlXCI6aWYodGhpcy5faXNSZWxhdGl2ZT0hMCxcImZpbGVcIiE9dGhpcy5fc2NoZW1lJiYodGhpcy5fc2NoZW1lPXMuX3NjaGVtZSksZj09eSl7dGhpcy5faG9zdD1zLl9ob3N0LHRoaXMuX3BvcnQ9cy5fcG9ydCx0aGlzLl9wYXRoPXMuX3BhdGguc2xpY2UoKSx0aGlzLl9xdWVyeT1zLl9xdWVyeSx0aGlzLl91c2VybmFtZT1zLl91c2VybmFtZSx0aGlzLl9wYXNzd29yZD1zLl9wYXNzd29yZDticmVhayBlfWlmKFwiL1wiPT15fHxcIlxcXFxcIj09eSlcIlxcXFxcIj09eSYmYyhcIlxcXFwgaXMgYW4gaW52YWxpZCBjb2RlIHBvaW50LlwiKSxsPVwicmVsYXRpdmUgc2xhc2hcIjtlbHNlIGlmKFwiP1wiPT15KXRoaXMuX2hvc3Q9cy5faG9zdCx0aGlzLl9wb3J0PXMuX3BvcnQsdGhpcy5fcGF0aD1zLl9wYXRoLnNsaWNlKCksdGhpcy5fcXVlcnk9XCI/XCIsdGhpcy5fdXNlcm5hbWU9cy5fdXNlcm5hbWUsdGhpcy5fcGFzc3dvcmQ9cy5fcGFzc3dvcmQsbD1cInF1ZXJ5XCI7ZWxzZXtpZihcIiNcIiE9eSl7dmFyIEU9ZVt1KzFdLF89ZVt1KzJdOyhcImZpbGVcIiE9dGhpcy5fc2NoZW1lfHwhbS50ZXN0KHkpfHxcIjpcIiE9RSYmXCJ8XCIhPUV8fGYhPV8mJlwiL1wiIT1fJiZcIlxcXFxcIiE9XyYmXCI/XCIhPV8mJlwiI1wiIT1fKSYmKHRoaXMuX2hvc3Q9cy5faG9zdCx0aGlzLl9wb3J0PXMuX3BvcnQsdGhpcy5fdXNlcm5hbWU9cy5fdXNlcm5hbWUsdGhpcy5fcGFzc3dvcmQ9cy5fcGFzc3dvcmQsdGhpcy5fcGF0aD1zLl9wYXRoLnNsaWNlKCksdGhpcy5fcGF0aC5wb3AoKSksbD1cInJlbGF0aXZlIHBhdGhcIjtjb250aW51ZX10aGlzLl9ob3N0PXMuX2hvc3QsdGhpcy5fcG9ydD1zLl9wb3J0LHRoaXMuX3BhdGg9cy5fcGF0aC5zbGljZSgpLHRoaXMuX3F1ZXJ5PXMuX3F1ZXJ5LHRoaXMuX2ZyYWdtZW50PVwiI1wiLHRoaXMuX3VzZXJuYW1lPXMuX3VzZXJuYW1lLHRoaXMuX3Bhc3N3b3JkPXMuX3Bhc3N3b3JkLGw9XCJmcmFnbWVudFwifWJyZWFrO2Nhc2VcInJlbGF0aXZlIHNsYXNoXCI6aWYoXCIvXCIhPXkmJlwiXFxcXFwiIT15KXtcImZpbGVcIiE9dGhpcy5fc2NoZW1lJiYodGhpcy5faG9zdD1zLl9ob3N0LHRoaXMuX3BvcnQ9cy5fcG9ydCx0aGlzLl91c2VybmFtZT1zLl91c2VybmFtZSx0aGlzLl9wYXNzd29yZD1zLl9wYXNzd29yZCksbD1cInJlbGF0aXZlIHBhdGhcIjtjb250aW51ZX1cIlxcXFxcIj09eSYmYyhcIlxcXFwgaXMgYW4gaW52YWxpZCBjb2RlIHBvaW50LlwiKSxsPVwiZmlsZVwiPT10aGlzLl9zY2hlbWU/XCJmaWxlIGhvc3RcIjpcImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlc1wiO2JyZWFrO2Nhc2VcImF1dGhvcml0eSBmaXJzdCBzbGFzaFwiOmlmKFwiL1wiIT15KXtjKFwiRXhwZWN0ZWQgJy8nLCBnb3Q6IFwiK3kpLGw9XCJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXNcIjtjb250aW51ZX1sPVwiYXV0aG9yaXR5IHNlY29uZCBzbGFzaFwiO2JyZWFrO2Nhc2VcImF1dGhvcml0eSBzZWNvbmQgc2xhc2hcIjppZihsPVwiYXV0aG9yaXR5IGlnbm9yZSBzbGFzaGVzXCIsXCIvXCIhPXkpe2MoXCJFeHBlY3RlZCAnLycsIGdvdDogXCIreSk7Y29udGludWV9YnJlYWs7Y2FzZVwiYXV0aG9yaXR5IGlnbm9yZSBzbGFzaGVzXCI6aWYoXCIvXCIhPXkmJlwiXFxcXFwiIT15KXtsPVwiYXV0aG9yaXR5XCI7Y29udGludWV9YyhcIkV4cGVjdGVkIGF1dGhvcml0eSwgZ290OiBcIit5KTticmVhaztjYXNlXCJhdXRob3JpdHlcIjppZihcIkBcIj09eSl7diYmKGMoXCJAIGFscmVhZHkgc2Vlbi5cIiksZCs9XCIlNDBcIiksdj0hMDtmb3IodmFyIFM9MDtTPGQubGVuZ3RoO1MrKyl7dmFyIFQ9ZFtTXTtpZihcIiAgIFwiIT1UJiZcIlxcblwiIT1UJiZcIlxcclwiIT1UKWlmKFwiOlwiIT1UfHxudWxsIT09dGhpcy5fcGFzc3dvcmQpe3ZhciBNPW8oVCk7bnVsbCE9PXRoaXMuX3Bhc3N3b3JkP3RoaXMuX3Bhc3N3b3JkKz1NOnRoaXMuX3VzZXJuYW1lKz1NfWVsc2UgdGhpcy5fcGFzc3dvcmQ9XCJcIjtlbHNlIGMoXCJJbnZhbGlkIHdoaXRlc3BhY2UgaW4gYXV0aG9yaXR5LlwiKX1kPVwiXCJ9ZWxzZXtpZihmPT15fHxcIi9cIj09eXx8XCJcXFxcXCI9PXl8fFwiP1wiPT15fHxcIiNcIj09eSl7dS09ZC5sZW5ndGgsZD1cIlwiLGw9XCJob3N0XCI7Y29udGludWV9ZCs9eX1icmVhaztjYXNlXCJmaWxlIGhvc3RcIjppZihmPT15fHxcIi9cIj09eXx8XCJcXFxcXCI9PXl8fFwiP1wiPT15fHxcIiNcIj09eSl7MiE9ZC5sZW5ndGh8fCFtLnRlc3QoZFswXSl8fFwiOlwiIT1kWzFdJiZcInxcIiE9ZFsxXT8wPT1kLmxlbmd0aD9sPVwicmVsYXRpdmUgcGF0aCBzdGFydFwiOih0aGlzLl9ob3N0PXIuY2FsbCh0aGlzLGQpLGQ9XCJcIixsPVwicmVsYXRpdmUgcGF0aCBzdGFydFwiKTpsPVwicmVsYXRpdmUgcGF0aFwiO2NvbnRpbnVlfVwiICBcIj09eXx8XCJcXG5cIj09eXx8XCJcXHJcIj09eT9jKFwiSW52YWxpZCB3aGl0ZXNwYWNlIGluIGZpbGUgaG9zdC5cIik6ZCs9eTticmVhaztjYXNlXCJob3N0XCI6Y2FzZVwiaG9zdG5hbWVcIjppZihcIjpcIiE9eXx8Zyl7aWYoZj09eXx8XCIvXCI9PXl8fFwiXFxcXFwiPT15fHxcIj9cIj09eXx8XCIjXCI9PXkpe2lmKHRoaXMuX2hvc3Q9ci5jYWxsKHRoaXMsZCksZD1cIlwiLGw9XCJyZWxhdGl2ZSBwYXRoIHN0YXJ0XCIsYSlicmVhayBlO2NvbnRpbnVlfVwiICAgIFwiIT15JiZcIlxcblwiIT15JiZcIlxcclwiIT15PyhcIltcIj09eT9nPSEwOlwiXVwiPT15JiYoZz0hMSksZCs9eSk6YyhcIkludmFsaWQgY29kZSBwb2ludCBpbiBob3N0L2hvc3RuYW1lOiBcIit5KX1lbHNlIGlmKHRoaXMuX2hvc3Q9ci5jYWxsKHRoaXMsZCksZD1cIlwiLGw9XCJwb3J0XCIsXCJob3N0bmFtZVwiPT1hKWJyZWFrIGU7YnJlYWs7Y2FzZVwicG9ydFwiOmlmKC9bMC05XS8udGVzdCh5KSlkKz15O2Vsc2V7aWYoZj09eXx8XCIvXCI9PXl8fFwiXFxcXFwiPT15fHxcIj9cIj09eXx8XCIjXCI9PXl8fGEpe2lmKFwiXCIhPWQpe3ZhciBPPXBhcnNlSW50KGQsMTApO08hPXBbdGhpcy5fc2NoZW1lXSYmKHRoaXMuX3BvcnQ9TytcIlwiKSxkPVwiXCJ9aWYoYSlicmVhayBlO2w9XCJyZWxhdGl2ZSBwYXRoIHN0YXJ0XCI7Y29udGludWV9XCIgICAgXCI9PXl8fFwiXFxuXCI9PXl8fFwiXFxyXCI9PXk/YyhcIkludmFsaWQgY29kZSBwb2ludCBpbiBwb3J0OiBcIit5KTpuLmNhbGwodGhpcyl9YnJlYWs7Y2FzZVwicmVsYXRpdmUgcGF0aCBzdGFydFwiOmlmKFwiXFxcXFwiPT15JiZjKFwiJ1xcXFwnIG5vdCBhbGxvd2VkIGluIHBhdGguXCIpLGw9XCJyZWxhdGl2ZSBwYXRoXCIsXCIvXCIhPXkmJlwiXFxcXFwiIT15KWNvbnRpbnVlO2JyZWFrO2Nhc2VcInJlbGF0aXZlIHBhdGhcIjppZihmIT15JiZcIi9cIiE9eSYmXCJcXFxcXCIhPXkmJihhfHxcIj9cIiE9eSYmXCIjXCIhPXkpKVwiIFwiIT15JiZcIlxcblwiIT15JiZcIlxcclwiIT15JiYoZCs9byh5KSk7ZWxzZXtcIlxcXFxcIj09eSYmYyhcIlxcXFwgbm90IGFsbG93ZWQgaW4gcmVsYXRpdmUgcGF0aC5cIik7dmFyIEw7KEw9aFtkLnRvTG93ZXJDYXNlKCldKSYmKGQ9TCksXCIuLlwiPT1kPyh0aGlzLl9wYXRoLnBvcCgpLFwiL1wiIT15JiZcIlxcXFxcIiE9eSYmdGhpcy5fcGF0aC5wdXNoKFwiXCIpKTpcIi5cIj09ZCYmXCIvXCIhPXkmJlwiXFxcXFwiIT15P3RoaXMuX3BhdGgucHVzaChcIlwiKTpcIi5cIiE9ZCYmKFwiZmlsZVwiPT10aGlzLl9zY2hlbWUmJjA9PXRoaXMuX3BhdGgubGVuZ3RoJiYyPT1kLmxlbmd0aCYmbS50ZXN0KGRbMF0pJiZcInxcIj09ZFsxXSYmKGQ9ZFswXStcIjpcIiksdGhpcy5fcGF0aC5wdXNoKGQpKSxkPVwiXCIsXCI/XCI9PXk/KHRoaXMuX3F1ZXJ5PVwiP1wiLGw9XCJxdWVyeVwiKTpcIiNcIj09eSYmKHRoaXMuX2ZyYWdtZW50PVwiI1wiLGw9XCJmcmFnbWVudFwiKX1icmVhaztjYXNlXCJxdWVyeVwiOmF8fFwiI1wiIT15P2YhPXkmJlwiIFwiIT15JiZcIlxcblwiIT15JiZcIlxcclwiIT15JiYodGhpcy5fcXVlcnkrPWkoeSkpOih0aGlzLl9mcmFnbWVudD1cIiNcIixsPVwiZnJhZ21lbnRcIik7YnJlYWs7Y2FzZVwiZnJhZ21lbnRcIjpmIT15JiZcIiAgXCIhPXkmJlwiXFxuXCIhPXkmJlwiXFxyXCIhPXkmJih0aGlzLl9mcmFnbWVudCs9eSl9dSsrfX1mdW5jdGlvbiBzKCl7dGhpcy5fc2NoZW1lPVwiXCIsdGhpcy5fc2NoZW1lRGF0YT1cIlwiLHRoaXMuX3VzZXJuYW1lPVwiXCIsdGhpcy5fcGFzc3dvcmQ9bnVsbCx0aGlzLl9ob3N0PVwiXCIsdGhpcy5fcG9ydD1cIlwiLHRoaXMuX3BhdGg9W10sdGhpcy5fcXVlcnk9XCJcIix0aGlzLl9mcmFnbWVudD1cIlwiLHRoaXMuX2lzSW52YWxpZD0hMSx0aGlzLl9pc1JlbGF0aXZlPSExfWZ1bmN0aW9uIGMoZSx0KXt2b2lkIDA9PT10fHx0IGluc3RhbmNlb2YgY3x8KHQ9bmV3IGMoU3RyaW5nKHQpKSksdGhpcy5fdXJsPWUscy5jYWxsKHRoaXMpO3ZhciBuPWUucmVwbGFjZSgvXlsgXFx0XFxyXFxuXFxmXSt8WyBcXHRcXHJcXG5cXGZdKyQvZyxcIlwiKTthLmNhbGwodGhpcyxuLG51bGwsdCl9dmFyIGw9ITE7aWYoIWUuZm9yY2VKVVJMKXRyeXt2YXIgdT1uZXcgVVJMKFwiYlwiLFwiaHR0cDovL2FcIik7dS5wYXRobmFtZT1cImMlMjBkXCIsbD1cImh0dHA6Ly9hL2MlMjBkXCI9PT11LmhyZWZ9Y2F0Y2goZCl7fWlmKCFsKXt2YXIgcD1PYmplY3QuY3JlYXRlKG51bGwpO3AuZnRwPTIxLHAuZmlsZT0wLHAuZ29waGVyPTcwLHAuaHR0cD04MCxwLmh0dHBzPTQ0MyxwLndzPTgwLHAud3NzPTQ0Mzt2YXIgaD1PYmplY3QuY3JlYXRlKG51bGwpO2hbXCIlMmVcIl09XCIuXCIsaFtcIi4lMmVcIl09XCIuLlwiLGhbXCIlMmUuXCJdPVwiLi5cIixoW1wiJTJlJTJlXCJdPVwiLi5cIjt2YXIgZj12b2lkIDAsbT0vW2EtekEtWl0vLHc9L1thLXpBLVowLTlcXCtcXC1cXC5dLztjLnByb3RvdHlwZT17dG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5ocmVmfSxnZXQgaHJlZigpe2lmKHRoaXMuX2lzSW52YWxpZClyZXR1cm4gdGhpcy5fdXJsO3ZhciBlPVwiXCI7cmV0dXJuKFwiXCIhPXRoaXMuX3VzZXJuYW1lfHxudWxsIT10aGlzLl9wYXNzd29yZCkmJihlPXRoaXMuX3VzZXJuYW1lKyhudWxsIT10aGlzLl9wYXNzd29yZD9cIjpcIit0aGlzLl9wYXNzd29yZDpcIlwiKStcIkBcIiksdGhpcy5wcm90b2NvbCsodGhpcy5faXNSZWxhdGl2ZT9cIi8vXCIrZSt0aGlzLmhvc3Q6XCJcIikrdGhpcy5wYXRobmFtZSt0aGlzLl9xdWVyeSt0aGlzLl9mcmFnbWVudH0sc2V0IGhyZWYoZSl7cy5jYWxsKHRoaXMpLGEuY2FsbCh0aGlzLGUpfSxnZXQgcHJvdG9jb2woKXtyZXR1cm4gdGhpcy5fc2NoZW1lK1wiOlwifSxzZXQgcHJvdG9jb2woZSl7dGhpcy5faXNJbnZhbGlkfHxhLmNhbGwodGhpcyxlK1wiOlwiLFwic2NoZW1lIHN0YXJ0XCIpfSxnZXQgaG9zdCgpe3JldHVybiB0aGlzLl9pc0ludmFsaWQ/XCJcIjp0aGlzLl9wb3J0P3RoaXMuX2hvc3QrXCI6XCIrdGhpcy5fcG9ydDp0aGlzLl9ob3N0fSxzZXQgaG9zdChlKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiZhLmNhbGwodGhpcyxlLFwiaG9zdFwiKX0sZ2V0IGhvc3RuYW1lKCl7cmV0dXJuIHRoaXMuX2hvc3R9LHNldCBob3N0bmFtZShlKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiZhLmNhbGwodGhpcyxlLFwiaG9zdG5hbWVcIil9LGdldCBwb3J0KCl7cmV0dXJuIHRoaXMuX3BvcnR9LHNldCBwb3J0KGUpeyF0aGlzLl9pc0ludmFsaWQmJnRoaXMuX2lzUmVsYXRpdmUmJmEuY2FsbCh0aGlzLGUsXCJwb3J0XCIpfSxnZXQgcGF0aG5hbWUoKXtyZXR1cm4gdGhpcy5faXNJbnZhbGlkP1wiXCI6dGhpcy5faXNSZWxhdGl2ZT9cIi9cIit0aGlzLl9wYXRoLmpvaW4oXCIvXCIpOnRoaXMuX3NjaGVtZURhdGF9LHNldCBwYXRobmFtZShlKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiYodGhpcy5fcGF0aD1bXSxhLmNhbGwodGhpcyxlLFwicmVsYXRpdmUgcGF0aCBzdGFydFwiKSl9LGdldCBzZWFyY2goKXtyZXR1cm4gdGhpcy5faXNJbnZhbGlkfHwhdGhpcy5fcXVlcnl8fFwiP1wiPT10aGlzLl9xdWVyeT9cIlwiOnRoaXMuX3F1ZXJ5fSxzZXQgc2VhcmNoKGUpeyF0aGlzLl9pc0ludmFsaWQmJnRoaXMuX2lzUmVsYXRpdmUmJih0aGlzLl9xdWVyeT1cIj9cIixcIj9cIj09ZVswXSYmKGU9ZS5zbGljZSgxKSksYS5jYWxsKHRoaXMsZSxcInF1ZXJ5XCIpKX0sZ2V0IGhhc2goKXtyZXR1cm4gdGhpcy5faXNJbnZhbGlkfHwhdGhpcy5fZnJhZ21lbnR8fFwiI1wiPT10aGlzLl9mcmFnbWVudD9cIlwiOnRoaXMuX2ZyYWdtZW50fSxzZXQgaGFzaChlKXt0aGlzLl9pc0ludmFsaWR8fCh0aGlzLl9mcmFnbWVudD1cIiNcIixcIiNcIj09ZVswXSYmKGU9ZS5zbGljZSgxKSksYS5jYWxsKHRoaXMsZSxcImZyYWdtZW50XCIpKX0sZ2V0IG9yaWdpbigpe3ZhciBlO2lmKHRoaXMuX2lzSW52YWxpZHx8IXRoaXMuX3NjaGVtZSlyZXR1cm5cIlwiO3N3aXRjaCh0aGlzLl9zY2hlbWUpe2Nhc2VcImRhdGFcIjpjYXNlXCJmaWxlXCI6Y2FzZVwiamF2YXNjcmlwdFwiOmNhc2VcIm1haWx0b1wiOnJldHVyblwibnVsbFwifXJldHVybiBlPXRoaXMuaG9zdCxlP3RoaXMuX3NjaGVtZStcIjovL1wiK2U6XCJcIn19O3ZhciB2PWUuVVJMO3YmJihjLmNyZWF0ZU9iamVjdFVSTD1mdW5jdGlvbihlKXtyZXR1cm4gdi5jcmVhdGVPYmplY3RVUkwuYXBwbHkodixhcmd1bWVudHMpfSxjLnJldm9rZU9iamVjdFVSTD1mdW5jdGlvbihlKXt2LnJldm9rZU9iamVjdFVSTChlKX0pLGUuVVJMPWN9fShzZWxmKSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUpe3kucHVzaChlKSxifHwoYj0hMCxtKHIpKX1mdW5jdGlvbiBuKGUpe3JldHVybiB3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwmJndpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQoZSl8fGV9ZnVuY3Rpb24gcigpe2I9ITE7dmFyIGU9eTt5PVtdLGUuc29ydChmdW5jdGlvbihlLHQpe3JldHVybiBlLnVpZF8tdC51aWRffSk7dmFyIHQ9ITE7ZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciBuPWUudGFrZVJlY29yZHMoKTtvKGUpLG4ubGVuZ3RoJiYoZS5jYWxsYmFja18obixlKSx0PSEwKX0pLHQmJnIoKX1mdW5jdGlvbiBvKGUpe2Uubm9kZXNfLmZvckVhY2goZnVuY3Rpb24odCl7dmFyIG49dy5nZXQodCk7biYmbi5mb3JFYWNoKGZ1bmN0aW9uKHQpe3Qub2JzZXJ2ZXI9PT1lJiZ0LnJlbW92ZVRyYW5zaWVudE9ic2VydmVycygpfSl9KX1mdW5jdGlvbiBpKGUsdCl7Zm9yKHZhciBuPWU7bjtuPW4ucGFyZW50Tm9kZSl7dmFyIHI9dy5nZXQobik7aWYocilmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKyl7dmFyIGk9cltvXSxhPWkub3B0aW9ucztpZihuPT09ZXx8YS5zdWJ0cmVlKXt2YXIgcz10KGEpO3MmJmkuZW5xdWV1ZShzKX19fX1mdW5jdGlvbiBhKGUpe3RoaXMuY2FsbGJhY2tfPWUsdGhpcy5ub2Rlc189W10sdGhpcy5yZWNvcmRzXz1bXSx0aGlzLnVpZF89KytFfWZ1bmN0aW9uIHMoZSx0KXt0aGlzLnR5cGU9ZSx0aGlzLnRhcmdldD10LHRoaXMuYWRkZWROb2Rlcz1bXSx0aGlzLnJlbW92ZWROb2Rlcz1bXSx0aGlzLnByZXZpb3VzU2libGluZz1udWxsLHRoaXMubmV4dFNpYmxpbmc9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWU9bnVsbCx0aGlzLmF0dHJpYnV0ZU5hbWVzcGFjZT1udWxsLHRoaXMub2xkVmFsdWU9bnVsbH1mdW5jdGlvbiBjKGUpe3ZhciB0PW5ldyBzKGUudHlwZSxlLnRhcmdldCk7cmV0dXJuIHQuYWRkZWROb2Rlcz1lLmFkZGVkTm9kZXMuc2xpY2UoKSx0LnJlbW92ZWROb2Rlcz1lLnJlbW92ZWROb2Rlcy5zbGljZSgpLHQucHJldmlvdXNTaWJsaW5nPWUucHJldmlvdXNTaWJsaW5nLHQubmV4dFNpYmxpbmc9ZS5uZXh0U2libGluZyx0LmF0dHJpYnV0ZU5hbWU9ZS5hdHRyaWJ1dGVOYW1lLHQuYXR0cmlidXRlTmFtZXNwYWNlPWUuYXR0cmlidXRlTmFtZXNwYWNlLHQub2xkVmFsdWU9ZS5vbGRWYWx1ZSx0fWZ1bmN0aW9uIGwoZSx0KXtyZXR1cm4gXz1uZXcgcyhlLHQpfWZ1bmN0aW9uIHUoZSl7cmV0dXJuIFM/UzooUz1jKF8pLFMub2xkVmFsdWU9ZSxTKX1mdW5jdGlvbiBkKCl7Xz1TPXZvaWQgMH1mdW5jdGlvbiBwKGUpe3JldHVybiBlPT09U3x8ZT09PV99ZnVuY3Rpb24gaChlLHQpe3JldHVybiBlPT09dD9lOlMmJnAoZSk/UzpudWxsfWZ1bmN0aW9uIGYoZSx0LG4pe3RoaXMub2JzZXJ2ZXI9ZSx0aGlzLnRhcmdldD10LHRoaXMub3B0aW9ucz1uLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXX12YXIgbSx3PW5ldyBXZWFrTWFwO2lmKC9UcmlkZW50fEVkZ2UvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCkpbT1zZXRUaW1lb3V0O2Vsc2UgaWYod2luZG93LnNldEltbWVkaWF0ZSltPXdpbmRvdy5zZXRJbW1lZGlhdGU7ZWxzZXt2YXIgdj1bXSxnPVN0cmluZyhNYXRoLnJhbmRvbSgpKTt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihcIm1lc3NhZ2VcIixmdW5jdGlvbihlKXtpZihlLmRhdGE9PT1nKXt2YXIgdD12O3Y9W10sdC5mb3JFYWNoKGZ1bmN0aW9uKGUpe2UoKX0pfX0pLG09ZnVuY3Rpb24oZSl7di5wdXNoKGUpLHdpbmRvdy5wb3N0TWVzc2FnZShnLFwiKlwiKX19dmFyIGI9ITEseT1bXSxFPTA7YS5wcm90b3R5cGU9e29ic2VydmU6ZnVuY3Rpb24oZSx0KXtpZihlPW4oZSksIXQuY2hpbGRMaXN0JiYhdC5hdHRyaWJ1dGVzJiYhdC5jaGFyYWN0ZXJEYXRhfHx0LmF0dHJpYnV0ZU9sZFZhbHVlJiYhdC5hdHRyaWJ1dGVzfHx0LmF0dHJpYnV0ZUZpbHRlciYmdC5hdHRyaWJ1dGVGaWx0ZXIubGVuZ3RoJiYhdC5hdHRyaWJ1dGVzfHx0LmNoYXJhY3RlckRhdGFPbGRWYWx1ZSYmIXQuY2hhcmFjdGVyRGF0YSl0aHJvdyBuZXcgU3ludGF4RXJyb3I7dmFyIHI9dy5nZXQoZSk7cnx8dy5zZXQoZSxyPVtdKTtmb3IodmFyIG8saT0wO2k8ci5sZW5ndGg7aSsrKWlmKHJbaV0ub2JzZXJ2ZXI9PT10aGlzKXtvPXJbaV0sby5yZW1vdmVMaXN0ZW5lcnMoKSxvLm9wdGlvbnM9dDticmVha31vfHwobz1uZXcgZih0aGlzLGUsdCksci5wdXNoKG8pLHRoaXMubm9kZXNfLnB1c2goZSkpLG8uYWRkTGlzdGVuZXJzKCl9LGRpc2Nvbm5lY3Q6ZnVuY3Rpb24oKXt0aGlzLm5vZGVzXy5mb3JFYWNoKGZ1bmN0aW9uKGUpe2Zvcih2YXIgdD13LmdldChlKSxuPTA7bjx0Lmxlbmd0aDtuKyspe3ZhciByPXRbbl07aWYoci5vYnNlcnZlcj09PXRoaXMpe3IucmVtb3ZlTGlzdGVuZXJzKCksdC5zcGxpY2UobiwxKTticmVha319fSx0aGlzKSx0aGlzLnJlY29yZHNfPVtdfSx0YWtlUmVjb3JkczpmdW5jdGlvbigpe3ZhciBlPXRoaXMucmVjb3Jkc187cmV0dXJuIHRoaXMucmVjb3Jkc189W10sZX19O3ZhciBfLFM7Zi5wcm90b3R5cGU9e2VucXVldWU6ZnVuY3Rpb24oZSl7dmFyIG49dGhpcy5vYnNlcnZlci5yZWNvcmRzXyxyPW4ubGVuZ3RoO2lmKG4ubGVuZ3RoPjApe3ZhciBvPW5bci0xXSxpPWgobyxlKTtpZihpKXJldHVybiB2b2lkKG5bci0xXT1pKX1lbHNlIHQodGhpcy5vYnNlcnZlcik7bltyXT1lfSxhZGRMaXN0ZW5lcnM6ZnVuY3Rpb24oKXt0aGlzLmFkZExpc3RlbmVyc18odGhpcy50YXJnZXQpfSxhZGRMaXN0ZW5lcnNfOmZ1bmN0aW9uKGUpe3ZhciB0PXRoaXMub3B0aW9uczt0LmF0dHJpYnV0ZXMmJmUuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUF0dHJNb2RpZmllZFwiLHRoaXMsITApLHQuY2hhcmFjdGVyRGF0YSYmZS5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkXCIsdGhpcywhMCksdC5jaGlsZExpc3QmJmUuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTU5vZGVJbnNlcnRlZFwiLHRoaXMsITApLCh0LmNoaWxkTGlzdHx8dC5zdWJ0cmVlKSYmZS5hZGRFdmVudExpc3RlbmVyKFwiRE9NTm9kZVJlbW92ZWRcIix0aGlzLCEwKX0scmVtb3ZlTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dGhpcy5yZW1vdmVMaXN0ZW5lcnNfKHRoaXMudGFyZ2V0KX0scmVtb3ZlTGlzdGVuZXJzXzpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm9wdGlvbnM7dC5hdHRyaWJ1dGVzJiZlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01BdHRyTW9kaWZpZWRcIix0aGlzLCEwKSx0LmNoYXJhY3RlckRhdGEmJmUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZFwiLHRoaXMsITApLHQuY2hpbGRMaXN0JiZlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Ob2RlSW5zZXJ0ZWRcIix0aGlzLCEwKSwodC5jaGlsZExpc3R8fHQuc3VidHJlZSkmJmUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcIkRPTU5vZGVSZW1vdmVkXCIsdGhpcywhMCl9LGFkZFRyYW5zaWVudE9ic2VydmVyOmZ1bmN0aW9uKGUpe2lmKGUhPT10aGlzLnRhcmdldCl7dGhpcy5hZGRMaXN0ZW5lcnNfKGUpLHRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcy5wdXNoKGUpO3ZhciB0PXcuZ2V0KGUpO3R8fHcuc2V0KGUsdD1bXSksdC5wdXNoKHRoaXMpfX0scmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzOmZ1bmN0aW9uKCl7dmFyIGU9dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzO3RoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlcz1bXSxlLmZvckVhY2goZnVuY3Rpb24oZSl7dGhpcy5yZW1vdmVMaXN0ZW5lcnNfKGUpO2Zvcih2YXIgdD13LmdldChlKSxuPTA7bjx0Lmxlbmd0aDtuKyspaWYodFtuXT09PXRoaXMpe3Quc3BsaWNlKG4sMSk7YnJlYWt9fSx0aGlzKX0saGFuZGxlRXZlbnQ6ZnVuY3Rpb24oZSl7c3dpdGNoKGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCksZS50eXBlKXtjYXNlXCJET01BdHRyTW9kaWZpZWRcIjp2YXIgdD1lLmF0dHJOYW1lLG49ZS5yZWxhdGVkTm9kZS5uYW1lc3BhY2VVUkkscj1lLnRhcmdldCxvPW5ldyBsKFwiYXR0cmlidXRlc1wiLHIpO28uYXR0cmlidXRlTmFtZT10LG8uYXR0cmlidXRlTmFtZXNwYWNlPW47dmFyIGE9ZS5hdHRyQ2hhbmdlPT09TXV0YXRpb25FdmVudC5BRERJVElPTj9udWxsOmUucHJldlZhbHVlO2kocixmdW5jdGlvbihlKXtyZXR1cm4hZS5hdHRyaWJ1dGVzfHxlLmF0dHJpYnV0ZUZpbHRlciYmZS5hdHRyaWJ1dGVGaWx0ZXIubGVuZ3RoJiYtMT09PWUuYXR0cmlidXRlRmlsdGVyLmluZGV4T2YodCkmJi0xPT09ZS5hdHRyaWJ1dGVGaWx0ZXIuaW5kZXhPZihuKT92b2lkIDA6ZS5hdHRyaWJ1dGVPbGRWYWx1ZT91KGEpOm99KTticmVhaztjYXNlXCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWRcIjp2YXIgcj1lLnRhcmdldCxvPWwoXCJjaGFyYWN0ZXJEYXRhXCIsciksYT1lLnByZXZWYWx1ZTtpKHIsZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hhcmFjdGVyRGF0YT9lLmNoYXJhY3RlckRhdGFPbGRWYWx1ZT91KGEpOm86dm9pZCAwfSk7YnJlYWs7Y2FzZVwiRE9NTm9kZVJlbW92ZWRcIjp0aGlzLmFkZFRyYW5zaWVudE9ic2VydmVyKGUudGFyZ2V0KTtjYXNlXCJET01Ob2RlSW5zZXJ0ZWRcIjp2YXIgcyxjLHA9ZS50YXJnZXQ7XCJET01Ob2RlSW5zZXJ0ZWRcIj09PWUudHlwZT8ocz1bcF0sYz1bXSk6KHM9W10sYz1bcF0pO3ZhciBoPXAucHJldmlvdXNTaWJsaW5nLGY9cC5uZXh0U2libGluZyxvPWwoXCJjaGlsZExpc3RcIixlLnRhcmdldC5wYXJlbnROb2RlKTtvLmFkZGVkTm9kZXM9cyxvLnJlbW92ZWROb2Rlcz1jLG8ucHJldmlvdXNTaWJsaW5nPWgsby5uZXh0U2libGluZz1mLGkoZS5yZWxhdGVkTm9kZSxmdW5jdGlvbihlKXtyZXR1cm4gZS5jaGlsZExpc3Q/bzp2b2lkIDB9KX1kKCl9fSxlLkpzTXV0YXRpb25PYnNlcnZlcj1hLGUuTXV0YXRpb25PYnNlcnZlcnx8KGUuTXV0YXRpb25PYnNlcnZlcj1hKX0oc2VsZiksd2luZG93LkhUTUxJbXBvcnRzPXdpbmRvdy5IVE1MSW1wb3J0c3x8e2ZsYWdzOnt9fSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCl7dD10fHxmLHIoZnVuY3Rpb24oKXtpKGUsdCl9LHQpfWZ1bmN0aW9uIG4oZSl7cmV0dXJuXCJjb21wbGV0ZVwiPT09ZS5yZWFkeVN0YXRlfHxlLnJlYWR5U3RhdGU9PT12fWZ1bmN0aW9uIHIoZSx0KXtpZihuKHQpKWUmJmUoKTtlbHNle3ZhciBvPWZ1bmN0aW9uKCl7KFwiY29tcGxldGVcIj09PXQucmVhZHlTdGF0ZXx8dC5yZWFkeVN0YXRlPT09dikmJih0LnJlbW92ZUV2ZW50TGlzdGVuZXIoZyxvKSxyKGUsdCkpfTt0LmFkZEV2ZW50TGlzdGVuZXIoZyxvKX19ZnVuY3Rpb24gbyhlKXtlLnRhcmdldC5fX2xvYWRlZD0hMH1mdW5jdGlvbiBpKGUsdCl7ZnVuY3Rpb24gbigpe2M9PWwmJmUmJmUoe2FsbEltcG9ydHM6cyxsb2FkZWRJbXBvcnRzOnUsZXJyb3JJbXBvcnRzOmR9KX1mdW5jdGlvbiByKGUpe28oZSksdS5wdXNoKHRoaXMpLGMrKyxuKCl9ZnVuY3Rpb24gaShlKXtkLnB1c2godGhpcyksYysrLG4oKX12YXIgcz10LnF1ZXJ5U2VsZWN0b3JBbGwoXCJsaW5rW3JlbD1pbXBvcnRdXCIpLGM9MCxsPXMubGVuZ3RoLHU9W10sZD1bXTtpZihsKWZvcih2YXIgcCxoPTA7bD5oJiYocD1zW2hdKTtoKyspYShwKT8oYysrLG4oKSk6KHAuYWRkRXZlbnRMaXN0ZW5lcihcImxvYWRcIixyKSxwLmFkZEV2ZW50TGlzdGVuZXIoXCJlcnJvclwiLGkpKTtlbHNlIG4oKX1mdW5jdGlvbiBhKGUpe3JldHVybiBkP2UuX19sb2FkZWR8fGVbXCJpbXBvcnRcIl0mJlwibG9hZGluZ1wiIT09ZVtcImltcG9ydFwiXS5yZWFkeVN0YXRlOmUuX19pbXBvcnRQYXJzZWR9ZnVuY3Rpb24gcyhlKXtmb3IodmFyIHQsbj0wLHI9ZS5sZW5ndGg7cj5uJiYodD1lW25dKTtuKyspYyh0KSYmbCh0KX1mdW5jdGlvbiBjKGUpe3JldHVyblwibGlua1wiPT09ZS5sb2NhbE5hbWUmJlwiaW1wb3J0XCI9PT1lLnJlbH1mdW5jdGlvbiBsKGUpe3ZhciB0PWVbXCJpbXBvcnRcIl07dD9vKHt0YXJnZXQ6ZX0pOihlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsbyksZS5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIixvKSl9dmFyIHU9XCJpbXBvcnRcIixkPUJvb2xlYW4odSBpbiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlua1wiKSkscD1Cb29sZWFuKHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksaD1mdW5jdGlvbihlKXtyZXR1cm4gcD93aW5kb3cuU2hhZG93RE9NUG9seWZpbGwud3JhcElmTmVlZGVkKGUpOmV9LGY9aChkb2N1bWVudCksbT17Z2V0OmZ1bmN0aW9uKCl7dmFyIGU9d2luZG93LkhUTUxJbXBvcnRzLmN1cnJlbnRTY3JpcHR8fGRvY3VtZW50LmN1cnJlbnRTY3JpcHR8fChcImNvbXBsZXRlXCIhPT1kb2N1bWVudC5yZWFkeVN0YXRlP2RvY3VtZW50LnNjcmlwdHNbZG9jdW1lbnQuc2NyaXB0cy5sZW5ndGgtMV06bnVsbCk7cmV0dXJuIGgoZSl9LGNvbmZpZ3VyYWJsZTohMH07T2JqZWN0LmRlZmluZVByb3BlcnR5KGRvY3VtZW50LFwiX2N1cnJlbnRTY3JpcHRcIixtKSxPYmplY3QuZGVmaW5lUHJvcGVydHkoZixcIl9jdXJyZW50U2NyaXB0XCIsbSk7dmFyIHc9L1RyaWRlbnQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksdj13P1wiY29tcGxldGVcIjpcImludGVyYWN0aXZlXCIsZz1cInJlYWR5c3RhdGVjaGFuZ2VcIjtkJiYobmV3IE11dGF0aW9uT2JzZXJ2ZXIoZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49MCxyPWUubGVuZ3RoO3I+biYmKHQ9ZVtuXSk7bisrKXQuYWRkZWROb2RlcyYmcyh0LmFkZGVkTm9kZXMpfSkub2JzZXJ2ZShkb2N1bWVudC5oZWFkLHtjaGlsZExpc3Q6ITB9KSxmdW5jdGlvbigpe2lmKFwibG9hZGluZ1wiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZSlmb3IodmFyIGUsdD1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwibGlua1tyZWw9aW1wb3J0XVwiKSxuPTAscj10Lmxlbmd0aDtyPm4mJihlPXRbbl0pO24rKylsKGUpfSgpKSx0KGZ1bmN0aW9uKGUpe3dpbmRvdy5IVE1MSW1wb3J0cy5yZWFkeT0hMCx3aW5kb3cuSFRNTEltcG9ydHMucmVhZHlUaW1lPShuZXcgRGF0ZSkuZ2V0VGltZSgpO3ZhciB0PWYuY3JlYXRlRXZlbnQoXCJDdXN0b21FdmVudFwiKTt0LmluaXRDdXN0b21FdmVudChcIkhUTUxJbXBvcnRzTG9hZGVkXCIsITAsITAsZSksZi5kaXNwYXRjaEV2ZW50KHQpfSksZS5JTVBPUlRfTElOS19UWVBFPXUsZS51c2VOYXRpdmU9ZCxlLnJvb3REb2N1bWVudD1mLGUud2hlblJlYWR5PXQsZS5pc0lFPXd9KHdpbmRvdy5IVE1MSW1wb3J0cyksZnVuY3Rpb24oZSl7dmFyIHQ9W10sbj1mdW5jdGlvbihlKXt0LnB1c2goZSl9LHI9ZnVuY3Rpb24oKXt0LmZvckVhY2goZnVuY3Rpb24odCl7dChlKX0pfTtlLmFkZE1vZHVsZT1uLGUuaW5pdGlhbGl6ZU1vZHVsZXM9cn0od2luZG93LkhUTUxJbXBvcnRzKSx3aW5kb3cuSFRNTEltcG9ydHMuYWRkTW9kdWxlKGZ1bmN0aW9uKGUpe3ZhciB0PS8odXJsXFwoKShbXildKikoXFwpKS9nLG49LyhAaW1wb3J0W1xcc10rKD8hdXJsXFwoKSkoW147XSopKDspL2cscj17cmVzb2x2ZVVybHNJblN0eWxlOmZ1bmN0aW9uKGUsdCl7dmFyIG49ZS5vd25lckRvY3VtZW50LHI9bi5jcmVhdGVFbGVtZW50KFwiYVwiKTtyZXR1cm4gZS50ZXh0Q29udGVudD10aGlzLnJlc29sdmVVcmxzSW5Dc3NUZXh0KGUudGV4dENvbnRlbnQsdCxyKSxlfSxyZXNvbHZlVXJsc0luQ3NzVGV4dDpmdW5jdGlvbihlLHIsbyl7dmFyIGk9dGhpcy5yZXBsYWNlVXJscyhlLG8scix0KTtyZXR1cm4gaT10aGlzLnJlcGxhY2VVcmxzKGksbyxyLG4pfSxyZXBsYWNlVXJsczpmdW5jdGlvbihlLHQsbixyKXtyZXR1cm4gZS5yZXBsYWNlKHIsZnVuY3Rpb24oZSxyLG8saSl7dmFyIGE9by5yZXBsYWNlKC9bXCInXS9nLFwiXCIpO3JldHVybiBuJiYoYT1uZXcgVVJMKGEsbikuaHJlZiksdC5ocmVmPWEsYT10LmhyZWYscitcIidcIithK1wiJ1wiK2l9KX19O2UucGF0aD1yfSksd2luZG93LkhUTUxJbXBvcnRzLmFkZE1vZHVsZShmdW5jdGlvbihlKXtcbnZhciB0PXthc3luYzohMCxvazpmdW5jdGlvbihlKXtyZXR1cm4gZS5zdGF0dXM+PTIwMCYmZS5zdGF0dXM8MzAwfHwzMDQ9PT1lLnN0YXR1c3x8MD09PWUuc3RhdHVzfSxsb2FkOmZ1bmN0aW9uKG4scixvKXt2YXIgaT1uZXcgWE1MSHR0cFJlcXVlc3Q7cmV0dXJuKGUuZmxhZ3MuZGVidWd8fGUuZmxhZ3MuYnVzdCkmJihuKz1cIj9cIitNYXRoLnJhbmRvbSgpKSxpLm9wZW4oXCJHRVRcIixuLHQuYXN5bmMpLGkuYWRkRXZlbnRMaXN0ZW5lcihcInJlYWR5c3RhdGVjaGFuZ2VcIixmdW5jdGlvbihlKXtpZig0PT09aS5yZWFkeVN0YXRlKXt2YXIgbj1pLmdldFJlc3BvbnNlSGVhZGVyKFwiTG9jYXRpb25cIiksYT1udWxsO2lmKG4pdmFyIGE9XCIvXCI9PT1uLnN1YnN0cigwLDEpP2xvY2F0aW9uLm9yaWdpbituOm47ci5jYWxsKG8sIXQub2soaSkmJmksaS5yZXNwb25zZXx8aS5yZXNwb25zZVRleHQsYSl9fSksaS5zZW5kKCksaX0sbG9hZERvY3VtZW50OmZ1bmN0aW9uKGUsdCxuKXt0aGlzLmxvYWQoZSx0LG4pLnJlc3BvbnNlVHlwZT1cImRvY3VtZW50XCJ9fTtlLnhocj10fSksd2luZG93LkhUTUxJbXBvcnRzLmFkZE1vZHVsZShmdW5jdGlvbihlKXt2YXIgdD1lLnhocixuPWUuZmxhZ3Mscj1mdW5jdGlvbihlLHQpe3RoaXMuY2FjaGU9e30sdGhpcy5vbmxvYWQ9ZSx0aGlzLm9uY29tcGxldGU9dCx0aGlzLmluZmxpZ2h0PTAsdGhpcy5wZW5kaW5nPXt9fTtyLnByb3RvdHlwZT17YWRkTm9kZXM6ZnVuY3Rpb24oZSl7dGhpcy5pbmZsaWdodCs9ZS5sZW5ndGg7Zm9yKHZhciB0LG49MCxyPWUubGVuZ3RoO3I+biYmKHQ9ZVtuXSk7bisrKXRoaXMucmVxdWlyZSh0KTt0aGlzLmNoZWNrRG9uZSgpfSxhZGROb2RlOmZ1bmN0aW9uKGUpe3RoaXMuaW5mbGlnaHQrKyx0aGlzLnJlcXVpcmUoZSksdGhpcy5jaGVja0RvbmUoKX0scmVxdWlyZTpmdW5jdGlvbihlKXt2YXIgdD1lLnNyY3x8ZS5ocmVmO2UuX19ub2RlVXJsPXQsdGhpcy5kZWR1cGUodCxlKXx8dGhpcy5mZXRjaCh0LGUpfSxkZWR1cGU6ZnVuY3Rpb24oZSx0KXtpZih0aGlzLnBlbmRpbmdbZV0pcmV0dXJuIHRoaXMucGVuZGluZ1tlXS5wdXNoKHQpLCEwO3JldHVybiB0aGlzLmNhY2hlW2VdPyh0aGlzLm9ubG9hZChlLHQsdGhpcy5jYWNoZVtlXSksdGhpcy50YWlsKCksITApOih0aGlzLnBlbmRpbmdbZV09W3RdLCExKX0sZmV0Y2g6ZnVuY3Rpb24oZSxyKXtpZihuLmxvYWQmJmNvbnNvbGUubG9nKFwiZmV0Y2hcIixlLHIpLGUpaWYoZS5tYXRjaCgvXmRhdGE6Lykpe3ZhciBvPWUuc3BsaXQoXCIsXCIpLGk9b1swXSxhPW9bMV07YT1pLmluZGV4T2YoXCI7YmFzZTY0XCIpPi0xP2F0b2IoYSk6ZGVjb2RlVVJJQ29tcG9uZW50KGEpLHNldFRpbWVvdXQoZnVuY3Rpb24oKXt0aGlzLnJlY2VpdmUoZSxyLG51bGwsYSl9LmJpbmQodGhpcyksMCl9ZWxzZXt2YXIgcz1mdW5jdGlvbih0LG4sbyl7dGhpcy5yZWNlaXZlKGUscix0LG4sbyl9LmJpbmQodGhpcyk7dC5sb2FkKGUscyl9ZWxzZSBzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhpcy5yZWNlaXZlKGUscix7ZXJyb3I6XCJocmVmIG11c3QgYmUgc3BlY2lmaWVkXCJ9LG51bGwpfS5iaW5kKHRoaXMpLDApfSxyZWNlaXZlOmZ1bmN0aW9uKGUsdCxuLHIsbyl7dGhpcy5jYWNoZVtlXT1yO2Zvcih2YXIgaSxhPXRoaXMucGVuZGluZ1tlXSxzPTAsYz1hLmxlbmd0aDtjPnMmJihpPWFbc10pO3MrKyl0aGlzLm9ubG9hZChlLGkscixuLG8pLHRoaXMudGFpbCgpO3RoaXMucGVuZGluZ1tlXT1udWxsfSx0YWlsOmZ1bmN0aW9uKCl7LS10aGlzLmluZmxpZ2h0LHRoaXMuY2hlY2tEb25lKCl9LGNoZWNrRG9uZTpmdW5jdGlvbigpe3RoaXMuaW5mbGlnaHR8fHRoaXMub25jb21wbGV0ZSgpfX0sZS5Mb2FkZXI9cn0pLHdpbmRvdy5IVE1MSW1wb3J0cy5hZGRNb2R1bGUoZnVuY3Rpb24oZSl7dmFyIHQ9ZnVuY3Rpb24oZSl7dGhpcy5hZGRDYWxsYmFjaz1lLHRoaXMubW89bmV3IE11dGF0aW9uT2JzZXJ2ZXIodGhpcy5oYW5kbGVyLmJpbmQodGhpcykpfTt0LnByb3RvdHlwZT17aGFuZGxlcjpmdW5jdGlvbihlKXtmb3IodmFyIHQsbj0wLHI9ZS5sZW5ndGg7cj5uJiYodD1lW25dKTtuKyspXCJjaGlsZExpc3RcIj09PXQudHlwZSYmdC5hZGRlZE5vZGVzLmxlbmd0aCYmdGhpcy5hZGRlZE5vZGVzKHQuYWRkZWROb2Rlcyl9LGFkZGVkTm9kZXM6ZnVuY3Rpb24oZSl7dGhpcy5hZGRDYWxsYmFjayYmdGhpcy5hZGRDYWxsYmFjayhlKTtmb3IodmFyIHQsbj0wLHI9ZS5sZW5ndGg7cj5uJiYodD1lW25dKTtuKyspdC5jaGlsZHJlbiYmdC5jaGlsZHJlbi5sZW5ndGgmJnRoaXMuYWRkZWROb2Rlcyh0LmNoaWxkcmVuKX0sb2JzZXJ2ZTpmdW5jdGlvbihlKXt0aGlzLm1vLm9ic2VydmUoZSx7Y2hpbGRMaXN0OiEwLHN1YnRyZWU6ITB9KX19LGUuT2JzZXJ2ZXI9dH0pLHdpbmRvdy5IVE1MSW1wb3J0cy5hZGRNb2R1bGUoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXtyZXR1cm5cImxpbmtcIj09PWUubG9jYWxOYW1lJiZlLnJlbD09PXV9ZnVuY3Rpb24gbihlKXt2YXIgdD1yKGUpO3JldHVyblwiZGF0YTp0ZXh0L2phdmFzY3JpcHQ7Y2hhcnNldD11dGYtOCxcIitlbmNvZGVVUklDb21wb25lbnQodCl9ZnVuY3Rpb24gcihlKXtyZXR1cm4gZS50ZXh0Q29udGVudCtvKGUpfWZ1bmN0aW9uIG8oZSl7dmFyIHQ9ZS5vd25lckRvY3VtZW50O3QuX19pbXBvcnRlZFNjcmlwdHM9dC5fX2ltcG9ydGVkU2NyaXB0c3x8MDt2YXIgbj1lLm93bmVyRG9jdW1lbnQuYmFzZVVSSSxyPXQuX19pbXBvcnRlZFNjcmlwdHM/XCItXCIrdC5fX2ltcG9ydGVkU2NyaXB0czpcIlwiO3JldHVybiB0Ll9faW1wb3J0ZWRTY3JpcHRzKyssXCJcXG4vLyMgc291cmNlVVJMPVwiK24rcitcIi5qc1xcblwifWZ1bmN0aW9uIGkoZSl7dmFyIHQ9ZS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTtyZXR1cm4gdC50ZXh0Q29udGVudD1lLnRleHRDb250ZW50LGEucmVzb2x2ZVVybHNJblN0eWxlKHQpLHR9dmFyIGE9ZS5wYXRoLHM9ZS5yb290RG9jdW1lbnQsYz1lLmZsYWdzLGw9ZS5pc0lFLHU9ZS5JTVBPUlRfTElOS19UWVBFLGQ9XCJsaW5rW3JlbD1cIit1K1wiXVwiLHA9e2RvY3VtZW50U2VsZWN0b3JzOmQsaW1wb3J0c1NlbGVjdG9yczpbZCxcImxpbmtbcmVsPXN0eWxlc2hlZXRdOm5vdChbdHlwZV0pXCIsXCJzdHlsZTpub3QoW3R5cGVdKVwiLFwic2NyaXB0Om5vdChbdHlwZV0pXCIsJ3NjcmlwdFt0eXBlPVwiYXBwbGljYXRpb24vamF2YXNjcmlwdFwiXScsJ3NjcmlwdFt0eXBlPVwidGV4dC9qYXZhc2NyaXB0XCJdJ10uam9pbihcIixcIiksbWFwOntsaW5rOlwicGFyc2VMaW5rXCIsc2NyaXB0OlwicGFyc2VTY3JpcHRcIixzdHlsZTpcInBhcnNlU3R5bGVcIn0sZHluYW1pY0VsZW1lbnRzOltdLHBhcnNlTmV4dDpmdW5jdGlvbigpe3ZhciBlPXRoaXMubmV4dFRvUGFyc2UoKTtlJiZ0aGlzLnBhcnNlKGUpfSxwYXJzZTpmdW5jdGlvbihlKXtpZih0aGlzLmlzUGFyc2VkKGUpKXJldHVybiB2b2lkKGMucGFyc2UmJmNvbnNvbGUubG9nKFwiWyVzXSBpcyBhbHJlYWR5IHBhcnNlZFwiLGUubG9jYWxOYW1lKSk7dmFyIHQ9dGhpc1t0aGlzLm1hcFtlLmxvY2FsTmFtZV1dO3QmJih0aGlzLm1hcmtQYXJzaW5nKGUpLHQuY2FsbCh0aGlzLGUpKX0scGFyc2VEeW5hbWljOmZ1bmN0aW9uKGUsdCl7dGhpcy5keW5hbWljRWxlbWVudHMucHVzaChlKSx0fHx0aGlzLnBhcnNlTmV4dCgpfSxtYXJrUGFyc2luZzpmdW5jdGlvbihlKXtjLnBhcnNlJiZjb25zb2xlLmxvZyhcInBhcnNpbmdcIixlKSx0aGlzLnBhcnNpbmdFbGVtZW50PWV9LG1hcmtQYXJzaW5nQ29tcGxldGU6ZnVuY3Rpb24oZSl7ZS5fX2ltcG9ydFBhcnNlZD0hMCx0aGlzLm1hcmtEeW5hbWljUGFyc2luZ0NvbXBsZXRlKGUpLGUuX19pbXBvcnRFbGVtZW50JiYoZS5fX2ltcG9ydEVsZW1lbnQuX19pbXBvcnRQYXJzZWQ9ITAsdGhpcy5tYXJrRHluYW1pY1BhcnNpbmdDb21wbGV0ZShlLl9faW1wb3J0RWxlbWVudCkpLHRoaXMucGFyc2luZ0VsZW1lbnQ9bnVsbCxjLnBhcnNlJiZjb25zb2xlLmxvZyhcImNvbXBsZXRlZFwiLGUpfSxtYXJrRHluYW1pY1BhcnNpbmdDb21wbGV0ZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLmR5bmFtaWNFbGVtZW50cy5pbmRleE9mKGUpO3Q+PTAmJnRoaXMuZHluYW1pY0VsZW1lbnRzLnNwbGljZSh0LDEpfSxwYXJzZUltcG9ydDpmdW5jdGlvbihlKXtpZihlW1wiaW1wb3J0XCJdPWUuX19kb2Msd2luZG93LkhUTUxJbXBvcnRzLl9faW1wb3J0c1BhcnNpbmdIb29rJiZ3aW5kb3cuSFRNTEltcG9ydHMuX19pbXBvcnRzUGFyc2luZ0hvb2soZSksZVtcImltcG9ydFwiXSYmKGVbXCJpbXBvcnRcIl0uX19pbXBvcnRQYXJzZWQ9ITApLHRoaXMubWFya1BhcnNpbmdDb21wbGV0ZShlKSxlLl9fcmVzb3VyY2UmJiFlLl9fZXJyb3I/ZS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcImxvYWRcIix7YnViYmxlczohMX0pKTplLmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwiZXJyb3JcIix7YnViYmxlczohMX0pKSxlLl9fcGVuZGluZylmb3IodmFyIHQ7ZS5fX3BlbmRpbmcubGVuZ3RoOyl0PWUuX19wZW5kaW5nLnNoaWZ0KCksdCYmdCh7dGFyZ2V0OmV9KTt0aGlzLnBhcnNlTmV4dCgpfSxwYXJzZUxpbms6ZnVuY3Rpb24oZSl7dChlKT90aGlzLnBhcnNlSW1wb3J0KGUpOihlLmhyZWY9ZS5ocmVmLHRoaXMucGFyc2VHZW5lcmljKGUpKX0scGFyc2VTdHlsZTpmdW5jdGlvbihlKXt2YXIgdD1lO2U9aShlKSx0Ll9fYXBwbGllZEVsZW1lbnQ9ZSxlLl9faW1wb3J0RWxlbWVudD10LHRoaXMucGFyc2VHZW5lcmljKGUpfSxwYXJzZUdlbmVyaWM6ZnVuY3Rpb24oZSl7dGhpcy50cmFja0VsZW1lbnQoZSksdGhpcy5hZGRFbGVtZW50VG9Eb2N1bWVudChlKX0scm9vdEltcG9ydEZvckVsZW1lbnQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWU7dC5vd25lckRvY3VtZW50Ll9faW1wb3J0TGluazspdD10Lm93bmVyRG9jdW1lbnQuX19pbXBvcnRMaW5rO3JldHVybiB0fSxhZGRFbGVtZW50VG9Eb2N1bWVudDpmdW5jdGlvbihlKXt2YXIgdD10aGlzLnJvb3RJbXBvcnRGb3JFbGVtZW50KGUuX19pbXBvcnRFbGVtZW50fHxlKTt0LnBhcmVudE5vZGUuaW5zZXJ0QmVmb3JlKGUsdCl9LHRyYWNrRWxlbWVudDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMscj1mdW5jdGlvbihvKXtlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsciksZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiZXJyb3JcIixyKSx0JiZ0KG8pLG4ubWFya1BhcnNpbmdDb21wbGV0ZShlKSxuLnBhcnNlTmV4dCgpfTtpZihlLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIsciksZS5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIixyKSxsJiZcInN0eWxlXCI9PT1lLmxvY2FsTmFtZSl7dmFyIG89ITE7aWYoLTE9PWUudGV4dENvbnRlbnQuaW5kZXhPZihcIkBpbXBvcnRcIikpbz0hMDtlbHNlIGlmKGUuc2hlZXQpe289ITA7Zm9yKHZhciBpLGE9ZS5zaGVldC5jc3NSdWxlcyxzPWE/YS5sZW5ndGg6MCxjPTA7cz5jJiYoaT1hW2NdKTtjKyspaS50eXBlPT09Q1NTUnVsZS5JTVBPUlRfUlVMRSYmKG89byYmQm9vbGVhbihpLnN0eWxlU2hlZXQpKX1vJiZzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7ZS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcImxvYWRcIix7YnViYmxlczohMX0pKX0pfX0scGFyc2VTY3JpcHQ6ZnVuY3Rpb24odCl7dmFyIHI9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNjcmlwdFwiKTtyLl9faW1wb3J0RWxlbWVudD10LHIuc3JjPXQuc3JjP3Quc3JjOm4odCksZS5jdXJyZW50U2NyaXB0PXQsdGhpcy50cmFja0VsZW1lbnQocixmdW5jdGlvbih0KXtyLnBhcmVudE5vZGUmJnIucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChyKSxlLmN1cnJlbnRTY3JpcHQ9bnVsbH0pLHRoaXMuYWRkRWxlbWVudFRvRG9jdW1lbnQocil9LG5leHRUb1BhcnNlOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX21heVBhcnNlPVtdLCF0aGlzLnBhcnNpbmdFbGVtZW50JiYodGhpcy5uZXh0VG9QYXJzZUluRG9jKHMpfHx0aGlzLm5leHRUb1BhcnNlRHluYW1pYygpKX0sbmV4dFRvUGFyc2VJbkRvYzpmdW5jdGlvbihlLG4pe2lmKGUmJnRoaXMuX21heVBhcnNlLmluZGV4T2YoZSk8MCl7dGhpcy5fbWF5UGFyc2UucHVzaChlKTtmb3IodmFyIHIsbz1lLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5wYXJzZVNlbGVjdG9yc0Zvck5vZGUoZSkpLGk9MCxhPW8ubGVuZ3RoO2E+aSYmKHI9b1tpXSk7aSsrKWlmKCF0aGlzLmlzUGFyc2VkKHIpKXJldHVybiB0aGlzLmhhc1Jlc291cmNlKHIpP3Qocik/dGhpcy5uZXh0VG9QYXJzZUluRG9jKHIuX19kb2Mscik6cjp2b2lkIDB9cmV0dXJuIG59LG5leHRUb1BhcnNlRHluYW1pYzpmdW5jdGlvbigpe3JldHVybiB0aGlzLmR5bmFtaWNFbGVtZW50c1swXX0scGFyc2VTZWxlY3RvcnNGb3JOb2RlOmZ1bmN0aW9uKGUpe3ZhciB0PWUub3duZXJEb2N1bWVudHx8ZTtyZXR1cm4gdD09PXM/dGhpcy5kb2N1bWVudFNlbGVjdG9yczp0aGlzLmltcG9ydHNTZWxlY3RvcnN9LGlzUGFyc2VkOmZ1bmN0aW9uKGUpe3JldHVybiBlLl9faW1wb3J0UGFyc2VkfSxuZWVkc0R5bmFtaWNQYXJzaW5nOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmR5bmFtaWNFbGVtZW50cy5pbmRleE9mKGUpPj0wfSxoYXNSZXNvdXJjZTpmdW5jdGlvbihlKXtyZXR1cm4gdChlKSYmdm9pZCAwPT09ZS5fX2RvYz8hMTohMH19O2UucGFyc2VyPXAsZS5JTVBPUlRfU0VMRUNUT1I9ZH0pLHdpbmRvdy5IVE1MSW1wb3J0cy5hZGRNb2R1bGUoZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXtyZXR1cm4gbihlLGEpfWZ1bmN0aW9uIG4oZSx0KXtyZXR1cm5cImxpbmtcIj09PWUubG9jYWxOYW1lJiZlLmdldEF0dHJpYnV0ZShcInJlbFwiKT09PXR9ZnVuY3Rpb24gcihlKXtyZXR1cm4hIU9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IoZSxcImJhc2VVUklcIil9ZnVuY3Rpb24gbyhlLHQpe3ZhciBuPWRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChhKTtuLl9VUkw9dDt2YXIgbz1uLmNyZWF0ZUVsZW1lbnQoXCJiYXNlXCIpO28uc2V0QXR0cmlidXRlKFwiaHJlZlwiLHQpLG4uYmFzZVVSSXx8cihuKXx8T2JqZWN0LmRlZmluZVByb3BlcnR5KG4sXCJiYXNlVVJJXCIse3ZhbHVlOnR9KTt2YXIgaT1uLmNyZWF0ZUVsZW1lbnQoXCJtZXRhXCIpO3JldHVybiBpLnNldEF0dHJpYnV0ZShcImNoYXJzZXRcIixcInV0Zi04XCIpLG4uaGVhZC5hcHBlbmRDaGlsZChpKSxuLmhlYWQuYXBwZW5kQ2hpbGQobyksbi5ib2R5LmlubmVySFRNTD1lLHdpbmRvdy5IVE1MVGVtcGxhdGVFbGVtZW50JiZIVE1MVGVtcGxhdGVFbGVtZW50LmJvb3RzdHJhcCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAobiksbn12YXIgaT1lLmZsYWdzLGE9ZS5JTVBPUlRfTElOS19UWVBFLHM9ZS5JTVBPUlRfU0VMRUNUT1IsYz1lLnJvb3REb2N1bWVudCxsPWUuTG9hZGVyLHU9ZS5PYnNlcnZlcixkPWUucGFyc2VyLHA9e2RvY3VtZW50czp7fSxkb2N1bWVudFByZWxvYWRTZWxlY3RvcnM6cyxpbXBvcnRzUHJlbG9hZFNlbGVjdG9yczpbc10uam9pbihcIixcIiksbG9hZE5vZGU6ZnVuY3Rpb24oZSl7aC5hZGROb2RlKGUpfSxsb2FkU3VidHJlZTpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm1hcnNoYWxOb2RlcyhlKTtoLmFkZE5vZGVzKHQpfSxtYXJzaGFsTm9kZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucXVlcnlTZWxlY3RvckFsbCh0aGlzLmxvYWRTZWxlY3RvcnNGb3JOb2RlKGUpKX0sbG9hZFNlbGVjdG9yc0Zvck5vZGU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5vd25lckRvY3VtZW50fHxlO3JldHVybiB0PT09Yz90aGlzLmRvY3VtZW50UHJlbG9hZFNlbGVjdG9yczp0aGlzLmltcG9ydHNQcmVsb2FkU2VsZWN0b3JzfSxsb2FkZWQ6ZnVuY3Rpb24oZSxuLHIsYSxzKXtpZihpLmxvYWQmJmNvbnNvbGUubG9nKFwibG9hZGVkXCIsZSxuKSxuLl9fcmVzb3VyY2U9cixuLl9fZXJyb3I9YSx0KG4pKXt2YXIgYz10aGlzLmRvY3VtZW50c1tlXTt2b2lkIDA9PT1jJiYoYz1hP251bGw6byhyLHN8fGUpLGMmJihjLl9faW1wb3J0TGluaz1uLHRoaXMuYm9vdERvY3VtZW50KGMpKSx0aGlzLmRvY3VtZW50c1tlXT1jKSxuLl9fZG9jPWN9ZC5wYXJzZU5leHQoKX0sYm9vdERvY3VtZW50OmZ1bmN0aW9uKGUpe3RoaXMubG9hZFN1YnRyZWUoZSksdGhpcy5vYnNlcnZlci5vYnNlcnZlKGUpLGQucGFyc2VOZXh0KCl9LGxvYWRlZEFsbDpmdW5jdGlvbigpe2QucGFyc2VOZXh0KCl9fSxoPW5ldyBsKHAubG9hZGVkLmJpbmQocCkscC5sb2FkZWRBbGwuYmluZChwKSk7aWYocC5vYnNlcnZlcj1uZXcgdSwhZG9jdW1lbnQuYmFzZVVSSSl7dmFyIGY9e2dldDpmdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJiYXNlXCIpO3JldHVybiBlP2UuaHJlZjp3aW5kb3cubG9jYXRpb24uaHJlZn0sY29uZmlndXJhYmxlOiEwfTtPYmplY3QuZGVmaW5lUHJvcGVydHkoZG9jdW1lbnQsXCJiYXNlVVJJXCIsZiksT2JqZWN0LmRlZmluZVByb3BlcnR5KGMsXCJiYXNlVVJJXCIsZil9ZS5pbXBvcnRlcj1wLGUuaW1wb3J0TG9hZGVyPWh9KSx3aW5kb3cuSFRNTEltcG9ydHMuYWRkTW9kdWxlKGZ1bmN0aW9uKGUpe3ZhciB0PWUucGFyc2VyLG49ZS5pbXBvcnRlcixyPXthZGRlZDpmdW5jdGlvbihlKXtmb3IodmFyIHIsbyxpLGEscz0wLGM9ZS5sZW5ndGg7Yz5zJiYoYT1lW3NdKTtzKyspcnx8KHI9YS5vd25lckRvY3VtZW50LG89dC5pc1BhcnNlZChyKSksaT10aGlzLnNob3VsZExvYWROb2RlKGEpLGkmJm4ubG9hZE5vZGUoYSksdGhpcy5zaG91bGRQYXJzZU5vZGUoYSkmJm8mJnQucGFyc2VEeW5hbWljKGEsaSl9LHNob3VsZExvYWROb2RlOmZ1bmN0aW9uKGUpe3JldHVybiAxPT09ZS5ub2RlVHlwZSYmby5jYWxsKGUsbi5sb2FkU2VsZWN0b3JzRm9yTm9kZShlKSl9LHNob3VsZFBhcnNlTm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gMT09PWUubm9kZVR5cGUmJm8uY2FsbChlLHQucGFyc2VTZWxlY3RvcnNGb3JOb2RlKGUpKX19O24ub2JzZXJ2ZXIuYWRkQ2FsbGJhY2s9ci5hZGRlZC5iaW5kKHIpO3ZhciBvPUhUTUxFbGVtZW50LnByb3RvdHlwZS5tYXRjaGVzfHxIVE1MRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc1NlbGVjdG9yfHxIVE1MRWxlbWVudC5wcm90b3R5cGUud2Via2l0TWF0Y2hlc1NlbGVjdG9yfHxIVE1MRWxlbWVudC5wcm90b3R5cGUubW96TWF0Y2hlc1NlbGVjdG9yfHxIVE1MRWxlbWVudC5wcm90b3R5cGUubXNNYXRjaGVzU2VsZWN0b3J9KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7d2luZG93LkhUTUxJbXBvcnRzLmltcG9ydGVyLmJvb3REb2N1bWVudChvKX12YXIgbj1lLmluaXRpYWxpemVNb2R1bGVzLHI9ZS5pc0lFO2lmKCFlLnVzZU5hdGl2ZSl7ciYmXCJmdW5jdGlvblwiIT10eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50JiYod2luZG93LkN1c3RvbUV2ZW50PWZ1bmN0aW9uKGUsdCl7dD10fHx7fTt2YXIgbj1kb2N1bWVudC5jcmVhdGVFdmVudChcIkN1c3RvbUV2ZW50XCIpO3JldHVybiBuLmluaXRDdXN0b21FdmVudChlLEJvb2xlYW4odC5idWJibGVzKSxCb29sZWFuKHQuY2FuY2VsYWJsZSksdC5kZXRhaWwpLG4ucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImRlZmF1bHRQcmV2ZW50ZWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuITB9fSl9LG59LHdpbmRvdy5DdXN0b21FdmVudC5wcm90b3R5cGU9d2luZG93LkV2ZW50LnByb3RvdHlwZSksbigpO3ZhciBvPWUucm9vdERvY3VtZW50O1wiY29tcGxldGVcIj09PWRvY3VtZW50LnJlYWR5U3RhdGV8fFwiaW50ZXJhY3RpdmVcIj09PWRvY3VtZW50LnJlYWR5U3RhdGUmJiF3aW5kb3cuYXR0YWNoRXZlbnQ/dCgpOmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsdCl9fSh3aW5kb3cuSFRNTEltcG9ydHMpLHdpbmRvdy5DdXN0b21FbGVtZW50cz13aW5kb3cuQ3VzdG9tRWxlbWVudHN8fHtmbGFnczp7fX0sZnVuY3Rpb24oZSl7dmFyIHQ9ZS5mbGFncyxuPVtdLHI9ZnVuY3Rpb24oZSl7bi5wdXNoKGUpfSxvPWZ1bmN0aW9uKCl7bi5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QoZSl9KX07ZS5hZGRNb2R1bGU9cixlLmluaXRpYWxpemVNb2R1bGVzPW8sZS5oYXNOYXRpdmU9Qm9vbGVhbihkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQpLGUuaXNJRT0vVHJpZGVudC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxlLnVzZU5hdGl2ZT0hdC5yZWdpc3RlciYmZS5oYXNOYXRpdmUmJiF3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwmJighd2luZG93LkhUTUxJbXBvcnRzfHx3aW5kb3cuSFRNTEltcG9ydHMudXNlTmF0aXZlKX0od2luZG93LkN1c3RvbUVsZW1lbnRzKSx3aW5kb3cuQ3VzdG9tRWxlbWVudHMuYWRkTW9kdWxlKGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXtuKGUsZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSk/ITA6dm9pZCByKGUsdCl9KSxyKGUsdCl9ZnVuY3Rpb24gbihlLHQscil7dmFyIG89ZS5maXJzdEVsZW1lbnRDaGlsZDtpZighbylmb3Iobz1lLmZpcnN0Q2hpbGQ7byYmby5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFOylvPW8ubmV4dFNpYmxpbmc7Zm9yKDtvOyl0KG8scikhPT0hMCYmbihvLHQsciksbz1vLm5leHRFbGVtZW50U2libGluZztyZXR1cm4gbnVsbH1mdW5jdGlvbiByKGUsbil7Zm9yKHZhciByPWUuc2hhZG93Um9vdDtyOyl0KHIsbikscj1yLm9sZGVyU2hhZG93Um9vdH1mdW5jdGlvbiBvKGUsdCl7aShlLHQsW10pfWZ1bmN0aW9uIGkoZSx0LG4pe2lmKGU9d2luZG93LndyYXAoZSksIShuLmluZGV4T2YoZSk+PTApKXtuLnB1c2goZSk7Zm9yKHZhciByLG89ZS5xdWVyeVNlbGVjdG9yQWxsKFwibGlua1tyZWw9XCIrYStcIl1cIikscz0wLGM9by5sZW5ndGg7Yz5zJiYocj1vW3NdKTtzKyspcltcImltcG9ydFwiXSYmaShyW1wiaW1wb3J0XCJdLHQsbik7dChlKX19dmFyIGE9d2luZG93LkhUTUxJbXBvcnRzP3dpbmRvdy5IVE1MSW1wb3J0cy5JTVBPUlRfTElOS19UWVBFOlwibm9uZVwiO2UuZm9yRG9jdW1lbnRUcmVlPW8sZS5mb3JTdWJ0cmVlPXR9KSx3aW5kb3cuQ3VzdG9tRWxlbWVudHMuYWRkTW9kdWxlKGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXtyZXR1cm4gbihlLHQpfHxyKGUsdCl9ZnVuY3Rpb24gbih0LG4pe3JldHVybiBlLnVwZ3JhZGUodCxuKT8hMDp2b2lkKG4mJmEodCkpfWZ1bmN0aW9uIHIoZSx0KXtiKGUsZnVuY3Rpb24oZSl7cmV0dXJuIG4oZSx0KT8hMDp2b2lkIDB9KX1mdW5jdGlvbiBvKGUpe1MucHVzaChlKSxffHwoXz0hMCxzZXRUaW1lb3V0KGkpKX1mdW5jdGlvbiBpKCl7Xz0hMTtmb3IodmFyIGUsdD1TLG49MCxyPXQubGVuZ3RoO3I+biYmKGU9dFtuXSk7bisrKWUoKTtTPVtdfWZ1bmN0aW9uIGEoZSl7RT9vKGZ1bmN0aW9uKCl7cyhlKX0pOnMoZSl9ZnVuY3Rpb24gcyhlKXtlLl9fdXBncmFkZWRfXyYmIWUuX19hdHRhY2hlZCYmKGUuX19hdHRhY2hlZD0hMCxlLmF0dGFjaGVkQ2FsbGJhY2smJmUuYXR0YWNoZWRDYWxsYmFjaygpKX1mdW5jdGlvbiBjKGUpe2woZSksYihlLGZ1bmN0aW9uKGUpe2woZSl9KX1mdW5jdGlvbiBsKGUpe0U/byhmdW5jdGlvbigpe3UoZSl9KTp1KGUpfWZ1bmN0aW9uIHUoZSl7ZS5fX3VwZ3JhZGVkX18mJmUuX19hdHRhY2hlZCYmKGUuX19hdHRhY2hlZD0hMSxlLmRldGFjaGVkQ2FsbGJhY2smJmUuZGV0YWNoZWRDYWxsYmFjaygpKX1mdW5jdGlvbiBkKGUpe2Zvcih2YXIgdD1lLG49d2luZG93LndyYXAoZG9jdW1lbnQpO3Q7KXtpZih0PT1uKXJldHVybiEwO3Q9dC5wYXJlbnROb2RlfHx0Lm5vZGVUeXBlPT09Tm9kZS5ET0NVTUVOVF9GUkFHTUVOVF9OT0RFJiZ0Lmhvc3R9fWZ1bmN0aW9uIHAoZSl7aWYoZS5zaGFkb3dSb290JiYhZS5zaGFkb3dSb290Ll9fd2F0Y2hlZCl7Zy5kb20mJmNvbnNvbGUubG9nKFwid2F0Y2hpbmcgc2hhZG93LXJvb3QgZm9yOiBcIixlLmxvY2FsTmFtZSk7Zm9yKHZhciB0PWUuc2hhZG93Um9vdDt0OyltKHQpLHQ9dC5vbGRlclNoYWRvd1Jvb3R9fWZ1bmN0aW9uIGgoZSxuKXtpZihnLmRvbSl7dmFyIHI9blswXTtpZihyJiZcImNoaWxkTGlzdFwiPT09ci50eXBlJiZyLmFkZGVkTm9kZXMmJnIuYWRkZWROb2Rlcyl7Zm9yKHZhciBvPXIuYWRkZWROb2Rlc1swXTtvJiZvIT09ZG9jdW1lbnQmJiFvLmhvc3Q7KW89by5wYXJlbnROb2RlO3ZhciBpPW8mJihvLlVSTHx8by5fVVJMfHxvLmhvc3QmJm8uaG9zdC5sb2NhbE5hbWUpfHxcIlwiO2k9aS5zcGxpdChcIi8/XCIpLnNoaWZ0KCkuc3BsaXQoXCIvXCIpLnBvcCgpfWNvbnNvbGUuZ3JvdXAoXCJtdXRhdGlvbnMgKCVkKSBbJXNdXCIsbi5sZW5ndGgsaXx8XCJcIil9dmFyIGE9ZChlKTtuLmZvckVhY2goZnVuY3Rpb24oZSl7XCJjaGlsZExpc3RcIj09PWUudHlwZSYmKFQoZS5hZGRlZE5vZGVzLGZ1bmN0aW9uKGUpe2UubG9jYWxOYW1lJiZ0KGUsYSl9KSxUKGUucmVtb3ZlZE5vZGVzLGZ1bmN0aW9uKGUpe2UubG9jYWxOYW1lJiZjKGUpfSkpfSksZy5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKX1mdW5jdGlvbiBmKGUpe2ZvcihlPXdpbmRvdy53cmFwKGUpLGV8fChlPXdpbmRvdy53cmFwKGRvY3VtZW50KSk7ZS5wYXJlbnROb2RlOyllPWUucGFyZW50Tm9kZTt2YXIgdD1lLl9fb2JzZXJ2ZXI7dCYmKGgoZSx0LnRha2VSZWNvcmRzKCkpLGkoKSl9ZnVuY3Rpb24gbShlKXtpZighZS5fX29ic2VydmVyKXt2YXIgdD1uZXcgTXV0YXRpb25PYnNlcnZlcihoLmJpbmQodGhpcyxlKSk7dC5vYnNlcnZlKGUse2NoaWxkTGlzdDohMCxzdWJ0cmVlOiEwfSksZS5fX29ic2VydmVyPXR9fWZ1bmN0aW9uIHcoZSl7ZT13aW5kb3cud3JhcChlKSxnLmRvbSYmY29uc29sZS5ncm91cChcInVwZ3JhZGVEb2N1bWVudDogXCIsZS5iYXNlVVJJLnNwbGl0KFwiL1wiKS5wb3AoKSk7dmFyIG49ZT09PXdpbmRvdy53cmFwKGRvY3VtZW50KTt0KGUsbiksbShlKSxnLmRvbSYmY29uc29sZS5ncm91cEVuZCgpfWZ1bmN0aW9uIHYoZSl7eShlLHcpfXZhciBnPWUuZmxhZ3MsYj1lLmZvclN1YnRyZWUseT1lLmZvckRvY3VtZW50VHJlZSxFPSF3aW5kb3cuTXV0YXRpb25PYnNlcnZlcnx8d2luZG93Lk11dGF0aW9uT2JzZXJ2ZXI9PT13aW5kb3cuSnNNdXRhdGlvbk9ic2VydmVyO2UuaGFzUG9seWZpbGxNdXRhdGlvbnM9RTt2YXIgXz0hMSxTPVtdLFQ9QXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbC5iaW5kKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoKSxNPUVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3Q7TSYmKEVsZW1lbnQucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3Q9ZnVuY3Rpb24oKXt2YXIgZT1NLmNhbGwodGhpcyk7cmV0dXJuIHdpbmRvdy5DdXN0b21FbGVtZW50cy53YXRjaFNoYWRvdyh0aGlzKSxlfSksZS53YXRjaFNoYWRvdz1wLGUudXBncmFkZURvY3VtZW50VHJlZT12LGUudXBncmFkZURvY3VtZW50PXcsZS51cGdyYWRlU3VidHJlZT1yLGUudXBncmFkZUFsbD10LGUuYXR0YWNoZWQ9YSxlLnRha2VSZWNvcmRzPWZ9KSx3aW5kb3cuQ3VzdG9tRWxlbWVudHMuYWRkTW9kdWxlKGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXtpZighdC5fX3VwZ3JhZGVkX18mJnQubm9kZVR5cGU9PT1Ob2RlLkVMRU1FTlRfTk9ERSl7dmFyIG89dC5nZXRBdHRyaWJ1dGUoXCJpc1wiKSxpPWUuZ2V0UmVnaXN0ZXJlZERlZmluaXRpb24odC5sb2NhbE5hbWUpfHxlLmdldFJlZ2lzdGVyZWREZWZpbml0aW9uKG8pO2lmKGkmJihvJiZpLnRhZz09dC5sb2NhbE5hbWV8fCFvJiYhaVtcImV4dGVuZHNcIl0pKXJldHVybiBuKHQsaSxyKX19ZnVuY3Rpb24gbih0LG4sbyl7cmV0dXJuIGEudXBncmFkZSYmY29uc29sZS5ncm91cChcInVwZ3JhZGU6XCIsdC5sb2NhbE5hbWUpLG4uaXMmJnQuc2V0QXR0cmlidXRlKFwiaXNcIixuLmlzKSxyKHQsbiksdC5fX3VwZ3JhZGVkX189ITAsaSh0KSxvJiZlLmF0dGFjaGVkKHQpLGUudXBncmFkZVN1YnRyZWUodCxvKSxhLnVwZ3JhZGUmJmNvbnNvbGUuZ3JvdXBFbmQoKSx0fWZ1bmN0aW9uIHIoZSx0KXtPYmplY3QuX19wcm90b19fP2UuX19wcm90b19fPXQucHJvdG90eXBlOihvKGUsdC5wcm90b3R5cGUsdFtcIm5hdGl2ZVwiXSksZS5fX3Byb3RvX189dC5wcm90b3R5cGUpfWZ1bmN0aW9uIG8oZSx0LG4pe2Zvcih2YXIgcj17fSxvPXQ7byE9PW4mJm8hPT1IVE1MRWxlbWVudC5wcm90b3R5cGU7KXtmb3IodmFyIGksYT1PYmplY3QuZ2V0T3duUHJvcGVydHlOYW1lcyhvKSxzPTA7aT1hW3NdO3MrKylyW2ldfHwoT2JqZWN0LmRlZmluZVByb3BlcnR5KGUsaSxPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG8saSkpLHJbaV09MSk7bz1PYmplY3QuZ2V0UHJvdG90eXBlT2Yobyl9fWZ1bmN0aW9uIGkoZSl7ZS5jcmVhdGVkQ2FsbGJhY2smJmUuY3JlYXRlZENhbGxiYWNrKCl9dmFyIGE9ZS5mbGFncztlLnVwZ3JhZGU9dCxlLnVwZ3JhZGVXaXRoRGVmaW5pdGlvbj1uLGUuaW1wbGVtZW50UHJvdG90eXBlPXJ9KSx3aW5kb3cuQ3VzdG9tRWxlbWVudHMuYWRkTW9kdWxlKGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQodCxyKXt2YXIgYz1yfHx7fTtpZighdCl0aHJvdyBuZXcgRXJyb3IoXCJkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQ6IGZpcnN0IGFyZ3VtZW50IGBuYW1lYCBtdXN0IG5vdCBiZSBlbXB0eVwiKTtpZih0LmluZGV4T2YoXCItXCIpPDApdGhyb3cgbmV3IEVycm9yKFwiZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50OiBmaXJzdCBhcmd1bWVudCAoJ25hbWUnKSBtdXN0IGNvbnRhaW4gYSBkYXNoICgnLScpLiBBcmd1bWVudCBwcm92aWRlZCB3YXMgJ1wiK1N0cmluZyh0KStcIicuXCIpO2lmKG8odCkpdGhyb3cgbmV3IEVycm9yKFwiRmFpbGVkIHRvIGV4ZWN1dGUgJ3JlZ2lzdGVyRWxlbWVudCcgb24gJ0RvY3VtZW50JzogUmVnaXN0cmF0aW9uIGZhaWxlZCBmb3IgdHlwZSAnXCIrU3RyaW5nKHQpK1wiJy4gVGhlIHR5cGUgbmFtZSBpcyBpbnZhbGlkLlwiKTtpZihsKHQpKXRocm93IG5ldyBFcnJvcihcIkR1cGxpY2F0ZURlZmluaXRpb25FcnJvcjogYSB0eXBlIHdpdGggbmFtZSAnXCIrU3RyaW5nKHQpK1wiJyBpcyBhbHJlYWR5IHJlZ2lzdGVyZWRcIik7cmV0dXJuIGMucHJvdG90eXBlfHwoYy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShIVE1MRWxlbWVudC5wcm90b3R5cGUpKSxjLl9fbmFtZT10LnRvTG93ZXJDYXNlKCksYy5saWZlY3ljbGU9Yy5saWZlY3ljbGV8fHt9LGMuYW5jZXN0cnk9aShjW1wiZXh0ZW5kc1wiXSksYShjKSxzKGMpLG4oYy5wcm90b3R5cGUpLHUoYy5fX25hbWUsYyksYy5jdG9yPWQoYyksYy5jdG9yLnByb3RvdHlwZT1jLnByb3RvdHlwZSxjLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1jLmN0b3IsZS5yZWFkeSYmdihkb2N1bWVudCksYy5jdG9yfWZ1bmN0aW9uIG4oZSl7aWYoIWUuc2V0QXR0cmlidXRlLl9wb2x5ZmlsbGVkKXt2YXIgdD1lLnNldEF0dHJpYnV0ZTtlLnNldEF0dHJpYnV0ZT1mdW5jdGlvbihlLG4pe3IuY2FsbCh0aGlzLGUsbix0KX07dmFyIG49ZS5yZW1vdmVBdHRyaWJ1dGU7ZS5yZW1vdmVBdHRyaWJ1dGU9ZnVuY3Rpb24oZSl7ci5jYWxsKHRoaXMsZSxudWxsLG4pfSxlLnNldEF0dHJpYnV0ZS5fcG9seWZpbGxlZD0hMH19ZnVuY3Rpb24gcihlLHQsbil7ZT1lLnRvTG93ZXJDYXNlKCk7dmFyIHI9dGhpcy5nZXRBdHRyaWJ1dGUoZSk7bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7dmFyIG89dGhpcy5nZXRBdHRyaWJ1dGUoZSk7dGhpcy5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2smJm8hPT1yJiZ0aGlzLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayhlLHIsbyl9ZnVuY3Rpb24gbyhlKXtmb3IodmFyIHQ9MDt0PF8ubGVuZ3RoO3QrKylpZihlPT09X1t0XSlyZXR1cm4hMH1mdW5jdGlvbiBpKGUpe3ZhciB0PWwoZSk7cmV0dXJuIHQ/aSh0W1wiZXh0ZW5kc1wiXSkuY29uY2F0KFt0XSk6W119ZnVuY3Rpb24gYShlKXtmb3IodmFyIHQsbj1lW1wiZXh0ZW5kc1wiXSxyPTA7dD1lLmFuY2VzdHJ5W3JdO3IrKyluPXQuaXMmJnQudGFnO2UudGFnPW58fGUuX19uYW1lLG4mJihlLmlzPWUuX19uYW1lKX1mdW5jdGlvbiBzKGUpe2lmKCFPYmplY3QuX19wcm90b19fKXt2YXIgdD1IVE1MRWxlbWVudC5wcm90b3R5cGU7aWYoZS5pcyl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChlLnRhZyk7dD1PYmplY3QuZ2V0UHJvdG90eXBlT2Yobil9Zm9yKHZhciByLG89ZS5wcm90b3R5cGUsaT0hMTtvOylvPT10JiYoaT0hMCkscj1PYmplY3QuZ2V0UHJvdG90eXBlT2YobyksciYmKG8uX19wcm90b19fPXIpLG89cjtpfHxjb25zb2xlLndhcm4oZS50YWcrXCIgcHJvdG90eXBlIG5vdCBmb3VuZCBpbiBwcm90b3R5cGUgY2hhaW4gZm9yIFwiK2UuaXMpLGVbXCJuYXRpdmVcIl09dH19ZnVuY3Rpb24gYyhlKXtyZXR1cm4gYihNKGUudGFnKSxlKX1mdW5jdGlvbiBsKGUpe3JldHVybiBlP1NbZS50b0xvd2VyQ2FzZSgpXTp2b2lkIDB9ZnVuY3Rpb24gdShlLHQpe1NbZV09dH1mdW5jdGlvbiBkKGUpe3JldHVybiBmdW5jdGlvbigpe3JldHVybiBjKGUpfX1mdW5jdGlvbiBwKGUsdCxuKXtyZXR1cm4gZT09PVQ/aCh0LG4pOk8oZSx0KX1mdW5jdGlvbiBoKGUsdCl7ZSYmKGU9ZS50b0xvd2VyQ2FzZSgpKSx0JiYodD10LnRvTG93ZXJDYXNlKCkpO3ZhciBuPWwodHx8ZSk7aWYobil7aWYoZT09bi50YWcmJnQ9PW4uaXMpcmV0dXJuIG5ldyBuLmN0b3I7aWYoIXQmJiFuLmlzKXJldHVybiBuZXcgbi5jdG9yfXZhciByO3JldHVybiB0PyhyPWgoZSksci5zZXRBdHRyaWJ1dGUoXCJpc1wiLHQpLHIpOihyPU0oZSksZS5pbmRleE9mKFwiLVwiKT49MCYmeShyLEhUTUxFbGVtZW50KSxyKX1mdW5jdGlvbiBmKGUsdCl7dmFyIG49ZVt0XTtlW3RdPWZ1bmN0aW9uKCl7dmFyIGU9bi5hcHBseSh0aGlzLGFyZ3VtZW50cyk7cmV0dXJuIGcoZSksZX19dmFyIG0sdz1lLmlzSUUsdj1lLnVwZ3JhZGVEb2N1bWVudFRyZWUsZz1lLnVwZ3JhZGVBbGwsYj1lLnVwZ3JhZGVXaXRoRGVmaW5pdGlvbix5PWUuaW1wbGVtZW50UHJvdG90eXBlLEU9ZS51c2VOYXRpdmUsXz1bXCJhbm5vdGF0aW9uLXhtbFwiLFwiY29sb3ItcHJvZmlsZVwiLFwiZm9udC1mYWNlXCIsXCJmb250LWZhY2Utc3JjXCIsXCJmb250LWZhY2UtdXJpXCIsXCJmb250LWZhY2UtZm9ybWF0XCIsXCJmb250LWZhY2UtbmFtZVwiLFwibWlzc2luZy1nbHlwaFwiXSxTPXt9LFQ9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIsTT1kb2N1bWVudC5jcmVhdGVFbGVtZW50LmJpbmQoZG9jdW1lbnQpLE89ZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TLmJpbmQoZG9jdW1lbnQpO209T2JqZWN0Ll9fcHJvdG9fX3x8RT9mdW5jdGlvbihlLHQpe3JldHVybiBlIGluc3RhbmNlb2YgdH06ZnVuY3Rpb24oZSx0KXtpZihlIGluc3RhbmNlb2YgdClyZXR1cm4hMDtmb3IodmFyIG49ZTtuOyl7aWYobj09PXQucHJvdG90eXBlKXJldHVybiEwO249bi5fX3Byb3RvX199cmV0dXJuITF9LGYoTm9kZS5wcm90b3R5cGUsXCJjbG9uZU5vZGVcIiksZihkb2N1bWVudCxcImltcG9ydE5vZGVcIiksdyYmIWZ1bmN0aW9uKCl7dmFyIGU9ZG9jdW1lbnQuaW1wb3J0Tm9kZTtkb2N1bWVudC5pbXBvcnROb2RlPWZ1bmN0aW9uKCl7dmFyIHQ9ZS5hcHBseShkb2N1bWVudCxhcmd1bWVudHMpO2lmKHQubm9kZVR5cGU9PXQuRE9DVU1FTlRfRlJBR01FTlRfTk9ERSl7dmFyIG49ZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO3JldHVybiBuLmFwcGVuZENoaWxkKHQpLG59cmV0dXJuIHR9fSgpLGRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudD10LGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQ9aCxkb2N1bWVudC5jcmVhdGVFbGVtZW50TlM9cCxlLnJlZ2lzdHJ5PVMsZVtcImluc3RhbmNlb2ZcIl09bSxlLnJlc2VydmVkVGFnTGlzdD1fLGUuZ2V0UmVnaXN0ZXJlZERlZmluaXRpb249bCxkb2N1bWVudC5yZWdpc3Rlcj1kb2N1bWVudC5yZWdpc3RlckVsZW1lbnR9KSxmdW5jdGlvbihlKXtmdW5jdGlvbiB0KCl7YSh3aW5kb3cud3JhcChkb2N1bWVudCkpLHdpbmRvdy5DdXN0b21FbGVtZW50cy5yZWFkeT0hMDt2YXIgZT13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihlKXtzZXRUaW1lb3V0KGUsMTYpfTtlKGZ1bmN0aW9uKCl7c2V0VGltZW91dChmdW5jdGlvbigpe3dpbmRvdy5DdXN0b21FbGVtZW50cy5yZWFkeVRpbWU9RGF0ZS5ub3coKSx3aW5kb3cuSFRNTEltcG9ydHMmJih3aW5kb3cuQ3VzdG9tRWxlbWVudHMuZWxhcHNlZD13aW5kb3cuQ3VzdG9tRWxlbWVudHMucmVhZHlUaW1lLXdpbmRvdy5IVE1MSW1wb3J0cy5yZWFkeVRpbWUpLGRvY3VtZW50LmRpc3BhdGNoRXZlbnQobmV3IEN1c3RvbUV2ZW50KFwiV2ViQ29tcG9uZW50c1JlYWR5XCIse2J1YmJsZXM6ITB9KSl9KX0pfXZhciBuPWUudXNlTmF0aXZlLHI9ZS5pbml0aWFsaXplTW9kdWxlcyxvPWUuaXNJRTtpZihuKXt2YXIgaT1mdW5jdGlvbigpe307ZS53YXRjaFNoYWRvdz1pLGUudXBncmFkZT1pLGUudXBncmFkZUFsbD1pLGUudXBncmFkZURvY3VtZW50VHJlZT1pLGUudXBncmFkZVN1YnRyZWU9aSxlLnRha2VSZWNvcmRzPWksZVtcImluc3RhbmNlb2ZcIl09ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSBpbnN0YW5jZW9mIHR9fWVsc2UgcigpO3ZhciBhPWUudXBncmFkZURvY3VtZW50VHJlZSxzPWUudXBncmFkZURvY3VtZW50O2lmKHdpbmRvdy53cmFwfHwod2luZG93LlNoYWRvd0RPTVBvbHlmaWxsPyh3aW5kb3cud3JhcD13aW5kb3cuU2hhZG93RE9NUG9seWZpbGwud3JhcElmTmVlZGVkLHdpbmRvdy51bndyYXA9d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLnVud3JhcElmTmVlZGVkKTp3aW5kb3cud3JhcD13aW5kb3cudW53cmFwPWZ1bmN0aW9uKGUpe3JldHVybiBlfSksd2luZG93LkhUTUxJbXBvcnRzJiYod2luZG93LkhUTUxJbXBvcnRzLl9faW1wb3J0c1BhcnNpbmdIb29rPWZ1bmN0aW9uKGUpe2VbXCJpbXBvcnRcIl0mJnMod3JhcChlW1wiaW1wb3J0XCJdKSl9KSxvJiZcImZ1bmN0aW9uXCIhPXR5cGVvZiB3aW5kb3cuQ3VzdG9tRXZlbnQmJih3aW5kb3cuQ3VzdG9tRXZlbnQ9ZnVuY3Rpb24oZSx0KXt0PXR8fHt9O3ZhciBuPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiQ3VzdG9tRXZlbnRcIik7cmV0dXJuIG4uaW5pdEN1c3RvbUV2ZW50KGUsQm9vbGVhbih0LmJ1YmJsZXMpLEJvb2xlYW4odC5jYW5jZWxhYmxlKSx0LmRldGFpbCksbi5wcmV2ZW50RGVmYXVsdD1mdW5jdGlvbigpe09iamVjdC5kZWZpbmVQcm9wZXJ0eSh0aGlzLFwiZGVmYXVsdFByZXZlbnRlZFwiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4hMH19KX0sbn0sd2luZG93LkN1c3RvbUV2ZW50LnByb3RvdHlwZT13aW5kb3cuRXZlbnQucHJvdG90eXBlKSxcImNvbXBsZXRlXCI9PT1kb2N1bWVudC5yZWFkeVN0YXRlfHxlLmZsYWdzLmVhZ2VyKXQoKTtlbHNlIGlmKFwiaW50ZXJhY3RpdmVcIiE9PWRvY3VtZW50LnJlYWR5U3RhdGV8fHdpbmRvdy5hdHRhY2hFdmVudHx8d2luZG93LkhUTUxJbXBvcnRzJiYhd2luZG93LkhUTUxJbXBvcnRzLnJlYWR5KXt2YXIgYz13aW5kb3cuSFRNTEltcG9ydHMmJiF3aW5kb3cuSFRNTEltcG9ydHMucmVhZHk/XCJIVE1MSW1wb3J0c0xvYWRlZFwiOlwiRE9NQ29udGVudExvYWRlZFwiO3dpbmRvdy5hZGRFdmVudExpc3RlbmVyKGMsdCl9ZWxzZSB0KCl9KHdpbmRvdy5DdXN0b21FbGVtZW50cyksZnVuY3Rpb24oZSl7RnVuY3Rpb24ucHJvdG90eXBlLmJpbmR8fChGdW5jdGlvbi5wcm90b3R5cGUuYmluZD1mdW5jdGlvbihlKXt2YXIgdD10aGlzLG49QXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzLDEpO3JldHVybiBmdW5jdGlvbigpe3ZhciByPW4uc2xpY2UoKTtyZXR1cm4gci5wdXNoLmFwcGx5KHIsYXJndW1lbnRzKSx0LmFwcGx5KGUscil9fSl9KHdpbmRvdy5XZWJDb21wb25lbnRzKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtpZighd2luZG93LnBlcmZvcm1hbmNlKXt2YXIgdD1EYXRlLm5vdygpO3dpbmRvdy5wZXJmb3JtYW5jZT17bm93OmZ1bmN0aW9uKCl7cmV0dXJuIERhdGUubm93KCktdH19fXdpbmRvdy5yZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fCh3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKCl7dmFyIGU9d2luZG93LndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZXx8d2luZG93Lm1velJlcXVlc3RBbmltYXRpb25GcmFtZTtyZXR1cm4gZT9mdW5jdGlvbih0KXtyZXR1cm4gZShmdW5jdGlvbigpe3QocGVyZm9ybWFuY2Uubm93KCkpfSl9OmZ1bmN0aW9uKGUpe3JldHVybiB3aW5kb3cuc2V0VGltZW91dChlLDFlMy82MCl9fSgpKSx3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWV8fCh3aW5kb3cuY2FuY2VsQW5pbWF0aW9uRnJhbWU9ZnVuY3Rpb24oKXtyZXR1cm4gd2luZG93LndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lfHx3aW5kb3cubW96Q2FuY2VsQW5pbWF0aW9uRnJhbWV8fGZ1bmN0aW9uKGUpe2NsZWFyVGltZW91dChlKX19KCkpfSh3aW5kb3cuV2ViQ29tcG9uZW50cyksZnVuY3Rpb24oZSl7dmFyIHQ9ZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInN0eWxlXCIpO3QudGV4dENvbnRlbnQ9XCJib2R5IHt0cmFuc2l0aW9uOiBvcGFjaXR5IGVhc2UtaW4gMC4yczsgfSBcXG5ib2R5W3VucmVzb2x2ZWRdIHtvcGFjaXR5OiAwOyBkaXNwbGF5OiBibG9jazsgb3ZlcmZsb3c6IGhpZGRlbjsgcG9zaXRpb246IHJlbGF0aXZlOyB9IFxcblwiO3ZhciBuPWRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJoZWFkXCIpO24uaW5zZXJ0QmVmb3JlKHQsbi5maXJzdENoaWxkKX0od2luZG93LldlYkNvbXBvbmVudHMpLGZ1bmN0aW9uKGUpe3dpbmRvdy5QbGF0Zm9ybT1lfSh3aW5kb3cuV2ViQ29tcG9uZW50cyk7IiwidmFyIFBFTkRJTkcgICA9IHt9LFxuICAgIFJFU09MVkVEICA9IHt9LFxuICAgIFJFSkVDVEVEICA9IHt9LFxuICAgIEZVTEZJTExFRCA9IHt9O1xuXG52YXIgVm93ID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIHZvdyA9IHt9O1xuICAgIHZhciBfcHJvbWlzZSA9IFByb21pc2VPYmooKTtcblxuICAgIHZvdy5yZXNvbHZlID0gX3Byb21pc2UucmVzb2x2ZTtcbiAgICB2b3cucmVqZWN0ICA9IF9wcm9taXNlLnJlamVjdDtcbiAgICB2b3cucHJvbWlzZSA9IHtcbiAgICAgICAgdGhlbjogX3Byb21pc2UudGhlbixcbiAgICAgICAgY2F0Y2g6IF9wcm9taXNlLmNhdGNoLFxuICAgICAgICBkb25lOiBfcHJvbWlzZS5kb25lXG4gICAgfTtcblxuICAgIHJldHVybiB2b3c7XG5cbiAgICBmdW5jdGlvbiBQcm9taXNlT2JqKCkge1xuICAgICAgICB2YXIgc3RhdGUgPSBQRU5ESU5HO1xuICAgICAgICB2YXIgdmFsdWUsIG9uUmVzb2x2ZWQsIG9uUmVqZWN0ZWQsIG9uRnVsbGZpbGxlZCwgcmV0dXJuUHJvbWlzZTtcblxuICAgICAgICB2YXIgcmV0ID0ge1xuXG4gICAgICAgICAgICByZXNvbHZlOiBmdW5jdGlvbiAodmFsKSB7XG4gICAgICAgICAgICAgICAgdmFsdWUgPSB2YWw7XG4gICAgICAgICAgICAgICAgc3RhdGUgPSBSRVNPTFZFRDtcblxuICAgICAgICAgICAgICAgIGlmIChvblJlc29sdmVkKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZVJlc29sdmUob25SZXNvbHZlZCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvbkZ1bGxmaWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlRG9uZShvbkZ1bGxmaWxsZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHJlamVjdDogZnVuY3Rpb24gKGVycikge1xuICAgICAgICAgICAgICAgIHZhbHVlID0gZXJyO1xuICAgICAgICAgICAgICAgIHN0YXRlID0gUkVKRUNURUQ7XG5cbiAgICAgICAgICAgICAgICBpZiAob25SZWplY3RlZCkge1xuICAgICAgICAgICAgICAgICAgICBoYW5kbGVSZWplY3Qob25SZWplY3RlZCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvbkZ1bGxmaWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlRG9uZShvbkZ1bGxmaWxsZWQpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgIHRoZW46IGZ1bmN0aW9uIChzdWNjZXNzQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICByZXR1cm5Qcm9taXNlID0gUHJvbWlzZU9iaigpO1xuICAgICAgICAgICAgICAgIGhhbmRsZVJlc29sdmUoc3VjY2Vzc0NhbGxiYWNrKTtcblxuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIHRoZW46IHJldHVyblByb21pc2UudGhlbixcbiAgICAgICAgICAgICAgICAgICAgY2F0Y2g6IHJldHVyblByb21pc2UuY2F0Y2gsXG4gICAgICAgICAgICAgICAgICAgIGRvbmU6IHJldHVyblByb21pc2UuZG9uZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICBjYXRjaDogZnVuY3Rpb24gKGZhaWxDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIHJldHVyblByb21pc2UgPSBQcm9taXNlT2JqKCk7XG4gICAgICAgICAgICAgICAgaGFuZGxlUmVqZWN0KGZhaWxDYWxsYmFjayk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICB0aGVuOiByZXR1cm5Qcm9taXNlLnRoZW4sXG4gICAgICAgICAgICAgICAgICAgIGNhdGNoOiByZXR1cm5Qcm9taXNlLmNhdGNoLFxuICAgICAgICAgICAgICAgICAgICBkb25lOiByZXR1cm5Qcm9taXNlLmRvbmVcbiAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgZG9uZTogZnVuY3Rpb24gKGZpbmFsbHlDYWxsYmFjaykge1xuICAgICAgICAgICAgICAgIGhhbmRsZURvbmUoZmluYWxseUNhbGxiYWNrKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4gcmV0O1xuXG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZURvbmUoZm4pIHtcbiAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gUEVORElORykge1xuICAgICAgICAgICAgICAgIG9uRnVsbGZpbGxlZCA9IGZuIHx8ICdkb25lJztcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gUkVTT0xWRUQgJiYgdHlwZW9mIGZuID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICAgICAgc3RhdGUgPSBGVUxGSUxMRUQ7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZuLmNhbGwodGhpcywgdmFsdWUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc3RhdGUgPT09IFJFSkVDVEVEKSB7XG4gICAgICAgICAgICAgICAgc3RhdGUgPSBGVUxGSUxMRUQ7XG4gICAgICAgICAgICAgICAgdGhyb3cgdmFsdWU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVSZXNvbHZlKGZuKSB7XG4gICAgICAgICAgICB2YXIgZXJyb3I7XG4gICAgICAgICAgICBpZiAoc3RhdGUgPT09IFBFTkRJTkcpIHtcbiAgICAgICAgICAgICAgICBvblJlc29sdmVkID0gZm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gUkVTT0xWRUQpIHtcbiAgICAgICAgICAgICAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlLnRoZW4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUudGhlbihyZXQucmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGZuLmNhbGwodGhpcywgdmFsdWUpO1xuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGVycjtcbiAgICAgICAgICAgICAgICAgICAgZXJyb3IgPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChyZXR1cm5Qcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZXJyb3IpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblByb21pc2UucmVzb2x2ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuUHJvbWlzZS5yZWplY3QodmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZVJlamVjdChmbikge1xuICAgICAgICAgICAgdmFyIGVycm9yO1xuICAgICAgICAgICAgaWYgKHN0YXRlID09PSBQRU5ESU5HKSB7XG4gICAgICAgICAgICAgICAgb25SZWplY3RlZCA9IGZuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZiAoc3RhdGUgPT09IFJFSkVDVEVEKSB7XG4gICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBmbi5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBlcnI7XG4gICAgICAgICAgICAgICAgICAgIGVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAocmV0dXJuUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5Qcm9taXNlLnJlc29sdmUodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblByb21pc2UucmVqZWN0KHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gUkVTT0xWRUQpIHtcbiAgICAgICAgICAgICAgICBpZiAocmV0dXJuUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm5Qcm9taXNlLnJlc29sdmUodmFsdWUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG4iLCJ2YXIgRXZlbnRCdXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgZXZlbnRzID0ge307XG4gICAgdGhpcy5yZWdpc3RlciA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgICAgIHJldHVybiAoZnVuY3Rpb24oY29udGV4dCkge1xuICAgICAgICAgICAgdmFyIGV2dCA9IHt9O1xuICAgICAgICAgICAgZXZ0LnN1YnNjcmliZSA9IGZ1bmN0aW9uKGV2ZW50LCBmdW5jKSB7XG4gICAgICAgICAgICAgICAgY29udGV4dC5fc3Vic2NyaWJlKGV2ZW50LCBmdW5jLCBpZCwgZXZlbnRzKTtcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBldnQucHVibGlzaCA9IGZ1bmN0aW9uKGV2ZW50LCBjdHgsIGFyZ3MpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0Ll9wdWJsaXNoKGV2ZW50LCBjdHgsIGFyZ3MsIGV2ZW50cyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZXZ0LnVuc3Vic2NyaWJlID0gZnVuY3Rpb24oZXZlbnQsIGZ1bmMpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0Ll91bnN1YnNjcmliZShldmVudCwgZnVuYywgaWQsIGV2ZW50cyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgZXZ0LnVuc3Vic2NyaWJlQWxsID0gZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBjb250ZXh0Ll91bnN1YnNjcmliZUFsbChldmVudCwgaWQsIGV2ZW50cyk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgcmV0dXJuIGV2dDtcbiAgICAgICAgfSkodGhpcyk7XG4gICAgfTtcbn07XG5cbkV2ZW50QnVzLnByb3RvdHlwZS5fc3Vic2NyaWJlID0gZnVuY3Rpb24oZXZlbnQsIGZ1bmMsIGlkLCBldmVudHMpIHtcbiAgICBpZiAoIWV2ZW50c1tldmVudF0pIHtcbiAgICAgICAgZXZlbnRzW2V2ZW50XSA9IHt9O1xuICAgIH1cblxuICAgIGlmICghZXZlbnRzW2V2ZW50XVtpZF0pIHtcbiAgICAgICAgZXZlbnRzW2V2ZW50XVtpZF0gPSBbXTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIGZ1bmMgIT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdBIGNhbGxiYWNrIGZ1bmN0aW9uIG11c3QgYmUgcGFzc2VkIGluIHRvIHN1YnNjcmliZScpO1xuICAgIH1cbiAgICBcbiAgICBldmVudHNbZXZlbnRdW2lkXS5wdXNoKGZ1bmMpO1xufTtcblxuRXZlbnRCdXMucHJvdG90eXBlLl9wdWJsaXNoID0gZnVuY3Rpb24oZXZlbnQsIGN0eCwgYXJncywgZXZlbnRzKSB7XG4gICAgY3R4ID0gY3R4IHx8IG51bGw7XG4gICAgYXJncyA9IGFyZ3MgfHwgbnVsbDtcblxuICAgIHZhciBldmVudEJ1Y2tldCA9IGV2ZW50c1tldmVudF07XG5cbiAgICBpZiAoZXZlbnRCdWNrZXQpIHtcbiAgICAgICAgZm9yICh2YXIgYnVja2V0IGluIGV2ZW50QnVja2V0KSB7XG4gICAgICAgICAgICB2YXIgY2JRdWV1ZSA9IGV2ZW50QnVja2V0W2J1Y2tldF07XG4gICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjYlF1ZXVlKSkge1xuICAgICAgICAgICAgICAgIGNiUXVldWUuZm9yRWFjaChtYWtlRWFjaEhhbmRsZXIuY2FsbCh0aGlzLCBjdHgsIGFyZ3MpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIG1ha2VFYWNoSGFuZGxlcihjdHgsIGFyZ3MpIHtcbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKGNiKSB7XG4gICAgICAgICAgICBjYi5jYWxsKHRoaXMsIGN0eCwgYXJncyk7XG4gICAgICAgIH07XG4gICAgfVxufTtcblxuRXZlbnRCdXMucHJvdG90eXBlLl91bnN1YnNjcmliZSA9IGZ1bmN0aW9uKGV2ZW50LCBmdW5jLCBpZCwgZXZlbnRzKSB7XG4gICAgdmFyIGJ1Y2tldCA9IGV2ZW50c1tldmVudF07XG5cbiAgICBpZiAoYnVja2V0KSB7XG4gICAgICAgIHZhciBxdWV1ZSA9IGJ1Y2tldFtpZF07XG5cbiAgICAgICAgcXVldWUuZm9yRWFjaChmdW5jdGlvbihmbiwgaSkge1xuICAgICAgICAgICAgaWYoZm4gPT09IGZ1bmMpIHtcbiAgICAgICAgICAgICAgICBxdWV1ZS5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LmJpbmQodGhpcykpO1xuICAgIH1cbn07XG5cbkV2ZW50QnVzLnByb3RvdHlwZS5fdW5zdWJzY3JpYmVBbGwgPSBmdW5jdGlvbihldmVudCwgaWQsIGV2ZW50cykge1xuICAgIGlmIChldmVudCkge1xuICAgICAgICB1bnN1YnNyaWJlT25lKGV2ZW50KTtcbiAgICAgICAgcmV0dXJuO1xuICAgIH0gXG5cbiAgICBmb3IgKHZhciBldnQgaW4gZXZlbnRzKSB7XG4gICAgICAgIHVuc3Vic3JpYmVPbmUoZXZ0KTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1bnN1YnNyaWJlT25lKGV2ZW50KSB7XG4gICAgICAgIHZhciBidWNrZXQgPSBldmVudHNbZXZlbnRdO1xuXG4gICAgICAgIGlmIChidWNrZXQgJiYgYnVja2V0W2lkXSkge1xuICAgICAgICAgICAgZGVsZXRlIGJ1Y2tldFtpZF07XG4gICAgICAgIH1cbiAgICB9XG59O1xuIiwidmFyIEZhY3RvcnkgPSB7fTtcbnZhciBmYWN0b3J5SWRHZW5lcmF0b3IgPSBpZEdlbmVyYXRvcignZmFjdG9yeScpO1xuXG5GYWN0b3J5Ll9jb25zdHJ1Y3RvciA9IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICB0aGlzLl9pbml0aWFsaXplKG9wdHMpO1xufTtcblxuRmFjdG9yeS5fY29uc3RydWN0b3IucHJvdG90eXBlLl9pbml0aWFsaXplID0gZnVuY3Rpb24ob3B0cykge1xuICAgIHZhciBhdHRyaWJ1dGVzID0ge307XG5cbiAgICBvcHRzID0gb3B0cyB8fCB7fTtcblxuICAgIHRoaXMudXVpZCA9IGZhY3RvcnlJZEdlbmVyYXRvcigpO1xuICAgIHRoaXMucmVzb3VyY2VzID0ge307XG4gICAgdGhpcy5ldmVudEJ1cyA9IG9wdHMuZXZlbnRCdXMgfHwgbmV3IEV2ZW50QnVzKCk7XG4gICAgdGhpcy5ldmVudEJ1cyA9IHRoaXMuZXZlbnRCdXMucmVnaXN0ZXIodGhpcy51dWlkKTtcblxuICAgIHRoaXMuc2V0ID0gZnVuY3Rpb24oa2V5LCB2YWwpIHtcbiAgICAgICAgdGhpcy5fc2V0KGtleSwgdmFsLCBhdHRyaWJ1dGVzKTtcbiAgICB9O1xuXG4gICAgdGhpcy51bnNldCA9IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICB0aGlzLl91bnNldChrZXksIGF0dHJpYnV0ZXMpO1xuICAgIH07XG5cbiAgICB0aGlzLmdldCA9IGZ1bmN0aW9uKGtleSkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZ2V0KGtleSwgYXR0cmlidXRlcyk7XG4gICAgfTtcblxuICAgIHRoaXMuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoYXR0cmlidXRlcykpO1xuICAgIH07XG5cbiAgICBpZiAodHlwZW9mIHRoaXMuaW5pdGlhbGl6ZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aGlzLmluaXRpYWxpemUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICB9XG5cbiAgICB0aGlzLnNldChkZWZhdWx0cyhvcHRzLCB0aGlzLmRlZmF1bHRzKSk7XG4gICAgdGhpcy5ldmVudEJ1cy5wdWJsaXNoKCdpbml0aWFsaXplJywgdGhpcywgb3B0cyk7XG59O1xuXG5GYWN0b3J5Ll9jb25zdHJ1Y3Rvci5wcm90b3R5cGUuX3NldCA9IGZ1bmN0aW9uKGtleSwgdmFsLCBhdHRyaWJ1dGVzKSB7XG4gICAgaWYgKHR5cGVvZiBrZXkgPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KGtleSkpIHtcbiAgICAgICAgZm9yICh2YXIgayBpbiBrZXkpIHtcbiAgICAgICAgICAgIHRoaXMuX3NldChrLCBrZXlba10sIGF0dHJpYnV0ZXMpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIGF0dHJpYnV0ZXNba2V5XSA9IHZhbDtcbiAgICAgICAgdmFyIHJldCA9IHt9O1xuICAgICAgICByZXRba2V5XSA9IHZhbDtcbiAgICAgICAgdGhpcy5ldmVudEJ1cy5wdWJsaXNoKCdjaGFuZ2UnLCB0aGlzLCByZXQpO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLnB1Ymxpc2goJ2NoYW5nZTonICsga2V5LCB0aGlzLCB2YWwpO1xuICAgIH1cbn07XG5cbkZhY3RvcnkuX2NvbnN0cnVjdG9yLnByb3RvdHlwZS5fZ2V0ID0gZnVuY3Rpb24oa2V5LCBhdHRyaWJ1dGVzKSB7XG4gICAgaWYgKHR5cGVvZiBrZXkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHJldHVybiBhdHRyaWJ1dGVzW2tleV07XG4gICAgfSAgZWxzZSBpZiAodHlwZW9mIGtleSA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZXM7XG4gICAgfVxufTtcblxuRmFjdG9yeS5fY29uc3RydWN0b3IucHJvdG90eXBlLl91bnNldCA9IGZ1bmN0aW9uKGtleSwgYXR0cmlidXRlcykge1xuICAgIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJykge1xuICAgICAgICB2YXIgcmV0ID0ge307XG4gICAgICAgIHJldFtrZXldID0gYXR0cmlidXRlc1trZXldO1xuICAgICAgICBkZWxldGUgYXR0cmlidXRlc1trZXldO1xuICAgICAgICB0aGlzLmV2ZW50QnVzLnB1Ymxpc2goJ2RlbGV0ZScsIHRoaXMsIHJldCk7XG4gICAgICAgIHRoaXMuZXZlbnRCdXMucHVibGlzaCgnZGVsZXRlOicgKyBrZXksIHRoaXMsIHJldFtrZXldKTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBrZXkgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAgIGZvciAodmFyIGsgaW4gYXR0cmlidXRlcykge1xuICAgICAgICAgICAgdGhpcy5fdW5zZXQoaywgYXR0cmlidXRlcyk7XG4gICAgICAgIH1cbiAgICB9XG59O1xuXG5GYWN0b3J5Ll9jb25zdHJ1Y3Rvci5wcm90b3R5cGUuc3luYyA9IGZ1bmN0aW9uKHJlc291cmNlLCBpZCkge1xuICAgIHRoaXMucmVzb3VyY2VzW3Jlc291cmNlXSA9IHJlc291cmNlO1xuXG4gICAgcmVzb3VyY2UuZXZlbnRCdXMuc3Vic2NyaWJlKCdjaGFuZ2U6JyArIGlkLCBmdW5jdGlvbihjdHgsIGF0dHJzKSB7XG4gICAgICAgIGZvciAodmFyIGsgaW4gYXR0cnMpIHtcbiAgICAgICAgICAgIHRoaXMuc2V0KGssIGF0dHJzW2tdKTtcbiAgICAgICAgfVxuICAgIH0uYmluZCh0aGlzKSk7XG5cbiAgICByZXNvdXJjZS5ldmVudEJ1cy5zdWJzY3JpYmUoJ2RlbGV0ZTonICsgaWQsIGZ1bmN0aW9uKGN0eCwgYXR0cnMpIHtcbiAgICAgICAgdGhpcy51bnNldCgpO1xuICAgIH0uYmluZCh0aGlzKSk7XG59O1xuXG5GYWN0b3J5LmV4dGVuZCA9IGV4dGVuZDtcbiIsInZhciBzZXJ2aWNlSWRHZW5lcmF0b3IgPSBpZEdlbmVyYXRvcignc2VydmljZScpO1xuXG52YXIgU2VydmljZSA9IHt9O1xuXG5TZXJ2aWNlLl9jb25zdHJ1Y3RvciA9IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICB0aGlzLl9pbml0aWFsaXplKG9wdHMpO1xufTtcblxuU2VydmljZS5fY29uc3RydWN0b3IucHJvdG90eXBlLl9pbml0aWFsaXplID0gZnVuY3Rpb24ob3B0cykge1xuICAgIHRoaXMudXVpZCA9IHNlcnZpY2VJZEdlbmVyYXRvcigpO1xuXG4gICAgaWYgKHR5cGVvZiB0aGlzLmluaXRpYWxpemUgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgdGhpcy5pbml0aWFsaXplLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgfVxufTtcblxuU2VydmljZS5fY29uc3RydWN0b3IucHJvdG90eXBlLnN1YnNjcmliZUFsbCA9IGZ1bmN0aW9uKHRhcmdldCwgZXZlbnRzKSB7XG4gICAgZm9yICh2YXIgZXZ0IGluIGV2ZW50cykge1xuICAgICAgICB2YXIgaGFuZGxlciA9IGV2ZW50c1tldnRdO1xuICAgICAgICB2YXIgZm4gPSB0aGlzW2hhbmRsZXJdID0gdGhpc1toYW5kbGVyXS5iaW5kKHRoaXMpO1xuICAgICAgICB0YXJnZXQuZXZlbnRCdXMuc3Vic2NyaWJlKGV2dCwgZm4pO1xuICAgIH1cbn07XG5cblNlcnZpY2UuZXh0ZW5kID0gZXh0ZW5kO1xuIiwidmFyIGNvbXBvbmVudElkR2VuZXJhdG9yID0gaWRHZW5lcmF0b3IoJ2NvbXBvbmVudCcpO1xudmFyIGNvbXBvbmVudHNTdG9yZSA9IHt9O1xudmFyIENvbXBvbmVudCA9IHt9O1xuXG5Db21wb25lbnQucmVnaXN0ZXIgPSBmdW5jdGlvbihvcHRzKSB7XG4gICAgaWYgKGNvbXBvbmVudHNTdG9yZVtvcHRzLnRhZ05hbWVdKSB7XG4gICAgICAgIHJldHVybiBjb21wb25lbnRzU3RvcmVbb3B0cy50YWdOYW1lXTtcbiAgICB9XG5cbiAgICB2YXIgcGFyYW0gPSB7fTtcblxuICAgIC8vIFNldCBQcm90b3R5cGUgb2YgY3VzdG9tIGVsZW1lbnRcbiAgICB2YXIgcHJvdG8gPSBPYmplY3QuY3JlYXRlKEhUTUxFbGVtZW50LnByb3RvdHlwZSk7XG5cbiAgICBfZXh0ZW5kUHJvdG90eXBlLmNhbGwocHJvdG8sIG9wdHMpO1xuXG4gICAgcHJvdG8uY3JlYXRlZENhbGxiYWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBzaGFkb3cgPSB0aGlzLmNyZWF0ZVNoYWRvd1Jvb3QoKTtcbiAgICAgICAgc2hhZG93LmFwcGVuZENoaWxkKG9wdHMuZnJhZ21lbnQuY2xvbmVOb2RlKHRydWUpKTtcblxuICAgICAgICB0aGlzLnV1aWQgPSBjb21wb25lbnRJZEdlbmVyYXRvcigpO1xuXG4gICAgICAgIGlmIChvcHRzLnN0eWxlKSB7XG4gICAgICAgICAgICBzaGFkb3cuYXBwZW5kQ2hpbGQob3B0cy5zdHlsZS5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgICAgICB9XG4gICAgICAgIGlmIChvcHRzLm9uQ3JlYXRlKSB7XG4gICAgICAgICAgICBvcHRzLm9uQ3JlYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcHJvdG8uYXR0YWNoZWRDYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAob3B0cy5vbkF0dGFjaCkge1xuICAgICAgICAgICAgb3B0cy5vbkF0dGFjaC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgICAgIF9hZGRFdmVudExpc3RlbmVycy5jYWxsKHRoaXMsIG9wdHMuZXZlbnRzKTtcbiAgICB9O1xuXG4gICAgcHJvdG8uZGV0YWNoZWRDYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAob3B0cy5vbkRldGFjaCkge1xuICAgICAgICAgICAgb3B0cy5vbkRldGFjaC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHByb3RvLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayA9IGZ1bmN0aW9uKGF0dHJOYW1lLCBvbGRWYWwsIG5ld1ZhbCkge1xuICAgICAgICBpZiAob3B0cy5vbkF0dHJpYnV0ZXNDaGFuZ2UpIHtcbiAgICAgICAgICAgIG9wdHMub25BdHRyaWJ1dGVzQ2hhbmdlW2F0dHJOYW1lXS5hcHBseSh0aGlzLCBbb2xkVmFsLCBuZXdWYWxdKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBwYXJhbS5wcm90b3R5cGUgPSBwcm90bztcblxuICAgIC8vIFNldCBiYXNlIGVsZW1lbnQgKE9wdGlvbmFsKVxuICAgIGlmIChvcHRzLmV4dGVuZHMpIHtcbiAgICAgICAgcGFyYW0uZXh0ZW5kcyA9IG9wdHMuZXh0ZW5kcztcbiAgICB9XG5cbiAgICAvLyBSZWdpc3RlciBjdXN0b20gZWxlbWVudFxuICAgIGNvbXBvbmVudHNTdG9yZVtvcHRzLnRhZ05hbWVdID0gZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50KG9wdHMudGFnTmFtZSwgcGFyYW0pO1xuICAgIHJldHVybiBjb21wb25lbnRzU3RvcmVbb3B0cy50YWdOYW1lXTtcbn07XG5cbkNvbXBvbmVudC5leHRlbmQgPSBmdW5jdGlvbihiYXNlQ29tcG9uZW50LCBvcHRzKSB7XG4gICAgdmFyIEJhc2UgPSBjb21wb25lbnRzU3RvcmVbYmFzZUNvbXBvbmVudF07XG4gICAgdmFyIHBhcmFtID0ge307XG4gICAgLy8gU2V0IFByb3RvdHlwZSBvZiBjdXN0b20gZWxlbWVudFxuICAgIHZhciBwcm90byA9IE9iamVjdC5jcmVhdGUoSFRNTEVsZW1lbnQucHJvdG90eXBlKTtcblxuICAgIF9leHRlbmRQcm90b3R5cGUuY2FsbChwcm90bywgb3B0cyk7XG5cbiAgICBwcm90by5jcmVhdGVkQ2FsbGJhY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgQmFzZS5wcm90b3R5cGUuY3JlYXRlZENhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIGlmIChvcHRzLm9uQ3JlYXRlKSB7XG4gICAgICAgICAgICBvcHRzLm9uQ3JlYXRlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgcHJvdG8uYXR0YWNoZWRDYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBCYXNlLnByb3RvdHlwZS5hdHRhY2hlZENhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIGlmIChvcHRzLm9uQXR0YWNoKSB7XG4gICAgICAgICAgICBvcHRzLm9uQXR0YWNoLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH1cbiAgICAgICAgX2FkZEV2ZW50TGlzdGVuZXJzLmNhbGwodGhpcywgb3B0cy5ldmVudHMpO1xuICAgIH07XG5cbiAgICBwcm90by5kZXRhY2hlZENhbGxiYWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIEJhc2UucHJvdG90eXBlLmRldGFjaGVkQ2FsbGJhY2suYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgaWYgKG9wdHMub25EZXRhY2gpIHtcbiAgICAgICAgICAgIG9wdHMub25EZXRhY2guYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBwcm90by5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2sgPSBmdW5jdGlvbihhdHRyTmFtZSwgb2xkVmFsLCBuZXdWYWwpIHtcbiAgICAgICAgQmFzZS5wcm90b3R5cGUuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIGlmIChvcHRzLm9uQXR0cmlidXRlc0NoYW5nZSkge1xuICAgICAgICAgICAgb3B0cy5vbkF0dHJpYnV0ZXNDaGFuZ2VbYXR0ck5hbWVdLmFwcGx5KHRoaXMsIFtvbGRWYWwsIG5ld1ZhbF0pO1xuICAgICAgICB9XG4gICAgfTtcblxuICAgIHBhcmFtLnByb3RvdHlwZSA9IHByb3RvO1xuXG4gICAgLy8gUmVnaXN0ZXIgY3VzdG9tIGVsZW1lbnRcbiAgICByZXR1cm4gZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50KG9wdHMudGFnTmFtZSwgcGFyYW0pO1xufTtcblxuZnVuY3Rpb24gX2FkZEV2ZW50TGlzdGVuZXJzKGV2ZW50cykge1xuICAgIGZvciAodmFyIGV2dCBpbiBldmVudHMpIHtcbiAgICAgICAgdmFyIHBhcmFtID0gZXZ0LnNwbGl0KCcgJyk7XG4gICAgICAgIHZhciBldmVudE5hbWUgPSBwYXJhbVswXTtcbiAgICAgICAgdmFyIGVsZW1lbnQgPSB0aGlzLnNoYWRvd1Jvb3QucXVlcnlTZWxlY3RvcihwYXJhbVsxXSk7XG4gICAgICAgIHZhciBoYW5kbGVyID0gZXZlbnRzW2V2dF07XG4gICAgICAgIHZhciBmbiA9IHRoaXNbaGFuZGxlcl0gPSB0aGlzW2hhbmRsZXJdLmJpbmQodGhpcyk7XG4gICAgICAgIFxuICAgICAgICBlbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoZXZlbnROYW1lLCBmbik7XG4gICAgfVxufVxuXG5mdW5jdGlvbiBfZXh0ZW5kUHJvdG90eXBlKHByb3Rvcykge1xuICAgIGZvciAodmFyIHByb3RvIGluIHByb3Rvcykge1xuICAgICAgICBzd2l0Y2ggKHByb3RvKSB7XG4gICAgICAgICAgICBjYXNlICdleGVuZHMnOlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnb25DcmVhdGUnOlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnb25EZXRhY2gnOlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnb25BdHRyaWJ1dGVzQ2hhbmdlJzpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ29uQXR0YWNoJzpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ3RhZ05hbWUnOlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZnJhZ21lbnQnOlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnc3R5bGUnOlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZXZlbnRzJzpcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgdGhpc1twcm90b10gPSBwcm90b3NbcHJvdG9dO1xuICAgICAgICB9XG4gICAgfVxufVxuIiwidmFyIG1peGlucyA9IHt9O1xudmFyIHZhcmlhYmxlcyA9IHt9O1xuXG52YXIgU3R5bGl6ZXIgPSBmdW5jdGlvbigpIHt9O1xuXG5TdHlsaXplci5wcm90b3R5cGUuc3RyaW5naWZ5ID0gZnVuY3Rpb24oc3R5bGUpIHtcbiAgICB2YXIgcmV0ID0gJyc7XG5cbiAgICBmb3IgKHZhciBzZWxlY3RvciBpbiBzdHlsZSkge1xuICAgICAgICByZXQgKz0gc2VsZWN0b3IgKyAneyc7XG4gICAgICAgIHZhciBwcm9wZXJ0aWVzID0gc3R5bGVbc2VsZWN0b3JdO1xuICAgICAgICBmb3IgKHZhciBwcm9wIGluIHByb3BlcnRpZXMpIHtcbiAgICAgICAgICAgIHZhciBzZXR0aW5nID0gcHJvcGVydGllc1twcm9wXTtcbiAgICAgICAgICAgIHJldCArPSBwcm9wICsgJzonICsgc2V0dGluZyArICc7JztcbiAgICAgICAgfVxuICAgICAgICByZXQgPSByZXQuc2xpY2UoMCwgcmV0Lmxlbmd0aCAtIDEpO1xuICAgICAgICByZXQgKz0gJ30nO1xuICAgIH1cblxuICAgIHJldHVybiByZXQ7XG59O1xuXG5TdHlsaXplci5wcm90b3R5cGUuY3JlYXRlU3R5bGVUYWcgPSBmdW5jdGlvbihzdHlsZSkge1xuICAgIHZhciB0YWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdHlsZScpO1xuICAgIHN0eWxlID0gdGhpcy5zdHJpbmdpZnkoc3R5bGUpO1xuICAgIHRhZy5pbm5lclRleHQgPSBzdHlsZTtcbiAgICByZXR1cm4gdGFnO1xufTtcblxuU3R5bGl6ZXIucHJvdG90eXBlLnJlZ2lzdGVyTWl4aW5zID0gZnVuY3Rpb24oa2V5LCBmdW5jKSB7XG4gICAgbWl4aW5zW2tleV0gPSBmdW5jO1xufTtcblxuU3R5bGl6ZXIucHJvdG90eXBlLnJlZ2lzdGVyVmFyaWFibGVzID0gZnVuY3Rpb24oa2V5LCB2YWwpIHtcbiAgICB2YXJpYWJsZXNba2V5XSA9IHZhbDtcbn07XG5cblN0eWxpemVyLnByb3RvdHlwZS5nZXRWYXJpYWJsZSA9IGZ1bmN0aW9uKGtleSkge1xuICAgIGlmICghdmFyaWFibGVzW2tleV0pIHtcbiAgICAgICAgY29uc29sZS5lcnJvcignVmFyaWFibGUgJyArIGtleSArICcgZG9lcyBub3QgZXhpc3QuJyk7XG4gICAgICAgIHJldHVybjtcbiAgICB9XG4gICAgcmV0dXJuIHZhcmlhYmxlc1trZXldO1xufTtcblxuU3R5bGl6ZXIucHJvdG90eXBlLnRvSGV4ID0gZnVuY3Rpb24ocmdiKSB7XG4gICAgcmdiID0gcmdiLnJlcGxhY2UoJyAnLCAnJykuc3BsaXQoJywnKTtcbiAgICByZXR1cm4gXCIjXCIgKyBjb21wb25lbnRUb0hleChyZ2JbMF0pICsgY29tcG9uZW50VG9IZXgocmdiWzFdKSArIGNvbXBvbmVudFRvSGV4KHJnYlsyXSk7XG5cbiAgICBmdW5jdGlvbiBjb21wb25lbnRUb0hleChjKSB7XG4gICAgICAgIHZhciBoZXggPSAoK2MpLnRvU3RyaW5nKDE2KTtcbiAgICAgICAgcmV0dXJuIGhleC5sZW5ndGggPT0gMSA/IFwiMFwiICsgaGV4IDogaGV4O1xuICAgIH1cbn07XG5cblN0eWxpemVyLnByb3RvdHlwZS50b1JHQiA9IGZ1bmN0aW9uKGhleCkge1xuICAgIHZhciByZXN1bHQgPSAvXiM/KFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pJC9pLmV4ZWMoaGV4KTtcbiAgICByZXR1cm4gcmVzdWx0ID8gJ3JnYignICsgW1xuICAgICAgICBwYXJzZUludChyZXN1bHRbMV0sIDE2KSxcbiAgICAgICAgcGFyc2VJbnQocmVzdWx0WzJdLCAxNiksXG4gICAgICAgIHBhcnNlSW50KHJlc3VsdFszXSwgMTYpXG4gICAgXS5qb2luKCcsJykgKyAnKScgOiBudWxsO1xufTtcblxuU3R5bGl6ZXIucHJvdG90eXBlLnRvUkdCYSA9IGZ1bmN0aW9uKGhleCwgb3BhY2l0eSkge1xuICAgIHZhciByZXN1bHQgPSAvXiM/KFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pJC9pLmV4ZWMoaGV4KTtcbiAgICByZXR1cm4gcmVzdWx0ID8gJ3JnYmEoJyArIFtcbiAgICAgICAgcGFyc2VJbnQocmVzdWx0WzFdLCAxNiksXG4gICAgICAgIHBhcnNlSW50KHJlc3VsdFsyXSwgMTYpLFxuICAgICAgICBwYXJzZUludChyZXN1bHRbM10sIDE2KSxcbiAgICAgICAgb3BhY2l0eVxuICAgIF0uam9pbignLCcpICsgJyknIDogbnVsbDtcbn07XG5cblN0eWxpemVyLnByb3RvdHlwZS5nZXRNaXhpbnMgPSBmdW5jdGlvbihrZXkpIHtcbiAgICBpZiAoIW1peGluc1trZXldKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ01peGluICcgKyBrZXkgKyAnIGRvZXMgbm90IGV4aXN0LicpO1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIHJldHVybiBtaXhpbnNba2V5XTtcbn07XG4iLCJ2YXIgbW9kdWxlU3RvcmUgPSB7fTtcblxudmFyIE1vZHVsZSA9IGZ1bmN0aW9uKCkge307XG5cbk1vZHVsZS5wcm90b3R5cGUuZXhwb3J0ID0gZnVuY3Rpb24oa2V5LCBmdW5jKSB7XG4gICAgaWYgKHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTW9kdWxlIG5hbWUgaXMgbm90IGEgc3RyaW5nLicpO1xuICAgIH1cblxuICAgIGlmICh0eXBlb2YgZnVuYyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01vZHVsZSBpcyBub3QgYSBmdW5jdGlvbi4nKTtcbiAgICB9XG4gICAgbW9kdWxlU3RvcmVba2V5XSA9IGZ1bmN0aW9uKGRvbmUpIHtcbiAgICAgICAgZG9uZShmdW5jKCkpO1xuICAgIH07XG59O1xuXG5Nb2R1bGUucHJvdG90eXBlLmltcG9ydCA9IGZ1bmN0aW9uKG1vZHVsZXMpIHtcbiAgICB2YXIgbG9hZGVkID0gMDtcbiAgICB2YXIgY291bnQgID0gT2JqZWN0LmtleXMobW9kdWxlcyk7XG4gICAgdmFyIHZvdyA9IFZvdygpO1xuICAgIHZhciByZXQgPSB7fTtcbiAgICB2YXIgdXJsO1xuXG4gICAgX2ltcG9ydChjb3VudC5wb3AoKSwgdm93KTtcblxuICAgIHZvdy5wcm9taXNlLmFuZCA9IHt9O1xuICAgIHZvdy5wcm9taXNlLmFuZC5leHBvcnQgPSBmdW5jdGlvbihrZXksIGZ1bmMpIHtcbiAgICAgICAgbW9kdWxlU3RvcmVba2V5XSA9IGZ1bmN0aW9uKGRvbmUpIHtcbiAgICAgICAgICAgIHZvdy5wcm9taXNlXG4gICAgICAgICAgICAgICAgLnRoZW4oZnVuY3Rpb24ocmV0KSB7XG4gICAgICAgICAgICAgICAgICAgIG1vZHVsZVN0b3JlW2tleV0gPSBmdW5jLmJpbmQodGhpcywgcmV0KTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZ1bmMuY2FsbCh0aGlzLCByZXQpO1xuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSlcbiAgICAgICAgICAgICAgICAuZG9uZShkb25lKTtcbiAgICAgICAgfTtcbiAgICB9LmJpbmQodGhpcyk7XG5cbiAgICB2b3cucHJvbWlzZS5hbmQuaW1wb3J0ID0gZnVuY3Rpb24obW9kdWxlcykge1xuICAgICAgICByZXR1cm4gdm93LnByb21pc2UudGhlbih0aGlzLmltcG9ydC5iaW5kKHRoaXMsIG1vZHVsZXMpKTtcbiAgICB9LmJpbmQodGhpcyk7XG5cbiAgICByZXR1cm4gdm93LnByb21pc2U7XG5cbiAgICBmdW5jdGlvbiBfaW1wb3J0KGtleSwgcHJvbWlzZSkge1xuICAgICAgICB2YXIgdXJsID0gbW9kdWxlc1trZXldO1xuXG4gICAgICAgIGlmICh0eXBlb2Yga2V5ICE9PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNb2R1bGUgbmFtZSBpcyBub3QgYSBzdHJpbmcuJyk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodHlwZW9mIHVybCAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVVJMIGlzIG5vdCBhIHN0cmluZy4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciBtb2R1bGUgPSBtb2R1bGVTdG9yZVtrZXldO1xuICAgICAgICBcbiAgICAgICAgaWYgKCFtb2R1bGUpIHtcbiAgICAgICAgICAgIHZhciBzY3JpcHQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzY3JpcHQnKTtcblxuICAgICAgICAgICAgc2NyaXB0LnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiO1xuICAgICAgICAgICAgc2NyaXB0LnNyYyA9IHVybDtcbiAgICAgICAgICAgIHNjcmlwdC5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICB2YXIgZGVmZXIgPSBWb3coKTtcblxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdMb2FkaW5nICcgKyBrZXkgKyAnLi4uJyk7XG5cbiAgICAgICAgICAgICAgICBkZWZlci5wcm9taXNlLnRoZW4oZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICByZXRba2V5XSA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgIGxvYWRlZCsrO1xuICAgICAgICAgICAgICAgICAgICBpZiAoY291bnQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBwcm9taXNlLnJlc29sdmUocmV0KTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIF9pbXBvcnQoY291bnQucG9wKCksIHByb21pc2UpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICBzY3JpcHQucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgbW9kdWxlU3RvcmVba2V5XShkZWZlci5yZXNvbHZlKTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzLCBrZXkpO1xuXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKHNjcmlwdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBwcm9taXNlLnJlc29sdmUobW9kdWxlKCkpO1xuICAgICAgICB9XG4gICAgfVxufTtcbiIsInZhciBEYXRhID0gRmFjdG9yeS5leHRlbmQoe1xuICAgIGFqYXg6IGZ1bmN0aW9uKG9wdHMpe1xuICAgICAgICBpZiAoIW9wdHMudXJsKSB0aHJvdyBuZXcgRXJyb3IoJ1VybCBpcyByZXF1aXJlZC4nKTtcbiAgICAgICAgaWYgKCFvcHRzLnR5cGUpIHRocm93IG5ldyBFcnJvcignUmVxdWVzdCB0eXBlIGlzIHJlcXVpcmVkLicpO1xuXG4gICAgICAgIG9wdHMuY29udGVudFR5cGUgPSBvcHRzLmNvbnRlbnRUeXBlIHx8ICdhcHBsaWNhdGlvbi9qc29uJztcbiAgICAgICAgb3B0cy5lbmNvZGUgICAgICA9IG9wdHMuZW5jb2RlIHx8IG51bGw7XG4gICAgICAgIG9wdHMucGF5bG9hZCAgICAgPSBvcHRzLnBheWxvYWQgfHwgbnVsbDtcbiAgICAgICAgb3B0cy5pbmRleEJ5ICAgICA9IG9wdHMuaW5kZXhCeSB8fCAnaWQnO1xuXG4gICAgICAgIHJldHVybiBhamF4KG9wdHMpXG4gICAgICAgICAgICAgICAgLnRoZW4oX3BhcnNlLmJpbmQodGhpcykpXG4gICAgICAgICAgICAgICAgLnRoZW4oX3VwZGF0ZVN0b3JlLmJpbmQodGhpcykpO1xuXG4gICAgICAgIGZ1bmN0aW9uIF91cGRhdGVTdG9yZShyc3ApIHtcbiAgICAgICAgICAgIGlmIChvcHRzLnR5cGUudG9VcHBlckNhc2UoKSA9PT0gJ0RFTEVURScpIHtcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyc3ApKSB7XG4gICAgICAgICAgICAgICAgICAgIHJzcC5mb3JFYWNoKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudW5zZXQoZFtvcHRzLmluZGV4QnldLCBkKTtcbiAgICAgICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKHR5cGVvZiByc3AgPT09ICdvYmplY3QnKSB7XG4gICAgICAgICAgICAgICAgICAgIHRoaXMudW5zZXQocnNwW29wdHMuaW5kZXhCeV0sIHJzcCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShyc3ApKSB7XG4gICAgICAgICAgICAgICAgICAgIHJzcC5mb3JFYWNoKGZ1bmN0aW9uKGQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0KGRbb3B0cy5pbmRleEJ5XSwgZCk7XG4gICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcnNwID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldChyc3Bbb3B0cy5pbmRleEJ5XSwgcnNwKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcnNwO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gX3BhcnNlKHJzcCkge1xuICAgICAgICAgICAgaWYgKG9wdHMucGFyc2UpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gb3B0cy5wYXJzZShyc3ApO1xuICAgICAgICAgICAgfSBcbiAgICAgICAgICAgIHJldHVybiB0aGlzLnBhcnNlKHJzcCk7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgcGFyc2U6IGZ1bmN0aW9uKHJzcCkge1xuICAgICAgICByZXR1cm4gSlNPTi5wYXJzZShyc3ApO1xuICAgIH1cbn0pO1xuXG52YXIgZGF0YXN0b3JlID0ge307XG52YXIgUmVzb3VyY2UgPSBmdW5jdGlvbigpIHt9O1xuXG5SZXNvdXJjZS5wcm90b3R5cGUucmVnaXN0ZXIgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgaWYgKGRhdGFzdG9yZVtuYW1lXSkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Jlc291cmNlICcgKyBuYW1lICsgJyBhbHJlYWR5IGV4aXN0LicpO1xuICAgIH1cblxuICAgIGRhdGFzdG9yZVtuYW1lXSA9IG5ldyBEYXRhKCk7XG4gICAgcmV0dXJuIGRhdGFzdG9yZVtuYW1lXTtcbn07XG5cblJlc291cmNlLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgcmV0dXJuIGRhdGFzdG9yZVtuYW1lXSA/IGRhdGFzdG9yZVtuYW1lXSA6IHRoaXMucmVnaXN0ZXIobmFtZSk7XG59O1xuIiwidmFyIFJlbmRlcmVyID0gZnVuY3Rpb24oKXt9O1xuXG5SZW5kZXJlci5wcm90b3R5cGUuY3JlYXRlVGVtcGxhdGUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFRlbXBsYXRlKCk7XG59O1xuXG52YXIgVGVtcGxhdGUgPSBmdW5jdGlvbigpe1xuICAgIHRoaXMuX3F1ZXVlID0gW107XG59O1xuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLyBET00gVGVtcGxhdGluZyBtZXRob2RzIC8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cbi8vIEVhY2ggb2YgdGhlIG1ldGhvZHMgYmVsb3cgcHVzaCBhIGNvbW1hbmQgb2JqZWN0IHRvIGEgY29tbWFuZCBxdWV1ZS5cbi8vIFRoZSBjb21tYW5kIHF1ZXVlIHdpbGwgYmUgZXhlY3V0ZWQgYnkgLnJlbmRlciB0byBjcmVhdGUgRE9NIGZyYWdtZW50cy5cblRlbXBsYXRlLnByb3RvdHlwZS5vcGVuICAgICAgICAgPSBxdWV1ZUNvbW1hbmQoJ29wZW5UYWcnKTtcblRlbXBsYXRlLnByb3RvdHlwZS5hZGRDbGFzcyAgICAgPSBxdWV1ZUNvbW1hbmQoJ2FkZENsYXNzJyk7XG5UZW1wbGF0ZS5wcm90b3R5cGUudGV4dCAgICAgICAgID0gcXVldWVDb21tYW5kKCd0ZXh0Jyk7XG5UZW1wbGF0ZS5wcm90b3R5cGUuYXR0ciAgICAgICAgID0gcXVldWVDb21tYW5kKCdhdHRyaWJ1dGUnKTtcblRlbXBsYXRlLnByb3RvdHlwZS5zdHlsZSAgICAgICAgPSBxdWV1ZUNvbW1hbmQoJ3N0eWxlJyk7XG5UZW1wbGF0ZS5wcm90b3R5cGUuY2xvc2UgICAgICAgID0gcXVldWVDb21tYW5kKCdjbG9zZVRhZycpO1xuVGVtcGxhdGUucHJvdG90eXBlLmlmICAgICAgICAgICA9IHF1ZXVlQ29tbWFuZCgnaWYnKTtcblRlbXBsYXRlLnByb3RvdHlwZS5lbHNlICAgICAgICAgPSBxdWV1ZUNvbW1hbmQoJ2Vsc2UnKTtcblRlbXBsYXRlLnByb3RvdHlwZS5lYWNoICAgICAgICAgPSBxdWV1ZUNvbW1hbmQoJ2xvb3AnKTtcblRlbXBsYXRlLnByb3RvdHlwZS5kb25lICAgICAgICAgPSBxdWV1ZUNvbW1hbmQoJ2RvbmUnKTtcblRlbXBsYXRlLnByb3RvdHlwZS54aWYgICAgICAgICAgPSBUZW1wbGF0ZS5wcm90b3R5cGUuZG9uZTsgXG5UZW1wbGF0ZS5wcm90b3R5cGUueGVhY2ggICAgICAgID0gVGVtcGxhdGUucHJvdG90eXBlLmRvbmU7XG5cbmZ1bmN0aW9uIHF1ZXVlQ29tbWFuZChjb21tYW5kTmFtZSkge1xuICAgIHJldHVybiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5fcXVldWUucHVzaCh7XG4gICAgICAgICAgICBhY3Rpb246IGNvbW1hbmROYW1lLFxuICAgICAgICAgICAgZGV0YWlsOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChhcmd1bWVudHMpXG4gICAgICAgIH0pO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xufVxuXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIFJlbmRlciAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG5cblRlbXBsYXRlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgLy8gUm9vdCBlbGVtZW50IHRvIHN0b3JlIERPTXNcbiAgICB2YXIgcm9vdCAgICAgICAgICAgID0gZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpLFxuICAgIC8vIFN0YWNrcyB0byByZWZlcmVuY2UgY3VycmVudCBjb250ZXh0XG4gICAgICAgIGVsZW1lbnRzICAgICAgICA9IFtdLFxuICAgICAgICBjb25kaXRpb25hbHMgICAgPSBbXSxcbiAgICAgICAgbG9vcHMgICAgICAgICAgID0gW10sXG4gICAgICAgIHN0YXRlcyAgICAgICAgICA9IFtdLFxuICAgIC8vIFJlZmVyZW5jZSBpbmRleCBmb3IgY3VycmVudCBleGVjdXRpb25cbiAgICAgICAgZXhlY0luZGV4ICAgICAgID0gMCxcbiAgICAgICAgZWwsIGNvbmRpdGlvbiwgbG9vcDtcblxuICAgIGhhbmRsZUNvbW1hbmQuY2FsbCh0aGlzLCB0aGlzLl9xdWV1ZVtleGVjSW5kZXhdLCBkYXRhKTtcblxuICAgIHJldHVybiByb290O1xuXG4gICAgZnVuY3Rpb24gaGFuZGxlQ29tbWFuZChjb21tYW5kLCBleGVjRGF0YSkge1xuICAgICAgICAvLyBHcmFiIGN1cnJlbnQgc3RhdGU6IExPT1AsIENPTkRJVElPTkFMLCBvciB1bmRlZmluZWRcbiAgICAgICAgdmFyIHN0YXRlID0gZ2V0TGFzdEZyb20oc3RhdGVzKTtcblxuICAgICAgICAvLyBCYXNlIGNhc2U6IGV4aXQgaWYgbm8gY29tbWFuZFxuICAgICAgICBpZiAoIWNvbW1hbmQpIHtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIENoYW5nZSBkYXRhIGluIGN1cnJlbnQgZXhlY3VhdGlvbiBpZiBpbiBhIGxvb3BcbiAgICAgICAgLy8gRnJvbSBbe2E6ICdhJ30sIHtiOiAnYid9LCB7YzogJ2MnfV0gdG8ge2E6ICdhJ31cbiAgICAgICAgaWYgKHN0YXRlID09PSAnTE9PUCcpIHtcbiAgICAgICAgICAgIHNldERhdGFDb250ZXh0KCk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBIYW5kbGUgSUYsIEVMU0UsIEVBQ0gsIG9yIERPTkVcbiAgICAgICAgLy8gVGhlc2UgbWV0aG9kcyBjaGFuZ2Ugc3RhdGUgb2YgcmVuZGVyaW5nXG4gICAgICAgIGhhbmRsZVN0YXRlQWN0aW9ucygpO1xuXG4gICAgICAgIC8vIEV4aXQgaWYgY29uZGl0aW9uIGlzIG5vdCBtZXRcbiAgICAgICAgaWYgKChzdGF0ZSA9PT0gJ0NPTkRJVElPTkFMJyAmJiAhZ2V0TGFzdEZyb20oY29uZGl0aW9uYWxzKSkgfHwgKHN0YXRlID09PSAnTE9PUCcgJiYgIWV4ZWNEYXRhKSkge1xuICAgICAgICAgICAgaGFuZGxlQ29tbWFuZC5jYWxsKHRoaXMsIHRoaXMuX3F1ZXVlWysrZXhlY0luZGV4XSwgZXhlY0RhdGEpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSGFuZGxlIENSRUFURSwgQVBQRU5ELCBTVFlMRSwgQVRUUiwgVEVYVFxuICAgICAgICAvLyBUaGVzZSBtZXRob2RzIGFyZSBwdXJlbHkgcmVuZGVyaW5nIGFuZCBkbyBub3QgY2hhbmdlIHJlbmRlcmluZyBzdGF0ZVxuICAgICAgICBoYW5kbGVDb21tb25BY3Rpb25zKCk7XG5cbiAgICAgICAgLy8gSW5jcmVtZW50IGluZGV4IGZvciBuZXh0IGV4ZWN1dGlvblxuICAgICAgICBleGVjSW5kZXgrKztcblxuICAgICAgICAvLyBFeGVjdXRlIG5leHQgY29tbWFuZFxuICAgICAgICBoYW5kbGVDb21tYW5kLmNhbGwodGhpcywgdGhpcy5fcXVldWVbZXhlY0luZGV4XSwgZXhlY0RhdGEpO1xuICAgICAgICBcbiAgICAgICAgZnVuY3Rpb24gc2V0RGF0YUNvbnRleHQoKSB7XG4gICAgICAgICAgICBsb29wID0gZ2V0TGFzdEZyb20obG9vcHMpO1xuICAgICAgICAgICAgZXhlY0RhdGEgPSBsb29wLmRhdGFbbG9vcC5pbmRleF07XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBoYW5kbGVTdGF0ZUFjdGlvbnMoKSB7XG4gICAgICAgICAgICBpZiAoY29tbWFuZC5hY3Rpb24gPT09ICdsb29wJykge1xuICAgICAgICAgICAgICAgIGhhbmRsZUxvb3AoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGNvbW1hbmQuYWN0aW9uID09PSAnZG9uZScpIHtcbiAgICAgICAgICAgICAgICBoYW5kbGVEb25lKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIGlmIChjb21tYW5kLmFjdGlvbiA9PT0gJ2lmJykge1xuICAgICAgICAgICAgICAgIGhhbmRsZUlmKCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChjb21tYW5kLmFjdGlvbiA9PT0gJ2Vsc2UnKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlRWxzZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlTG9vcCgpIHtcbiAgICAgICAgICAgIHN0YXRlcy5wdXNoKCdMT09QJyk7XG4gICAgICAgICAgICBsb29wcy5wdXNoKHtcbiAgICAgICAgICAgICAgICBkYXRhOiBldmFsdWF0ZShleGVjRGF0YSwgY29tbWFuZC5kZXRhaWxbMF0pLFxuICAgICAgICAgICAgICAgIGluZGV4OiAwLFxuICAgICAgICAgICAgICAgIHN0YXJ0OiBleGVjSW5kZXhcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gaGFuZGxlRG9uZSgpIHtcbiAgICAgICAgICAgIHN0YXRlcy5wb3AoKTtcbiAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gJ0NPTkRJVElPTkFMJykge1xuICAgICAgICAgICAgICAgIGNvbmRpdGlvbmFscy5wb3AoKTtcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09ICdMT09QJykge1xuICAgICAgICAgICAgICAgIGxvb3AgPSBnZXRMYXN0RnJvbShsb29wcyk7XG4gICAgICAgICAgICAgICAgbG9vcC5pbmRleCA9IGxvb3AuaW5kZXggKyAxO1xuICAgICAgICAgICAgICAgIC8vIElmIGN1cnJlbnQgbG9vcCBpcyBub3QgZG9uZSwgc2V0IHN0YXRlIGJhY2sgdG8gbG9vcFxuICAgICAgICAgICAgICAgIC8vIGFuZCBzZXQgbmV4dCBleGVjdXRpb24gYXQgc3RhcnQgb2YgbG9vcFxuICAgICAgICAgICAgICAgIGlmIChsb29wLmluZGV4IDwgbG9vcC5kYXRhLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBleGVjSW5kZXggPSBsb29wLnN0YXJ0O1xuICAgICAgICAgICAgICAgICAgICBzdGF0ZXMucHVzaCgnTE9PUCcpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxvb3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZUlmKCkge1xuICAgICAgICAgICAgc3RhdGVzLnB1c2goJ0NPTkRJVElPTkFMJyk7XG4gICAgICAgICAgICBjb25kaXRpb24gPSBldmFsdWF0ZShleGVjRGF0YSwgY29tbWFuZC5kZXRhaWxbMF0pO1xuICAgICAgICAgICAgY29uZGl0aW9uYWxzLnB1c2goY29uZGl0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZUVsc2UoKSB7XG4gICAgICAgICAgICBjb25kaXRpb24gPSAhY29uZGl0aW9uYWxzLnBvcCgpO1xuICAgICAgICAgICAgY29uZGl0aW9uYWxzLnB1c2goY29uZGl0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZUNvbW1vbkFjdGlvbnMoKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGNvbW1hbmQuYWN0aW9uKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnb3BlblRhZyc6XG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnRzLnB1c2goY3JlYXRlVGFnLmFwcGx5KG51bGwsIGNvbW1hbmQuZGV0YWlsKSk7XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgIGNhc2UgJ2FkZENsYXNzJzpcbiAgICAgICAgICAgICAgICAgICAgZWwgPSBnZXRMYXN0RnJvbShlbGVtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgIGFkZENsYXNzLmFwcGx5KGVsLCBbZXZhbHVhdGUoZXhlY0RhdGEsIGNvbW1hbmQuZGV0YWlsWzBdKV0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdzdHlsZSc6XG4gICAgICAgICAgICAgICAgICAgIGVsID0gZ2V0TGFzdEZyb20oZWxlbWVudHMpO1xuICAgICAgICAgICAgICAgICAgICBhZGRTdHlsZS5hcHBseShlbCwgW2V2YWx1YXRlKGV4ZWNEYXRhLCBjb21tYW5kLmRldGFpbFswXSksIGV2YWx1YXRlKGV4ZWNEYXRhLCBjb21tYW5kLmRldGFpbFsxXSldKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnYXR0cmlidXRlJzpcbiAgICAgICAgICAgICAgICAgICAgZWwgPSBnZXRMYXN0RnJvbShlbGVtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgIGFkZEF0dHJpYnV0ZS5hcHBseShlbCwgW2V2YWx1YXRlKGV4ZWNEYXRhLCBjb21tYW5kLmRldGFpbFswXSksIGV2YWx1YXRlKGV4ZWNEYXRhLCBjb21tYW5kLmRldGFpbFsxXSldKTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAndGV4dCc6XG4gICAgICAgICAgICAgICAgICAgIGVsID0gZ2V0TGFzdEZyb20oZWxlbWVudHMpO1xuICAgICAgICAgICAgICAgICAgICBhZGRUZXh0LmFwcGx5KGVsLCBbZXZhbHVhdGUoZXhlY0RhdGEsIGNvbW1hbmQuZGV0YWlsWzBdKV0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdjbG9zZVRhZyc6XG4gICAgICAgICAgICAgICAgICAgIGVsID0gZWxlbWVudHMucG9wKCk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChlbGVtZW50cy5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgZ2V0TGFzdEZyb20oZWxlbWVudHMpLmFwcGVuZENoaWxkKGVsKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gUGF0Y2ggLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuVGVtcGxhdGUucHJvdG90eXBlLnBhdGNoID0gZnVuY3Rpb24ocm9vdCwgZGF0YSkge1xuICAgIHZhciBmcmFnID0gdGhpcy5yZW5kZXIoZGF0YSk7XG5cbiAgICBkZlBhdGNoKHJvb3QsIGZyYWcpO1xuXG4gICAgZnVuY3Rpb24gZGZQYXRjaChmcm9tLCB0bykge1xuICAgICAgICB2YXIgZnJvbU5vZGUsIHRvTm9kZTtcbiAgICAgICAgdmFyIGxlbmd0aCA9IE1hdGgubWF4KGZyb20uY2hpbGROb2Rlcy5sZW5ndGgsIHRvLmNoaWxkTm9kZXMubGVuZ3RoKTtcblxuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBmcm9tTm9kZSA9IGZyb20uY2hpbGROb2Rlc1tpXTtcbiAgICAgICAgICAgIHRvTm9kZSAgID0gdG8uY2hpbGROb2Rlc1tpXTtcblxuICAgICAgICAgICAgaWYgKCF0b05vZGUgJiYgZnJvbU5vZGUpIHtcbiAgICAgICAgICAgICAgICByZW1vdmVBbGxBZnRlcihmcm9tLCBpKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCFmcm9tTm9kZSAmJiB0b05vZGUpIHtcbiAgICAgICAgICAgICAgICBmcm9tLmFwcGVuZENoaWxkKHRvTm9kZS5jbG9uZU5vZGUodHJ1ZSkpO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChmcm9tTm9kZS50YWdOYW1lICE9PSB0b05vZGUudGFnTmFtZSkge1xuICAgICAgICAgICAgICAgIGZyb20ucmVwbGFjZUNoaWxkKHRvTm9kZS5jbG9uZU5vZGUodHJ1ZSksIGZyb21Ob2RlKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgcGF0Y2hOb2RlKGZyb21Ob2RlLCB0b05vZGUpO1xuICAgICAgICAgICAgICAgIGRmUGF0Y2goZnJvbU5vZGUsIHRvTm9kZSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZW1vdmVBbGxBZnRlcihub2RlLCBpbmRleCkge1xuICAgICAgICBmb3IgKHZhciBpID0gbm9kZS5jaGlsZE5vZGVzLmxlbmd0aCAtIDE7IGkgPj0gaW5kZXg7IGktLSkge1xuICAgICAgICAgICAgbm9kZS5jaGlsZE5vZGVzW2ldLnJlbW92ZSgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGF0Y2hOb2RlKGZyb20sIHRvKSB7XG4gICAgICAgIHBhdGNoQ2xhc3MoZnJvbSwgdG8pO1xuICAgICAgICBwYXRjaFN0eWxlKGZyb20sIHRvKTtcbiAgICAgICAgcGF0Y2hBdHRyaWJ1dGVzKGZyb20sIHRvKTtcbiAgICAgICAgcGF0Y2hUZXh0KGZyb20sIHRvKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXRjaENsYXNzKGZyb20sIHRvKSB7XG4gICAgICAgIHZhciBtYXA7XG4gICAgICAgIHZhciB0b0NsYXNzZXMgICA9IHRvLmNsYXNzTmFtZSA/IHRvLmNsYXNzTmFtZS5zcGxpdCgnICcpIDogW107XG4gICAgICAgIHZhciBmcm9tQ2xhc3NlcyA9IGZyb20uY2xhc3NOYW1lID8gZnJvbS5jbGFzc05hbWUuc3BsaXQoJyAnKSA6IFtdO1xuICAgICAgICBcbiAgICAgICAgbWFwID0gdG9DbGFzc2VzLnJlZHVjZShmdW5jdGlvbihhY2N1bXVsYXRvciwgY2xzKSB7XG4gICAgICAgICAgICBpZiAoY2xzID09PSAnJykge1xuICAgICAgICAgICAgICAgIHJldHVybiBhY2N1bXVsYXRvcjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGFkZENsYXNzLmNhbGwoZnJvbSwgY2xzKTtcbiAgICAgICAgICAgIGFjY3VtdWxhdG9yW2Nsc10gPSBjbHM7XG4gICAgICAgICAgICByZXR1cm4gYWNjdW11bGF0b3I7XG4gICAgICAgIH0sIHt9KTtcblxuICAgICAgICBmcm9tQ2xhc3Nlcy5mb3JFYWNoKGZ1bmN0aW9uKGNscykge1xuICAgICAgICAgICAgaWYgKCFtYXBbY2xzXSkge1xuICAgICAgICAgICAgICAgIHJlbW92ZUNsYXNzLmNhbGwoZnJvbSwgY2xzKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGF0Y2hUZXh0KGZyb20sIHRvKSB7XG4gICAgICAgIGlmIChmcm9tLnRleHRDb250ZW50ICE9PSB0by50ZXh0Q29udGVudCkge1xuICAgICAgICAgICAgZnJvbS50ZXh0Q29udGVudCA9IHRvLnRleHRDb250ZW50O1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGF0Y2hTdHlsZShmcm9tLCB0bykge1xuICAgICAgICB2YXIgbWFwID0ge307XG4gICAgICAgIHZhciBzdHlsZUtleSwgc3R5bGVWYWwsIGZyb21LZXlzO1xuXG4gICAgICAgIGlmICh0by5zdHlsZSkge1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0by5zdHlsZS5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIHN0eWxlS2V5ID0gdG8uc3R5bGVbaV07XG4gICAgICAgICAgICAgICAgc3R5bGVWYWwgPSB0by5zdHlsZVt0by5zdHlsZVtpXV07XG4gICAgICAgICAgICAgICAgYWRkU3R5bGUuY2FsbChmcm9tLCBzdHlsZUtleSwgc3R5bGVWYWwpO1xuICAgICAgICAgICAgICAgIG1hcFtzdHlsZUtleV0gPSBzdHlsZVZhbDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmcm9tLnN0eWxlKSB7XG4gICAgICAgICAgICBmcm9tS2V5cyA9IEFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGZyb20uc3R5bGUpO1xuICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCBmcm9tS2V5cy5sZW5ndGg7IGorKykge1xuICAgICAgICAgICAgICAgIHN0eWxlS2V5ID0gZnJvbUtleXNbal07XG4gICAgICAgICAgICAgICAgaWYgKCFtYXBbc3R5bGVLZXldKSB7XG4gICAgICAgICAgICAgICAgICAgIGFkZFN0eWxlLmNhbGwoZnJvbSwgc3R5bGVLZXksICcnKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBwYXRjaEF0dHJpYnV0ZXMoZnJvbSwgdG8pIHtcbiAgICAgICAgdmFyIG1hcCA9IHt9O1xuICAgICAgICB2YXIgYXR0ciwgYXR0cktleSwgYXR0clZhbCwgZnJvbUtleXM7XG5cbiAgICAgICAgaWYgKHRvLmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdG8uYXR0cmlidXRlcy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGF0dHIgPSB0by5hdHRyaWJ1dGVzW2ldO1xuICAgICAgICAgICAgICAgIGF0dHJLZXkgPSBhdHRyLm5hbWU7XG4gICAgICAgICAgICAgICAgaWYgKGF0dHJLZXkgIT09ICdzdHlsZScgJiYgYXR0cktleSAhPT0gJ2NsYXNzJykge1xuICAgICAgICAgICAgICAgICAgICBmcm9tLnNldEF0dHJpYnV0ZShhdHRyS2V5LCBhdHRyLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgbWFwW2F0dHJLZXldID0gYXR0ci52YWx1ZTsgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChmcm9tLmF0dHJpYnV0ZXMpIHtcbiAgICAgICAgICAgIGZyb21LZXlzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbS5hdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgZnJvbUtleXMubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICAgICAgICBhdHRyID0gZnJvbUtleXNbal07XG4gICAgICAgICAgICAgICAgYXR0cktleSA9IGF0dHIubmFtZTtcbiAgICAgICAgICAgICAgICBpZiAoYXR0cktleSAhPT0gJ3N0eWxlJyAmJiBhdHRyS2V5ICE9PSAnY2xhc3MnKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghbWFwW2F0dHJLZXldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tLnNldEF0dHJpYnV0ZShhdHRyS2V5LCAnJyk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbn07XG5cbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuLy8vLy8vLy8vLy8vLy8vLy8vLyBIZWxwZXIgTWV0aG9kcyAvLy8vLy8vLy8vLy8vLy8vLy8vXG4vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuZnVuY3Rpb24gY3JlYXRlVGFnKHRhZykge1xuICAgIHZhciB0YWdOYW1lID0gcGFyc2VUYWcodGFnKTtcbiAgICB2YXIgZWwgICAgICA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZVswXSk7XG5cbiAgICBpZiAodGFnTmFtZVsxXSA9PT0gJy4nKSB7XG4gICAgICAgIGVsLmNsYXNzTmFtZSA9IHRhZ05hbWVbMl07XG4gICAgfSBlbHNlIGlmICh0YWdOYW1lWzFdID09PSAnIycpIHtcbiAgICAgICAgZWwuaWQgPSB0YWdOYW1lWzJdO1xuICAgIH1cblxuICAgIHJldHVybiBlbDtcbn1cblxuZnVuY3Rpb24gYWRkQ2xhc3MoY2xhc3NOYW1lKSB7XG4gICAgdmFyIHNlcGFyYXRvciA9IHRoaXMuY2xhc3NOYW1lLmxlbmd0aCA+IDAgPyAnICcgOiAnJztcbiAgICBjbGFzc05hbWUgPSB0eXBlb2YgY2xhc3NOYW1lID09PSAnc3RyaW5nJyA/IGNsYXNzTmFtZSA6ICcnO1xuXG4gICAgaWYgKCFoYXNDbGFzcyh0aGlzLCBjbGFzc05hbWUpKSB7XG4gICAgICAgIHRoaXMuY2xhc3NOYW1lICs9IHNlcGFyYXRvciArIGNsYXNzTmFtZTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlbW92ZUNsYXNzKGNsYXNzTmFtZSkge1xuICAgIGlmIChoYXNDbGFzcyh0aGlzLCBjbGFzc05hbWUpKSB7XG4gICAgICAgIHZhciBvbGQgPSB0aGlzLmNsYXNzTmFtZTtcbiAgICAgICAgdmFyIG91dCA9IG9sZC5yZXBsYWNlKG5ldyBSZWdFeHAoJyhcXFxcc3xeKScrY2xhc3NOYW1lKycoXFxcXHN8JCknKSwgJycpO1xuICAgICAgICB0aGlzLmNsYXNzTmFtZSA9IG91dDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFkZFN0eWxlKGF0dHIsIHZhbCkge1xuICAgIGlmICh0aGlzLnN0eWxlW2F0dHJdICE9PSB2YWwpIHtcbiAgICAgICAgdGhpcy5zdHlsZVthdHRyXSA9IHZhbDtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIGFkZEF0dHJpYnV0ZShhdHRyLCB2YWwpIHtcbiAgICB0aGlzLnNldEF0dHJpYnV0ZShhdHRyLCB0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJyA/ICcnIDogdmFsKTtcbn1cblxuZnVuY3Rpb24gYWRkVGV4dChjb250ZW50KSB7XG4gICAgdGhpcy50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG59XG5cbmZ1bmN0aW9uIGdldExhc3RGcm9tKGFycmF5KSB7XG4gICAgcmV0dXJuIGFycmF5W2FycmF5Lmxlbmd0aCAtIDFdO1xufVxuXG5mdW5jdGlvbiBoYXNDbGFzcyhlbCwgY2xhc3NOYW1lKSB7XG4gIHJldHVybiAhIWVsLmNsYXNzTmFtZS5tYXRjaChuZXcgUmVnRXhwKCcoXFxcXHN8XiknK2NsYXNzTmFtZSsnKFxcXFxzfCQpJykpO1xufVxuXG5mdW5jdGlvbiBwYXJzZVRhZyh0YWcpIHtcbiAgICB0YWcgPSB0YWcucmVwbGFjZSgvWy4jXS8sIGZ1bmN0aW9uKGQpIHsgcmV0dXJuICcsJyArIGQgKyAnLCc7fSlcbiAgICAgICAgICAgICAuc3BsaXQoJywnKTtcbiAgICByZXR1cm4gdGFnO1xufVxuXG5mdW5jdGlvbiBldmFsdWF0ZShkYXRhLCBmdW5jT3JWYWwpIHtcbiAgICBzd2l0Y2ggKHR5cGVvZiBmdW5jT3JWYWwpIHtcbiAgICAgICAgY2FzZSAnZnVuY3Rpb24nOlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmNPclZhbC5jYWxsKHRoaXMsIGRhdGEpO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgcmV0dXJuIGZ1bmNPclZhbDtcblxuICAgIH1cbn1cbiIsInZhciBnRXZlbnRCdXMgPSBuZXcgRXZlbnRCdXMoKTtcblxudmFyIFRyaW8gPSB7XG4gICAgRmFjdG9yeTogRmFjdG9yeSxcbiAgICBTZXJ2aWNlOiBTZXJ2aWNlLFxuICAgIENvbXBvbmVudDogQ29tcG9uZW50LFxuICAgIFZvdzogVm93LFxuICAgIFN0eWxpemVyOiBuZXcgU3R5bGl6ZXIoKSxcbiAgICBSZW5kZXJlcjogbmV3IFJlbmRlcmVyKCksXG4gICAgTW9kdWxlOiBuZXcgTW9kdWxlKCksXG4gICAgUmVzb3VyY2U6IG5ldyBSZXNvdXJjZSgpLFxuICAgIFZFUlNJT046ICcwLjEuMidcbn07XG5cblRyaW8ucmVnaXN0ZXJHbG9iYWxFdmVudEJ1cyA9IGZ1bmN0aW9uKGlkKSB7XG4gICAgcmV0dXJuIGdFdmVudEJ1cy5yZWdpc3RlcihpZCk7XG59O1xuXG5pZiAobW9kdWxlICYmIG1vZHVsZS5leHBvcnRzKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBUcmlvO1xufSBlbHNlIHtcbiAgICB3aW5kb3cuVHJpbyA9IFRyaW87XG59XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
