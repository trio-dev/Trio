(function(){
"use strict";
/**
 * @license
 * Copyright (c) 2014 The Polymer Project Authors. All rights reserved.
 * This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
 * The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
 * The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
 * Code distributed by Google as part of the polymer project is also
 * subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
 */
// @version 0.7.12-86a041b
window.WebComponents=window.WebComponents||{},function(e){var t=e.flags||{},n="webcomponents.js",r=document.querySelector('script[src*="'+n+'"]');if(!t.noOpts){if(location.search.slice(1).split("&").forEach(function(e){var n,r=e.split("=");r[0]&&(n=r[0].match(/wc-(.+)/))&&(t[n[1]]=r[1]||!0)}),r)for(var o,i=0;o=r.attributes[i];i++)"src"!==o.name&&(t[o.name]=o.value||!0);if(t.log&&t.log.split){var a=t.log.split(",");t.log={},a.forEach(function(e){t.log[e]=!0})}else t.log={}}t.shadow=t.shadow||t.shadowdom||t.polyfill,"native"===t.shadow?t.shadow=!1:t.shadow=t.shadow||!HTMLElement.prototype.createShadowRoot,t.register&&(window.CustomElements=window.CustomElements||{flags:{}},window.CustomElements.flags.register=t.register),e.flags=t}(WebComponents),WebComponents.flags.shadow&&("undefined"==typeof WeakMap&&!function(){var e=Object.defineProperty,t=Date.now()%1e9,n=function(){this.name="__st"+(1e9*Math.random()>>>0)+(t++ +"__")};n.prototype={set:function(t,n){var r=t[this.name];return r&&r[0]===t?r[1]=n:e(t,this.name,{value:[t,n],writable:!0}),this},get:function(e){var t;return(t=e[this.name])&&t[0]===e?t[1]:void 0},"delete":function(e){var t=e[this.name];return t&&t[0]===e?(t[0]=t[1]=void 0,!0):!1},has:function(e){var t=e[this.name];return t?t[0]===e:!1}},window.WeakMap=n}(),window.ShadowDOMPolyfill={},function(e){"use strict";function t(){if("undefined"!=typeof chrome&&chrome.app&&chrome.app.runtime)return!1;if(navigator.getDeviceStorage)return!1;try{var e=new Function("return true;");return e()}catch(t){return!1}}function n(e){if(!e)throw new Error("Assertion failed")}function r(e,t){for(var n=W(t),r=0;r<n.length;r++){var o=n[r];A(e,o,F(t,o))}return e}function o(e,t){for(var n=W(t),r=0;r<n.length;r++){var o=n[r];switch(o){case"arguments":case"caller":case"length":case"name":case"prototype":case"toString":continue}A(e,o,F(t,o))}return e}function i(e,t){for(var n=0;n<t.length;n++)if(t[n]in e)return t[n]}function a(e,t,n){U.value=n,A(e,t,U)}function s(e,t){var n=e.__proto__||Object.getPrototypeOf(e);if(q)try{W(n)}catch(r){n=n.__proto__}var o=R.get(n);if(o)return o;var i=s(n),a=E(i);return g(n,a,t),a}function c(e,t){w(e,t,!0)}function l(e,t){w(t,e,!1)}function u(e){return/^on[a-z]+$/.test(e)}function d(e){return/^[a-zA-Z_$][a-zA-Z_$0-9]*$/.test(e)}function p(e){return k&&d(e)?new Function("return this.__impl4cf1e782hg__."+e):function(){return this.__impl4cf1e782hg__[e]}}function h(e){return k&&d(e)?new Function("v","this.__impl4cf1e782hg__."+e+" = v"):function(t){this.__impl4cf1e782hg__[e]=t}}function f(e){return k&&d(e)?new Function("return this.__impl4cf1e782hg__."+e+".apply(this.__impl4cf1e782hg__, arguments)"):function(){return this.__impl4cf1e782hg__[e].apply(this.__impl4cf1e782hg__,arguments)}}function m(e,t){try{return Object.getOwnPropertyDescriptor(e,t)}catch(n){return B}}function w(t,n,r,o){for(var i=W(t),a=0;a<i.length;a++){var s=i[a];if("polymerBlackList_"!==s&&!(s in n||t.polymerBlackList_&&t.polymerBlackList_[s])){q&&t.__lookupGetter__(s);var c,l,d=m(t,s);if("function"!=typeof d.value){var w=u(s);c=w?e.getEventHandlerGetter(s):p(s),(d.writable||d.set||V)&&(l=w?e.getEventHandlerSetter(s):h(s));var v=V||d.configurable;A(n,s,{get:c,set:l,configurable:v,enumerable:d.enumerable})}else r&&(n[s]=f(s))}}}function v(e,t,n){if(null!=e){var r=e.prototype;g(r,t,n),o(t,e)}}function g(e,t,r){var o=t.prototype;n(void 0===R.get(e)),R.set(e,t),I.set(o,e),c(e,o),r&&l(o,r),a(o,"constructor",t),t.prototype=o}function b(e,t){return R.get(t.prototype)===e}function y(e){var t=Object.getPrototypeOf(e),n=s(t),r=E(n);return g(t,r,e),r}function E(e){function t(t){e.call(this,t)}var n=Object.create(e.prototype);return n.constructor=t,t.prototype=n,t}function _(e){return e&&e.__impl4cf1e782hg__}function S(e){return!_(e)}function T(e){if(null===e)return null;n(S(e));var t=e.__wrapper8e3dd93a60__;return null!=t?t:e.__wrapper8e3dd93a60__=new(s(e,e))(e)}function M(e){return null===e?null:(n(_(e)),e.__impl4cf1e782hg__)}function O(e){return e.__impl4cf1e782hg__}function L(e,t){t.__impl4cf1e782hg__=e,e.__wrapper8e3dd93a60__=t}function N(e){return e&&_(e)?M(e):e}function C(e){return e&&!_(e)?T(e):e}function j(e,t){null!==t&&(n(S(e)),n(void 0===t||_(t)),e.__wrapper8e3dd93a60__=t)}function D(e,t,n){G.get=n,A(e.prototype,t,G)}function H(e,t){D(e,t,function(){return T(this.__impl4cf1e782hg__[t])})}function x(e,t){e.forEach(function(e){t.forEach(function(t){e.prototype[t]=function(){var e=C(this);return e[t].apply(e,arguments)}})})}var R=new WeakMap,I=new WeakMap,P=Object.create(null),k=t(),A=Object.defineProperty,W=Object.getOwnPropertyNames,F=Object.getOwnPropertyDescriptor,U={value:void 0,configurable:!0,enumerable:!1,writable:!0};W(window);var q=/Firefox/.test(navigator.userAgent),B={get:function(){},set:function(e){},configurable:!0,enumerable:!0},V=function(){var e=Object.getOwnPropertyDescriptor(Node.prototype,"nodeType");return e&&!e.get&&!e.set}(),G={get:void 0,configurable:!0,enumerable:!0};e.assert=n,e.constructorTable=R,e.defineGetter=D,e.defineWrapGetter=H,e.forwardMethodsToWrapper=x,e.isIdentifierName=d,e.isWrapper=_,e.isWrapperFor=b,e.mixin=r,e.nativePrototypeTable=I,e.oneOf=i,e.registerObject=y,e.registerWrapper=v,e.rewrap=j,e.setWrapper=L,e.unsafeUnwrap=O,e.unwrap=M,e.unwrapIfNeeded=N,e.wrap=T,e.wrapIfNeeded=C,e.wrappers=P}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e,t,n){return{index:e,removed:t,addedCount:n}}function n(){}var r=0,o=1,i=2,a=3;n.prototype={calcEditDistances:function(e,t,n,r,o,i){for(var a=i-o+1,s=n-t+1,c=new Array(a),l=0;a>l;l++)c[l]=new Array(s),c[l][0]=l;for(var u=0;s>u;u++)c[0][u]=u;for(var l=1;a>l;l++)for(var u=1;s>u;u++)if(this.equals(e[t+u-1],r[o+l-1]))c[l][u]=c[l-1][u-1];else{var d=c[l-1][u]+1,p=c[l][u-1]+1;c[l][u]=p>d?d:p}return c},spliceOperationsFromEditDistances:function(e){for(var t=e.length-1,n=e[0].length-1,s=e[t][n],c=[];t>0||n>0;)if(0!=t)if(0!=n){var l,u=e[t-1][n-1],d=e[t-1][n],p=e[t][n-1];l=p>d?u>d?d:u:u>p?p:u,l==u?(u==s?c.push(r):(c.push(o),s=u),t--,n--):l==d?(c.push(a),t--,s=d):(c.push(i),n--,s=p)}else c.push(a),t--;else c.push(i),n--;return c.reverse(),c},calcSplices:function(e,n,s,c,l,u){var d=0,p=0,h=Math.min(s-n,u-l);if(0==n&&0==l&&(d=this.sharedPrefix(e,c,h)),s==e.length&&u==c.length&&(p=this.sharedSuffix(e,c,h-d)),n+=d,l+=d,s-=p,u-=p,s-n==0&&u-l==0)return[];if(n==s){for(var f=t(n,[],0);u>l;)f.removed.push(c[l++]);return[f]}if(l==u)return[t(n,[],s-n)];for(var m=this.spliceOperationsFromEditDistances(this.calcEditDistances(e,n,s,c,l,u)),f=void 0,w=[],v=n,g=l,b=0;b<m.length;b++)switch(m[b]){case r:f&&(w.push(f),f=void 0),v++,g++;break;case o:f||(f=t(v,[],0)),f.addedCount++,v++,f.removed.push(c[g]),g++;break;case i:f||(f=t(v,[],0)),f.addedCount++,v++;break;case a:f||(f=t(v,[],0)),f.removed.push(c[g]),g++}return f&&w.push(f),w},sharedPrefix:function(e,t,n){for(var r=0;n>r;r++)if(!this.equals(e[r],t[r]))return r;return n},sharedSuffix:function(e,t,n){for(var r=e.length,o=t.length,i=0;n>i&&this.equals(e[--r],t[--o]);)i++;return i},calculateSplices:function(e,t){return this.calcSplices(e,0,e.length,t,0,t.length)},equals:function(e,t){return e===t}},e.ArraySplice=n}(window.ShadowDOMPolyfill),function(e){"use strict";function t(){a=!1;var e=i.slice(0);i=[];for(var t=0;t<e.length;t++)e[t]()}function n(e){i.push(e),a||(a=!0,r(t,0))}var r,o=window.MutationObserver,i=[],a=!1;if(o){var s=1,c=new o(t),l=document.createTextNode(s);c.observe(l,{characterData:!0}),r=function(){s=(s+1)%2,l.data=s}}else r=window.setTimeout;e.setEndOfMicrotask=n}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){e.scheduled_||(e.scheduled_=!0,f.push(e),m||(u(n),m=!0))}function n(){for(m=!1;f.length;){var e=f;f=[],e.sort(function(e,t){return e.uid_-t.uid_});for(var t=0;t<e.length;t++){var n=e[t];n.scheduled_=!1;var r=n.takeRecords();i(n),r.length&&n.callback_(r,n)}}}function r(e,t){this.type=e,this.target=t,this.addedNodes=new p.NodeList,this.removedNodes=new p.NodeList,this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function o(e,t){for(;e;e=e.parentNode){var n=h.get(e);if(n)for(var r=0;r<n.length;r++){var o=n[r];o.options.subtree&&o.addTransientObserver(t)}}}function i(e){for(var t=0;t<e.nodes_.length;t++){var n=e.nodes_[t],r=h.get(n);if(!r)return;for(var o=0;o<r.length;o++){var i=r[o];i.observer===e&&i.removeTransientObservers()}}}function a(e,n,o){for(var i=Object.create(null),a=Object.create(null),s=e;s;s=s.parentNode){var c=h.get(s);if(c)for(var l=0;l<c.length;l++){var u=c[l],d=u.options;if((s===e||d.subtree)&&("attributes"!==n||d.attributes)&&("attributes"!==n||!d.attributeFilter||null===o.namespace&&-1!==d.attributeFilter.indexOf(o.name))&&("characterData"!==n||d.characterData)&&("childList"!==n||d.childList)){var p=u.observer;i[p.uid_]=p,("attributes"===n&&d.attributeOldValue||"characterData"===n&&d.characterDataOldValue)&&(a[p.uid_]=o.oldValue)}}}for(var f in i){var p=i[f],m=new r(n,e);"name"in o&&"namespace"in o&&(m.attributeName=o.name,m.attributeNamespace=o.namespace),o.addedNodes&&(m.addedNodes=o.addedNodes),o.removedNodes&&(m.removedNodes=o.removedNodes),o.previousSibling&&(m.previousSibling=o.previousSibling),o.nextSibling&&(m.nextSibling=o.nextSibling),void 0!==a[f]&&(m.oldValue=a[f]),t(p),p.records_.push(m)}}function s(e){if(this.childList=!!e.childList,this.subtree=!!e.subtree,"attributes"in e||!("attributeOldValue"in e||"attributeFilter"in e)?this.attributes=!!e.attributes:this.attributes=!0,"characterDataOldValue"in e&&!("characterData"in e)?this.characterData=!0:this.characterData=!!e.characterData,!this.attributes&&(e.attributeOldValue||"attributeFilter"in e)||!this.characterData&&e.characterDataOldValue)throw new TypeError;if(this.characterData=!!e.characterData,this.attributeOldValue=!!e.attributeOldValue,this.characterDataOldValue=!!e.characterDataOldValue,"attributeFilter"in e){if(null==e.attributeFilter||"object"!=typeof e.attributeFilter)throw new TypeError;this.attributeFilter=w.call(e.attributeFilter)}else this.attributeFilter=null}function c(e){this.callback_=e,this.nodes_=[],this.records_=[],this.uid_=++v,this.scheduled_=!1}function l(e,t,n){this.observer=e,this.target=t,this.options=n,this.transientObservedNodes=[]}var u=e.setEndOfMicrotask,d=e.wrapIfNeeded,p=e.wrappers,h=new WeakMap,f=[],m=!1,w=Array.prototype.slice,v=0;c.prototype={constructor:c,observe:function(e,t){e=d(e);var n,r=new s(t),o=h.get(e);o||h.set(e,o=[]);for(var i=0;i<o.length;i++)o[i].observer===this&&(n=o[i],n.removeTransientObservers(),n.options=r);n||(n=new l(this,e,r),o.push(n),this.nodes_.push(e))},disconnect:function(){this.nodes_.forEach(function(e){for(var t=h.get(e),n=0;n<t.length;n++){var r=t[n];if(r.observer===this){t.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var e=this.records_;return this.records_=[],e}},l.prototype={addTransientObserver:function(e){if(e!==this.target){t(this.observer),this.transientObservedNodes.push(e);var n=h.get(e);n||h.set(e,n=[]),n.push(this)}},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[];for(var t=0;t<e.length;t++)for(var n=e[t],r=h.get(n),o=0;o<r.length;o++)if(r[o]===this){r.splice(o,1);break}}},e.enqueueMutation=a,e.registerTransientObservers=o,e.wrappers.MutationObserver=c,e.wrappers.MutationRecord=r}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e,t){this.root=e,this.parent=t}function n(e,t){if(e.treeScope_!==t){e.treeScope_=t;for(var r=e.shadowRoot;r;r=r.olderShadowRoot)r.treeScope_.parent=t;for(var o=e.firstChild;o;o=o.nextSibling)n(o,t)}}function r(n){if(n instanceof e.wrappers.Window,n.treeScope_)return n.treeScope_;var o,i=n.parentNode;return o=i?r(i):new t(n,null),n.treeScope_=o}t.prototype={get renderer(){return this.root instanceof e.wrappers.ShadowRoot?e.getRendererForHost(this.root.host):null},contains:function(e){for(;e;e=e.parent)if(e===this)return!0;return!1}},e.TreeScope=t,e.getTreeScope=r,e.setTreeScope=n}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){return e instanceof G.ShadowRoot}function n(e){return A(e).root}function r(e,r){var s=[],c=e;for(s.push(c);c;){var l=a(c);if(l&&l.length>0){for(var u=0;u<l.length;u++){var p=l[u];if(i(p)){var h=n(p),f=h.olderShadowRoot;f&&s.push(f)}s.push(p)}c=l[l.length-1]}else if(t(c)){if(d(e,c)&&o(r))break;c=c.host,s.push(c)}else c=c.parentNode,c&&s.push(c)}return s}function o(e){if(!e)return!1;switch(e.type){case"abort":case"error":case"select":case"change":case"load":case"reset":case"resize":case"scroll":case"selectstart":return!0}return!1}function i(e){return e instanceof HTMLShadowElement}function a(t){return e.getDestinationInsertionPoints(t)}function s(e,t){if(0===e.length)return t;t instanceof G.Window&&(t=t.document);for(var n=A(t),r=e[0],o=A(r),i=l(n,o),a=0;a<e.length;a++){var s=e[a];if(A(s)===i)return s}return e[e.length-1]}function c(e){for(var t=[];e;e=e.parent)t.push(e);return t}function l(e,t){for(var n=c(e),r=c(t),o=null;n.length>0&&r.length>0;){var i=n.pop(),a=r.pop();if(i!==a)break;o=i}return o}function u(e,t,n){t instanceof G.Window&&(t=t.document);var o,i=A(t),a=A(n),s=r(n,e),o=l(i,a);o||(o=a.root);for(var c=o;c;c=c.parent)for(var u=0;u<s.length;u++){var d=s[u];if(A(d)===c)return d}return null}function d(e,t){return A(e)===A(t)}function p(e){if(!K.get(e)&&(K.set(e,!0),f(V(e),V(e.target)),P)){var t=P;throw P=null,t}}function h(e){switch(e.type){case"load":case"beforeunload":case"unload":return!0}return!1}function f(t,n){if($.get(t))throw new Error("InvalidStateError");$.set(t,!0),e.renderAllPending();var o,i,a;if(h(t)&&!t.bubbles){var s=n;s instanceof G.Document&&(a=s.defaultView)&&(i=s,o=[])}if(!o)if(n instanceof G.Window)a=n,o=[];else if(o=r(n,t),!h(t)){var s=o[o.length-1];s instanceof G.Document&&(a=s.defaultView)}return ne.set(t,o),m(t,o,a,i)&&w(t,o,a,i)&&v(t,o,a,i),J.set(t,re),Y["delete"](t,null),$["delete"](t),t.defaultPrevented}function m(e,t,n,r){var o=oe;if(n&&!g(n,e,o,t,r))return!1;for(var i=t.length-1;i>0;i--)if(!g(t[i],e,o,t,r))return!1;return!0}function w(e,t,n,r){var o=ie,i=t[0]||n;return g(i,e,o,t,r)}function v(e,t,n,r){for(var o=ae,i=1;i<t.length;i++)if(!g(t[i],e,o,t,r))return;n&&t.length>0&&g(n,e,o,t,r)}function g(e,t,n,r,o){var i=z.get(e);if(!i)return!0;var a=o||s(r,e);if(a===e){if(n===oe)return!0;n===ae&&(n=ie)}else if(n===ae&&!t.bubbles)return!0;if("relatedTarget"in t){var c=B(t),l=c.relatedTarget;if(l){if(l instanceof Object&&l.addEventListener){var d=V(l),p=u(t,e,d);if(p===a)return!0}else p=null;Z.set(t,p)}}J.set(t,n);var h=t.type,f=!1;X.set(t,a),Y.set(t,e),i.depth++;for(var m=0,w=i.length;w>m;m++){var v=i[m];if(v.removed)f=!0;else if(!(v.type!==h||!v.capture&&n===oe||v.capture&&n===ae))try{if("function"==typeof v.handler?v.handler.call(e,t):v.handler.handleEvent(t),ee.get(t))return!1}catch(g){P||(P=g)}}if(i.depth--,f&&0===i.depth){var b=i.slice();i.length=0;for(var m=0;m<b.length;m++)b[m].removed||i.push(b[m])}return!Q.get(t)}function b(e,t,n){this.type=e,this.handler=t,this.capture=Boolean(n)}function y(e,t){if(!(e instanceof se))return V(T(se,"Event",e,t));var n=e;return ge||"beforeunload"!==n.type||this instanceof M?void U(n,this):new M(n)}function E(e){return e&&e.relatedTarget?Object.create(e,{relatedTarget:{value:B(e.relatedTarget)}}):e}function _(e,t,n){var r=window[e],o=function(t,n){return t instanceof r?void U(t,this):V(T(r,e,t,n))};if(o.prototype=Object.create(t.prototype),n&&W(o.prototype,n),r)try{F(r,o,new r("temp"))}catch(i){F(r,o,document.createEvent(e))}return o}function S(e,t){return function(){arguments[t]=B(arguments[t]);var n=B(this);n[e].apply(n,arguments)}}function T(e,t,n,r){if(we)return new e(n,E(r));var o=B(document.createEvent(t)),i=me[t],a=[n];return Object.keys(i).forEach(function(e){var t=null!=r&&e in r?r[e]:i[e];"relatedTarget"===e&&(t=B(t)),a.push(t)}),o["init"+t].apply(o,a),o}function M(e){y.call(this,e)}function O(e){return"function"==typeof e?!0:e&&e.handleEvent}function L(e){switch(e){case"DOMAttrModified":case"DOMAttributeNameChanged":case"DOMCharacterDataModified":case"DOMElementNameChanged":case"DOMNodeInserted":case"DOMNodeInsertedIntoDocument":case"DOMNodeRemoved":case"DOMNodeRemovedFromDocument":case"DOMSubtreeModified":return!0}return!1}function N(e){U(e,this)}function C(e){return e instanceof G.ShadowRoot&&(e=e.host),B(e)}function j(e,t){var n=z.get(e);if(n)for(var r=0;r<n.length;r++)if(!n[r].removed&&n[r].type===t)return!0;return!1}function D(e,t){for(var n=B(e);n;n=n.parentNode)if(j(V(n),t))return!0;return!1}function H(e){k(e,ye)}function x(t,n,o,i){e.renderAllPending();var a=V(Ee.call(q(n),o,i));if(!a)return null;var c=r(a,null),l=c.lastIndexOf(t);return-1==l?null:(c=c.slice(0,l),s(c,t))}function R(e){return function(){var t=te.get(this);return t&&t[e]&&t[e].value||null}}function I(e){var t=e.slice(2);return function(n){var r=te.get(this);r||(r=Object.create(null),te.set(this,r));var o=r[e];if(o&&this.removeEventListener(t,o.wrapped,!1),"function"==typeof n){var i=function(t){var r=n.call(this,t);r===!1?t.preventDefault():"onbeforeunload"===e&&"string"==typeof r&&(t.returnValue=r)};this.addEventListener(t,i,!1),r[e]={value:n,wrapped:i}}}}var P,k=e.forwardMethodsToWrapper,A=e.getTreeScope,W=e.mixin,F=e.registerWrapper,U=e.setWrapper,q=e.unsafeUnwrap,B=e.unwrap,V=e.wrap,G=e.wrappers,z=(new WeakMap,new WeakMap),K=new WeakMap,$=new WeakMap,X=new WeakMap,Y=new WeakMap,Z=new WeakMap,J=new WeakMap,Q=new WeakMap,ee=new WeakMap,te=new WeakMap,ne=new WeakMap,re=0,oe=1,ie=2,ae=3;b.prototype={equals:function(e){return this.handler===e.handler&&this.type===e.type&&this.capture===e.capture},get removed(){return null===this.handler},remove:function(){this.handler=null}};var se=window.Event;se.prototype.polymerBlackList_={returnValue:!0,keyLocation:!0},y.prototype={get target(){return X.get(this)},get currentTarget(){return Y.get(this)},get eventPhase(){return J.get(this)},get path(){var e=ne.get(this);return e?e.slice():[]},stopPropagation:function(){Q.set(this,!0)},stopImmediatePropagation:function(){Q.set(this,!0),ee.set(this,!0)}},F(se,y,document.createEvent("Event"));var ce=_("UIEvent",y),le=_("CustomEvent",y),ue={get relatedTarget(){var e=Z.get(this);return void 0!==e?e:V(B(this).relatedTarget)}},de=W({initMouseEvent:S("initMouseEvent",14)},ue),pe=W({initFocusEvent:S("initFocusEvent",5)},ue),he=_("MouseEvent",ce,de),fe=_("FocusEvent",ce,pe),me=Object.create(null),we=function(){try{new window.FocusEvent("focus")}catch(e){return!1}return!0}();if(!we){var ve=function(e,t,n){if(n){var r=me[n];t=W(W({},r),t)}me[e]=t};ve("Event",{bubbles:!1,cancelable:!1}),ve("CustomEvent",{detail:null},"Event"),ve("UIEvent",{view:null,detail:0},"Event"),ve("MouseEvent",{screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0,relatedTarget:null},"UIEvent"),ve("FocusEvent",{relatedTarget:null},"UIEvent")}var ge=window.BeforeUnloadEvent;M.prototype=Object.create(y.prototype),W(M.prototype,{get returnValue(){return q(this).returnValue},set returnValue(e){q(this).returnValue=e}}),ge&&F(ge,M);var be=window.EventTarget,ye=["addEventListener","removeEventListener","dispatchEvent"];[Node,Window].forEach(function(e){var t=e.prototype;ye.forEach(function(e){Object.defineProperty(t,e+"_",{value:t[e]})})}),N.prototype={addEventListener:function(e,t,n){if(O(t)&&!L(e)){var r=new b(e,t,n),o=z.get(this);if(o){for(var i=0;i<o.length;i++)if(r.equals(o[i]))return}else o=[],o.depth=0,z.set(this,o);o.push(r);var a=C(this);a.addEventListener_(e,p,!0)}},removeEventListener:function(e,t,n){n=Boolean(n);var r=z.get(this);if(r){for(var o=0,i=!1,a=0;a<r.length;a++)r[a].type===e&&r[a].capture===n&&(o++,r[a].handler===t&&(i=!0,r[a].remove()));if(i&&1===o){var s=C(this);s.removeEventListener_(e,p,!0)}}},dispatchEvent:function(t){var n=B(t),r=n.type;K.set(n,!1),e.renderAllPending();var o;D(this,r)||(o=function(){},this.addEventListener(r,o,!0));try{return B(this).dispatchEvent_(n)}finally{o&&this.removeEventListener(r,o,!0)}}},be&&F(be,N);var Ee=document.elementFromPoint;e.elementFromPoint=x,e.getEventHandlerGetter=R,e.getEventHandlerSetter=I,e.wrapEventTargetMethods=H,e.wrappers.BeforeUnloadEvent=M,e.wrappers.CustomEvent=le,e.wrappers.Event=y,e.wrappers.EventTarget=N,e.wrappers.FocusEvent=fe,e.wrappers.MouseEvent=he,e.wrappers.UIEvent=ce}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e,t){Object.defineProperty(e,t,m)}function n(e){l(e,this)}function r(){this.length=0,t(this,"length")}function o(e){for(var t=new r,o=0;o<e.length;o++)t[o]=new n(e[o]);return t.length=o,t}function i(e){a.call(this,e)}var a=e.wrappers.UIEvent,s=e.mixin,c=e.registerWrapper,l=e.setWrapper,u=e.unsafeUnwrap,d=e.wrap,p=window.TouchEvent;if(p){var h;try{h=document.createEvent("TouchEvent")}catch(f){return}var m={enumerable:!1};n.prototype={get target(){return d(u(this).target)}};var w={configurable:!0,enumerable:!0,get:null};["clientX","clientY","screenX","screenY","pageX","pageY","identifier","webkitRadiusX","webkitRadiusY","webkitRotationAngle","webkitForce"].forEach(function(e){w.get=function(){return u(this)[e]},Object.defineProperty(n.prototype,e,w)}),r.prototype={item:function(e){return this[e]}},i.prototype=Object.create(a.prototype),s(i.prototype,{get touches(){return o(u(this).touches)},get targetTouches(){return o(u(this).targetTouches)},get changedTouches(){return o(u(this).changedTouches)},initTouchEvent:function(){throw new Error("Not implemented")}}),c(p,i,h),e.wrappers.Touch=n,e.wrappers.TouchEvent=i,e.wrappers.TouchList=r}}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e,t){Object.defineProperty(e,t,s)}function n(){this.length=0,t(this,"length")}function r(e){if(null==e)return e;for(var t=new n,r=0,o=e.length;o>r;r++)t[r]=a(e[r]);return t.length=o,t}function o(e,t){e.prototype[t]=function(){return r(i(this)[t].apply(i(this),arguments))}}var i=e.unsafeUnwrap,a=e.wrap,s={enumerable:!1};n.prototype={item:function(e){return this[e]}},t(n.prototype,"item"),e.wrappers.NodeList=n,e.addWrapNodeListMethod=o,e.wrapNodeList=r}(window.ShadowDOMPolyfill),function(e){"use strict";e.wrapHTMLCollection=e.wrapNodeList,e.wrappers.HTMLCollection=e.wrappers.NodeList}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){O(e instanceof _)}function n(e){var t=new T;return t[0]=e,t.length=1,t}function r(e,t,n){N(t,"childList",{removedNodes:n,previousSibling:e.previousSibling,nextSibling:e.nextSibling})}function o(e,t){N(e,"childList",{removedNodes:t})}function i(e,t,r,o){if(e instanceof DocumentFragment){var i=s(e);U=!0;for(var a=i.length-1;a>=0;a--)e.removeChild(i[a]),i[a].parentNode_=t;U=!1;for(var a=0;a<i.length;a++)i[a].previousSibling_=i[a-1]||r,i[a].nextSibling_=i[a+1]||o;return r&&(r.nextSibling_=i[0]),o&&(o.previousSibling_=i[i.length-1]),i}var i=n(e),c=e.parentNode;return c&&c.removeChild(e),e.parentNode_=t,e.previousSibling_=r,e.nextSibling_=o,r&&(r.nextSibling_=e),o&&(o.previousSibling_=e),i}function a(e){if(e instanceof DocumentFragment)return s(e);var t=n(e),o=e.parentNode;return o&&r(e,o,t),t}function s(e){for(var t=new T,n=0,r=e.firstChild;r;r=r.nextSibling)t[n++]=r;return t.length=n,o(e,t),t}function c(e){return e}function l(e,t){R(e,t),e.nodeIsInserted_()}function u(e,t){for(var n=C(t),r=0;r<e.length;r++)l(e[r],n)}function d(e){R(e,new M(e,null))}function p(e){for(var t=0;t<e.length;t++)d(e[t])}function h(e,t){var n=e.nodeType===_.DOCUMENT_NODE?e:e.ownerDocument;n!==t.ownerDocument&&n.adoptNode(t)}function f(t,n){if(n.length){var r=t.ownerDocument;if(r!==n[0].ownerDocument)for(var o=0;o<n.length;o++)e.adoptNodeNoRemove(n[o],r)}}function m(e,t){f(e,t);var n=t.length;if(1===n)return P(t[0]);for(var r=P(e.ownerDocument.createDocumentFragment()),o=0;n>o;o++)r.appendChild(P(t[o]));return r}function w(e){if(void 0!==e.firstChild_)for(var t=e.firstChild_;t;){var n=t;t=t.nextSibling_,n.parentNode_=n.previousSibling_=n.nextSibling_=void 0}e.firstChild_=e.lastChild_=void 0}function v(e){if(e.invalidateShadowRenderer()){for(var t=e.firstChild;t;){O(t.parentNode===e);var n=t.nextSibling,r=P(t),o=r.parentNode;o&&X.call(o,r),t.previousSibling_=t.nextSibling_=t.parentNode_=null,t=n}e.firstChild_=e.lastChild_=null}else for(var n,i=P(e),a=i.firstChild;a;)n=a.nextSibling,X.call(i,a),a=n}function g(e){var t=e.parentNode;return t&&t.invalidateShadowRenderer()}function b(e){for(var t,n=0;n<e.length;n++)t=e[n],t.parentNode.removeChild(t)}function y(e,t,n){var r;if(r=A(n?q.call(n,I(e),!1):B.call(I(e),!1)),t){for(var o=e.firstChild;o;o=o.nextSibling)r.appendChild(y(o,!0,n));if(e instanceof F.HTMLTemplateElement)for(var i=r.content,o=e.content.firstChild;o;o=o.nextSibling)i.appendChild(y(o,!0,n))}return r}function E(e,t){if(!t||C(e)!==C(t))return!1;for(var n=t;n;n=n.parentNode)if(n===e)return!0;return!1}function _(e){O(e instanceof V),S.call(this,e),this.parentNode_=void 0,this.firstChild_=void 0,this.lastChild_=void 0,this.nextSibling_=void 0,this.previousSibling_=void 0,this.treeScope_=void 0}var S=e.wrappers.EventTarget,T=e.wrappers.NodeList,M=e.TreeScope,O=e.assert,L=e.defineWrapGetter,N=e.enqueueMutation,C=e.getTreeScope,j=e.isWrapper,D=e.mixin,H=e.registerTransientObservers,x=e.registerWrapper,R=e.setTreeScope,I=e.unsafeUnwrap,P=e.unwrap,k=e.unwrapIfNeeded,A=e.wrap,W=e.wrapIfNeeded,F=e.wrappers,U=!1,q=document.importNode,B=window.Node.prototype.cloneNode,V=window.Node,G=window.DocumentFragment,z=(V.prototype.appendChild,V.prototype.compareDocumentPosition),K=V.prototype.isEqualNode,$=V.prototype.insertBefore,X=V.prototype.removeChild,Y=V.prototype.replaceChild,Z=/Trident|Edge/.test(navigator.userAgent),J=Z?function(e,t){try{X.call(e,t)}catch(n){if(!(e instanceof G))throw n}}:function(e,t){X.call(e,t)};_.prototype=Object.create(S.prototype),D(_.prototype,{appendChild:function(e){return this.insertBefore(e,null)},insertBefore:function(e,n){t(e);var r;n?j(n)?r=P(n):(r=n,n=A(r)):(n=null,r=null),n&&O(n.parentNode===this);var o,s=n?n.previousSibling:this.lastChild,c=!this.invalidateShadowRenderer()&&!g(e);if(o=c?a(e):i(e,this,s,n),c)h(this,e),w(this),$.call(I(this),P(e),r);else{s||(this.firstChild_=o[0]),n||(this.lastChild_=o[o.length-1],void 0===this.firstChild_&&(this.firstChild_=this.firstChild));var l=r?r.parentNode:I(this);l?$.call(l,m(this,o),r):f(this,o)}return N(this,"childList",{addedNodes:o,nextSibling:n,previousSibling:s}),u(o,this),e},removeChild:function(e){if(t(e),e.parentNode!==this){for(var r=!1,o=(this.childNodes,this.firstChild);o;o=o.nextSibling)if(o===e){r=!0;break}if(!r)throw new Error("NotFoundError")}var i=P(e),a=e.nextSibling,s=e.previousSibling;if(this.invalidateShadowRenderer()){var c=this.firstChild,l=this.lastChild,u=i.parentNode;u&&J(u,i),c===e&&(this.firstChild_=a),l===e&&(this.lastChild_=s),s&&(s.nextSibling_=a),a&&(a.previousSibling_=s),e.previousSibling_=e.nextSibling_=e.parentNode_=void 0}else w(this),J(I(this),i);return U||N(this,"childList",{removedNodes:n(e),nextSibling:a,previousSibling:s}),H(this,e),e},replaceChild:function(e,r){t(e);var o;if(j(r)?o=P(r):(o=r,r=A(o)),r.parentNode!==this)throw new Error("NotFoundError");var s,c=r.nextSibling,l=r.previousSibling,p=!this.invalidateShadowRenderer()&&!g(e);return p?s=a(e):(c===e&&(c=e.nextSibling),s=i(e,this,l,c)),p?(h(this,e),w(this),Y.call(I(this),P(e),o)):(this.firstChild===r&&(this.firstChild_=s[0]),this.lastChild===r&&(this.lastChild_=s[s.length-1]),r.previousSibling_=r.nextSibling_=r.parentNode_=void 0,o.parentNode&&Y.call(o.parentNode,m(this,s),o)),N(this,"childList",{addedNodes:s,removedNodes:n(r),nextSibling:c,previousSibling:l}),d(r),u(s,this),r},nodeIsInserted_:function(){for(var e=this.firstChild;e;e=e.nextSibling)e.nodeIsInserted_()},hasChildNodes:function(){return null!==this.firstChild},get parentNode(){return void 0!==this.parentNode_?this.parentNode_:A(I(this).parentNode)},get firstChild(){return void 0!==this.firstChild_?this.firstChild_:A(I(this).firstChild)},get lastChild(){return void 0!==this.lastChild_?this.lastChild_:A(I(this).lastChild)},get nextSibling(){return void 0!==this.nextSibling_?this.nextSibling_:A(I(this).nextSibling)},get previousSibling(){return void 0!==this.previousSibling_?this.previousSibling_:A(I(this).previousSibling)},get parentElement(){for(var e=this.parentNode;e&&e.nodeType!==_.ELEMENT_NODE;)e=e.parentNode;return e},get textContent(){for(var e="",t=this.firstChild;t;t=t.nextSibling)t.nodeType!=_.COMMENT_NODE&&(e+=t.textContent);return e},set textContent(e){null==e&&(e="");var t=c(this.childNodes);if(this.invalidateShadowRenderer()){if(v(this),""!==e){var n=I(this).ownerDocument.createTextNode(e);this.appendChild(n)}}else w(this),I(this).textContent=e;var r=c(this.childNodes);N(this,"childList",{addedNodes:r,removedNodes:t}),p(t),u(r,this)},get childNodes(){for(var e=new T,t=0,n=this.firstChild;n;n=n.nextSibling)e[t++]=n;return e.length=t,e},cloneNode:function(e){return y(this,e)},contains:function(e){return E(this,W(e))},compareDocumentPosition:function(e){return z.call(I(this),k(e))},isEqualNode:function(e){return K.call(I(this),k(e))},normalize:function(){for(var e,t,n=c(this.childNodes),r=[],o="",i=0;i<n.length;i++)t=n[i],t.nodeType===_.TEXT_NODE?e||t.data.length?e?(o+=t.data,r.push(t)):e=t:this.removeChild(t):(e&&r.length&&(e.data+=o,b(r)),r=[],o="",e=null,t.childNodes.length&&t.normalize());e&&r.length&&(e.data+=o,b(r))}}),L(_,"ownerDocument"),x(V,_,document.createDocumentFragment()),delete _.prototype.querySelector,delete _.prototype.querySelectorAll,_.prototype=D(Object.create(S.prototype),_.prototype),e.cloneNode=y,e.nodeWasAdded=l,e.nodeWasRemoved=d,e.nodesWereAdded=u,e.nodesWereRemoved=p,e.originalInsertBefore=$,e.originalRemoveChild=X,e.snapshotNodeList=c,e.wrappers.Node=_}(window.ShadowDOMPolyfill),function(e){"use strict";function t(t,n,r,o){for(var i=null,a=null,s=0,c=t.length;c>s;s++)i=b(t[s]),!o&&(a=v(i).root)&&a instanceof e.wrappers.ShadowRoot||(r[n++]=i);return n}function n(e){return String(e).replace(/\/deep\/|::shadow|>>>/g," ")}function r(e){return String(e).replace(/:host\(([^\s]+)\)/g,"$1").replace(/([^\s]):host/g,"$1").replace(":host","*").replace(/\^|\/shadow\/|\/shadow-deep\/|::shadow|\/deep\/|::content|>>>/g," ")}function o(e,t){for(var n,r=e.firstElementChild;r;){if(r.matches(t))return r;if(n=o(r,t))return n;r=r.nextElementSibling}return null}function i(e,t){return e.matches(t)}function a(e,t,n){var r=e.localName;return r===t||r===n&&e.namespaceURI===j}function s(){return!0}function c(e,t,n){return e.localName===n}function l(e,t){return e.namespaceURI===t}function u(e,t,n){return e.namespaceURI===t&&e.localName===n}function d(e,t,n,r,o,i){for(var a=e.firstElementChild;a;)r(a,o,i)&&(n[t++]=a),t=d(a,t,n,r,o,i),a=a.nextElementSibling;return t}function p(n,r,o,i,a){var s,c=g(this),l=v(this).root;if(l instanceof e.wrappers.ShadowRoot)return d(this,r,o,n,i,null);if(c instanceof N)s=S.call(c,i);else{if(!(c instanceof C))return d(this,r,o,n,i,null);s=_.call(c,i)}return t(s,r,o,a)}function h(n,r,o,i,a){var s,c=g(this),l=v(this).root;if(l instanceof e.wrappers.ShadowRoot)return d(this,r,o,n,i,a);if(c instanceof N)s=M.call(c,i,a);else{if(!(c instanceof C))return d(this,r,o,n,i,a);s=T.call(c,i,a)}return t(s,r,o,!1)}function f(n,r,o,i,a){var s,c=g(this),l=v(this).root;if(l instanceof e.wrappers.ShadowRoot)return d(this,r,o,n,i,a);if(c instanceof N)s=L.call(c,i,a);else{if(!(c instanceof C))return d(this,r,o,n,i,a);s=O.call(c,i,a)}return t(s,r,o,!1)}var m=e.wrappers.HTMLCollection,w=e.wrappers.NodeList,v=e.getTreeScope,g=e.unsafeUnwrap,b=e.wrap,y=document.querySelector,E=document.documentElement.querySelector,_=document.querySelectorAll,S=document.documentElement.querySelectorAll,T=document.getElementsByTagName,M=document.documentElement.getElementsByTagName,O=document.getElementsByTagNameNS,L=document.documentElement.getElementsByTagNameNS,N=window.Element,C=window.HTMLDocument||window.Document,j="http://www.w3.org/1999/xhtml",D={querySelector:function(t){var r=n(t),i=r!==t;t=r;var a,s=g(this),c=v(this).root;if(c instanceof e.wrappers.ShadowRoot)return o(this,t);if(s instanceof N)a=b(E.call(s,t));else{
if(!(s instanceof C))return o(this,t);a=b(y.call(s,t))}return a&&!i&&(c=v(a).root)&&c instanceof e.wrappers.ShadowRoot?o(this,t):a},querySelectorAll:function(e){var t=n(e),r=t!==e;e=t;var o=new w;return o.length=p.call(this,i,0,o,e,r),o}},H={matches:function(t){return t=r(t),e.originalMatches.call(g(this),t)}},x={getElementsByTagName:function(e){var t=new m,n="*"===e?s:a;return t.length=h.call(this,n,0,t,e,e.toLowerCase()),t},getElementsByClassName:function(e){return this.querySelectorAll("."+e)},getElementsByTagNameNS:function(e,t){var n=new m,r=null;return r="*"===e?"*"===t?s:c:"*"===t?l:u,n.length=f.call(this,r,0,n,e||null,t),n}};e.GetElementsByInterface=x,e.SelectorsInterface=D,e.MatchesInterface=H}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){for(;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.nextSibling;return e}function n(e){for(;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.previousSibling;return e}var r=e.wrappers.NodeList,o={get firstElementChild(){return t(this.firstChild)},get lastElementChild(){return n(this.lastChild)},get childElementCount(){for(var e=0,t=this.firstElementChild;t;t=t.nextElementSibling)e++;return e},get children(){for(var e=new r,t=0,n=this.firstElementChild;n;n=n.nextElementSibling)e[t++]=n;return e.length=t,e},remove:function(){var e=this.parentNode;e&&e.removeChild(this)}},i={get nextElementSibling(){return t(this.nextSibling)},get previousElementSibling(){return n(this.previousSibling)}},a={getElementById:function(e){return/[ \t\n\r\f]/.test(e)?null:this.querySelector('[id="'+e+'"]')}};e.ChildNodeInterface=i,e.NonElementParentNodeInterface=a,e.ParentNodeInterface=o}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){r.call(this,e)}var n=e.ChildNodeInterface,r=e.wrappers.Node,o=e.enqueueMutation,i=e.mixin,a=e.registerWrapper,s=e.unsafeUnwrap,c=window.CharacterData;t.prototype=Object.create(r.prototype),i(t.prototype,{get nodeValue(){return this.data},set nodeValue(e){this.data=e},get textContent(){return this.data},set textContent(e){this.data=e},get data(){return s(this).data},set data(e){var t=s(this).data;o(this,"characterData",{oldValue:t}),s(this).data=e}}),i(t.prototype,n),a(c,t,document.createTextNode("")),e.wrappers.CharacterData=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){return e>>>0}function n(e){r.call(this,e)}var r=e.wrappers.CharacterData,o=(e.enqueueMutation,e.mixin),i=e.registerWrapper,a=window.Text;n.prototype=Object.create(r.prototype),o(n.prototype,{splitText:function(e){e=t(e);var n=this.data;if(e>n.length)throw new Error("IndexSizeError");var r=n.slice(0,e),o=n.slice(e);this.data=r;var i=this.ownerDocument.createTextNode(o);return this.parentNode&&this.parentNode.insertBefore(i,this.nextSibling),i}}),i(a,n,document.createTextNode("")),e.wrappers.Text=n}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){return i(e).getAttribute("class")}function n(e,t){a(e,"attributes",{name:"class",namespace:null,oldValue:t})}function r(t){e.invalidateRendererBasedOnAttribute(t,"class")}function o(e,o,i){var a=e.ownerElement_;if(null==a)return o.apply(e,i);var s=t(a),c=o.apply(e,i);return t(a)!==s&&(n(a,s),r(a)),c}if(!window.DOMTokenList)return void console.warn("Missing DOMTokenList prototype, please include a compatible classList polyfill such as http://goo.gl/uTcepH.");var i=e.unsafeUnwrap,a=e.enqueueMutation,s=DOMTokenList.prototype.add;DOMTokenList.prototype.add=function(){o(this,s,arguments)};var c=DOMTokenList.prototype.remove;DOMTokenList.prototype.remove=function(){o(this,c,arguments)};var l=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(){return o(this,l,arguments)}}(window.ShadowDOMPolyfill),function(e){"use strict";function t(t,n){var r=t.parentNode;if(r&&r.shadowRoot){var o=e.getRendererForHost(r);o.dependsOnAttribute(n)&&o.invalidate()}}function n(e,t,n){u(e,"attributes",{name:t,namespace:null,oldValue:n})}function r(e){a.call(this,e)}var o=e.ChildNodeInterface,i=e.GetElementsByInterface,a=e.wrappers.Node,s=e.ParentNodeInterface,c=e.SelectorsInterface,l=e.MatchesInterface,u=(e.addWrapNodeListMethod,e.enqueueMutation),d=e.mixin,p=(e.oneOf,e.registerWrapper),h=e.unsafeUnwrap,f=e.wrappers,m=window.Element,w=["matches","mozMatchesSelector","msMatchesSelector","webkitMatchesSelector"].filter(function(e){return m.prototype[e]}),v=w[0],g=m.prototype[v],b=new WeakMap;r.prototype=Object.create(a.prototype),d(r.prototype,{createShadowRoot:function(){var t=new f.ShadowRoot(this);h(this).polymerShadowRoot_=t;var n=e.getRendererForHost(this);return n.invalidate(),t},get shadowRoot(){return h(this).polymerShadowRoot_||null},setAttribute:function(e,r){var o=h(this).getAttribute(e);h(this).setAttribute(e,r),n(this,e,o),t(this,e)},removeAttribute:function(e){var r=h(this).getAttribute(e);h(this).removeAttribute(e),n(this,e,r),t(this,e)},get classList(){var e=b.get(this);if(!e){if(e=h(this).classList,!e)return;e.ownerElement_=this,b.set(this,e)}return e},get className(){return h(this).className},set className(e){this.setAttribute("class",e)},get id(){return h(this).id},set id(e){this.setAttribute("id",e)}}),w.forEach(function(e){"matches"!==e&&(r.prototype[e]=function(e){return this.matches(e)})}),m.prototype.webkitCreateShadowRoot&&(r.prototype.webkitCreateShadowRoot=r.prototype.createShadowRoot),d(r.prototype,o),d(r.prototype,i),d(r.prototype,s),d(r.prototype,c),d(r.prototype,l),p(m,r,document.createElementNS(null,"x")),e.invalidateRendererBasedOnAttribute=t,e.matchesNames=w,e.originalMatches=g,e.wrappers.Element=r}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){switch(e){case"&":return"&amp;";case"<":return"&lt;";case">":return"&gt;";case'"':return"&quot;";case"Â ":return"&nbsp;"}}function n(e){return e.replace(L,t)}function r(e){return e.replace(N,t)}function o(e){for(var t={},n=0;n<e.length;n++)t[e[n]]=!0;return t}function i(e){if(e.namespaceURI!==D)return!0;var t=e.ownerDocument.doctype;return t&&t.publicId&&t.systemId}function a(e,t){switch(e.nodeType){case Node.ELEMENT_NODE:for(var o,a=e.tagName.toLowerCase(),c="<"+a,l=e.attributes,u=0;o=l[u];u++)c+=" "+o.name+'="'+n(o.value)+'"';return C[a]?(i(e)&&(c+="/"),c+">"):c+">"+s(e)+"</"+a+">";case Node.TEXT_NODE:var d=e.data;return t&&j[t.localName]?d:r(d);case Node.COMMENT_NODE:return"<!--"+e.data+"-->";default:throw console.error(e),new Error("not implemented")}}function s(e){e instanceof O.HTMLTemplateElement&&(e=e.content);for(var t="",n=e.firstChild;n;n=n.nextSibling)t+=a(n,e);return t}function c(e,t,n){var r=n||"div";e.textContent="";var o=T(e.ownerDocument.createElement(r));o.innerHTML=t;for(var i;i=o.firstChild;)e.appendChild(M(i))}function l(e){m.call(this,e)}function u(e,t){var n=T(e.cloneNode(!1));n.innerHTML=t;for(var r,o=T(document.createDocumentFragment());r=n.firstChild;)o.appendChild(r);return M(o)}function d(t){return function(){return e.renderAllPending(),S(this)[t]}}function p(e){w(l,e,d(e))}function h(t){Object.defineProperty(l.prototype,t,{get:d(t),set:function(n){e.renderAllPending(),S(this)[t]=n},configurable:!0,enumerable:!0})}function f(t){Object.defineProperty(l.prototype,t,{value:function(){return e.renderAllPending(),S(this)[t].apply(S(this),arguments)},configurable:!0,enumerable:!0})}var m=e.wrappers.Element,w=e.defineGetter,v=e.enqueueMutation,g=e.mixin,b=e.nodesWereAdded,y=e.nodesWereRemoved,E=e.registerWrapper,_=e.snapshotNodeList,S=e.unsafeUnwrap,T=e.unwrap,M=e.wrap,O=e.wrappers,L=/[&\u00A0"]/g,N=/[&\u00A0<>]/g,C=o(["area","base","br","col","command","embed","hr","img","input","keygen","link","meta","param","source","track","wbr"]),j=o(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]),D="http://www.w3.org/1999/xhtml",H=/MSIE/.test(navigator.userAgent),x=window.HTMLElement,R=window.HTMLTemplateElement;l.prototype=Object.create(m.prototype),g(l.prototype,{get innerHTML(){return s(this)},set innerHTML(e){if(H&&j[this.localName])return void(this.textContent=e);var t=_(this.childNodes);this.invalidateShadowRenderer()?this instanceof O.HTMLTemplateElement?c(this.content,e):c(this,e,this.tagName):!R&&this instanceof O.HTMLTemplateElement?c(this.content,e):S(this).innerHTML=e;var n=_(this.childNodes);v(this,"childList",{addedNodes:n,removedNodes:t}),y(t),b(n,this)},get outerHTML(){return a(this,this.parentNode)},set outerHTML(e){var t=this.parentNode;if(t){t.invalidateShadowRenderer();var n=u(t,e);t.replaceChild(n,this)}},insertAdjacentHTML:function(e,t){var n,r;switch(String(e).toLowerCase()){case"beforebegin":n=this.parentNode,r=this;break;case"afterend":n=this.parentNode,r=this.nextSibling;break;case"afterbegin":n=this,r=this.firstChild;break;case"beforeend":n=this,r=null;break;default:return}var o=u(n,t);n.insertBefore(o,r)},get hidden(){return this.hasAttribute("hidden")},set hidden(e){e?this.setAttribute("hidden",""):this.removeAttribute("hidden")}}),["clientHeight","clientLeft","clientTop","clientWidth","offsetHeight","offsetLeft","offsetTop","offsetWidth","scrollHeight","scrollWidth"].forEach(p),["scrollLeft","scrollTop"].forEach(h),["getBoundingClientRect","getClientRects","scrollIntoView"].forEach(f),E(x,l,document.createElement("b")),e.wrappers.HTMLElement=l,e.getInnerHTML=s,e.setInnerHTML=c}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=e.mixin,o=e.registerWrapper,i=e.unsafeUnwrap,a=e.wrap,s=window.HTMLCanvasElement;t.prototype=Object.create(n.prototype),r(t.prototype,{getContext:function(){var e=i(this).getContext.apply(i(this),arguments);return e&&a(e)}}),o(s,t,document.createElement("canvas")),e.wrappers.HTMLCanvasElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=e.mixin,o=e.registerWrapper,i=window.HTMLContentElement;t.prototype=Object.create(n.prototype),r(t.prototype,{constructor:t,get select(){return this.getAttribute("select")},set select(e){this.setAttribute("select",e)},setAttribute:function(e,t){n.prototype.setAttribute.call(this,e,t),"select"===String(e).toLowerCase()&&this.invalidateShadowRenderer(!0)}}),i&&o(i,t),e.wrappers.HTMLContentElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=e.mixin,o=e.registerWrapper,i=e.wrapHTMLCollection,a=e.unwrap,s=window.HTMLFormElement;t.prototype=Object.create(n.prototype),r(t.prototype,{get elements(){return i(a(this).elements)}}),o(s,t,document.createElement("form")),e.wrappers.HTMLFormElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){r.call(this,e)}function n(e,t){if(!(this instanceof n))throw new TypeError("DOM object constructor cannot be called as a function.");var o=i(document.createElement("img"));r.call(this,o),a(o,this),void 0!==e&&(o.width=e),void 0!==t&&(o.height=t)}var r=e.wrappers.HTMLElement,o=e.registerWrapper,i=e.unwrap,a=e.rewrap,s=window.HTMLImageElement;t.prototype=Object.create(r.prototype),o(s,t,document.createElement("img")),n.prototype=t.prototype,e.wrappers.HTMLImageElement=t,e.wrappers.Image=n}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=(e.mixin,e.wrappers.NodeList,e.registerWrapper),o=window.HTMLShadowElement;t.prototype=Object.create(n.prototype),t.prototype.constructor=t,o&&r(o,t),e.wrappers.HTMLShadowElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){if(!e.defaultView)return e;var t=d.get(e);if(!t){for(t=e.implementation.createHTMLDocument("");t.lastChild;)t.removeChild(t.lastChild);d.set(e,t)}return t}function n(e){for(var n,r=t(e.ownerDocument),o=c(r.createDocumentFragment());n=e.firstChild;)o.appendChild(n);return o}function r(e){if(o.call(this,e),!p){var t=n(e);u.set(this,l(t))}}var o=e.wrappers.HTMLElement,i=e.mixin,a=e.registerWrapper,s=e.unsafeUnwrap,c=e.unwrap,l=e.wrap,u=new WeakMap,d=new WeakMap,p=window.HTMLTemplateElement;r.prototype=Object.create(o.prototype),i(r.prototype,{constructor:r,get content(){return p?l(s(this).content):u.get(this)}}),p&&a(p,r),e.wrappers.HTMLTemplateElement=r}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=e.registerWrapper,o=window.HTMLMediaElement;o&&(t.prototype=Object.create(n.prototype),r(o,t,document.createElement("audio")),e.wrappers.HTMLMediaElement=t)}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){r.call(this,e)}function n(e){if(!(this instanceof n))throw new TypeError("DOM object constructor cannot be called as a function.");var t=i(document.createElement("audio"));r.call(this,t),a(t,this),t.setAttribute("preload","auto"),void 0!==e&&t.setAttribute("src",e)}var r=e.wrappers.HTMLMediaElement,o=e.registerWrapper,i=e.unwrap,a=e.rewrap,s=window.HTMLAudioElement;s&&(t.prototype=Object.create(r.prototype),o(s,t,document.createElement("audio")),n.prototype=t.prototype,e.wrappers.HTMLAudioElement=t,e.wrappers.Audio=n)}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){return e.replace(/\s+/g," ").trim()}function n(e){o.call(this,e)}function r(e,t,n,i){if(!(this instanceof r))throw new TypeError("DOM object constructor cannot be called as a function.");var a=c(document.createElement("option"));o.call(this,a),s(a,this),void 0!==e&&(a.text=e),void 0!==t&&a.setAttribute("value",t),n===!0&&a.setAttribute("selected",""),a.selected=i===!0}var o=e.wrappers.HTMLElement,i=e.mixin,a=e.registerWrapper,s=e.rewrap,c=e.unwrap,l=e.wrap,u=window.HTMLOptionElement;n.prototype=Object.create(o.prototype),i(n.prototype,{get text(){return t(this.textContent)},set text(e){this.textContent=t(String(e))},get form(){return l(c(this).form)}}),a(u,n,document.createElement("option")),r.prototype=n.prototype,e.wrappers.HTMLOptionElement=n,e.wrappers.Option=r}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=e.mixin,o=e.registerWrapper,i=e.unwrap,a=e.wrap,s=window.HTMLSelectElement;t.prototype=Object.create(n.prototype),r(t.prototype,{add:function(e,t){"object"==typeof t&&(t=i(t)),i(this).add(i(e),t)},remove:function(e){return void 0===e?void n.prototype.remove.call(this):("object"==typeof e&&(e=i(e)),void i(this).remove(e))},get form(){return a(i(this).form)}}),o(s,t,document.createElement("select")),e.wrappers.HTMLSelectElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=e.mixin,o=e.registerWrapper,i=e.unwrap,a=e.wrap,s=e.wrapHTMLCollection,c=window.HTMLTableElement;t.prototype=Object.create(n.prototype),r(t.prototype,{get caption(){return a(i(this).caption)},createCaption:function(){return a(i(this).createCaption())},get tHead(){return a(i(this).tHead)},createTHead:function(){return a(i(this).createTHead())},createTFoot:function(){return a(i(this).createTFoot())},get tFoot(){return a(i(this).tFoot)},get tBodies(){return s(i(this).tBodies)},createTBody:function(){return a(i(this).createTBody())},get rows(){return s(i(this).rows)},insertRow:function(e){return a(i(this).insertRow(e))}}),o(c,t,document.createElement("table")),e.wrappers.HTMLTableElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=e.mixin,o=e.registerWrapper,i=e.wrapHTMLCollection,a=e.unwrap,s=e.wrap,c=window.HTMLTableSectionElement;t.prototype=Object.create(n.prototype),r(t.prototype,{constructor:t,get rows(){return i(a(this).rows)},insertRow:function(e){return s(a(this).insertRow(e))}}),o(c,t,document.createElement("thead")),e.wrappers.HTMLTableSectionElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.HTMLElement,r=e.mixin,o=e.registerWrapper,i=e.wrapHTMLCollection,a=e.unwrap,s=e.wrap,c=window.HTMLTableRowElement;t.prototype=Object.create(n.prototype),r(t.prototype,{get cells(){return i(a(this).cells)},insertCell:function(e){return s(a(this).insertCell(e))}}),o(c,t,document.createElement("tr")),e.wrappers.HTMLTableRowElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){switch(e.localName){case"content":return new n(e);case"shadow":return new o(e);case"template":return new i(e)}r.call(this,e)}var n=e.wrappers.HTMLContentElement,r=e.wrappers.HTMLElement,o=e.wrappers.HTMLShadowElement,i=e.wrappers.HTMLTemplateElement,a=(e.mixin,e.registerWrapper),s=window.HTMLUnknownElement;t.prototype=Object.create(r.prototype),a(s,t),e.wrappers.HTMLUnknownElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.Element,r=e.wrappers.HTMLElement,o=e.registerWrapper,i=(e.defineWrapGetter,e.unsafeUnwrap),a=e.wrap,s=e.mixin,c="http://www.w3.org/2000/svg",l=window.SVGElement,u=document.createElementNS(c,"title");if(!("classList"in u)){var d=Object.getOwnPropertyDescriptor(n.prototype,"classList");Object.defineProperty(r.prototype,"classList",d),delete n.prototype.classList}t.prototype=Object.create(n.prototype),s(t.prototype,{get ownerSVGElement(){return a(i(this).ownerSVGElement)}}),o(l,t,document.createElementNS(c,"title")),e.wrappers.SVGElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){p.call(this,e)}var n=e.mixin,r=e.registerWrapper,o=e.unwrap,i=e.wrap,a=window.SVGUseElement,s="http://www.w3.org/2000/svg",c=i(document.createElementNS(s,"g")),l=document.createElementNS(s,"use"),u=c.constructor,d=Object.getPrototypeOf(u.prototype),p=d.constructor;t.prototype=Object.create(d),"instanceRoot"in l&&n(t.prototype,{get instanceRoot(){return i(o(this).instanceRoot)},get animatedInstanceRoot(){return i(o(this).animatedInstanceRoot)}}),r(a,t,l),e.wrappers.SVGUseElement=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.EventTarget,r=e.mixin,o=e.registerWrapper,i=e.unsafeUnwrap,a=e.wrap,s=window.SVGElementInstance;s&&(t.prototype=Object.create(n.prototype),r(t.prototype,{get correspondingElement(){return a(i(this).correspondingElement)},get correspondingUseElement(){return a(i(this).correspondingUseElement)},get parentNode(){return a(i(this).parentNode)},get childNodes(){throw new Error("Not implemented")},get firstChild(){return a(i(this).firstChild)},get lastChild(){return a(i(this).lastChild)},get previousSibling(){return a(i(this).previousSibling)},get nextSibling(){return a(i(this).nextSibling)}}),o(s,t),e.wrappers.SVGElementInstance=t)}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){o(e,this)}var n=e.mixin,r=e.registerWrapper,o=e.setWrapper,i=e.unsafeUnwrap,a=e.unwrap,s=e.unwrapIfNeeded,c=e.wrap,l=window.CanvasRenderingContext2D;n(t.prototype,{get canvas(){return c(i(this).canvas)},drawImage:function(){arguments[0]=s(arguments[0]),i(this).drawImage.apply(i(this),arguments)},createPattern:function(){return arguments[0]=a(arguments[0]),i(this).createPattern.apply(i(this),arguments)}}),r(l,t,document.createElement("canvas").getContext("2d")),e.wrappers.CanvasRenderingContext2D=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){o(e,this)}var n=e.mixin,r=e.registerWrapper,o=e.setWrapper,i=e.unsafeUnwrap,a=e.unwrapIfNeeded,s=e.wrap,c=window.WebGLRenderingContext;if(c){n(t.prototype,{get canvas(){return s(i(this).canvas)},texImage2D:function(){arguments[5]=a(arguments[5]),i(this).texImage2D.apply(i(this),arguments)},texSubImage2D:function(){arguments[6]=a(arguments[6]),i(this).texSubImage2D.apply(i(this),arguments)}});var l=/WebKit/.test(navigator.userAgent)?{drawingBufferHeight:null,drawingBufferWidth:null}:{};r(c,t,l),e.wrappers.WebGLRenderingContext=t}}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.Node,r=e.GetElementsByInterface,o=e.NonElementParentNodeInterface,i=e.ParentNodeInterface,a=e.SelectorsInterface,s=e.mixin,c=e.registerObject,l=e.registerWrapper,u=window.DocumentFragment;t.prototype=Object.create(n.prototype),s(t.prototype,i),s(t.prototype,a),s(t.prototype,r),s(t.prototype,o),l(u,t,document.createDocumentFragment()),e.wrappers.DocumentFragment=t;var d=c(document.createComment(""));e.wrappers.Comment=d}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){var t=d(u(e).ownerDocument.createDocumentFragment());n.call(this,t),c(t,this);var o=e.shadowRoot;h.set(this,o),this.treeScope_=new r(this,a(o||e)),p.set(this,e)}var n=e.wrappers.DocumentFragment,r=e.TreeScope,o=e.elementFromPoint,i=e.getInnerHTML,a=e.getTreeScope,s=e.mixin,c=e.rewrap,l=e.setInnerHTML,u=e.unsafeUnwrap,d=e.unwrap,p=new WeakMap,h=new WeakMap;t.prototype=Object.create(n.prototype),s(t.prototype,{constructor:t,get innerHTML(){return i(this)},set innerHTML(e){l(this,e),this.invalidateShadowRenderer()},get olderShadowRoot(){return h.get(this)||null},get host(){return p.get(this)||null},invalidateShadowRenderer:function(){return p.get(this).invalidateShadowRenderer()},elementFromPoint:function(e,t){return o(this,this.ownerDocument,e,t)}}),e.wrappers.ShadowRoot=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){var t=d(e).root;return t instanceof h?t.host:null}function n(t,n){if(t.shadowRoot){n=Math.min(t.childNodes.length-1,n);var r=t.childNodes[n];if(r){var o=e.getDestinationInsertionPoints(r);if(o.length>0){var i=o[0].parentNode;i.nodeType==Node.ELEMENT_NODE&&(t=i)}}}return t}function r(e){return e=u(e),t(e)||e}function o(e){a(e,this)}var i=e.registerWrapper,a=e.setWrapper,s=e.unsafeUnwrap,c=e.unwrap,l=e.unwrapIfNeeded,u=e.wrap,d=e.getTreeScope,p=window.Range,h=e.wrappers.ShadowRoot;o.prototype={get startContainer(){return r(s(this).startContainer)},get endContainer(){return r(s(this).endContainer)},get commonAncestorContainer(){return r(s(this).commonAncestorContainer)},setStart:function(e,t){e=n(e,t),s(this).setStart(l(e),t)},setEnd:function(e,t){e=n(e,t),s(this).setEnd(l(e),t)},setStartBefore:function(e){s(this).setStartBefore(l(e))},setStartAfter:function(e){s(this).setStartAfter(l(e))},setEndBefore:function(e){s(this).setEndBefore(l(e))},setEndAfter:function(e){s(this).setEndAfter(l(e))},selectNode:function(e){s(this).selectNode(l(e))},selectNodeContents:function(e){s(this).selectNodeContents(l(e))},compareBoundaryPoints:function(e,t){return s(this).compareBoundaryPoints(e,c(t))},extractContents:function(){return u(s(this).extractContents())},cloneContents:function(){return u(s(this).cloneContents())},insertNode:function(e){s(this).insertNode(l(e))},surroundContents:function(e){s(this).surroundContents(l(e))},cloneRange:function(){return u(s(this).cloneRange())},isPointInRange:function(e,t){return s(this).isPointInRange(l(e),t)},comparePoint:function(e,t){return s(this).comparePoint(l(e),t)},intersectsNode:function(e){return s(this).intersectsNode(l(e))},toString:function(){return s(this).toString()}},p.prototype.createContextualFragment&&(o.prototype.createContextualFragment=function(e){return u(s(this).createContextualFragment(e))}),i(window.Range,o,document.createRange()),e.wrappers.Range=o}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){e.previousSibling_=e.previousSibling,e.nextSibling_=e.nextSibling,e.parentNode_=e.parentNode}function n(n,o,i){var a=x(n),s=x(o),c=i?x(i):null;if(r(o),t(o),i)n.firstChild===i&&(n.firstChild_=i),i.previousSibling_=i.previousSibling;else{n.lastChild_=n.lastChild,n.lastChild===n.firstChild&&(n.firstChild_=n.firstChild);var l=R(a.lastChild);l&&(l.nextSibling_=l.nextSibling)}e.originalInsertBefore.call(a,s,c)}function r(n){var r=x(n),o=r.parentNode;if(o){var i=R(o);t(n),n.previousSibling&&(n.previousSibling.nextSibling_=n),n.nextSibling&&(n.nextSibling.previousSibling_=n),i.lastChild===n&&(i.lastChild_=n),i.firstChild===n&&(i.firstChild_=n),e.originalRemoveChild.call(o,r)}}function o(e){P.set(e,[])}function i(e){var t=P.get(e);return t||P.set(e,t=[]),t}function a(e){for(var t=[],n=0,r=e.firstChild;r;r=r.nextSibling)t[n++]=r;return t}function s(){for(var e=0;e<F.length;e++){var t=F[e],n=t.parentRenderer;n&&n.dirty||t.render()}F=[]}function c(){T=null,s()}function l(e){var t=A.get(e);return t||(t=new h(e),A.set(e,t)),t}function u(e){var t=j(e).root;return t instanceof C?t:null}function d(e){return l(e.host)}function p(e){this.skip=!1,this.node=e,this.childNodes=[]}function h(e){this.host=e,this.dirty=!1,this.invalidateAttributes(),this.associateNode(e)}function f(e){for(var t=[],n=e.firstChild;n;n=n.nextSibling)E(n)?t.push.apply(t,i(n)):t.push(n);return t}function m(e){if(e instanceof L)return e;if(e instanceof O)return null;for(var t=e.firstChild;t;t=t.nextSibling){var n=m(t);if(n)return n}return null}function w(e,t){i(t).push(e);var n=k.get(e);n?n.push(t):k.set(e,[t])}function v(e){return k.get(e)}function g(e){k.set(e,void 0)}function b(e,t){var n=t.getAttribute("select");if(!n)return!0;if(n=n.trim(),!n)return!0;if(!(e instanceof M))return!1;if(!q.test(n))return!1;try{return e.matches(n)}catch(r){return!1}}function y(e,t){var n=v(t);return n&&n[n.length-1]===e}function E(e){return e instanceof O||e instanceof L}function _(e){return e.shadowRoot}function S(e){for(var t=[],n=e.shadowRoot;n;n=n.olderShadowRoot)t.push(n);return t}var T,M=e.wrappers.Element,O=e.wrappers.HTMLContentElement,L=e.wrappers.HTMLShadowElement,N=e.wrappers.Node,C=e.wrappers.ShadowRoot,j=(e.assert,e.getTreeScope),D=(e.mixin,e.oneOf),H=e.unsafeUnwrap,x=e.unwrap,R=e.wrap,I=e.ArraySplice,P=new WeakMap,k=new WeakMap,A=new WeakMap,W=D(window,["requestAnimationFrame","mozRequestAnimationFrame","webkitRequestAnimationFrame","setTimeout"]),F=[],U=new I;U.equals=function(e,t){return x(e.node)===t},p.prototype={append:function(e){var t=new p(e);return this.childNodes.push(t),t},sync:function(e){if(!this.skip){for(var t=this.node,o=this.childNodes,i=a(x(t)),s=e||new WeakMap,c=U.calculateSplices(o,i),l=0,u=0,d=0,p=0;p<c.length;p++){for(var h=c[p];d<h.index;d++)u++,o[l++].sync(s);for(var f=h.removed.length,m=0;f>m;m++){var w=R(i[u++]);s.get(w)||r(w)}for(var v=h.addedCount,g=i[u]&&R(i[u]),m=0;v>m;m++){var b=o[l++],y=b.node;n(t,y,g),s.set(y,!0),b.sync(s)}d+=v}for(var p=d;p<o.length;p++)o[p].sync(s)}}},h.prototype={render:function(e){if(this.dirty){this.invalidateAttributes();var t=this.host;this.distribution(t);var n=e||new p(t);this.buildRenderTree(n,t);var r=!e;r&&n.sync(),this.dirty=!1}},get parentRenderer(){return j(this.host).renderer},invalidate:function(){if(!this.dirty){this.dirty=!0;var e=this.parentRenderer;if(e&&e.invalidate(),F.push(this),T)return;T=window[W](c,0)}},distribution:function(e){this.resetAllSubtrees(e),this.distributionResolution(e)},resetAll:function(e){E(e)?o(e):g(e),this.resetAllSubtrees(e)},resetAllSubtrees:function(e){for(var t=e.firstChild;t;t=t.nextSibling)this.resetAll(t);e.shadowRoot&&this.resetAll(e.shadowRoot),e.olderShadowRoot&&this.resetAll(e.olderShadowRoot)},distributionResolution:function(e){if(_(e)){for(var t=e,n=f(t),r=S(t),o=0;o<r.length;o++)this.poolDistribution(r[o],n);for(var o=r.length-1;o>=0;o--){var i=r[o],a=m(i);if(a){var s=i.olderShadowRoot;s&&(n=f(s));for(var c=0;c<n.length;c++)w(n[c],a)}this.distributionResolution(i)}}for(var l=e.firstChild;l;l=l.nextSibling)this.distributionResolution(l)},poolDistribution:function(e,t){if(!(e instanceof L))if(e instanceof O){var n=e;this.updateDependentAttributes(n.getAttribute("select"));for(var r=!1,o=0;o<t.length;o++){var e=t[o];e&&b(e,n)&&(w(e,n),t[o]=void 0,r=!0)}if(!r)for(var i=n.firstChild;i;i=i.nextSibling)w(i,n)}else for(var i=e.firstChild;i;i=i.nextSibling)this.poolDistribution(i,t)},buildRenderTree:function(e,t){for(var n=this.compose(t),r=0;r<n.length;r++){var o=n[r],i=e.append(o);this.buildRenderTree(i,o)}if(_(t)){var a=l(t);a.dirty=!1}},compose:function(e){for(var t=[],n=e.shadowRoot||e,r=n.firstChild;r;r=r.nextSibling)if(E(r)){this.associateNode(n);for(var o=i(r),a=0;a<o.length;a++){var s=o[a];y(r,s)&&t.push(s)}}else t.push(r);return t},invalidateAttributes:function(){this.attributes=Object.create(null)},updateDependentAttributes:function(e){if(e){var t=this.attributes;/\.\w+/.test(e)&&(t["class"]=!0),/#\w+/.test(e)&&(t.id=!0),e.replace(/\[\s*([^\s=\|~\]]+)/g,function(e,n){t[n]=!0})}},dependsOnAttribute:function(e){return this.attributes[e]},associateNode:function(e){H(e).polymerShadowRenderer_=this}};var q=/^(:not\()?[*.#[a-zA-Z_|]/;N.prototype.invalidateShadowRenderer=function(e){var t=H(this).polymerShadowRenderer_;return t?(t.invalidate(),!0):!1},O.prototype.getDistributedNodes=L.prototype.getDistributedNodes=function(){return s(),i(this)},M.prototype.getDestinationInsertionPoints=function(){return s(),v(this)||[]},O.prototype.nodeIsInserted_=L.prototype.nodeIsInserted_=function(){this.invalidateShadowRenderer();var e,t=u(this);t&&(e=d(t)),H(this).polymerShadowRenderer_=e,e&&e.invalidate()},e.getRendererForHost=l,e.getShadowTrees=S,e.renderAllPending=s,e.getDestinationInsertionPoints=v,e.visual={insertBefore:n,remove:r}}(window.ShadowDOMPolyfill),function(e){"use strict";function t(t){if(window[t]){r(!e.wrappers[t]);var c=function(e){n.call(this,e)};c.prototype=Object.create(n.prototype),o(c.prototype,{get form(){return s(a(this).form)}}),i(window[t],c,document.createElement(t.slice(4,-7))),e.wrappers[t]=c}}var n=e.wrappers.HTMLElement,r=e.assert,o=e.mixin,i=e.registerWrapper,a=e.unwrap,s=e.wrap,c=["HTMLButtonElement","HTMLFieldSetElement","HTMLInputElement","HTMLKeygenElement","HTMLLabelElement","HTMLLegendElement","HTMLObjectElement","HTMLOutputElement","HTMLTextAreaElement"];c.forEach(t)}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){r(e,this)}var n=e.registerWrapper,r=e.setWrapper,o=e.unsafeUnwrap,i=e.unwrap,a=e.unwrapIfNeeded,s=e.wrap,c=window.Selection;t.prototype={get anchorNode(){return s(o(this).anchorNode)},get focusNode(){return s(o(this).focusNode)},addRange:function(e){o(this).addRange(a(e))},collapse:function(e,t){o(this).collapse(a(e),t)},containsNode:function(e,t){return o(this).containsNode(a(e),t)},getRangeAt:function(e){return s(o(this).getRangeAt(e))},removeRange:function(e){o(this).removeRange(i(e))},selectAllChildren:function(e){o(this).selectAllChildren(a(e))},toString:function(){return o(this).toString()}},c.prototype.extend&&(t.prototype.extend=function(e,t){o(this).extend(a(e),t)}),n(window.Selection,t,window.getSelection()),e.wrappers.Selection=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){r(e,this)}var n=e.registerWrapper,r=e.setWrapper,o=e.unsafeUnwrap,i=e.unwrapIfNeeded,a=e.wrap,s=window.TreeWalker;t.prototype={get root(){return a(o(this).root)},get currentNode(){return a(o(this).currentNode)},set currentNode(e){o(this).currentNode=i(e)},get filter(){return o(this).filter},parentNode:function(){return a(o(this).parentNode())},firstChild:function(){return a(o(this).firstChild())},lastChild:function(){return a(o(this).lastChild())},previousSibling:function(){return a(o(this).previousSibling())},previousNode:function(){return a(o(this).previousNode())},nextNode:function(){return a(o(this).nextNode())}},n(s,t),e.wrappers.TreeWalker=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){u.call(this,e),this.treeScope_=new w(this,null)}function n(e){var n=document[e];t.prototype[e]=function(){return C(n.apply(L(this),arguments))}}function r(e,t){H.call(L(t),N(e)),o(e,t)}function o(e,t){e.shadowRoot&&t.adoptNode(e.shadowRoot),e instanceof m&&i(e,t);for(var n=e.firstChild;n;n=n.nextSibling)o(n,t)}function i(e,t){var n=e.olderShadowRoot;n&&t.adoptNode(n)}function a(e){O(e,this)}function s(e,t){var n=document.implementation[t];e.prototype[t]=function(){return C(n.apply(L(this),arguments))}}function c(e,t){var n=document.implementation[t];e.prototype[t]=function(){return n.apply(L(this),arguments)}}var l=e.GetElementsByInterface,u=e.wrappers.Node,d=e.ParentNodeInterface,p=e.NonElementParentNodeInterface,h=e.wrappers.Selection,f=e.SelectorsInterface,m=e.wrappers.ShadowRoot,w=e.TreeScope,v=e.cloneNode,g=e.defineWrapGetter,b=e.elementFromPoint,y=e.forwardMethodsToWrapper,E=e.matchesNames,_=e.mixin,S=e.registerWrapper,T=e.renderAllPending,M=e.rewrap,O=e.setWrapper,L=e.unsafeUnwrap,N=e.unwrap,C=e.wrap,j=e.wrapEventTargetMethods,D=(e.wrapNodeList,
new WeakMap);t.prototype=Object.create(u.prototype),g(t,"documentElement"),g(t,"body"),g(t,"head"),["createComment","createDocumentFragment","createElement","createElementNS","createEvent","createEventNS","createRange","createTextNode"].forEach(n);var H=document.adoptNode,x=document.getSelection;_(t.prototype,{adoptNode:function(e){return e.parentNode&&e.parentNode.removeChild(e),r(e,this),e},elementFromPoint:function(e,t){return b(this,this,e,t)},importNode:function(e,t){return v(e,t,L(this))},getSelection:function(){return T(),new h(x.call(N(this)))},getElementsByName:function(e){return f.querySelectorAll.call(this,"[name="+JSON.stringify(String(e))+"]")}});var R=document.createTreeWalker,I=e.wrappers.TreeWalker;if(t.prototype.createTreeWalker=function(e,t,n,r){var o=null;return n&&(n.acceptNode&&"function"==typeof n.acceptNode?o={acceptNode:function(e){return n.acceptNode(C(e))}}:"function"==typeof n&&(o=function(e){return n(C(e))})),new I(R.call(N(this),N(e),t,o,r))},document.registerElement){var P=document.registerElement;t.prototype.registerElement=function(t,n){function r(e){return e?void O(e,this):i?document.createElement(i,t):document.createElement(t)}var o,i;if(void 0!==n&&(o=n.prototype,i=n["extends"]),o||(o=Object.create(HTMLElement.prototype)),e.nativePrototypeTable.get(o))throw new Error("NotSupportedError");for(var a,s=Object.getPrototypeOf(o),c=[];s&&!(a=e.nativePrototypeTable.get(s));)c.push(s),s=Object.getPrototypeOf(s);if(!a)throw new Error("NotSupportedError");for(var l=Object.create(a),u=c.length-1;u>=0;u--)l=Object.create(l);["createdCallback","attachedCallback","detachedCallback","attributeChangedCallback"].forEach(function(e){var t=o[e];t&&(l[e]=function(){C(this)instanceof r||M(this),t.apply(C(this),arguments)})});var d={prototype:l};i&&(d["extends"]=i),r.prototype=o,r.prototype.constructor=r,e.constructorTable.set(l,r),e.nativePrototypeTable.set(o,l);P.call(N(this),t,d);return r},y([window.HTMLDocument||window.Document],["registerElement"])}y([window.HTMLBodyElement,window.HTMLDocument||window.Document,window.HTMLHeadElement,window.HTMLHtmlElement],["appendChild","compareDocumentPosition","contains","getElementsByClassName","getElementsByTagName","getElementsByTagNameNS","insertBefore","querySelector","querySelectorAll","removeChild","replaceChild"]),y([window.HTMLBodyElement,window.HTMLHeadElement,window.HTMLHtmlElement],E),y([window.HTMLDocument||window.Document],["adoptNode","importNode","contains","createComment","createDocumentFragment","createElement","createElementNS","createEvent","createEventNS","createRange","createTextNode","createTreeWalker","elementFromPoint","getElementById","getElementsByName","getSelection"]),_(t.prototype,l),_(t.prototype,d),_(t.prototype,f),_(t.prototype,p),_(t.prototype,{get implementation(){var e=D.get(this);return e?e:(e=new a(N(this).implementation),D.set(this,e),e)},get defaultView(){return C(N(this).defaultView)}}),S(window.Document,t,document.implementation.createHTMLDocument("")),window.HTMLDocument&&S(window.HTMLDocument,t),j([window.HTMLBodyElement,window.HTMLDocument||window.Document,window.HTMLHeadElement]);var k=document.implementation.createDocument;a.prototype.createDocument=function(){return arguments[2]=N(arguments[2]),C(k.apply(L(this),arguments))},s(a,"createDocumentType"),s(a,"createHTMLDocument"),c(a,"hasFeature"),S(window.DOMImplementation,a),y([window.DOMImplementation],["createDocument","createDocumentType","createHTMLDocument","hasFeature"]),e.adoptNodeNoRemove=r,e.wrappers.DOMImplementation=a,e.wrappers.Document=t}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){n.call(this,e)}var n=e.wrappers.EventTarget,r=e.wrappers.Selection,o=e.mixin,i=e.registerWrapper,a=e.renderAllPending,s=e.unwrap,c=e.unwrapIfNeeded,l=e.wrap,u=window.Window,d=window.getComputedStyle,p=window.getDefaultComputedStyle,h=window.getSelection;t.prototype=Object.create(n.prototype),u.prototype.getComputedStyle=function(e,t){return l(this||window).getComputedStyle(c(e),t)},p&&(u.prototype.getDefaultComputedStyle=function(e,t){return l(this||window).getDefaultComputedStyle(c(e),t)}),u.prototype.getSelection=function(){return l(this||window).getSelection()},delete window.getComputedStyle,delete window.getDefaultComputedStyle,delete window.getSelection,["addEventListener","removeEventListener","dispatchEvent"].forEach(function(e){u.prototype[e]=function(){var t=l(this||window);return t[e].apply(t,arguments)},delete window[e]}),o(t.prototype,{getComputedStyle:function(e,t){return a(),d.call(s(this),c(e),t)},getSelection:function(){return a(),new r(h.call(s(this)))},get document(){return l(s(this).document)}}),p&&(t.prototype.getDefaultComputedStyle=function(e,t){return a(),p.call(s(this),c(e),t)}),i(u,t,window),e.wrappers.Window=t}(window.ShadowDOMPolyfill),function(e){"use strict";var t=e.unwrap,n=window.DataTransfer||window.Clipboard,r=n.prototype.setDragImage;r&&(n.prototype.setDragImage=function(e,n,o){r.call(this,t(e),n,o)})}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){var t;t=e instanceof i?e:new i(e&&o(e)),r(t,this)}var n=e.registerWrapper,r=e.setWrapper,o=e.unwrap,i=window.FormData;i&&(n(i,t,new i),e.wrappers.FormData=t)}(window.ShadowDOMPolyfill),function(e){"use strict";var t=e.unwrapIfNeeded,n=XMLHttpRequest.prototype.send;XMLHttpRequest.prototype.send=function(e){return n.call(this,t(e))}}(window.ShadowDOMPolyfill),function(e){"use strict";function t(e){var t=n[e],r=window[t];if(r){var o=document.createElement(e),i=o.constructor;window[t]=i}}var n=(e.isWrapperFor,{a:"HTMLAnchorElement",area:"HTMLAreaElement",audio:"HTMLAudioElement",base:"HTMLBaseElement",body:"HTMLBodyElement",br:"HTMLBRElement",button:"HTMLButtonElement",canvas:"HTMLCanvasElement",caption:"HTMLTableCaptionElement",col:"HTMLTableColElement",content:"HTMLContentElement",data:"HTMLDataElement",datalist:"HTMLDataListElement",del:"HTMLModElement",dir:"HTMLDirectoryElement",div:"HTMLDivElement",dl:"HTMLDListElement",embed:"HTMLEmbedElement",fieldset:"HTMLFieldSetElement",font:"HTMLFontElement",form:"HTMLFormElement",frame:"HTMLFrameElement",frameset:"HTMLFrameSetElement",h1:"HTMLHeadingElement",head:"HTMLHeadElement",hr:"HTMLHRElement",html:"HTMLHtmlElement",iframe:"HTMLIFrameElement",img:"HTMLImageElement",input:"HTMLInputElement",keygen:"HTMLKeygenElement",label:"HTMLLabelElement",legend:"HTMLLegendElement",li:"HTMLLIElement",link:"HTMLLinkElement",map:"HTMLMapElement",marquee:"HTMLMarqueeElement",menu:"HTMLMenuElement",menuitem:"HTMLMenuItemElement",meta:"HTMLMetaElement",meter:"HTMLMeterElement",object:"HTMLObjectElement",ol:"HTMLOListElement",optgroup:"HTMLOptGroupElement",option:"HTMLOptionElement",output:"HTMLOutputElement",p:"HTMLParagraphElement",param:"HTMLParamElement",pre:"HTMLPreElement",progress:"HTMLProgressElement",q:"HTMLQuoteElement",script:"HTMLScriptElement",select:"HTMLSelectElement",shadow:"HTMLShadowElement",source:"HTMLSourceElement",span:"HTMLSpanElement",style:"HTMLStyleElement",table:"HTMLTableElement",tbody:"HTMLTableSectionElement",template:"HTMLTemplateElement",textarea:"HTMLTextAreaElement",thead:"HTMLTableSectionElement",time:"HTMLTimeElement",title:"HTMLTitleElement",tr:"HTMLTableRowElement",track:"HTMLTrackElement",ul:"HTMLUListElement",video:"HTMLVideoElement"});Object.keys(n).forEach(t),Object.getOwnPropertyNames(e.wrappers).forEach(function(t){window[t]=e.wrappers[t]})}(window.ShadowDOMPolyfill),function(e){function t(e,t){var n="";return Array.prototype.forEach.call(e,function(e){n+=e.textContent+"\n\n"}),t||(n=n.replace(d,"")),n}function n(e){var t=document.createElement("style");return t.textContent=e,t}function r(e){var t=n(e);document.head.appendChild(t);var r=[];if(t.sheet)try{r=t.sheet.cssRules}catch(o){}else console.warn("sheet not found",t);return t.parentNode.removeChild(t),r}function o(){C.initialized=!0,document.body.appendChild(C);var e=C.contentDocument,t=e.createElement("base");t.href=document.baseURI,e.head.appendChild(t)}function i(e){C.initialized||o(),document.body.appendChild(C),e(C.contentDocument),document.body.removeChild(C)}function a(e,t){if(t){var o;if(e.match("@import")&&D){var a=n(e);i(function(e){e.head.appendChild(a.impl),o=Array.prototype.slice.call(a.sheet.cssRules,0),t(o)})}else o=r(e),t(o)}}function s(e){e&&l().appendChild(document.createTextNode(e))}function c(e,t){var r=n(e);r.setAttribute(t,""),r.setAttribute(x,""),document.head.appendChild(r)}function l(){return j||(j=document.createElement("style"),j.setAttribute(x,""),j[x]=!0),j}var u={strictStyling:!1,registry:{},shimStyling:function(e,n,r){var o=this.prepareRoot(e,n,r),i=this.isTypeExtension(r),a=this.makeScopeSelector(n,i),s=t(o,!0);s=this.scopeCssText(s,a),e&&(e.shimmedStyle=s),this.addCssToDocument(s,n)},shimStyle:function(e,t){return this.shimCssText(e.textContent,t)},shimCssText:function(e,t){return e=this.insertDirectives(e),this.scopeCssText(e,t)},makeScopeSelector:function(e,t){return e?t?"[is="+e+"]":e:""},isTypeExtension:function(e){return e&&e.indexOf("-")<0},prepareRoot:function(e,t,n){var r=this.registerRoot(e,t,n);return this.replaceTextInStyles(r.rootStyles,this.insertDirectives),this.removeStyles(e,r.rootStyles),this.strictStyling&&this.applyScopeToContent(e,t),r.scopeStyles},removeStyles:function(e,t){for(var n,r=0,o=t.length;o>r&&(n=t[r]);r++)n.parentNode.removeChild(n)},registerRoot:function(e,t,n){var r=this.registry[t]={root:e,name:t,extendsName:n},o=this.findStyles(e);r.rootStyles=o,r.scopeStyles=r.rootStyles;var i=this.registry[r.extendsName];return i&&(r.scopeStyles=i.scopeStyles.concat(r.scopeStyles)),r},findStyles:function(e){if(!e)return[];var t=e.querySelectorAll("style");return Array.prototype.filter.call(t,function(e){return!e.hasAttribute(R)})},applyScopeToContent:function(e,t){e&&(Array.prototype.forEach.call(e.querySelectorAll("*"),function(e){e.setAttribute(t,"")}),Array.prototype.forEach.call(e.querySelectorAll("template"),function(e){this.applyScopeToContent(e.content,t)},this))},insertDirectives:function(e){return e=this.insertPolyfillDirectivesInCssText(e),this.insertPolyfillRulesInCssText(e)},insertPolyfillDirectivesInCssText:function(e){return e=e.replace(p,function(e,t){return t.slice(0,-2)+"{"}),e.replace(h,function(e,t){return t+" {"})},insertPolyfillRulesInCssText:function(e){return e=e.replace(f,function(e,t){return t.slice(0,-1)}),e.replace(m,function(e,t,n,r){var o=e.replace(t,"").replace(n,"");return r+o})},scopeCssText:function(e,t){var n=this.extractUnscopedRulesFromCssText(e);if(e=this.insertPolyfillHostInCssText(e),e=this.convertColonHost(e),e=this.convertColonHostContext(e),e=this.convertShadowDOMSelectors(e),t){var e,r=this;a(e,function(n){e=r.scopeRules(n,t)})}return e=e+"\n"+n,e.trim()},extractUnscopedRulesFromCssText:function(e){for(var t,n="";t=w.exec(e);)n+=t[1].slice(0,-1)+"\n\n";for(;t=v.exec(e);)n+=t[0].replace(t[2],"").replace(t[1],t[3])+"\n\n";return n},convertColonHost:function(e){return this.convertColonRule(e,E,this.colonHostPartReplacer)},convertColonHostContext:function(e){return this.convertColonRule(e,_,this.colonHostContextPartReplacer)},convertColonRule:function(e,t,n){return e.replace(t,function(e,t,r,o){if(t=O,r){for(var i,a=r.split(","),s=[],c=0,l=a.length;l>c&&(i=a[c]);c++)i=i.trim(),s.push(n(t,i,o));return s.join(",")}return t+o})},colonHostContextPartReplacer:function(e,t,n){return t.match(g)?this.colonHostPartReplacer(e,t,n):e+t+n+", "+t+" "+e+n},colonHostPartReplacer:function(e,t,n){return e+t.replace(g,"")+n},convertShadowDOMSelectors:function(e){for(var t=0;t<N.length;t++)e=e.replace(N[t]," ");return e},scopeRules:function(e,t){var n="";return e&&Array.prototype.forEach.call(e,function(e){if(e.selectorText&&e.style&&void 0!==e.style.cssText)n+=this.scopeSelector(e.selectorText,t,this.strictStyling)+" {\n ",n+=this.propertiesFromRule(e)+"\n}\n\n";else if(e.type===CSSRule.MEDIA_RULE)n+="@media "+e.media.mediaText+" {\n",n+=this.scopeRules(e.cssRules,t),n+="\n}\n\n";else try{e.cssText&&(n+=e.cssText+"\n\n")}catch(r){e.type===CSSRule.KEYFRAMES_RULE&&e.cssRules&&(n+=this.ieSafeCssTextFromKeyFrameRule(e))}},this),n},ieSafeCssTextFromKeyFrameRule:function(e){var t="@keyframes "+e.name+" {";return Array.prototype.forEach.call(e.cssRules,function(e){t+=" "+e.keyText+" {"+e.style.cssText+"}"}),t+=" }"},scopeSelector:function(e,t,n){var r=[],o=e.split(",");return o.forEach(function(e){e=e.trim(),this.selectorNeedsScoping(e,t)&&(e=n&&!e.match(O)?this.applyStrictSelectorScope(e,t):this.applySelectorScope(e,t)),r.push(e)},this),r.join(", ")},selectorNeedsScoping:function(e,t){if(Array.isArray(t))return!0;var n=this.makeScopeMatcher(t);return!e.match(n)},makeScopeMatcher:function(e){return e=e.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),new RegExp("^("+e+")"+S,"m")},applySelectorScope:function(e,t){return Array.isArray(t)?this.applySelectorScopeList(e,t):this.applySimpleSelectorScope(e,t)},applySelectorScopeList:function(e,t){for(var n,r=[],o=0;n=t[o];o++)r.push(this.applySimpleSelectorScope(e,n));return r.join(", ")},applySimpleSelectorScope:function(e,t){return e.match(L)?(e=e.replace(O,t),e.replace(L,t+" ")):t+" "+e},applyStrictSelectorScope:function(e,t){t=t.replace(/\[is=([^\]]*)\]/g,"$1");var n=[" ",">","+","~"],r=e,o="["+t+"]";return n.forEach(function(e){var t=r.split(e);r=t.map(function(e){var t=e.trim().replace(L,"");return t&&n.indexOf(t)<0&&t.indexOf(o)<0&&(e=t.replace(/([^:]*)(:*)(.*)/,"$1"+o+"$2$3")),e}).join(e)}),r},insertPolyfillHostInCssText:function(e){return e.replace(M,b).replace(T,g)},propertiesFromRule:function(e){var t=e.style.cssText;e.style.content&&!e.style.content.match(/['"]+|attr/)&&(t=t.replace(/content:[^;]*;/g,"content: '"+e.style.content+"';"));var n=e.style;for(var r in n)"initial"===n[r]&&(t+=r+": initial; ");return t},replaceTextInStyles:function(e,t){e&&t&&(e instanceof Array||(e=[e]),Array.prototype.forEach.call(e,function(e){e.textContent=t.call(this,e.textContent)},this))},addCssToDocument:function(e,t){e.match("@import")?c(e,t):s(e)}},d=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//gim,p=/\/\*\s*@polyfill ([^*]*\*+([^/*][^*]*\*+)*\/)([^{]*?){/gim,h=/polyfill-next-selector[^}]*content\:[\s]*?['"](.*?)['"][;\s]*}([^{]*?){/gim,f=/\/\*\s@polyfill-rule([^*]*\*+([^/*][^*]*\*+)*)\//gim,m=/(polyfill-rule)[^}]*(content\:[\s]*['"](.*?)['"])[;\s]*[^}]*}/gim,w=/\/\*\s@polyfill-unscoped-rule([^*]*\*+([^/*][^*]*\*+)*)\//gim,v=/(polyfill-unscoped-rule)[^}]*(content\:[\s]*['"](.*?)['"])[;\s]*[^}]*}/gim,g="-shadowcsshost",b="-shadowcsscontext",y=")(?:\\(((?:\\([^)(]*\\)|[^)(]*)+?)\\))?([^,{]*)",E=new RegExp("("+g+y,"gim"),_=new RegExp("("+b+y,"gim"),S="([>\\s~+[.,{:][\\s\\S]*)?$",T=/\:host/gim,M=/\:host-context/gim,O=g+"-no-combinator",L=new RegExp(g,"gim"),N=(new RegExp(b,"gim"),[/>>>/g,/::shadow/g,/::content/g,/\/deep\//g,/\/shadow\//g,/\/shadow-deep\//g,/\^\^/g,/\^/g]),C=document.createElement("iframe");C.style.display="none";var j,D=navigator.userAgent.match("Chrome"),H="shim-shadowdom",x="shim-shadowdom-css",R="no-shim";if(window.ShadowDOMPolyfill){s("style { display: none !important; }\n");var I=ShadowDOMPolyfill.wrap(document),P=I.querySelector("head");P.insertBefore(l(),P.childNodes[0]),document.addEventListener("DOMContentLoaded",function(){e.urlResolver;if(window.HTMLImports&&!HTMLImports.useNative){var t="link[rel=stylesheet]["+H+"]",n="style["+H+"]";HTMLImports.importer.documentPreloadSelectors+=","+t,HTMLImports.importer.importsPreloadSelectors+=","+t,HTMLImports.parser.documentSelectors=[HTMLImports.parser.documentSelectors,t,n].join(",");var r=HTMLImports.parser.parseGeneric;HTMLImports.parser.parseGeneric=function(e){if(!e[x]){var t=e.__importElement||e;if(!t.hasAttribute(H))return void r.call(this,e);e.__resource&&(t=e.ownerDocument.createElement("style"),t.textContent=e.__resource),HTMLImports.path.resolveUrlsInStyle(t,e.href),t.textContent=u.shimStyle(t),t.removeAttribute(H,""),t.setAttribute(x,""),t[x]=!0,t.parentNode!==P&&(e.parentNode===P?P.replaceChild(t,e):this.addElementToDocument(t)),t.__importParsed=!0,this.markParsingComplete(e),this.parseNext()}};var o=HTMLImports.parser.hasResource;HTMLImports.parser.hasResource=function(e){return"link"===e.localName&&"stylesheet"===e.rel&&e.hasAttribute(H)?e.__resource:o.call(this,e)}}})}e.ShadowCSS=u}(window.WebComponents)),function(e){window.ShadowDOMPolyfill?(window.wrap=ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(e){return e}}(window.WebComponents),function(e){"use strict";function t(e){return void 0!==p[e]}function n(){s.call(this),this._isInvalid=!0}function r(e){return""==e&&n.call(this),e.toLowerCase()}function o(e){var t=e.charCodeAt(0);return t>32&&127>t&&-1==[34,35,60,62,63,96].indexOf(t)?e:encodeURIComponent(e)}function i(e){var t=e.charCodeAt(0);return t>32&&127>t&&-1==[34,35,60,62,96].indexOf(t)?e:encodeURIComponent(e)}function a(e,a,s){function c(e){b.push(e)}var l=a||"scheme start",u=0,d="",v=!1,g=!1,b=[];e:for(;(e[u-1]!=f||0==u)&&!this._isInvalid;){var y=e[u];switch(l){case"scheme start":if(!y||!m.test(y)){if(a){c("Invalid scheme.");break e}d="",l="no scheme";continue}d+=y.toLowerCase(),l="scheme";break;case"scheme":if(y&&w.test(y))d+=y.toLowerCase();else{if(":"!=y){if(a){if(f==y)break e;c("Code point not allowed in scheme: "+y);break e}d="",u=0,l="no scheme";continue}if(this._scheme=d,d="",a)break e;t(this._scheme)&&(this._isRelative=!0),l="file"==this._scheme?"relative":this._isRelative&&s&&s._scheme==this._scheme?"relative or authority":this._isRelative?"authority first slash":"scheme data"}break;case"scheme data":"?"==y?(this._query="?",l="query"):"#"==y?(this._fragment="#",l="fragment"):f!=y&&" "!=y&&"\n"!=y&&"\r"!=y&&(this._schemeData+=o(y));break;case"no scheme":if(s&&t(s._scheme)){l="relative";continue}c("Missing scheme."),n.call(this);break;case"relative or authority":if("/"!=y||"/"!=e[u+1]){c("Expected /, got: "+y),l="relative";continue}l="authority ignore slashes";break;case"relative":if(this._isRelative=!0,"file"!=this._scheme&&(this._scheme=s._scheme),f==y){this._host=s._host,this._port=s._port,this._path=s._path.slice(),this._query=s._query,this._username=s._username,this._password=s._password;break e}if("/"==y||"\\"==y)"\\"==y&&c("\\ is an invalid code point."),l="relative slash";else if("?"==y)this._host=s._host,this._port=s._port,this._path=s._path.slice(),this._query="?",this._username=s._username,this._password=s._password,l="query";else{if("#"!=y){var E=e[u+1],_=e[u+2];("file"!=this._scheme||!m.test(y)||":"!=E&&"|"!=E||f!=_&&"/"!=_&&"\\"!=_&&"?"!=_&&"#"!=_)&&(this._host=s._host,this._port=s._port,this._username=s._username,this._password=s._password,this._path=s._path.slice(),this._path.pop()),l="relative path";continue}this._host=s._host,this._port=s._port,this._path=s._path.slice(),this._query=s._query,this._fragment="#",this._username=s._username,this._password=s._password,l="fragment"}break;case"relative slash":if("/"!=y&&"\\"!=y){"file"!=this._scheme&&(this._host=s._host,this._port=s._port,this._username=s._username,this._password=s._password),l="relative path";continue}"\\"==y&&c("\\ is an invalid code point."),l="file"==this._scheme?"file host":"authority ignore slashes";break;case"authority first slash":if("/"!=y){c("Expected '/', got: "+y),l="authority ignore slashes";continue}l="authority second slash";break;case"authority second slash":if(l="authority ignore slashes","/"!=y){c("Expected '/', got: "+y);continue}break;case"authority ignore slashes":if("/"!=y&&"\\"!=y){l="authority";continue}c("Expected authority, got: "+y);break;case"authority":if("@"==y){v&&(c("@ already seen."),d+="%40"),v=!0;for(var S=0;S<d.length;S++){var T=d[S];if("   "!=T&&"\n"!=T&&"\r"!=T)if(":"!=T||null!==this._password){var M=o(T);null!==this._password?this._password+=M:this._username+=M}else this._password="";else c("Invalid whitespace in authority.")}d=""}else{if(f==y||"/"==y||"\\"==y||"?"==y||"#"==y){u-=d.length,d="",l="host";continue}d+=y}break;case"file host":if(f==y||"/"==y||"\\"==y||"?"==y||"#"==y){2!=d.length||!m.test(d[0])||":"!=d[1]&&"|"!=d[1]?0==d.length?l="relative path start":(this._host=r.call(this,d),d="",l="relative path start"):l="relative path";continue}"  "==y||"\n"==y||"\r"==y?c("Invalid whitespace in file host."):d+=y;break;case"host":case"hostname":if(":"!=y||g){if(f==y||"/"==y||"\\"==y||"?"==y||"#"==y){if(this._host=r.call(this,d),d="",l="relative path start",a)break e;continue}"    "!=y&&"\n"!=y&&"\r"!=y?("["==y?g=!0:"]"==y&&(g=!1),d+=y):c("Invalid code point in host/hostname: "+y)}else if(this._host=r.call(this,d),d="",l="port","hostname"==a)break e;break;case"port":if(/[0-9]/.test(y))d+=y;else{if(f==y||"/"==y||"\\"==y||"?"==y||"#"==y||a){if(""!=d){var O=parseInt(d,10);O!=p[this._scheme]&&(this._port=O+""),d=""}if(a)break e;l="relative path start";continue}"    "==y||"\n"==y||"\r"==y?c("Invalid code point in port: "+y):n.call(this)}break;case"relative path start":if("\\"==y&&c("'\\' not allowed in path."),l="relative path","/"!=y&&"\\"!=y)continue;break;case"relative path":if(f!=y&&"/"!=y&&"\\"!=y&&(a||"?"!=y&&"#"!=y))" "!=y&&"\n"!=y&&"\r"!=y&&(d+=o(y));else{"\\"==y&&c("\\ not allowed in relative path.");var L;(L=h[d.toLowerCase()])&&(d=L),".."==d?(this._path.pop(),"/"!=y&&"\\"!=y&&this._path.push("")):"."==d&&"/"!=y&&"\\"!=y?this._path.push(""):"."!=d&&("file"==this._scheme&&0==this._path.length&&2==d.length&&m.test(d[0])&&"|"==d[1]&&(d=d[0]+":"),this._path.push(d)),d="","?"==y?(this._query="?",l="query"):"#"==y&&(this._fragment="#",l="fragment")}break;case"query":a||"#"!=y?f!=y&&" "!=y&&"\n"!=y&&"\r"!=y&&(this._query+=i(y)):(this._fragment="#",l="fragment");break;case"fragment":f!=y&&"  "!=y&&"\n"!=y&&"\r"!=y&&(this._fragment+=y)}u++}}function s(){this._scheme="",this._schemeData="",this._username="",this._password=null,this._host="",this._port="",this._path=[],this._query="",this._fragment="",this._isInvalid=!1,this._isRelative=!1}function c(e,t){void 0===t||t instanceof c||(t=new c(String(t))),this._url=e,s.call(this);var n=e.replace(/^[ \t\r\n\f]+|[ \t\r\n\f]+$/g,"");a.call(this,n,null,t)}var l=!1;if(!e.forceJURL)try{var u=new URL("b","http://a");u.pathname="c%20d",l="http://a/c%20d"===u.href}catch(d){}if(!l){var p=Object.create(null);p.ftp=21,p.file=0,p.gopher=70,p.http=80,p.https=443,p.ws=80,p.wss=443;var h=Object.create(null);h["%2e"]=".",h[".%2e"]="..",h["%2e."]="..",h["%2e%2e"]="..";var f=void 0,m=/[a-zA-Z]/,w=/[a-zA-Z0-9\+\-\.]/;c.prototype={toString:function(){return this.href},get href(){if(this._isInvalid)return this._url;var e="";return(""!=this._username||null!=this._password)&&(e=this._username+(null!=this._password?":"+this._password:"")+"@"),this.protocol+(this._isRelative?"//"+e+this.host:"")+this.pathname+this._query+this._fragment},set href(e){s.call(this),a.call(this,e)},get protocol(){return this._scheme+":"},set protocol(e){this._isInvalid||a.call(this,e+":","scheme start")},get host(){return this._isInvalid?"":this._port?this._host+":"+this._port:this._host},set host(e){!this._isInvalid&&this._isRelative&&a.call(this,e,"host")},get hostname(){return this._host},set hostname(e){!this._isInvalid&&this._isRelative&&a.call(this,e,"hostname")},get port(){return this._port},set port(e){!this._isInvalid&&this._isRelative&&a.call(this,e,"port")},get pathname(){return this._isInvalid?"":this._isRelative?"/"+this._path.join("/"):this._schemeData},set pathname(e){!this._isInvalid&&this._isRelative&&(this._path=[],a.call(this,e,"relative path start"))},get search(){return this._isInvalid||!this._query||"?"==this._query?"":this._query},set search(e){!this._isInvalid&&this._isRelative&&(this._query="?","?"==e[0]&&(e=e.slice(1)),a.call(this,e,"query"))},get hash(){return this._isInvalid||!this._fragment||"#"==this._fragment?"":this._fragment},set hash(e){this._isInvalid||(this._fragment="#","#"==e[0]&&(e=e.slice(1)),a.call(this,e,"fragment"))},get origin(){var e;if(this._isInvalid||!this._scheme)return"";switch(this._scheme){case"data":case"file":case"javascript":case"mailto":return"null"}return e=this.host,e?this._scheme+"://"+e:""}};var v=e.URL;v&&(c.createObjectURL=function(e){return v.createObjectURL.apply(v,arguments)},c.revokeObjectURL=function(e){v.revokeObjectURL(e)}),e.URL=c}}(self),function(e){function t(e){y.push(e),b||(b=!0,m(r))}function n(e){return window.ShadowDOMPolyfill&&window.ShadowDOMPolyfill.wrapIfNeeded(e)||e}function r(){b=!1;var e=y;y=[],e.sort(function(e,t){return e.uid_-t.uid_});var t=!1;e.forEach(function(e){var n=e.takeRecords();o(e),n.length&&(e.callback_(n,e),t=!0)}),t&&r()}function o(e){e.nodes_.forEach(function(t){var n=w.get(t);n&&n.forEach(function(t){t.observer===e&&t.removeTransientObservers()})})}function i(e,t){for(var n=e;n;n=n.parentNode){var r=w.get(n);if(r)for(var o=0;o<r.length;o++){var i=r[o],a=i.options;if(n===e||a.subtree){var s=t(a);s&&i.enqueue(s)}}}}function a(e){this.callback_=e,this.nodes_=[],this.records_=[],this.uid_=++E}function s(e,t){this.type=e,this.target=t,this.addedNodes=[],this.removedNodes=[],this.previousSibling=null,this.nextSibling=null,this.attributeName=null,this.attributeNamespace=null,this.oldValue=null}function c(e){var t=new s(e.type,e.target);return t.addedNodes=e.addedNodes.slice(),t.removedNodes=e.removedNodes.slice(),t.previousSibling=e.previousSibling,t.nextSibling=e.nextSibling,t.attributeName=e.attributeName,t.attributeNamespace=e.attributeNamespace,t.oldValue=e.oldValue,t}function l(e,t){return _=new s(e,t)}function u(e){return S?S:(S=c(_),S.oldValue=e,S)}function d(){_=S=void 0}function p(e){return e===S||e===_}function h(e,t){return e===t?e:S&&p(e)?S:null}function f(e,t,n){this.observer=e,this.target=t,this.options=n,this.transientObservedNodes=[]}var m,w=new WeakMap;if(/Trident|Edge/.test(navigator.userAgent))m=setTimeout;else if(window.setImmediate)m=window.setImmediate;else{var v=[],g=String(Math.random());window.addEventListener("message",function(e){if(e.data===g){var t=v;v=[],t.forEach(function(e){e()})}}),m=function(e){v.push(e),window.postMessage(g,"*")}}var b=!1,y=[],E=0;a.prototype={observe:function(e,t){if(e=n(e),!t.childList&&!t.attributes&&!t.characterData||t.attributeOldValue&&!t.attributes||t.attributeFilter&&t.attributeFilter.length&&!t.attributes||t.characterDataOldValue&&!t.characterData)throw new SyntaxError;var r=w.get(e);r||w.set(e,r=[]);for(var o,i=0;i<r.length;i++)if(r[i].observer===this){o=r[i],o.removeListeners(),o.options=t;break}o||(o=new f(this,e,t),r.push(o),this.nodes_.push(e)),o.addListeners()},disconnect:function(){this.nodes_.forEach(function(e){for(var t=w.get(e),n=0;n<t.length;n++){var r=t[n];if(r.observer===this){r.removeListeners(),t.splice(n,1);break}}},this),this.records_=[]},takeRecords:function(){var e=this.records_;return this.records_=[],e}};var _,S;f.prototype={enqueue:function(e){var n=this.observer.records_,r=n.length;if(n.length>0){var o=n[r-1],i=h(o,e);if(i)return void(n[r-1]=i)}else t(this.observer);n[r]=e},addListeners:function(){this.addListeners_(this.target)},addListeners_:function(e){var t=this.options;t.attributes&&e.addEventListener("DOMAttrModified",this,!0),t.characterData&&e.addEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.addEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.addEventListener("DOMNodeRemoved",this,!0)},removeListeners:function(){this.removeListeners_(this.target)},removeListeners_:function(e){var t=this.options;t.attributes&&e.removeEventListener("DOMAttrModified",this,!0),t.characterData&&e.removeEventListener("DOMCharacterDataModified",this,!0),t.childList&&e.removeEventListener("DOMNodeInserted",this,!0),(t.childList||t.subtree)&&e.removeEventListener("DOMNodeRemoved",this,!0)},addTransientObserver:function(e){if(e!==this.target){this.addListeners_(e),this.transientObservedNodes.push(e);var t=w.get(e);t||w.set(e,t=[]),t.push(this)}},removeTransientObservers:function(){var e=this.transientObservedNodes;this.transientObservedNodes=[],e.forEach(function(e){this.removeListeners_(e);for(var t=w.get(e),n=0;n<t.length;n++)if(t[n]===this){t.splice(n,1);break}},this)},handleEvent:function(e){switch(e.stopImmediatePropagation(),e.type){case"DOMAttrModified":var t=e.attrName,n=e.relatedNode.namespaceURI,r=e.target,o=new l("attributes",r);o.attributeName=t,o.attributeNamespace=n;var a=e.attrChange===MutationEvent.ADDITION?null:e.prevValue;i(r,function(e){return!e.attributes||e.attributeFilter&&e.attributeFilter.length&&-1===e.attributeFilter.indexOf(t)&&-1===e.attributeFilter.indexOf(n)?void 0:e.attributeOldValue?u(a):o});break;case"DOMCharacterDataModified":var r=e.target,o=l("characterData",r),a=e.prevValue;i(r,function(e){return e.characterData?e.characterDataOldValue?u(a):o:void 0});break;case"DOMNodeRemoved":this.addTransientObserver(e.target);case"DOMNodeInserted":var s,c,p=e.target;"DOMNodeInserted"===e.type?(s=[p],c=[]):(s=[],c=[p]);var h=p.previousSibling,f=p.nextSibling,o=l("childList",e.target.parentNode);o.addedNodes=s,o.removedNodes=c,o.previousSibling=h,o.nextSibling=f,i(e.relatedNode,function(e){return e.childList?o:void 0})}d()}},e.JsMutationObserver=a,e.MutationObserver||(e.MutationObserver=a)}(self),window.HTMLImports=window.HTMLImports||{flags:{}},function(e){function t(e,t){t=t||f,r(function(){i(e,t)},t)}function n(e){return"complete"===e.readyState||e.readyState===v}function r(e,t){if(n(t))e&&e();else{var o=function(){("complete"===t.readyState||t.readyState===v)&&(t.removeEventListener(g,o),r(e,t))};t.addEventListener(g,o)}}function o(e){e.target.__loaded=!0}function i(e,t){function n(){c==l&&e&&e({allImports:s,loadedImports:u,errorImports:d})}function r(e){o(e),u.push(this),c++,n()}function i(e){d.push(this),c++,n()}var s=t.querySelectorAll("link[rel=import]"),c=0,l=s.length,u=[],d=[];if(l)for(var p,h=0;l>h&&(p=s[h]);h++)a(p)?(c++,n()):(p.addEventListener("load",r),p.addEventListener("error",i));else n()}function a(e){return d?e.__loaded||e["import"]&&"loading"!==e["import"].readyState:e.__importParsed}function s(e){for(var t,n=0,r=e.length;r>n&&(t=e[n]);n++)c(t)&&l(t)}function c(e){return"link"===e.localName&&"import"===e.rel}function l(e){var t=e["import"];t?o({target:e}):(e.addEventListener("load",o),e.addEventListener("error",o))}var u="import",d=Boolean(u in document.createElement("link")),p=Boolean(window.ShadowDOMPolyfill),h=function(e){return p?window.ShadowDOMPolyfill.wrapIfNeeded(e):e},f=h(document),m={get:function(){var e=window.HTMLImports.currentScript||document.currentScript||("complete"!==document.readyState?document.scripts[document.scripts.length-1]:null);return h(e)},configurable:!0};Object.defineProperty(document,"_currentScript",m),Object.defineProperty(f,"_currentScript",m);var w=/Trident/.test(navigator.userAgent),v=w?"complete":"interactive",g="readystatechange";d&&(new MutationObserver(function(e){for(var t,n=0,r=e.length;r>n&&(t=e[n]);n++)t.addedNodes&&s(t.addedNodes)}).observe(document.head,{childList:!0}),function(){if("loading"===document.readyState)for(var e,t=document.querySelectorAll("link[rel=import]"),n=0,r=t.length;r>n&&(e=t[n]);n++)l(e)}()),t(function(e){window.HTMLImports.ready=!0,window.HTMLImports.readyTime=(new Date).getTime();var t=f.createEvent("CustomEvent");t.initCustomEvent("HTMLImportsLoaded",!0,!0,e),f.dispatchEvent(t)}),e.IMPORT_LINK_TYPE=u,e.useNative=d,e.rootDocument=f,e.whenReady=t,e.isIE=w}(window.HTMLImports),function(e){var t=[],n=function(e){t.push(e)},r=function(){t.forEach(function(t){t(e)})};e.addModule=n,e.initializeModules=r}(window.HTMLImports),window.HTMLImports.addModule(function(e){var t=/(url\()([^)]*)(\))/g,n=/(@import[\s]+(?!url\())([^;]*)(;)/g,r={resolveUrlsInStyle:function(e,t){var n=e.ownerDocument,r=n.createElement("a");return e.textContent=this.resolveUrlsInCssText(e.textContent,t,r),e},resolveUrlsInCssText:function(e,r,o){var i=this.replaceUrls(e,o,r,t);return i=this.replaceUrls(i,o,r,n)},replaceUrls:function(e,t,n,r){return e.replace(r,function(e,r,o,i){var a=o.replace(/["']/g,"");return n&&(a=new URL(a,n).href),t.href=a,a=t.href,r+"'"+a+"'"+i})}};e.path=r}),window.HTMLImports.addModule(function(e){
var t={async:!0,ok:function(e){return e.status>=200&&e.status<300||304===e.status||0===e.status},load:function(n,r,o){var i=new XMLHttpRequest;return(e.flags.debug||e.flags.bust)&&(n+="?"+Math.random()),i.open("GET",n,t.async),i.addEventListener("readystatechange",function(e){if(4===i.readyState){var n=i.getResponseHeader("Location"),a=null;if(n)var a="/"===n.substr(0,1)?location.origin+n:n;r.call(o,!t.ok(i)&&i,i.response||i.responseText,a)}}),i.send(),i},loadDocument:function(e,t,n){this.load(e,t,n).responseType="document"}};e.xhr=t}),window.HTMLImports.addModule(function(e){var t=e.xhr,n=e.flags,r=function(e,t){this.cache={},this.onload=e,this.oncomplete=t,this.inflight=0,this.pending={}};r.prototype={addNodes:function(e){this.inflight+=e.length;for(var t,n=0,r=e.length;r>n&&(t=e[n]);n++)this.require(t);this.checkDone()},addNode:function(e){this.inflight++,this.require(e),this.checkDone()},require:function(e){var t=e.src||e.href;e.__nodeUrl=t,this.dedupe(t,e)||this.fetch(t,e)},dedupe:function(e,t){if(this.pending[e])return this.pending[e].push(t),!0;return this.cache[e]?(this.onload(e,t,this.cache[e]),this.tail(),!0):(this.pending[e]=[t],!1)},fetch:function(e,r){if(n.load&&console.log("fetch",e,r),e)if(e.match(/^data:/)){var o=e.split(","),i=o[0],a=o[1];a=i.indexOf(";base64")>-1?atob(a):decodeURIComponent(a),setTimeout(function(){this.receive(e,r,null,a)}.bind(this),0)}else{var s=function(t,n,o){this.receive(e,r,t,n,o)}.bind(this);t.load(e,s)}else setTimeout(function(){this.receive(e,r,{error:"href must be specified"},null)}.bind(this),0)},receive:function(e,t,n,r,o){this.cache[e]=r;for(var i,a=this.pending[e],s=0,c=a.length;c>s&&(i=a[s]);s++)this.onload(e,i,r,n,o),this.tail();this.pending[e]=null},tail:function(){--this.inflight,this.checkDone()},checkDone:function(){this.inflight||this.oncomplete()}},e.Loader=r}),window.HTMLImports.addModule(function(e){var t=function(e){this.addCallback=e,this.mo=new MutationObserver(this.handler.bind(this))};t.prototype={handler:function(e){for(var t,n=0,r=e.length;r>n&&(t=e[n]);n++)"childList"===t.type&&t.addedNodes.length&&this.addedNodes(t.addedNodes)},addedNodes:function(e){this.addCallback&&this.addCallback(e);for(var t,n=0,r=e.length;r>n&&(t=e[n]);n++)t.children&&t.children.length&&this.addedNodes(t.children)},observe:function(e){this.mo.observe(e,{childList:!0,subtree:!0})}},e.Observer=t}),window.HTMLImports.addModule(function(e){function t(e){return"link"===e.localName&&e.rel===u}function n(e){var t=r(e);return"data:text/javascript;charset=utf-8,"+encodeURIComponent(t)}function r(e){return e.textContent+o(e)}function o(e){var t=e.ownerDocument;t.__importedScripts=t.__importedScripts||0;var n=e.ownerDocument.baseURI,r=t.__importedScripts?"-"+t.__importedScripts:"";return t.__importedScripts++,"\n//# sourceURL="+n+r+".js\n"}function i(e){var t=e.ownerDocument.createElement("style");return t.textContent=e.textContent,a.resolveUrlsInStyle(t),t}var a=e.path,s=e.rootDocument,c=e.flags,l=e.isIE,u=e.IMPORT_LINK_TYPE,d="link[rel="+u+"]",p={documentSelectors:d,importsSelectors:[d,"link[rel=stylesheet]:not([type])","style:not([type])","script:not([type])",'script[type="application/javascript"]','script[type="text/javascript"]'].join(","),map:{link:"parseLink",script:"parseScript",style:"parseStyle"},dynamicElements:[],parseNext:function(){var e=this.nextToParse();e&&this.parse(e)},parse:function(e){if(this.isParsed(e))return void(c.parse&&console.log("[%s] is already parsed",e.localName));var t=this[this.map[e.localName]];t&&(this.markParsing(e),t.call(this,e))},parseDynamic:function(e,t){this.dynamicElements.push(e),t||this.parseNext()},markParsing:function(e){c.parse&&console.log("parsing",e),this.parsingElement=e},markParsingComplete:function(e){e.__importParsed=!0,this.markDynamicParsingComplete(e),e.__importElement&&(e.__importElement.__importParsed=!0,this.markDynamicParsingComplete(e.__importElement)),this.parsingElement=null,c.parse&&console.log("completed",e)},markDynamicParsingComplete:function(e){var t=this.dynamicElements.indexOf(e);t>=0&&this.dynamicElements.splice(t,1)},parseImport:function(e){if(e["import"]=e.__doc,window.HTMLImports.__importsParsingHook&&window.HTMLImports.__importsParsingHook(e),e["import"]&&(e["import"].__importParsed=!0),this.markParsingComplete(e),e.__resource&&!e.__error?e.dispatchEvent(new CustomEvent("load",{bubbles:!1})):e.dispatchEvent(new CustomEvent("error",{bubbles:!1})),e.__pending)for(var t;e.__pending.length;)t=e.__pending.shift(),t&&t({target:e});this.parseNext()},parseLink:function(e){t(e)?this.parseImport(e):(e.href=e.href,this.parseGeneric(e))},parseStyle:function(e){var t=e;e=i(e),t.__appliedElement=e,e.__importElement=t,this.parseGeneric(e)},parseGeneric:function(e){this.trackElement(e),this.addElementToDocument(e)},rootImportForElement:function(e){for(var t=e;t.ownerDocument.__importLink;)t=t.ownerDocument.__importLink;return t},addElementToDocument:function(e){var t=this.rootImportForElement(e.__importElement||e);t.parentNode.insertBefore(e,t)},trackElement:function(e,t){var n=this,r=function(o){e.removeEventListener("load",r),e.removeEventListener("error",r),t&&t(o),n.markParsingComplete(e),n.parseNext()};if(e.addEventListener("load",r),e.addEventListener("error",r),l&&"style"===e.localName){var o=!1;if(-1==e.textContent.indexOf("@import"))o=!0;else if(e.sheet){o=!0;for(var i,a=e.sheet.cssRules,s=a?a.length:0,c=0;s>c&&(i=a[c]);c++)i.type===CSSRule.IMPORT_RULE&&(o=o&&Boolean(i.styleSheet))}o&&setTimeout(function(){e.dispatchEvent(new CustomEvent("load",{bubbles:!1}))})}},parseScript:function(t){var r=document.createElement("script");r.__importElement=t,r.src=t.src?t.src:n(t),e.currentScript=t,this.trackElement(r,function(t){r.parentNode&&r.parentNode.removeChild(r),e.currentScript=null}),this.addElementToDocument(r)},nextToParse:function(){return this._mayParse=[],!this.parsingElement&&(this.nextToParseInDoc(s)||this.nextToParseDynamic())},nextToParseInDoc:function(e,n){if(e&&this._mayParse.indexOf(e)<0){this._mayParse.push(e);for(var r,o=e.querySelectorAll(this.parseSelectorsForNode(e)),i=0,a=o.length;a>i&&(r=o[i]);i++)if(!this.isParsed(r))return this.hasResource(r)?t(r)?this.nextToParseInDoc(r.__doc,r):r:void 0}return n},nextToParseDynamic:function(){return this.dynamicElements[0]},parseSelectorsForNode:function(e){var t=e.ownerDocument||e;return t===s?this.documentSelectors:this.importsSelectors},isParsed:function(e){return e.__importParsed},needsDynamicParsing:function(e){return this.dynamicElements.indexOf(e)>=0},hasResource:function(e){return t(e)&&void 0===e.__doc?!1:!0}};e.parser=p,e.IMPORT_SELECTOR=d}),window.HTMLImports.addModule(function(e){function t(e){return n(e,a)}function n(e,t){return"link"===e.localName&&e.getAttribute("rel")===t}function r(e){return!!Object.getOwnPropertyDescriptor(e,"baseURI")}function o(e,t){var n=document.implementation.createHTMLDocument(a);n._URL=t;var o=n.createElement("base");o.setAttribute("href",t),n.baseURI||r(n)||Object.defineProperty(n,"baseURI",{value:t});var i=n.createElement("meta");return i.setAttribute("charset","utf-8"),n.head.appendChild(i),n.head.appendChild(o),n.body.innerHTML=e,window.HTMLTemplateElement&&HTMLTemplateElement.bootstrap&&HTMLTemplateElement.bootstrap(n),n}var i=e.flags,a=e.IMPORT_LINK_TYPE,s=e.IMPORT_SELECTOR,c=e.rootDocument,l=e.Loader,u=e.Observer,d=e.parser,p={documents:{},documentPreloadSelectors:s,importsPreloadSelectors:[s].join(","),loadNode:function(e){h.addNode(e)},loadSubtree:function(e){var t=this.marshalNodes(e);h.addNodes(t)},marshalNodes:function(e){return e.querySelectorAll(this.loadSelectorsForNode(e))},loadSelectorsForNode:function(e){var t=e.ownerDocument||e;return t===c?this.documentPreloadSelectors:this.importsPreloadSelectors},loaded:function(e,n,r,a,s){if(i.load&&console.log("loaded",e,n),n.__resource=r,n.__error=a,t(n)){var c=this.documents[e];void 0===c&&(c=a?null:o(r,s||e),c&&(c.__importLink=n,this.bootDocument(c)),this.documents[e]=c),n.__doc=c}d.parseNext()},bootDocument:function(e){this.loadSubtree(e),this.observer.observe(e),d.parseNext()},loadedAll:function(){d.parseNext()}},h=new l(p.loaded.bind(p),p.loadedAll.bind(p));if(p.observer=new u,!document.baseURI){var f={get:function(){var e=document.querySelector("base");return e?e.href:window.location.href},configurable:!0};Object.defineProperty(document,"baseURI",f),Object.defineProperty(c,"baseURI",f)}e.importer=p,e.importLoader=h}),window.HTMLImports.addModule(function(e){var t=e.parser,n=e.importer,r={added:function(e){for(var r,o,i,a,s=0,c=e.length;c>s&&(a=e[s]);s++)r||(r=a.ownerDocument,o=t.isParsed(r)),i=this.shouldLoadNode(a),i&&n.loadNode(a),this.shouldParseNode(a)&&o&&t.parseDynamic(a,i)},shouldLoadNode:function(e){return 1===e.nodeType&&o.call(e,n.loadSelectorsForNode(e))},shouldParseNode:function(e){return 1===e.nodeType&&o.call(e,t.parseSelectorsForNode(e))}};n.observer.addCallback=r.added.bind(r);var o=HTMLElement.prototype.matches||HTMLElement.prototype.matchesSelector||HTMLElement.prototype.webkitMatchesSelector||HTMLElement.prototype.mozMatchesSelector||HTMLElement.prototype.msMatchesSelector}),function(e){function t(){window.HTMLImports.importer.bootDocument(o)}var n=e.initializeModules,r=e.isIE;if(!e.useNative){r&&"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,Boolean(t.bubbles),Boolean(t.cancelable),t.detail),n.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})},n},window.CustomEvent.prototype=window.Event.prototype),n();var o=e.rootDocument;"complete"===document.readyState||"interactive"===document.readyState&&!window.attachEvent?t():document.addEventListener("DOMContentLoaded",t)}}(window.HTMLImports),window.CustomElements=window.CustomElements||{flags:{}},function(e){var t=e.flags,n=[],r=function(e){n.push(e)},o=function(){n.forEach(function(t){t(e)})};e.addModule=r,e.initializeModules=o,e.hasNative=Boolean(document.registerElement),e.isIE=/Trident/.test(navigator.userAgent),e.useNative=!t.register&&e.hasNative&&!window.ShadowDOMPolyfill&&(!window.HTMLImports||window.HTMLImports.useNative)}(window.CustomElements),window.CustomElements.addModule(function(e){function t(e,t){n(e,function(e){return t(e)?!0:void r(e,t)}),r(e,t)}function n(e,t,r){var o=e.firstElementChild;if(!o)for(o=e.firstChild;o&&o.nodeType!==Node.ELEMENT_NODE;)o=o.nextSibling;for(;o;)t(o,r)!==!0&&n(o,t,r),o=o.nextElementSibling;return null}function r(e,n){for(var r=e.shadowRoot;r;)t(r,n),r=r.olderShadowRoot}function o(e,t){i(e,t,[])}function i(e,t,n){if(e=window.wrap(e),!(n.indexOf(e)>=0)){n.push(e);for(var r,o=e.querySelectorAll("link[rel="+a+"]"),s=0,c=o.length;c>s&&(r=o[s]);s++)r["import"]&&i(r["import"],t,n);t(e)}}var a=window.HTMLImports?window.HTMLImports.IMPORT_LINK_TYPE:"none";e.forDocumentTree=o,e.forSubtree=t}),window.CustomElements.addModule(function(e){function t(e,t){return n(e,t)||r(e,t)}function n(t,n){return e.upgrade(t,n)?!0:void(n&&a(t))}function r(e,t){b(e,function(e){return n(e,t)?!0:void 0})}function o(e){S.push(e),_||(_=!0,setTimeout(i))}function i(){_=!1;for(var e,t=S,n=0,r=t.length;r>n&&(e=t[n]);n++)e();S=[]}function a(e){E?o(function(){s(e)}):s(e)}function s(e){e.__upgraded__&&!e.__attached&&(e.__attached=!0,e.attachedCallback&&e.attachedCallback())}function c(e){l(e),b(e,function(e){l(e)})}function l(e){E?o(function(){u(e)}):u(e)}function u(e){e.__upgraded__&&e.__attached&&(e.__attached=!1,e.detachedCallback&&e.detachedCallback())}function d(e){for(var t=e,n=window.wrap(document);t;){if(t==n)return!0;t=t.parentNode||t.nodeType===Node.DOCUMENT_FRAGMENT_NODE&&t.host}}function p(e){if(e.shadowRoot&&!e.shadowRoot.__watched){g.dom&&console.log("watching shadow-root for: ",e.localName);for(var t=e.shadowRoot;t;)m(t),t=t.olderShadowRoot}}function h(e,n){if(g.dom){var r=n[0];if(r&&"childList"===r.type&&r.addedNodes&&r.addedNodes){for(var o=r.addedNodes[0];o&&o!==document&&!o.host;)o=o.parentNode;var i=o&&(o.URL||o._URL||o.host&&o.host.localName)||"";i=i.split("/?").shift().split("/").pop()}console.group("mutations (%d) [%s]",n.length,i||"")}var a=d(e);n.forEach(function(e){"childList"===e.type&&(T(e.addedNodes,function(e){e.localName&&t(e,a)}),T(e.removedNodes,function(e){e.localName&&c(e)}))}),g.dom&&console.groupEnd()}function f(e){for(e=window.wrap(e),e||(e=window.wrap(document));e.parentNode;)e=e.parentNode;var t=e.__observer;t&&(h(e,t.takeRecords()),i())}function m(e){if(!e.__observer){var t=new MutationObserver(h.bind(this,e));t.observe(e,{childList:!0,subtree:!0}),e.__observer=t}}function w(e){e=window.wrap(e),g.dom&&console.group("upgradeDocument: ",e.baseURI.split("/").pop());var n=e===window.wrap(document);t(e,n),m(e),g.dom&&console.groupEnd()}function v(e){y(e,w)}var g=e.flags,b=e.forSubtree,y=e.forDocumentTree,E=!window.MutationObserver||window.MutationObserver===window.JsMutationObserver;e.hasPolyfillMutations=E;var _=!1,S=[],T=Array.prototype.forEach.call.bind(Array.prototype.forEach),M=Element.prototype.createShadowRoot;M&&(Element.prototype.createShadowRoot=function(){var e=M.call(this);return window.CustomElements.watchShadow(this),e}),e.watchShadow=p,e.upgradeDocumentTree=v,e.upgradeDocument=w,e.upgradeSubtree=r,e.upgradeAll=t,e.attached=a,e.takeRecords=f}),window.CustomElements.addModule(function(e){function t(t,r){if(!t.__upgraded__&&t.nodeType===Node.ELEMENT_NODE){var o=t.getAttribute("is"),i=e.getRegisteredDefinition(t.localName)||e.getRegisteredDefinition(o);if(i&&(o&&i.tag==t.localName||!o&&!i["extends"]))return n(t,i,r)}}function n(t,n,o){return a.upgrade&&console.group("upgrade:",t.localName),n.is&&t.setAttribute("is",n.is),r(t,n),t.__upgraded__=!0,i(t),o&&e.attached(t),e.upgradeSubtree(t,o),a.upgrade&&console.groupEnd(),t}function r(e,t){Object.__proto__?e.__proto__=t.prototype:(o(e,t.prototype,t["native"]),e.__proto__=t.prototype)}function o(e,t,n){for(var r={},o=t;o!==n&&o!==HTMLElement.prototype;){for(var i,a=Object.getOwnPropertyNames(o),s=0;i=a[s];s++)r[i]||(Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(o,i)),r[i]=1);o=Object.getPrototypeOf(o)}}function i(e){e.createdCallback&&e.createdCallback()}var a=e.flags;e.upgrade=t,e.upgradeWithDefinition=n,e.implementPrototype=r}),window.CustomElements.addModule(function(e){function t(t,r){var c=r||{};if(!t)throw new Error("document.registerElement: first argument `name` must not be empty");if(t.indexOf("-")<0)throw new Error("document.registerElement: first argument ('name') must contain a dash ('-'). Argument provided was '"+String(t)+"'.");if(o(t))throw new Error("Failed to execute 'registerElement' on 'Document': Registration failed for type '"+String(t)+"'. The type name is invalid.");if(l(t))throw new Error("DuplicateDefinitionError: a type with name '"+String(t)+"' is already registered");return c.prototype||(c.prototype=Object.create(HTMLElement.prototype)),c.__name=t.toLowerCase(),c.lifecycle=c.lifecycle||{},c.ancestry=i(c["extends"]),a(c),s(c),n(c.prototype),u(c.__name,c),c.ctor=d(c),c.ctor.prototype=c.prototype,c.prototype.constructor=c.ctor,e.ready&&v(document),c.ctor}function n(e){if(!e.setAttribute._polyfilled){var t=e.setAttribute;e.setAttribute=function(e,n){r.call(this,e,n,t)};var n=e.removeAttribute;e.removeAttribute=function(e){r.call(this,e,null,n)},e.setAttribute._polyfilled=!0}}function r(e,t,n){e=e.toLowerCase();var r=this.getAttribute(e);n.apply(this,arguments);var o=this.getAttribute(e);this.attributeChangedCallback&&o!==r&&this.attributeChangedCallback(e,r,o)}function o(e){for(var t=0;t<_.length;t++)if(e===_[t])return!0}function i(e){var t=l(e);return t?i(t["extends"]).concat([t]):[]}function a(e){for(var t,n=e["extends"],r=0;t=e.ancestry[r];r++)n=t.is&&t.tag;e.tag=n||e.__name,n&&(e.is=e.__name)}function s(e){if(!Object.__proto__){var t=HTMLElement.prototype;if(e.is){var n=document.createElement(e.tag);t=Object.getPrototypeOf(n)}for(var r,o=e.prototype,i=!1;o;)o==t&&(i=!0),r=Object.getPrototypeOf(o),r&&(o.__proto__=r),o=r;i||console.warn(e.tag+" prototype not found in prototype chain for "+e.is),e["native"]=t}}function c(e){return b(M(e.tag),e)}function l(e){return e?S[e.toLowerCase()]:void 0}function u(e,t){S[e]=t}function d(e){return function(){return c(e)}}function p(e,t,n){return e===T?h(t,n):O(e,t)}function h(e,t){e&&(e=e.toLowerCase()),t&&(t=t.toLowerCase());var n=l(t||e);if(n){if(e==n.tag&&t==n.is)return new n.ctor;if(!t&&!n.is)return new n.ctor}var r;return t?(r=h(e),r.setAttribute("is",t),r):(r=M(e),e.indexOf("-")>=0&&y(r,HTMLElement),r)}function f(e,t){var n=e[t];e[t]=function(){var e=n.apply(this,arguments);return g(e),e}}var m,w=e.isIE,v=e.upgradeDocumentTree,g=e.upgradeAll,b=e.upgradeWithDefinition,y=e.implementPrototype,E=e.useNative,_=["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"],S={},T="http://www.w3.org/1999/xhtml",M=document.createElement.bind(document),O=document.createElementNS.bind(document);m=Object.__proto__||E?function(e,t){return e instanceof t}:function(e,t){if(e instanceof t)return!0;for(var n=e;n;){if(n===t.prototype)return!0;n=n.__proto__}return!1},f(Node.prototype,"cloneNode"),f(document,"importNode"),w&&!function(){var e=document.importNode;document.importNode=function(){var t=e.apply(document,arguments);if(t.nodeType==t.DOCUMENT_FRAGMENT_NODE){var n=document.createDocumentFragment();return n.appendChild(t),n}return t}}(),document.registerElement=t,document.createElement=h,document.createElementNS=p,e.registry=S,e["instanceof"]=m,e.reservedTagList=_,e.getRegisteredDefinition=l,document.register=document.registerElement}),function(e){function t(){a(window.wrap(document)),window.CustomElements.ready=!0;var e=window.requestAnimationFrame||function(e){setTimeout(e,16)};e(function(){setTimeout(function(){window.CustomElements.readyTime=Date.now(),window.HTMLImports&&(window.CustomElements.elapsed=window.CustomElements.readyTime-window.HTMLImports.readyTime),document.dispatchEvent(new CustomEvent("WebComponentsReady",{bubbles:!0}))})})}var n=e.useNative,r=e.initializeModules,o=e.isIE;if(n){var i=function(){};e.watchShadow=i,e.upgrade=i,e.upgradeAll=i,e.upgradeDocumentTree=i,e.upgradeSubtree=i,e.takeRecords=i,e["instanceof"]=function(e,t){return e instanceof t}}else r();var a=e.upgradeDocumentTree,s=e.upgradeDocument;if(window.wrap||(window.ShadowDOMPolyfill?(window.wrap=window.ShadowDOMPolyfill.wrapIfNeeded,window.unwrap=window.ShadowDOMPolyfill.unwrapIfNeeded):window.wrap=window.unwrap=function(e){return e}),window.HTMLImports&&(window.HTMLImports.__importsParsingHook=function(e){e["import"]&&s(wrap(e["import"]))}),o&&"function"!=typeof window.CustomEvent&&(window.CustomEvent=function(e,t){t=t||{};var n=document.createEvent("CustomEvent");return n.initCustomEvent(e,Boolean(t.bubbles),Boolean(t.cancelable),t.detail),n.preventDefault=function(){Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})},n},window.CustomEvent.prototype=window.Event.prototype),"complete"===document.readyState||e.flags.eager)t();else if("interactive"!==document.readyState||window.attachEvent||window.HTMLImports&&!window.HTMLImports.ready){var c=window.HTMLImports&&!window.HTMLImports.ready?"HTMLImportsLoaded":"DOMContentLoaded";window.addEventListener(c,t)}else t()}(window.CustomElements),function(e){Function.prototype.bind||(Function.prototype.bind=function(e){var t=this,n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(e,r)}})}(window.WebComponents),function(e){"use strict";if(!window.performance){var t=Date.now();window.performance={now:function(){return Date.now()-t}}}window.requestAnimationFrame||(window.requestAnimationFrame=function(){var e=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame;return e?function(t){return e(function(){t(performance.now())})}:function(e){return window.setTimeout(e,1e3/60)}}()),window.cancelAnimationFrame||(window.cancelAnimationFrame=function(){return window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||function(e){clearTimeout(e)}}())}(window.WebComponents),function(e){var t=document.createElement("style");t.textContent="body {transition: opacity ease-in 0.2s; } \nbody[unresolved] {opacity: 0; display: block; overflow: hidden; position: relative; } \n";var n=document.querySelector("head");n.insertBefore(t,n.firstChild)}(window.WebComponents),function(e){window.Platform=e}(window.WebComponents);
// Create Global Trio Object
var Trio = {};

// Create global scope object
var scope = {};

(function() {
    // Global Interceptor for AJAX request    
    var GLOBAL_AJAX_REQUEST_INTERCEPT = function(req) { 
        return req;
    };
    var GLOBAL_AJAX_RESPONSE_INTERCEPT = function(res) {
        return res;
    };

    // Ajax object constructor
    // 
    // Example: 
    // var request = new Ajax({
    //     type: 'GET',
    //     url: 'http://www.someapi.com/api/',
    //     onload: function(response) {
    //         console.log(response);
    //     }.bind(this)
    // });
    // 
    // request.send();
    // 
    // This will log the response object
    var Ajax = function(opts) {
        // Create XHR Object
        var xhr        = new XMLHttpRequest();

        // Intercept response with Global Interceptor
        // and then invoke opts.onload callback
        xhr.onload  = function() {
            var response = GLOBAL_AJAX_RESPONSE_INTERCEPT(xhr);
            opts.onload(response);
        };

        this.url     = opts.url;
        this.type    = opts.type.toUpperCase();
        this.headers = {};
        this.xhr     = xhr;

        // Intercept Ajax object on creation
        GLOBAL_AJAX_REQUEST_INTERCEPT(this);
    };

    Ajax.prototype.setUrl = function(url) {
        if (!url) throw new Error('Expect parameter: url.');
        this.url = url;
    };

    Ajax.prototype.setType = function(type) {
        if (!type) throw new Error('Expect parameter: type.');
        this.type = type.toUpperCase();
    };

    Ajax.prototype.setHeader = function(key, value) {
        this.headers[key] = value;
    };

    // Add request metadata to XHR, and the send
    Ajax.prototype.send = function(payload) {
        if (!this.url) throw new Error('Expect request to contain property: url.');
        if (!this.type) throw new Error('Expect request to contain property: type.');

        this.xhr.open(this.type, this.url);

        for (var header in this.headers) {
            this.xhr.setRequestHeader(header, this.headers[header]);
        }

        if (payload) {
            this.xhr.send(payload);
        } else {
            this.xhr.send();
        }
    };

    scope.Ajax = Ajax;

    Trio.AJAX = {
        interceptAllRequest: function(cb) {
            GLOBAL_AJAX_REQUEST_INTERCEPT = cb;
        },
        interceptAllResponse: function(cb) {
            GLOBAL_AJAX_RESPONSE_INTERCEPT = cb;
        }
    };
    
})();

(function() {
    // Extend function to to extend Trio Class
    scope.extend = extend;

    function extend(methods) {
        var parent = this._constructor;

        if (!parent) {
            return;
        }

        var staticAttr = {};
        var child = function() {
            for (var key in staticAttr) {
                this[key] = staticAttr[key];
            }
            parent.apply(this, arguments);
        };
        
        var extended = {};

        for (var prop in parent.prototype) {
            if (Object.prototype.hasOwnProperty.call(parent.prototype, prop)) {
                extended[prop] = parent.prototype[prop];
            }
        }

        for (var met in methods) {
            if (Object.prototype.hasOwnProperty.call(methods, met)) {
                var method = methods[met];
                if (typeof method === 'function') {
                    extended[met] = methods[met];
                } else {
                    staticAttr[met] = methods[met];
                }
            }
        }

        child.prototype = Object.create(extended);

        return child;
    }
})();
(function() {
    // Function to generate uuid for Trio instance
    
    scope.idGenerator = idGenerator;
    
    function idGenerator(str) {
        var count = 1;

        return function() {
            var id = str + count;
            count++;
            return id;
        };
    }
})();

(function() {
    //////////////////////////////////////////////////////
    ///////////////////////// Vow ////////////////////////
    //////////////////////////////////////////////////////
    // A light-weight Promise library for internal use

    // Vow states reference
    var PENDING   = {},
        RESOLVED  = {},
        REJECTED  = {},
        FULFILLED = {};

    // Vow constructor
    // 
    // Example:
    // var vow = Vow();
    // 
    // vow.promise.then(function(data) {
    //      console.log(data);
    // });
    // 
    // vow.resolve('hi');
    // 
    // This is log 'hi'
    var Vow = function() {
        var vow = {};
        var _promise = PromiseObj();

        vow.resolve = _promise.resolve;
        vow.reject  = _promise.reject;
        vow.promise = {
            then: _promise.then,
            catch: _promise.catch,
            done: _promise.done
        };

        return vow;

        // Promise Object constructor
        function PromiseObj() {
            var state = PENDING;
            var value, onResolved, onRejected, onFullfilled, returnPromise;

            var ret = {

                resolve: function (val) {
                    value = val;
                    state = RESOLVED;

                    if (onResolved) {
                        handleResolve(onResolved);
                    } else if (onFullfilled) {
                        handleDone(onFullfilled);
                    }
                },

                reject: function (err) {
                    value = err;
                    state = REJECTED;

                    if (onRejected) {
                        handleReject(onRejected);
                    } else if (onFullfilled) {
                        handleDone(onFullfilled);
                    }
                },

                then: function (successCallback) {
                    returnPromise = PromiseObj();
                    handleResolve(successCallback);

                    return {
                        then: returnPromise.then,
                        catch: returnPromise.catch,
                        done: returnPromise.done
                    };
                },

                catch: function (failCallback) {
                    returnPromise = PromiseObj();
                    handleReject(failCallback);

                    return {
                        then: returnPromise.then,
                        catch: returnPromise.catch,
                        done: returnPromise.done
                    };
                },

                done: function (finallyCallback) {
                    handleDone(finallyCallback);
                }
            };

            return ret;

            function handleDone(fn) {
                if (state === PENDING) {
                    onFullfilled = fn || 'done';
                    return;
                }

                if (state === RESOLVED && typeof fn === 'function') {
                    state = FULFILLED;
                    return fn.call(this, value);
                }

                if (state === REJECTED) {
                    state = FULFILLED;
                    throw value;
                }
            }

            function handleResolve(fn) {
                var error;
                if (state === PENDING) {
                    onResolved = fn;
                }

                if (state === RESOLVED) {
                    if (value && typeof value.then === 'function') {
                        value.then(ret.resolve);
                        return;
                    }

                    try {
                        value = fn.call(this, value);
                    } catch (err) {
                        value = err;
                        error = true;
                    }

                    if (returnPromise) {
                        if (!error) {
                            returnPromise.resolve(value);
                            return;
                        }
                        returnPromise.reject(value);
                    }
                }
            }

            function handleReject(fn) {
                var error;
                if (state === PENDING) {
                    onRejected = fn;
                }

                if (state === REJECTED) {
                    try {
                        value = fn.call(this, value);
                    } catch (err) {
                        value = err;
                        error = true;
                    }

                    if (returnPromise) {
                        if (!error) {
                            returnPromise.resolve(value);
                            return;
                        }
                        returnPromise.reject(value);
                    }
                }

                if (state === RESOLVED) {
                    if (returnPromise) {
                        returnPromise.resolve(value);
                    }
                }
            }
        }
    };

    scope.Vow = Vow;

})();
(function() {
    // Storage to store all Signals instances
    var SIGNALS_STORAGE = {};

    // Constructor for Signals
    // Example:
    // var context = {};
    // 
    // new Signal('test', context);
    // 
    // context will now have Signal methods that are exposed
    var Signal = function(uuid, origin) {
        this.storage          = {};
        this.handleAll        = null;
        this.connectors       = {};
        this.origin           = origin;
        this.uuid             = uuid;
        SIGNALS_STORAGE[uuid] = this;
        origin.on             = this.on.bind(this);
        origin.off            = this.off.bind(this);
        origin.emit           = this.emit.bind(this);
        origin.broadcast      = this.broadcast.bind(this);
        origin.reset          = this.reset.bind(this);
        origin.connect        = this.connect.bind(this);
        origin.disconnect     = this.disconnect.bind(this);
    };

    // Add listener for a specific pulse type
    // If only passing in a function, it will set that function
    // as the default handler for all pulses
    Signal.prototype.on = function(pulseType, func) {
        if (typeof pulseType === 'function') {
            this.handleAll = pulseType;
            return;
        }

        if (!this.storage[pulseType]) {
            this.storage[pulseType] = [];
        }

        if (typeof func !== 'function') {
            throw new Error('Missing callback function on ' + pulseType + '.');
        }
        
        this.storage[pulseType].push(func);
    };

    // Remove listener for a pulse
    Signal.prototype.off = function(pulseType, func) {
        var bucket = this.storage[pulseType] || [];

        bucket.forEach(function(fn, i) {
            if(fn === func) {
                bucket.splice(i, 1);
                return;
            }
        });
    };

    // Create pulse with pulseType and detail, then trigger
    // pulse type to all connectors
    Signal.prototype.emit = function(pulseType, detail) {
        var pulse, connector;

        if (typeof pulseType === 'object' && pulseType.type) {
            pulse = pulseType;
        } else if (typeof pulseType === 'string') {
            pulse = MakePulse(pulseType, detail, this.origin);
        }

        for (var id in this.connectors) {
            connector = this.connectors[id];
            connector.trigger(pulse);
        }
    };

    // Similar to emit, accepts a pulse object
    Signal.prototype.trigger = function(pulse) {
        if (!pulse.type) {
            throw new Error('Expect parameter to be a pulse');
        }

        var bucket = this.storage[pulse.type] || [];
        for (var i = 0; i < bucket.length; i++) {
            bucket[i](pulse);
        }
        if (this.handleAll) {
            this.handleAll(pulse);
        }
    };

    // Broadcast pulse type to all Signals instances
    Signal.prototype.broadcast = function(pulseType, detail) {
        var pulse = MakePulse(pulseType, detail, this.origin),
            signal;

        for (var id in SIGNALS_STORAGE) {
            signal = SIGNALS_STORAGE[id];
            signal.trigger(pulse);
        }
    };

    // Reset a specific event
    // When passing in no argument, it will reset Signal to init state
    Signal.prototype.reset = function(name) {
        if (name) {
            this.storage[name] = [];
        } else {
            this.storage = {};
            for (var connectorId in this.connectors) {
                this.disconnect(connectorId);
            }
        }
    };

    // Connect to a signal reference by a uuid.
    // When connected, Signal A will listen to pulses from Signal B
    Signal.prototype.connect = function(connectorId) {
        var connector = SIGNALS_STORAGE[connectorId];
        this.addConnector(connectorId);
        connector.addConnector(this.uuid);
    };

    // Helper method to addConnector to a signl
    Signal.prototype.addConnector = function(connectorId) {
        var connector = SIGNALS_STORAGE[connectorId];
        if (connector) {
            this.connectors[connectorId] = connector;
        } else {
            throw new Error('Cannot find connector ' + connectorId + '.');
        }
    };

    // Disconnect signal reference by a uuid
    Signal.prototype.disconnect = function(connectorId) {
        var connector = SIGNALS_STORAGE[connectorId];
        this.removeConnector(connectorId);
        connector.removeConnector(this.uuid);
    };

    // Helper method to removeConnector
    Signal.prototype.removeConnector = function(connectorId) {
        if (this.connectors[connectorId]) {
            delete this.connectors[connectorId];
        } else {
            throw new Error('Cannot find connector ' + connectorId + '.');
        }
    };

    scope.Signal = Signal;

    // Constructor to make one pulse
    function MakePulse(type, detail, origin) {
        var pulse = {
            type: type,
            detail: detail,
            origin: origin
        };

        return pulse;
    }

})();

(function() {
    var Vow = scope.Vow;
    //////////////////////////////////////////////////////
    /////////////////////// Module ///////////////////////
    //////////////////////////////////////////////////////
    // Module loaders to enable clean, modularized code

    // Storage to cache all loaded modules
    var MODULE_STORE = {};

    // Module Constructor
    var Module = function() {};

    // Export will invoke the function and cache its result at
    // MODULE_STORE using the passed-in key
    // 
    // Example:
    // Trio.Module.export('app', function() {
    //     return 'hi';
    // });
    // 
    // This will store 'hi' to MODULE_STORE.app
    Module.prototype.export = function(key, func) {
        if (typeof key !== 'string') {
            throw new Error('Module name is not a string.');
        }

        if (typeof func !== 'function') {
            throw new Error('Module is not a function.');
        }

        // Invoke func to get module value
        var module = func();

        // Store wrapped value in Storage
        // You can later on unwrapped value by doing:
        // 
        // MODULE_STORE[key](function(module) {
        //      console.log(module);
        // });
        // 
        // This is necessary as we need this to be unwrapped by 
        // the import promises resolve method in order to load 
        // each file in the correct order
        MODULE_STORE[key] = function(done) {
            done(module);
        };
    };


    // Import accept an object consist of { 'Module Name': 'URL or FILEPATH' },
    // and will perform the following:
    //   - If module name is in cache
    //      a. Resolve promise and pass in cache value to the promise callback
    //   - If module name is not in cache
    //      a. Load the URL (expecting a js file containing Trio.Module.export)
    //      b. On success, Trio.Module.export will cache the module value
    //      c. Return cached value
    //      
    //  Example:
    //  Trio.Module.import({
    //      'logo': '../src/js/logo.js'
    //  }).and.export('app', function(modules) {
    //      console.log(modules.logo);
    //  });
    //  
    //  This will log the return value from logo.js
    Module.prototype.import = function(modules) {
        // Grab list of modules key
        var count  = Object.keys(modules);

        // Create main promise
        var vow = Vow();

        // Values to be resolved
        var ret = {};

        var url;

        _import(count.pop(), vow);

        // Expose an and.export method for cleaner API when
        // importing and exporting modules.
        vow.promise.and = {};
        vow.promise.and.export = function(key, func) {
            var module;
            MODULE_STORE[key] = function(done) {
                if (module) {
                    done(module);
                    return;
                }

                vow.promise
                    .then(function(ret) {
                        module = func.call(this, ret);
                        return module;
                    }.bind(this))
                    .done(done);
            };
        }.bind(this);

        vow.promise.and.import = function(modules) {
            return vow.promise.then(this.import.bind(this, modules));
        }.bind(this);

        return vow.promise;

        // Sub routine for import
        function _import(key, promise) {
            var url = modules[key];

            if (typeof key !== 'string') {
                throw new Error('Module name is not a string.');
            }

            if (typeof url !== 'string') {
                throw new Error('URL is not a string.');
            }

            var module = MODULE_STORE[key];
            
            // If module is not already cached
            if (!module) {
                var script = document.createElement('script');

                script.type = "text/javascript";
                script.src = url;
                script.onload = function() {
                    var defer = Vow();

                    console.log('Loading ' + key + '...');

                    defer.promise.then(function(data) {
                        ret[key] = data;
                        if (count.length === 0) {
                            promise.resolve(ret);
                        } else {
                            _import(count.pop(), promise);
                        }
                    });

                    script.remove();
                    MODULE_STORE[key](defer.resolve);
                }.bind(this, key);

                document.body.appendChild(script);
            } else {
                module(function(data) {
                    ret[key] = data;
                    if (count.length === 0) {
                        promise.resolve(ret);
                    } else {
                        _import(count.pop(), promise);
                    }
                });
            }
        }
    };

    Trio.Module = new Module();
})();

(function() {
    var extend = scope.extend;
    var Signal = scope.Signal;
    var Ajax = scope.Ajax;

    //////////////////////////////////////////////
    /////////// Resource Manager Class ///////////
    //////////////////////////////////////////////
    /// A Resource Manager to manager registering 
    /// and getting resoources
    
    var ResourceManager = function() {};
    // Resources Storage
    var RESOURCE_STORE = {};

    // Use Trio.Resrouce.register({name: 'name'}) to 
    // create and register Resource
    ResourceManager.prototype.register = function(opts) {
        if (!opts.name) throw new Error('Expect parameter to have property: name.');
        var Res = Resource.extend(opts);
        RESOURCE_STORE[opts.name] = new Res(opts);
    };

    // Use Trio.Resrouce.get('name') to get access to resource
    ResourceManager.prototype.get = function(name) {
        var resource = RESOURCE_STORE[name];
        if (!resource) throw new Error('Resource ' + name + ' not found.');
        return resource;
    };

    //////////////////////////////////////////////
    ////////////////// Resource //////////////////
    //////////////////////////////////////////////
    /// Resource is a caching layer between backend
    /// and frontend. All AJAX request should go 
    /// through resource and cache as dev see fit.
    /// Resource will act as a source of truth for 
    /// Trio.Factory to sync data with.

    var resourceIdGenerator = scope.idGenerator('resource');
    
    var Resource = {};

    Resource._constructor = function(opts) {
        var cache = new LruCache(opts.cacheSize);
        this.uuid = resourceIdGenerator();
        new Signal(this.uuid, this);

        // Exposed a setter and getter to interact with LRU Cache
        this.set = cache.set.bind(this);
        this.get = cache.get.bind(this);
    };

    // Decorated ajax function
    Resource._constructor.prototype.sendRequest = function (opts, callback) {
        var request = new Ajax({
            type: opts.type,
            url: opts.url,
            onload: function(response) {
                callback(this.interceptResponse(response));
            }.bind(this)
        });

        this.interceptRequest(request);
        request.send(opts.payload);
    };

    // Intercept all Response and Request thru resource instance
    Resource._constructor.prototype.interceptResponse = function(res) { return res; };
    Resource._constructor.prototype.interceptRequest = function(req) { return req; };

    // Convenience method to encode JSON into URL param
    Resource._constructor.prototype.encodeUrlParam = function(param) {
        var encodedString = '';
        for (var prop in param) {
            if (param.hasOwnProperty(prop)) {
                if (encodedString.length > 0) {
                    encodedString += '&';
                }
                encodedString += encodeURI(prop + '=' + param[prop]);
            }
        }
        return encodedString;
    };

    // When this method is called, all Trio Factory that is synced with 
    // the resource instance will be notified
    Resource._constructor.prototype.hasBeenUpdated = function(key) {
        this.emit('update:' + this.uuid, null);
    };

    Resource.extend = extend;
    Trio.Resource = new ResourceManager();

    //////////////////////////////////////////////
    ////////////////// LRU Cache /////////////////
    //////////////////////////////////////////////
    /// LRU Cache data structure created for internal use

    var LruCache = function(size) {
        var map = {};
        var list = new DblyLinkedList();
        var maxLength = size || 0;
        
        this.set = function(key, data) {
            var node = map[key];
            var oldTail;

            if (node) {
                list.pushToHead(node);
                node.data = data;
            } else {
                list.addToHead(key, data);
                map[key] = list.head;
            }

            if (maxLength !== 0 && list.length > maxLength) {
                oldTail = list.tail;
                list.removeTail();
                delete map[oldTail.key];
            }

        };

        this.get = function(key) {
            var node = map[key];

            if (node) {
                list.pushToHead(node);
            }

            return node ? node.data : null;

        };

    };

    var DblyLinkedList = function() {
        this.head = null;
        this.tail = null;
        this.length = 0;
    };

    DblyLinkedList.prototype.addToHead = function(key, data) {
        var node = new DblyLinkedListNode(key, data);
        var oldHead;

        if (!this.head && !this.tail) {
            this.head = node;
            this.tail = node;
        } else {
            oldHead = this.head;
            oldHead.prev = node;
            node.next = oldHead;
            this.head = node;
        }

        this.length++;

    };

    DblyLinkedList.prototype.pushToHead = function(node) {
        var oldHead = this.head;
        var prevNode = node.prev;
        var nextNode = node.next;

        if (this.head === node) {
            return;
        }

        if (prevNode && nextNode) {
            // Connect prev and next nodes
            prevNode.next = nextNode;
            nextNode.prev = prevNode;
        } else if (!nextNode) {
            // Set new tail
            this.tail = prevNode;
            this.tail.next = null;
        }

        // Push node to head
        this.head = node;
        node.next = oldHead;
        oldHead.prev = node;

    };

    DblyLinkedList.prototype.removeTail = function() {
        this.tail = this.tail.prev;
        this.tail.next = null;
        this.length--;
    };

    var DblyLinkedListNode = function(key, data) {
        this.prev = null;
        this.next = null;
        this.key  = key;
        this.data = data;
    };

})();

(function() {
    var factoryIdGenerator = scope.idGenerator('factory');
    var Signal = scope.Signal;

    //////////////////////////////////////////////////////
    ////////////////////// Factory ///////////////////////
    //////////////////////////////////////////////////////
    /// Sync data with different resource, and manage data 
    /// as the single source of truth for components

    // NOTE:
    // Planned Features--
    //  1. Schema enforcement

    var Factory = {};

    Factory._constructor = function(opts) {
        this.attributes = {};
        this.uuid       = factoryIdGenerator();
        this.resources  = {};
        new Signal(this.uuid, this);

        this.initialize(opts);
    };

    Factory._constructor.prototype.initialize = function() {};

    /**
     * Sync factory with resourceName, and connect with resource's signal.
     * Map callback will be invoked with the resource object passed in on first sync, 
     * and every time resource is updated.
     */
    Factory._constructor.prototype.sync = function(resourceName, map) {
        var resource = Trio.Resource.get(resourceName);

        if (!resource) throw new Error('Resource ' + resourceName + ' does not exist.');

        this.resources[resourceName] = resource;
        this.connect(resource.uuid);
        map.call(this, resource);
        this.on('update:' + resource.uuid, map.bind(this, resource));

    };

    Factory.extend = scope.extend;
    Trio.Factory = Factory;

})();

(function() {
    var serviceIdGenerator = scope.idGenerator('service');
    var Signal = scope.Signal;
    var extend = scope.extend;

    //////////////////////////////////////////////////////
    ////////////////////// Service ///////////////////////
    //////////////////////////////////////////////////////
    /// Service is a layer for components and factory to 
    /// work with each other. It exposes a method call 
    /// implement to connect two modules togther. Connected
    /// module can communicate via Signals.

    var Service = {};

    Service._constructor = function(opts) {
        this.uuid = serviceIdGenerator();
        new Signal(this.uuid, this);
        this.onReady(opts);
    };

    // Invoke on instantiation of Service
    Service._constructor.prototype.onReady = function() {
        // To be implemented by instance
    };

    // Invoke on Service.start()
    Service._constructor.prototype.onStart = function() {
        // To be implemented by instance
    };

    // Invoke on Service.stop()
    Service._constructor.prototype.onStop = function() {
        // To be implemented by instance
    };

    Service._constructor.prototype.start = function(opts) {
        this.onStart(opts);
        this.on(this.emit.bind(this));
    };

    Service._constructor.prototype.stop = function(opts) {
        this.onStop(opts);
        this.reset();
    };

    // Expect uuid from an Trio module. This method will make a
    // connection with the other signal, and on any pulse, re-emit
    // it to all other implemented modules.
    Service._constructor.prototype.implement = function(inst) {
        if (inst && inst.uuid) {
            this.connect(inst.uuid);
        } else {
            throw new Error('Expect parameter to contains property uuid.');
        }
    };

    Service.extend = extend;
    Trio.Service = Service;
    
})();

(function() {
    //////////////////////////////////////////////////////
    ////////////////////// Stylizer //////////////////////
    //////////////////////////////////////////////////////
    /// Stylizer is the CSS rendering library for Trio.
    /// It allows dev to generate CSS using a set of 
    /// simple API. It has functionality similar to
    /// some pre-compiler, such as the ability to set 
    /// variables, mixins, and auto-prefix.
    
    // Storage for all variables and mixins
    var MIXINS = {};
    var VARIABLES = {};

    // All vendors prefixes needed
    var _ALLVENDORS = ['-webkit-', '-moz-', '-ms-', '-o-'];
    // CSS Properties/Attributes that needs prefixes. This list will grow.
    var ATTRIBUTES_TO_PREFIX = ['flex', 'transition', 'transform', 'calc', 'align-self', 'flex-flow', 'linear-gradient'];
    // Regex to match any string that contains words need prefixes
    var IS_PREFIXABLE = new RegExp(ATTRIBUTES_TO_PREFIX.join('|'));
    // Key-pair for color to hex
    var COLOR_MAP = {
        'black': '#000000',
        'white': '#ffffff',
        'blue': '#0000ff',
        'yellow': '#ffff00',
        'light-gray': '#cccccc',
        'dark-gray': '#333333',
        'gray': '#666666',
        'orange': '#ffa500',
        'purple': '#8a2be2'
    };

    var Stylizer = function() {};

    Stylizer.prototype.create = function() {
        return new CSSTemplate();
    };

    Stylizer.prototype.registerMixin = function(key, func) {
        MIXINS[key] = func;
    };

    Stylizer.prototype.registerVariable = function(key, val) {
        VARIABLES[key] = val;
    };

    Stylizer.prototype.getVariable = function(key) {
        if (!VARIABLES[key]) {
            console.error('Variable ' + key + ' does not exist.');
            return;
        }
        return VARIABLES[key];
    };

    Stylizer.prototype.getMixin = function(key) {
        if (!MIXINS[key]) {
            console.error('Mixin ' + key + ' does not exist.');
            return;
        }
        return MIXINS[key];
    };

    Trio.Stylizer = new Stylizer();

    var CSSTemplate = function() {
        this.style = {};
        this._context = null;
    };

    CSSTemplate.prototype.select = function(selector) {
        if (!this.style[selector]) {
            this.style[selector] = {};
        }
        this._context = this.style[selector];
        return this;
    };

    CSSTemplate.prototype.css = function(key, attr) {
        if (!this._context) {
            throw new Error('CSS Selector not present.');
        }

        if (typeof key === 'string') {
            addOneStyle(key, attr, this._context);
        } else if (typeof key === 'object') {
            for (var k in key) {
                addOneStyle(k, key[k], this._context);
            }
        }

        return this;

        function addOneStyle(key, attr, obj) {
            obj[key] = attr;
        }
    };

    CSSTemplate.prototype.toCSS = function() {
        var ret = '';

        for (var selector in this.style) {
            // Error for when style is not a two-layers object
            // Example:
            // cssSelector : {
            //     cssProperties: cssAttributes
            // }
            if (typeof selector !== 'string') {
                throw new Error('Invalid Style Object');
            }
            ret += selector + '{';
            var properties = this.style[selector];
            for (var prop in properties) {
                var setting = properties[prop];
                    setting = replaceVariable.call(this, setting);
                ret += autoPrefix(prop, setting);
            }
            ret = ret.substring(0, ret.length - 1);
            ret += '}';
        }

        return ret;

        // Helper method that return css string with prefixes if necessary
        function autoPrefix(prop, setting) {
            var prefixedString = '' + prop + ':' + setting + ';';

            if (prop.match(IS_PREFIXABLE)) {
                for (var i = 0; i < _ALLVENDORS.length; i++) {
                    prefixedString += _ALLVENDORS[i] + prop + ':' + setting + ';';
                }
            }

            if (setting.match(IS_PREFIXABLE)) {
                for (var j = 0; j < _ALLVENDORS.length; j++) {
                    prefixedString += prop + ':' + _ALLVENDORS[j] + setting + ';';
                }
            }

            return prefixedString;
        }

        function replaceVariable(setting) {
            var rgbs = setting.match(/((rgb|rgba)\([^)]*\))/gi);
            var rgb, newRgb;
            var key, val;

            if (rgbs) {
                for (var j = 0; j < rgbs.length; j++) {
                    rgb = rgbs[j];
                    newRgb = replaceColor.call(this, rgb);
                    setting = setting.replace(rgb, newRgb);
                }
            }

            var VARIABLES = setting.match(/\$([^\$][^\s\d\,\(\)]+)/gi);

            if (VARIABLES) {
                for (var i = 0; i < VARIABLES.length; i++) {
                    key = VARIABLES[i].slice(1);
                    val = Stylizer.prototype.getVariable.call(this, key);
                    setting = setting.replace(VARIABLES[i], val);
                }
            }

            return setting;
        }

        function replaceColor(rgb) {
            var colors = rgb.match(/\$([^\$][^\s\d\,\(\)]+)/gi);
            var key, val;

            if (colors) {
                key = colors[0].slice(1);
                val = Stylizer.prototype.getVariable.call(this, key);
                val = toRGB(val);
                rgb = rgb.replace(colors[0], val);
            }
            return rgb;
        }

        function toRGB(color) {
            if (COLOR_MAP[color]) {
                color = COLOR_MAP[color];
            }

            var isHex = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(color);
            var isRGB = /((rgb|rgba)\([^)]*\))/i.exec(color);

            if (isHex) {
                return [
                    parseInt(isHex[1], 16),
                    parseInt(isHex[2], 16),
                    parseInt(isHex[3], 16)
                ].join(',');
            } 

            if (isRGB) {
                return color.replace(/[a-z]|\(|\)/gi, '')
                    .split(',')
                    .slice(0, 3)
                    .join(',');
            }

            throw new Error('Invalid color string.');
        }
    };

    CSSTemplate.prototype.toHex = function(rgb) {
        rgb = rgb.replace(' ', '').split(',');
        return "#" + componentToHex(rgb[0]) + componentToHex(rgb[1]) + componentToHex(rgb[2]);

        function componentToHex(c) {
            var hex = (+c).toString(16);
            return hex.length == 1 ? "0" + hex : hex;
        }
    };
})();

(function() {
    //////////////////////////////////////////////////////
    ////////////////////// Renderer //////////////////////
    //////////////////////////////////////////////////////
    /// Renderer is the rendering library for Trio. It 
    /// employs a set of simple API for user to create HTML.
    /// It also exposes a patch method to diff generated HTML
    /// and DOM incrementally, updating only what needs to be 
    /// update.

    var Renderer = function(){};

    Renderer.prototype.createTemplate = function() {
        return new Template();
    };

    Trio.Renderer = new Renderer();

    //////////////////////////////////////////////////////
    ////////////////////// Template //////////////////////
    //////////////////////////////////////////////////////
    /// Template object to store command and on render,
    /// return HTML

    var Template = function(){
        this._queue = [];
    };

    //////////////////////////////////////////////////////
    /////////////// DOM Templating methods ///////////////
    //////////////////////////////////////////////////////

    // Each of the methods below push a command object to a command queue.
    // The command queue will be executed by .render to create DOM fragments.
    Template.prototype.open         = queueCommand('openTag');
    Template.prototype.addClass     = queueCommand('addClass');
    Template.prototype.text         = queueCommand('text');
    Template.prototype.attr         = queueCommand('attribute');
    Template.prototype.style        = queueCommand('style');
    Template.prototype.data         = queueCommand('data');
    Template.prototype.close        = queueCommand('closeTag');
    Template.prototype.if           = queueCommand('if');
    Template.prototype.else         = queueCommand('else');
    Template.prototype.each         = queueCommand('loop');
    Template.prototype.done         = queueCommand('done');
    Template.prototype.xif          = Template.prototype.done; 
    Template.prototype.xeach        = Template.prototype.done;

    function queueCommand(commandName) {
        return function() {
            this._queue.push({
                action: commandName,
                detail: Array.prototype.slice.call(arguments)
            });
            return this;
        };
    }

    //////////////////////////////////////////////////////
    /////////////////////// Render ///////////////////////
    //////////////////////////////////////////////////////

    Template.prototype.render = function(data) {
        // Root element to store DOMs
        var root            = document.createDocumentFragment(),
        // Stacks to reference current context
            elements        = [],
            conditionals    = [],
            loops           = [],
            states          = [],
        // Reference index for current execution
            execIndex       = 0,
            el, condition, loop;

        handleCommand.call(this, this._queue[execIndex], data);

        return root;

        function handleCommand(command, execData) {
            // Grab current state: LOOP, CONDITIONAL, or undefined
            var state = getLastFrom(states);

            // Base case: exit if no command
            if (!command) {
                return;
            }

            // Change data in current execuation if in a loop
            // From [{a: 'a'}, {b: 'b'}, {c: 'c'}] to {a: 'a'}
            if (state === 'LOOP') {
                setDataContext();
            }

            // Handle IF, ELSE, EACH, or DONE
            // These methods change state of rendering
            handleStateActions();

            // Exit if condition is not met
            if ((state === 'CONDITIONAL' && !getLastFrom(conditionals)) || (state === 'LOOP' && !execData)) {
                handleCommand.call(this, this._queue[++execIndex], execData);
                return;
            }

            // Handle CREATE, APPEND, STYLE, ATTR, TEXT
            // These methods are purely rendering and do not change rendering state
            handleCommonActions();

            // Increment index for next execution
            execIndex++;

            // Execute next command
            handleCommand.call(this, this._queue[execIndex], execData);
            
            function setDataContext() {
                loop = getLastFrom(loops);
                execData = loop.data[loop.index];
            }

            function handleStateActions() {
                if (command.action === 'loop') {
                    handleLoop();
                }

                if (command.action === 'done') {
                    handleDone();
                }
                
                if (command.action === 'if') {
                    handleIf();
                }

                if (command.action === 'else') {
                    handleElse();
                }
            }

            function handleLoop() {
                states.push('LOOP');
                loops.push({
                    data: evaluate(execData, command.detail[0]),
                    index: 0,
                    start: execIndex
                });
            }

            function handleDone() {
                states.pop();
                if (state === 'CONDITIONAL') {
                    conditionals.pop();
                } else if (state === 'LOOP') {
                    loop = getLastFrom(loops);
                    loop.index = loop.index + 1;
                    // If current loop is not done, set state back to loop
                    // and set next execution at start of loop
                    if (loop.index < loop.data.length) {
                        execIndex = loop.start;
                        states.push('LOOP');
                    } else {
                        loops.pop();
                    }
                }
            }

            function handleIf() {
                states.push('CONDITIONAL');
                condition = evaluate(execData, command.detail[0]);
                conditionals.push(condition);
            }

            function handleElse() {
                condition = !conditionals.pop();
                conditionals.push(condition);
            }

            function handleCommonActions() {
                switch (command.action) {
                    case 'openTag':
                        elements.push(createTag.apply(null, command.detail));
                        break;
                    case 'addClass':
                        el = getLastFrom(elements);
                        addClass.apply(el, [evaluate(execData, command.detail[0])]);
                        break;
                    case 'style':
                        el = getLastFrom(elements);
                        addStyle.apply(el, [evaluate(execData, command.detail[0]), evaluate(execData, command.detail[1])]);
                        break;
                    case 'attribute':
                        el = getLastFrom(elements);
                        addAttribute.apply(el, [evaluate(execData, command.detail[0]), evaluate(execData, command.detail[1])]);
                        break;
                    case 'data':
                        el = getLastFrom(elements);
                        patchElement.apply(el, [evaluate(execData, command.detail[0])]);
                        break;
                    case 'text':
                        el = getLastFrom(elements);
                        addText.apply(el, [evaluate(execData, command.detail[0])]);
                        break;
                    case 'closeTag':
                        el = elements.pop();
                        if (elements.length === 0) {
                            root.appendChild(el);
                        } else {
                            getLastFrom(elements).appendChild(el);
                        }
                        break;
                }
            }
        }
    };

    //////////////////////////////////////////////////////
    /////////////////////// Patch ////////////////////////
    //////////////////////////////////////////////////////

    Template.prototype.patch = function(root, data) {
        var frag = this.render(data);

        _patch(root, frag);

        function _patch(from, to) {
            var fromNode, toNode;
            var length = Math.max(from.childNodes.length, to.childNodes.length);

            for (var i = 0; i < length; i++) {
                fromNode = from.childNodes[i];
                toNode   = to.childNodes[i];

                if (!toNode && !!fromNode) {
                    removeAllAfter(from, i);
                    return;
                } else if (!fromNode && !!toNode) {
                    var clone = toNode.cloneNode(true);
                    from.appendChild(clone);
                    patchShadowRoot(clone, toNode);
                } else if (fromNode.tagName !== toNode.tagName) {
                    from.replaceChild(toNode.cloneNode(true), fromNode);
                } else {
                    patchNode(fromNode, toNode);
                    _patch(fromNode, toNode);
                }
            }
        }

        function removeAllAfter(node, index) {
            for (var i = node.childNodes.length - 1; i >= index; i--) {
                node.childNodes[i].remove();
            }
        }

        function patchNode(from, to) {
            patchClass(from, to);
            patchStyle(from, to);
            patchAttributes(from, to);
            patchText(from, to);
            patchShadowRoot(from, to);
        }

        function patchClass(from, to) {
            var map;
            var toClasses   = to && to.className ? to.className.split(' ') : [];
            var fromClasses = from && from.className ? from.className.split(' ') : [];
            
            map = toClasses.reduce(function(accumulator, cls) {
                if (cls === '') {
                    return accumulator;
                }
                addClass.call(from, cls);
                accumulator[cls] = cls;
                return accumulator;
            }, {});

            fromClasses.forEach(function(cls) {
                if (!map[cls]) {
                    removeClass.call(from, cls);
                }
            });
        }

        function patchText(from, to) {
            if (from.textContent !== to.textContent) {
                from.textContent = to.textContent;
            }
        }

        function patchStyle(from, to) {
            var map = {};
            var styleKey, styleVal, fromKeys;

            if (to.style) {
                for (var i = 0; i < to.style.length; i++) {
                    styleKey = to.style[i];
                    styleVal = to.style[to.style[i]];
                    addStyle.call(from, styleKey, styleVal);
                    map[styleKey] = styleVal;
                }
            }

            if (from.style) {
                fromKeys = Array.prototype.slice.call(from.style);
                for (var j = 0; j < fromKeys.length; j++) {
                    styleKey = fromKeys[j];
                    if (!map[styleKey]) {
                        addStyle.call(from, styleKey, '');
                    }
                }
            }
        }

        function patchAttributes(from, to) {
            var map = {};
            var attr, attrKey, attrVal, fromKeys;

            if (to.attributes) {
                for (var i = 0; i < to.attributes.length; i++) {
                    attr = to.attributes[i];
                    attrKey = attr.name;
                    if (attrKey !== 'style' && attrKey !== 'class') {
                        from.setAttribute(attrKey, attr.value);
                        map[attrKey] = attr.value;                 
                    }
                }
            }

            if (from.attributes) {
                fromKeys = Array.prototype.slice.call(from.attributes);
                for (var j = 0; j < fromKeys.length; j++) {
                    attr = fromKeys[j];
                    attrKey = attr.name;
                    if (attrKey !== 'style' && attrKey !== 'class') {
                        if (!map[attrKey]) {
                            from.setAttribute(attrKey, '');
                        }
                    }
                }
            }
        }

        function patchShadowRoot(from, to) {
            if(from.shadowRoot && to.shadowRoot) {
                _patch(from.shadowRoot, to.shadowRoot);
            }
        }

    };

    //////////////////////////////////////////////////////
    /////////////////// Helper Methods ///////////////////
    //////////////////////////////////////////////////////

    function createTag(tag) {
        var tagName = parseTag(tag);
        var el      = document.createElement(tagName[0]);

        if (tagName[1] === '.') {
            el.className = tagName[2];
        } else if (tagName[1] === '#') {
            el.id = tagName[2];
        }

        return el;
    }

    function addClass(className) {
        var separator = this.className.length > 0 ? ' ' : '';
        className = typeof className === 'string' ? className : '';

        if (!hasClass(this, className)) {
            this.className += separator + className;
        }
    }

    function removeClass(className) {
        if (hasClass(this, className)) {
            var old = this.className;
            var out = old.replace(new RegExp('(\\s|^)' + className + '(\\s|$)'), ' ');
            this.className = out;
        }
    }

    function addStyle(attr, val) {
        if (this.style[attr] !== val) {
            this.style[attr] = val;
        }
    }

    function addAttribute(attr, val) {
        this.setAttribute(attr, typeof val === 'undefined' ? '' : val);
    }

    function addText(content) {
        this.textContent = content;
    }

    function patchElement(data) {
        if (data) {
            this.patch(data);
        }
    }

    function getLastFrom(array) {
        return array[array.length - 1];
    }

    function hasClass(el, className) {
      return !!el.className.match(new RegExp('(\\s|^)'+className+'(\\s|$)'));
    }

    function parseTag(tag) {
        tag = tag.replace(/[.#]/, function(d) { return ',' + d + ',';})
                 .split(',');
        return tag;
    }

    function isCustomElement(tag) {
        return !!tag.match('-');
    }

    function evaluate(data, funcOrVal) {
        switch (typeof funcOrVal) {
            case 'function':
                try {
                    return funcOrVal.call(this, data);
                } catch (e) {
                    return '';
                }
                break;
            default:
                return funcOrVal;

        }
    }
})();

(function() {
    var idGenerator = scope.idGenerator;
    var componentIdGenerator = idGenerator('component');
    var Signal = scope.Signal;


    //////////////////////////////////////////////////////
    ///////////////// COMPONENT MANAGER //////////////////
    //////////////////////////////////////////////////////
    /// A Component Manager to allow registering and getting
    /// Trio Components

    var ComponentManager = {};
    var COMPONENT_STORE = {};

    ComponentManager.register = function(opts) {
        if (COMPONENT_STORE[opts.tagName]) {
            return COMPONENT_STORE[opts.tagName];
        }

        var component = new Component(opts);
        COMPONENT_STORE[opts.tagName] = component;
        return component;
    };

    ComponentManager.get = function(tagName) {
        return COMPONENT_STORE[tagName];
    };

    //////////////////////////////////////////////////////
    ///////////////////// COMPONENT //////////////////////
    //////////////////////////////////////////////////////
    ///
    
    var COMPONENT_DATASTORE = {};

    var Component = function(opts) {
        this.tagName = opts.tagName;
        this.registerElement(opts);
        this.dataKeygen = idGenerator(this.tagName);
    };

    Component.prototype.setData = function(data) {
        var dataKey = this.dataKeygen();
        COMPONENT_DATASTORE[dataKey] = data;
        return dataKey;
    };

    Component.prototype.getData = function(dataKey) {
        return COMPONENT_DATASTORE[dataKey];
    };

    /**
     * Render Helper Method
     * 1. If there is data, save it in COMPONENT_DATASTORE, get dataKey
     * 2. Render <custom-element data-key='dataKey'></custom-element>
     */
    Component.prototype.createElement = function(data) {
        var component = document.createElement(this.tagName);
        component.patch(data);
        return component;
    };

    /**
     * Register Custom Element using HTML5 API
     */
    Component.prototype.registerElement = function(opts) {
        // Set Prototype of custom element
        var proto = Object.create(HTMLElement.prototype);
        var tmpl   = opts.template || {};

        proto.createdCallback = function() {
            var shadow, dataKey, data, frag;
            
            if (!tmpl.render || !tmpl.patch) {
                throw new Error('Trio.Template instance not found.');
            }

            // Create shadow root
            shadow = this.createShadowRoot();

            // Grab data from COMPONENT
            dataKey = this.getAttribute('data-key');
            data = COMPONENT_DATASTORE[dataKey];

            // Append rendered fragments into shadowRoot
            frag = opts.template.render(data);
            replaceStyleHost.call(this, frag);

            shadow.appendChild(frag);

            delete COMPONENT_DATASTORE[dataKey];

            // Set Trio uuid and signal
            this.uuid = componentIdGenerator();
            new Signal(this.uuid, this);

            // Create patch method
            this.patch = function(data) {
                tmpl.patch(shadow, data);
                replaceStyleHost.call(this, shadow);
            };

            // Extend opts into element context
            _extend(this, opts);

            if (opts.onCreate) {
                opts.onCreate.apply(this, arguments);
            }

            function _extend(obj, extendedObject) {
                var blacklist = {
                    onChange: true,
                    onAttach: true,
                    onDetach: true,
                    onCreate: true,
                    createdCallback: true,
                    attachedCallback: true,
                    detachedCallback: true,
                    attributeChangedCallback: true,
                    tagName: true
                };

                for (var key in extendedObject) {
                    if (!blacklist[key]) {
                        obj[key] = extendedObject[key];
                    }
                }
            }

            function replaceStyleHost(root) {
                if (window && window.ShadowDOMPolyfill) {
                    var list = root.getElementsByTagName('style');
                    Array.prototype.forEach.call(list, function (style) {
                        var text = style.textContent
                            .replace(/:host\b/gm, this.tagName.toLowerCase())
                            .replace(/::shadow\b/gm, ' ')
                            .replace(/::content\b/gm, ' ');
                        style.textContent = text;
                    }.bind(this));
                }
            }
        };

        proto.attachedCallback = function() {
            if (opts.onAttach) {
                opts.onAttach.apply(this, arguments);
            }
        };

        proto.detachedCallback = function() {
            if (opts.onDetach) {
                opts.onDetach.apply(this, arguments);
            }
        };

        proto.attributeChangedCallback = function() {
            if (opts.onChange) {
                opts.onChange.apply(this, arguments);
            }
        };

        document.registerElement(opts.tagName, {
            prototype: proto
        });
    };

    Trio.Component = ComponentManager;
})();

if( typeof exports !== 'undefined' ) {
    
    if( typeof module !== 'undefined' && module.exports ) {
        exports = module.exports = Trio;
    }

    exports.Trio = Trio;

} else {

    if (typeof window !== 'undefined') {
        window.Trio = Trio;
    } else if (typeof global !== 'undefined') {
        global.Trio = Trio;
    }
}

})();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYmNvbXBvbmVudHMuanMiLCJpbml0LmpzIiwiYWpheC5qcyIsImV4dGVuZC5qcyIsImlkR2VuZXJhdG9yLmpzIiwidm93LmpzIiwic2lnbmFsLmpzIiwibW9kdWxlLmpzIiwicmVzb3VyY2UuanMiLCJmYWN0b3J5LmpzIiwic2VydmljZS5qcyIsInN0eWxpemVyLmpzIiwicmVuZGVyZXIuanMiLCJjb21wb25lbnQuanMiLCJpbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDYkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN2RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMxQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNmQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNoTEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQ25LQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNqS0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN6TUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUNoREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQzdEQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUMxTkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FDbGJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUN6S0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsImZpbGUiOiJ0cmlvLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBAbGljZW5zZVxuICogQ29weXJpZ2h0IChjKSAyMDE0IFRoZSBQb2x5bWVyIFByb2plY3QgQXV0aG9ycy4gQWxsIHJpZ2h0cyByZXNlcnZlZC5cbiAqIFRoaXMgY29kZSBtYXkgb25seSBiZSB1c2VkIHVuZGVyIHRoZSBCU0Qgc3R5bGUgbGljZW5zZSBmb3VuZCBhdCBodHRwOi8vcG9seW1lci5naXRodWIuaW8vTElDRU5TRS50eHRcbiAqIFRoZSBjb21wbGV0ZSBzZXQgb2YgYXV0aG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0FVVEhPUlMudHh0XG4gKiBUaGUgY29tcGxldGUgc2V0IG9mIGNvbnRyaWJ1dG9ycyBtYXkgYmUgZm91bmQgYXQgaHR0cDovL3BvbHltZXIuZ2l0aHViLmlvL0NPTlRSSUJVVE9SUy50eHRcbiAqIENvZGUgZGlzdHJpYnV0ZWQgYnkgR29vZ2xlIGFzIHBhcnQgb2YgdGhlIHBvbHltZXIgcHJvamVjdCBpcyBhbHNvXG4gKiBzdWJqZWN0IHRvIGFuIGFkZGl0aW9uYWwgSVAgcmlnaHRzIGdyYW50IGZvdW5kIGF0IGh0dHA6Ly9wb2x5bWVyLmdpdGh1Yi5pby9QQVRFTlRTLnR4dFxuICovXG4vLyBAdmVyc2lvbiAwLjcuMTItODZhMDQxYlxud2luZG93LldlYkNvbXBvbmVudHM9d2luZG93LldlYkNvbXBvbmVudHN8fHt9LGZ1bmN0aW9uKGUpe3ZhciB0PWUuZmxhZ3N8fHt9LG49XCJ3ZWJjb21wb25lbnRzLmpzXCIscj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdzY3JpcHRbc3JjKj1cIicrbisnXCJdJyk7aWYoIXQubm9PcHRzKXtpZihsb2NhdGlvbi5zZWFyY2guc2xpY2UoMSkuc3BsaXQoXCImXCIpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIG4scj1lLnNwbGl0KFwiPVwiKTtyWzBdJiYobj1yWzBdLm1hdGNoKC93Yy0oLispLykpJiYodFtuWzFdXT1yWzFdfHwhMCl9KSxyKWZvcih2YXIgbyxpPTA7bz1yLmF0dHJpYnV0ZXNbaV07aSsrKVwic3JjXCIhPT1vLm5hbWUmJih0W28ubmFtZV09by52YWx1ZXx8ITApO2lmKHQubG9nJiZ0LmxvZy5zcGxpdCl7dmFyIGE9dC5sb2cuc3BsaXQoXCIsXCIpO3QubG9nPXt9LGEuZm9yRWFjaChmdW5jdGlvbihlKXt0LmxvZ1tlXT0hMH0pfWVsc2UgdC5sb2c9e319dC5zaGFkb3c9dC5zaGFkb3d8fHQuc2hhZG93ZG9tfHx0LnBvbHlmaWxsLFwibmF0aXZlXCI9PT10LnNoYWRvdz90LnNoYWRvdz0hMTp0LnNoYWRvdz10LnNoYWRvd3x8IUhUTUxFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290LHQucmVnaXN0ZXImJih3aW5kb3cuQ3VzdG9tRWxlbWVudHM9d2luZG93LkN1c3RvbUVsZW1lbnRzfHx7ZmxhZ3M6e319LHdpbmRvdy5DdXN0b21FbGVtZW50cy5mbGFncy5yZWdpc3Rlcj10LnJlZ2lzdGVyKSxlLmZsYWdzPXR9KFdlYkNvbXBvbmVudHMpLFdlYkNvbXBvbmVudHMuZmxhZ3Muc2hhZG93JiYoXCJ1bmRlZmluZWRcIj09dHlwZW9mIFdlYWtNYXAmJiFmdW5jdGlvbigpe3ZhciBlPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSx0PURhdGUubm93KCklMWU5LG49ZnVuY3Rpb24oKXt0aGlzLm5hbWU9XCJfX3N0XCIrKDFlOSpNYXRoLnJhbmRvbSgpPj4+MCkrKHQrKyArXCJfX1wiKX07bi5wcm90b3R5cGU9e3NldDpmdW5jdGlvbih0LG4pe3ZhciByPXRbdGhpcy5uYW1lXTtyZXR1cm4gciYmclswXT09PXQ/clsxXT1uOmUodCx0aGlzLm5hbWUse3ZhbHVlOlt0LG5dLHdyaXRhYmxlOiEwfSksdGhpc30sZ2V0OmZ1bmN0aW9uKGUpe3ZhciB0O3JldHVybih0PWVbdGhpcy5uYW1lXSkmJnRbMF09PT1lP3RbMV06dm9pZCAwfSxcImRlbGV0ZVwiOmZ1bmN0aW9uKGUpe3ZhciB0PWVbdGhpcy5uYW1lXTtyZXR1cm4gdCYmdFswXT09PWU/KHRbMF09dFsxXT12b2lkIDAsITApOiExfSxoYXM6ZnVuY3Rpb24oZSl7dmFyIHQ9ZVt0aGlzLm5hbWVdO3JldHVybiB0P3RbMF09PT1lOiExfX0sd2luZG93LldlYWtNYXA9bn0oKSx3aW5kb3cuU2hhZG93RE9NUG9seWZpbGw9e30sZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdCgpe2lmKFwidW5kZWZpbmVkXCIhPXR5cGVvZiBjaHJvbWUmJmNocm9tZS5hcHAmJmNocm9tZS5hcHAucnVudGltZSlyZXR1cm4hMTtpZihuYXZpZ2F0b3IuZ2V0RGV2aWNlU3RvcmFnZSlyZXR1cm4hMTt0cnl7dmFyIGU9bmV3IEZ1bmN0aW9uKFwicmV0dXJuIHRydWU7XCIpO3JldHVybiBlKCl9Y2F0Y2godCl7cmV0dXJuITF9fWZ1bmN0aW9uIG4oZSl7aWYoIWUpdGhyb3cgbmV3IEVycm9yKFwiQXNzZXJ0aW9uIGZhaWxlZFwiKX1mdW5jdGlvbiByKGUsdCl7Zm9yKHZhciBuPVcodCkscj0wO3I8bi5sZW5ndGg7cisrKXt2YXIgbz1uW3JdO0EoZSxvLEYodCxvKSl9cmV0dXJuIGV9ZnVuY3Rpb24gbyhlLHQpe2Zvcih2YXIgbj1XKHQpLHI9MDtyPG4ubGVuZ3RoO3IrKyl7dmFyIG89bltyXTtzd2l0Y2gobyl7Y2FzZVwiYXJndW1lbnRzXCI6Y2FzZVwiY2FsbGVyXCI6Y2FzZVwibGVuZ3RoXCI6Y2FzZVwibmFtZVwiOmNhc2VcInByb3RvdHlwZVwiOmNhc2VcInRvU3RyaW5nXCI6Y29udGludWV9QShlLG8sRih0LG8pKX1yZXR1cm4gZX1mdW5jdGlvbiBpKGUsdCl7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aDtuKyspaWYodFtuXWluIGUpcmV0dXJuIHRbbl19ZnVuY3Rpb24gYShlLHQsbil7VS52YWx1ZT1uLEEoZSx0LFUpfWZ1bmN0aW9uIHMoZSx0KXt2YXIgbj1lLl9fcHJvdG9fX3x8T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpO2lmKHEpdHJ5e1cobil9Y2F0Y2gocil7bj1uLl9fcHJvdG9fX312YXIgbz1SLmdldChuKTtpZihvKXJldHVybiBvO3ZhciBpPXMobiksYT1FKGkpO3JldHVybiBnKG4sYSx0KSxhfWZ1bmN0aW9uIGMoZSx0KXt3KGUsdCwhMCl9ZnVuY3Rpb24gbChlLHQpe3codCxlLCExKX1mdW5jdGlvbiB1KGUpe3JldHVybi9eb25bYS16XSskLy50ZXN0KGUpfWZ1bmN0aW9uIGQoZSl7cmV0dXJuL15bYS16QS1aXyRdW2EtekEtWl8kMC05XSokLy50ZXN0KGUpfWZ1bmN0aW9uIHAoZSl7cmV0dXJuIGsmJmQoZSk/bmV3IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXMuX19pbXBsNGNmMWU3ODJoZ19fLlwiK2UpOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX19pbXBsNGNmMWU3ODJoZ19fW2VdfX1mdW5jdGlvbiBoKGUpe3JldHVybiBrJiZkKGUpP25ldyBGdW5jdGlvbihcInZcIixcInRoaXMuX19pbXBsNGNmMWU3ODJoZ19fLlwiK2UrXCIgPSB2XCIpOmZ1bmN0aW9uKHQpe3RoaXMuX19pbXBsNGNmMWU3ODJoZ19fW2VdPXR9fWZ1bmN0aW9uIGYoZSl7cmV0dXJuIGsmJmQoZSk/bmV3IEZ1bmN0aW9uKFwicmV0dXJuIHRoaXMuX19pbXBsNGNmMWU3ODJoZ19fLlwiK2UrXCIuYXBwbHkodGhpcy5fX2ltcGw0Y2YxZTc4MmhnX18sIGFyZ3VtZW50cylcIik6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fX2ltcGw0Y2YxZTc4MmhnX19bZV0uYXBwbHkodGhpcy5fX2ltcGw0Y2YxZTc4MmhnX18sYXJndW1lbnRzKX19ZnVuY3Rpb24gbShlLHQpe3RyeXtyZXR1cm4gT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihlLHQpfWNhdGNoKG4pe3JldHVybiBCfX1mdW5jdGlvbiB3KHQsbixyLG8pe2Zvcih2YXIgaT1XKHQpLGE9MDthPGkubGVuZ3RoO2ErKyl7dmFyIHM9aVthXTtpZihcInBvbHltZXJCbGFja0xpc3RfXCIhPT1zJiYhKHMgaW4gbnx8dC5wb2x5bWVyQmxhY2tMaXN0XyYmdC5wb2x5bWVyQmxhY2tMaXN0X1tzXSkpe3EmJnQuX19sb29rdXBHZXR0ZXJfXyhzKTt2YXIgYyxsLGQ9bSh0LHMpO2lmKFwiZnVuY3Rpb25cIiE9dHlwZW9mIGQudmFsdWUpe3ZhciB3PXUocyk7Yz13P2UuZ2V0RXZlbnRIYW5kbGVyR2V0dGVyKHMpOnAocyksKGQud3JpdGFibGV8fGQuc2V0fHxWKSYmKGw9dz9lLmdldEV2ZW50SGFuZGxlclNldHRlcihzKTpoKHMpKTt2YXIgdj1WfHxkLmNvbmZpZ3VyYWJsZTtBKG4scyx7Z2V0OmMsc2V0OmwsY29uZmlndXJhYmxlOnYsZW51bWVyYWJsZTpkLmVudW1lcmFibGV9KX1lbHNlIHImJihuW3NdPWYocykpfX19ZnVuY3Rpb24gdihlLHQsbil7aWYobnVsbCE9ZSl7dmFyIHI9ZS5wcm90b3R5cGU7ZyhyLHQsbiksbyh0LGUpfX1mdW5jdGlvbiBnKGUsdCxyKXt2YXIgbz10LnByb3RvdHlwZTtuKHZvaWQgMD09PVIuZ2V0KGUpKSxSLnNldChlLHQpLEkuc2V0KG8sZSksYyhlLG8pLHImJmwobyxyKSxhKG8sXCJjb25zdHJ1Y3RvclwiLHQpLHQucHJvdG90eXBlPW99ZnVuY3Rpb24gYihlLHQpe3JldHVybiBSLmdldCh0LnByb3RvdHlwZSk9PT1lfWZ1bmN0aW9uIHkoZSl7dmFyIHQ9T2JqZWN0LmdldFByb3RvdHlwZU9mKGUpLG49cyh0KSxyPUUobik7cmV0dXJuIGcodCxyLGUpLHJ9ZnVuY3Rpb24gRShlKXtmdW5jdGlvbiB0KHQpe2UuY2FsbCh0aGlzLHQpfXZhciBuPU9iamVjdC5jcmVhdGUoZS5wcm90b3R5cGUpO3JldHVybiBuLmNvbnN0cnVjdG9yPXQsdC5wcm90b3R5cGU9bix0fWZ1bmN0aW9uIF8oZSl7cmV0dXJuIGUmJmUuX19pbXBsNGNmMWU3ODJoZ19ffWZ1bmN0aW9uIFMoZSl7cmV0dXJuIV8oZSl9ZnVuY3Rpb24gVChlKXtpZihudWxsPT09ZSlyZXR1cm4gbnVsbDtuKFMoZSkpO3ZhciB0PWUuX193cmFwcGVyOGUzZGQ5M2E2MF9fO3JldHVybiBudWxsIT10P3Q6ZS5fX3dyYXBwZXI4ZTNkZDkzYTYwX189bmV3KHMoZSxlKSkoZSl9ZnVuY3Rpb24gTShlKXtyZXR1cm4gbnVsbD09PWU/bnVsbDoobihfKGUpKSxlLl9faW1wbDRjZjFlNzgyaGdfXyl9ZnVuY3Rpb24gTyhlKXtyZXR1cm4gZS5fX2ltcGw0Y2YxZTc4MmhnX199ZnVuY3Rpb24gTChlLHQpe3QuX19pbXBsNGNmMWU3ODJoZ19fPWUsZS5fX3dyYXBwZXI4ZTNkZDkzYTYwX189dH1mdW5jdGlvbiBOKGUpe3JldHVybiBlJiZfKGUpP00oZSk6ZX1mdW5jdGlvbiBDKGUpe3JldHVybiBlJiYhXyhlKT9UKGUpOmV9ZnVuY3Rpb24gaihlLHQpe251bGwhPT10JiYobihTKGUpKSxuKHZvaWQgMD09PXR8fF8odCkpLGUuX193cmFwcGVyOGUzZGQ5M2E2MF9fPXQpfWZ1bmN0aW9uIEQoZSx0LG4pe0cuZ2V0PW4sQShlLnByb3RvdHlwZSx0LEcpfWZ1bmN0aW9uIEgoZSx0KXtEKGUsdCxmdW5jdGlvbigpe3JldHVybiBUKHRoaXMuX19pbXBsNGNmMWU3ODJoZ19fW3RdKX0pfWZ1bmN0aW9uIHgoZSx0KXtlLmZvckVhY2goZnVuY3Rpb24oZSl7dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe2UucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7dmFyIGU9Qyh0aGlzKTtyZXR1cm4gZVt0XS5hcHBseShlLGFyZ3VtZW50cyl9fSl9KX12YXIgUj1uZXcgV2Vha01hcCxJPW5ldyBXZWFrTWFwLFA9T2JqZWN0LmNyZWF0ZShudWxsKSxrPXQoKSxBPU9iamVjdC5kZWZpbmVQcm9wZXJ0eSxXPU9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzLEY9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcixVPXt2YWx1ZTp2b2lkIDAsY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITEsd3JpdGFibGU6ITB9O1cod2luZG93KTt2YXIgcT0vRmlyZWZveC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxCPXtnZXQ6ZnVuY3Rpb24oKXt9LHNldDpmdW5jdGlvbihlKXt9LGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfSxWPWZ1bmN0aW9uKCl7dmFyIGU9T2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihOb2RlLnByb3RvdHlwZSxcIm5vZGVUeXBlXCIpO3JldHVybiBlJiYhZS5nZXQmJiFlLnNldH0oKSxHPXtnZXQ6dm9pZCAwLGNvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwfTtlLmFzc2VydD1uLGUuY29uc3RydWN0b3JUYWJsZT1SLGUuZGVmaW5lR2V0dGVyPUQsZS5kZWZpbmVXcmFwR2V0dGVyPUgsZS5mb3J3YXJkTWV0aG9kc1RvV3JhcHBlcj14LGUuaXNJZGVudGlmaWVyTmFtZT1kLGUuaXNXcmFwcGVyPV8sZS5pc1dyYXBwZXJGb3I9YixlLm1peGluPXIsZS5uYXRpdmVQcm90b3R5cGVUYWJsZT1JLGUub25lT2Y9aSxlLnJlZ2lzdGVyT2JqZWN0PXksZS5yZWdpc3RlcldyYXBwZXI9dixlLnJld3JhcD1qLGUuc2V0V3JhcHBlcj1MLGUudW5zYWZlVW53cmFwPU8sZS51bndyYXA9TSxlLnVud3JhcElmTmVlZGVkPU4sZS53cmFwPVQsZS53cmFwSWZOZWVkZWQ9QyxlLndyYXBwZXJzPVB9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlLHQsbil7cmV0dXJue2luZGV4OmUscmVtb3ZlZDp0LGFkZGVkQ291bnQ6bn19ZnVuY3Rpb24gbigpe312YXIgcj0wLG89MSxpPTIsYT0zO24ucHJvdG90eXBlPXtjYWxjRWRpdERpc3RhbmNlczpmdW5jdGlvbihlLHQsbixyLG8saSl7Zm9yKHZhciBhPWktbysxLHM9bi10KzEsYz1uZXcgQXJyYXkoYSksbD0wO2E+bDtsKyspY1tsXT1uZXcgQXJyYXkocyksY1tsXVswXT1sO2Zvcih2YXIgdT0wO3M+dTt1KyspY1swXVt1XT11O2Zvcih2YXIgbD0xO2E+bDtsKyspZm9yKHZhciB1PTE7cz51O3UrKylpZih0aGlzLmVxdWFscyhlW3QrdS0xXSxyW28rbC0xXSkpY1tsXVt1XT1jW2wtMV1bdS0xXTtlbHNle3ZhciBkPWNbbC0xXVt1XSsxLHA9Y1tsXVt1LTFdKzE7Y1tsXVt1XT1wPmQ/ZDpwfXJldHVybiBjfSxzcGxpY2VPcGVyYXRpb25zRnJvbUVkaXREaXN0YW5jZXM6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWUubGVuZ3RoLTEsbj1lWzBdLmxlbmd0aC0xLHM9ZVt0XVtuXSxjPVtdO3Q+MHx8bj4wOylpZigwIT10KWlmKDAhPW4pe3ZhciBsLHU9ZVt0LTFdW24tMV0sZD1lW3QtMV1bbl0scD1lW3RdW24tMV07bD1wPmQ/dT5kP2Q6dTp1PnA/cDp1LGw9PXU/KHU9PXM/Yy5wdXNoKHIpOihjLnB1c2gobykscz11KSx0LS0sbi0tKTpsPT1kPyhjLnB1c2goYSksdC0tLHM9ZCk6KGMucHVzaChpKSxuLS0scz1wKX1lbHNlIGMucHVzaChhKSx0LS07ZWxzZSBjLnB1c2goaSksbi0tO3JldHVybiBjLnJldmVyc2UoKSxjfSxjYWxjU3BsaWNlczpmdW5jdGlvbihlLG4scyxjLGwsdSl7dmFyIGQ9MCxwPTAsaD1NYXRoLm1pbihzLW4sdS1sKTtpZigwPT1uJiYwPT1sJiYoZD10aGlzLnNoYXJlZFByZWZpeChlLGMsaCkpLHM9PWUubGVuZ3RoJiZ1PT1jLmxlbmd0aCYmKHA9dGhpcy5zaGFyZWRTdWZmaXgoZSxjLGgtZCkpLG4rPWQsbCs9ZCxzLT1wLHUtPXAscy1uPT0wJiZ1LWw9PTApcmV0dXJuW107aWYobj09cyl7Zm9yKHZhciBmPXQobixbXSwwKTt1Pmw7KWYucmVtb3ZlZC5wdXNoKGNbbCsrXSk7cmV0dXJuW2ZdfWlmKGw9PXUpcmV0dXJuW3QobixbXSxzLW4pXTtmb3IodmFyIG09dGhpcy5zcGxpY2VPcGVyYXRpb25zRnJvbUVkaXREaXN0YW5jZXModGhpcy5jYWxjRWRpdERpc3RhbmNlcyhlLG4scyxjLGwsdSkpLGY9dm9pZCAwLHc9W10sdj1uLGc9bCxiPTA7YjxtLmxlbmd0aDtiKyspc3dpdGNoKG1bYl0pe2Nhc2UgcjpmJiYody5wdXNoKGYpLGY9dm9pZCAwKSx2KyssZysrO2JyZWFrO2Nhc2UgbzpmfHwoZj10KHYsW10sMCkpLGYuYWRkZWRDb3VudCsrLHYrKyxmLnJlbW92ZWQucHVzaChjW2ddKSxnKys7YnJlYWs7Y2FzZSBpOmZ8fChmPXQodixbXSwwKSksZi5hZGRlZENvdW50KyssdisrO2JyZWFrO2Nhc2UgYTpmfHwoZj10KHYsW10sMCkpLGYucmVtb3ZlZC5wdXNoKGNbZ10pLGcrK31yZXR1cm4gZiYmdy5wdXNoKGYpLHd9LHNoYXJlZFByZWZpeDpmdW5jdGlvbihlLHQsbil7Zm9yKHZhciByPTA7bj5yO3IrKylpZighdGhpcy5lcXVhbHMoZVtyXSx0W3JdKSlyZXR1cm4gcjtyZXR1cm4gbn0sc2hhcmVkU3VmZml4OmZ1bmN0aW9uKGUsdCxuKXtmb3IodmFyIHI9ZS5sZW5ndGgsbz10Lmxlbmd0aCxpPTA7bj5pJiZ0aGlzLmVxdWFscyhlWy0tcl0sdFstLW9dKTspaSsrO3JldHVybiBpfSxjYWxjdWxhdGVTcGxpY2VzOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHRoaXMuY2FsY1NwbGljZXMoZSwwLGUubGVuZ3RoLHQsMCx0Lmxlbmd0aCl9LGVxdWFsczpmdW5jdGlvbihlLHQpe3JldHVybiBlPT09dH19LGUuQXJyYXlTcGxpY2U9bn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KCl7YT0hMTt2YXIgZT1pLnNsaWNlKDApO2k9W107Zm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0KyspZVt0XSgpfWZ1bmN0aW9uIG4oZSl7aS5wdXNoKGUpLGF8fChhPSEwLHIodCwwKSl9dmFyIHIsbz13aW5kb3cuTXV0YXRpb25PYnNlcnZlcixpPVtdLGE9ITE7aWYobyl7dmFyIHM9MSxjPW5ldyBvKHQpLGw9ZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUocyk7Yy5vYnNlcnZlKGwse2NoYXJhY3RlckRhdGE6ITB9KSxyPWZ1bmN0aW9uKCl7cz0ocysxKSUyLGwuZGF0YT1zfX1lbHNlIHI9d2luZG93LnNldFRpbWVvdXQ7ZS5zZXRFbmRPZk1pY3JvdGFzaz1ufSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7ZS5zY2hlZHVsZWRffHwoZS5zY2hlZHVsZWRfPSEwLGYucHVzaChlKSxtfHwodShuKSxtPSEwKSl9ZnVuY3Rpb24gbigpe2ZvcihtPSExO2YubGVuZ3RoOyl7dmFyIGU9ZjtmPVtdLGUuc29ydChmdW5jdGlvbihlLHQpe3JldHVybiBlLnVpZF8tdC51aWRffSk7Zm9yKHZhciB0PTA7dDxlLmxlbmd0aDt0Kyspe3ZhciBuPWVbdF07bi5zY2hlZHVsZWRfPSExO3ZhciByPW4udGFrZVJlY29yZHMoKTtpKG4pLHIubGVuZ3RoJiZuLmNhbGxiYWNrXyhyLG4pfX19ZnVuY3Rpb24gcihlLHQpe3RoaXMudHlwZT1lLHRoaXMudGFyZ2V0PXQsdGhpcy5hZGRlZE5vZGVzPW5ldyBwLk5vZGVMaXN0LHRoaXMucmVtb3ZlZE5vZGVzPW5ldyBwLk5vZGVMaXN0LHRoaXMucHJldmlvdXNTaWJsaW5nPW51bGwsdGhpcy5uZXh0U2libGluZz1udWxsLHRoaXMuYXR0cmlidXRlTmFtZT1udWxsLHRoaXMuYXR0cmlidXRlTmFtZXNwYWNlPW51bGwsdGhpcy5vbGRWYWx1ZT1udWxsfWZ1bmN0aW9uIG8oZSx0KXtmb3IoO2U7ZT1lLnBhcmVudE5vZGUpe3ZhciBuPWguZ2V0KGUpO2lmKG4pZm9yKHZhciByPTA7cjxuLmxlbmd0aDtyKyspe3ZhciBvPW5bcl07by5vcHRpb25zLnN1YnRyZWUmJm8uYWRkVHJhbnNpZW50T2JzZXJ2ZXIodCl9fX1mdW5jdGlvbiBpKGUpe2Zvcih2YXIgdD0wO3Q8ZS5ub2Rlc18ubGVuZ3RoO3QrKyl7dmFyIG49ZS5ub2Rlc19bdF0scj1oLmdldChuKTtpZighcilyZXR1cm47Zm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspe3ZhciBpPXJbb107aS5vYnNlcnZlcj09PWUmJmkucmVtb3ZlVHJhbnNpZW50T2JzZXJ2ZXJzKCl9fX1mdW5jdGlvbiBhKGUsbixvKXtmb3IodmFyIGk9T2JqZWN0LmNyZWF0ZShudWxsKSxhPU9iamVjdC5jcmVhdGUobnVsbCkscz1lO3M7cz1zLnBhcmVudE5vZGUpe3ZhciBjPWguZ2V0KHMpO2lmKGMpZm9yKHZhciBsPTA7bDxjLmxlbmd0aDtsKyspe3ZhciB1PWNbbF0sZD11Lm9wdGlvbnM7aWYoKHM9PT1lfHxkLnN1YnRyZWUpJiYoXCJhdHRyaWJ1dGVzXCIhPT1ufHxkLmF0dHJpYnV0ZXMpJiYoXCJhdHRyaWJ1dGVzXCIhPT1ufHwhZC5hdHRyaWJ1dGVGaWx0ZXJ8fG51bGw9PT1vLm5hbWVzcGFjZSYmLTEhPT1kLmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKG8ubmFtZSkpJiYoXCJjaGFyYWN0ZXJEYXRhXCIhPT1ufHxkLmNoYXJhY3RlckRhdGEpJiYoXCJjaGlsZExpc3RcIiE9PW58fGQuY2hpbGRMaXN0KSl7dmFyIHA9dS5vYnNlcnZlcjtpW3AudWlkX109cCwoXCJhdHRyaWJ1dGVzXCI9PT1uJiZkLmF0dHJpYnV0ZU9sZFZhbHVlfHxcImNoYXJhY3RlckRhdGFcIj09PW4mJmQuY2hhcmFjdGVyRGF0YU9sZFZhbHVlKSYmKGFbcC51aWRfXT1vLm9sZFZhbHVlKX19fWZvcih2YXIgZiBpbiBpKXt2YXIgcD1pW2ZdLG09bmV3IHIobixlKTtcIm5hbWVcImluIG8mJlwibmFtZXNwYWNlXCJpbiBvJiYobS5hdHRyaWJ1dGVOYW1lPW8ubmFtZSxtLmF0dHJpYnV0ZU5hbWVzcGFjZT1vLm5hbWVzcGFjZSksby5hZGRlZE5vZGVzJiYobS5hZGRlZE5vZGVzPW8uYWRkZWROb2Rlcyksby5yZW1vdmVkTm9kZXMmJihtLnJlbW92ZWROb2Rlcz1vLnJlbW92ZWROb2Rlcyksby5wcmV2aW91c1NpYmxpbmcmJihtLnByZXZpb3VzU2libGluZz1vLnByZXZpb3VzU2libGluZyksby5uZXh0U2libGluZyYmKG0ubmV4dFNpYmxpbmc9by5uZXh0U2libGluZyksdm9pZCAwIT09YVtmXSYmKG0ub2xkVmFsdWU9YVtmXSksdChwKSxwLnJlY29yZHNfLnB1c2gobSl9fWZ1bmN0aW9uIHMoZSl7aWYodGhpcy5jaGlsZExpc3Q9ISFlLmNoaWxkTGlzdCx0aGlzLnN1YnRyZWU9ISFlLnN1YnRyZWUsXCJhdHRyaWJ1dGVzXCJpbiBlfHwhKFwiYXR0cmlidXRlT2xkVmFsdWVcImluIGV8fFwiYXR0cmlidXRlRmlsdGVyXCJpbiBlKT90aGlzLmF0dHJpYnV0ZXM9ISFlLmF0dHJpYnV0ZXM6dGhpcy5hdHRyaWJ1dGVzPSEwLFwiY2hhcmFjdGVyRGF0YU9sZFZhbHVlXCJpbiBlJiYhKFwiY2hhcmFjdGVyRGF0YVwiaW4gZSk/dGhpcy5jaGFyYWN0ZXJEYXRhPSEwOnRoaXMuY2hhcmFjdGVyRGF0YT0hIWUuY2hhcmFjdGVyRGF0YSwhdGhpcy5hdHRyaWJ1dGVzJiYoZS5hdHRyaWJ1dGVPbGRWYWx1ZXx8XCJhdHRyaWJ1dGVGaWx0ZXJcImluIGUpfHwhdGhpcy5jaGFyYWN0ZXJEYXRhJiZlLmNoYXJhY3RlckRhdGFPbGRWYWx1ZSl0aHJvdyBuZXcgVHlwZUVycm9yO2lmKHRoaXMuY2hhcmFjdGVyRGF0YT0hIWUuY2hhcmFjdGVyRGF0YSx0aGlzLmF0dHJpYnV0ZU9sZFZhbHVlPSEhZS5hdHRyaWJ1dGVPbGRWYWx1ZSx0aGlzLmNoYXJhY3RlckRhdGFPbGRWYWx1ZT0hIWUuY2hhcmFjdGVyRGF0YU9sZFZhbHVlLFwiYXR0cmlidXRlRmlsdGVyXCJpbiBlKXtpZihudWxsPT1lLmF0dHJpYnV0ZUZpbHRlcnx8XCJvYmplY3RcIiE9dHlwZW9mIGUuYXR0cmlidXRlRmlsdGVyKXRocm93IG5ldyBUeXBlRXJyb3I7dGhpcy5hdHRyaWJ1dGVGaWx0ZXI9dy5jYWxsKGUuYXR0cmlidXRlRmlsdGVyKX1lbHNlIHRoaXMuYXR0cmlidXRlRmlsdGVyPW51bGx9ZnVuY3Rpb24gYyhlKXt0aGlzLmNhbGxiYWNrXz1lLHRoaXMubm9kZXNfPVtdLHRoaXMucmVjb3Jkc189W10sdGhpcy51aWRfPSsrdix0aGlzLnNjaGVkdWxlZF89ITF9ZnVuY3Rpb24gbChlLHQsbil7dGhpcy5vYnNlcnZlcj1lLHRoaXMudGFyZ2V0PXQsdGhpcy5vcHRpb25zPW4sdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdfXZhciB1PWUuc2V0RW5kT2ZNaWNyb3Rhc2ssZD1lLndyYXBJZk5lZWRlZCxwPWUud3JhcHBlcnMsaD1uZXcgV2Vha01hcCxmPVtdLG09ITEsdz1BcnJheS5wcm90b3R5cGUuc2xpY2Usdj0wO2MucHJvdG90eXBlPXtjb25zdHJ1Y3RvcjpjLG9ic2VydmU6ZnVuY3Rpb24oZSx0KXtlPWQoZSk7dmFyIG4scj1uZXcgcyh0KSxvPWguZ2V0KGUpO298fGguc2V0KGUsbz1bXSk7Zm9yKHZhciBpPTA7aTxvLmxlbmd0aDtpKyspb1tpXS5vYnNlcnZlcj09PXRoaXMmJihuPW9baV0sbi5yZW1vdmVUcmFuc2llbnRPYnNlcnZlcnMoKSxuLm9wdGlvbnM9cik7bnx8KG49bmV3IGwodGhpcyxlLHIpLG8ucHVzaChuKSx0aGlzLm5vZGVzXy5wdXNoKGUpKX0sZGlzY29ubmVjdDpmdW5jdGlvbigpe3RoaXMubm9kZXNfLmZvckVhY2goZnVuY3Rpb24oZSl7Zm9yKHZhciB0PWguZ2V0KGUpLG49MDtuPHQubGVuZ3RoO24rKyl7dmFyIHI9dFtuXTtpZihyLm9ic2VydmVyPT09dGhpcyl7dC5zcGxpY2UobiwxKTticmVha319fSx0aGlzKSx0aGlzLnJlY29yZHNfPVtdfSx0YWtlUmVjb3JkczpmdW5jdGlvbigpe3ZhciBlPXRoaXMucmVjb3Jkc187cmV0dXJuIHRoaXMucmVjb3Jkc189W10sZX19LGwucHJvdG90eXBlPXthZGRUcmFuc2llbnRPYnNlcnZlcjpmdW5jdGlvbihlKXtpZihlIT09dGhpcy50YXJnZXQpe3QodGhpcy5vYnNlcnZlciksdGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzLnB1c2goZSk7dmFyIG49aC5nZXQoZSk7bnx8aC5zZXQoZSxuPVtdKSxuLnB1c2godGhpcyl9fSxyZW1vdmVUcmFuc2llbnRPYnNlcnZlcnM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM7dGhpcy50cmFuc2llbnRPYnNlcnZlZE5vZGVzPVtdO2Zvcih2YXIgdD0wO3Q8ZS5sZW5ndGg7dCsrKWZvcih2YXIgbj1lW3RdLHI9aC5nZXQobiksbz0wO288ci5sZW5ndGg7bysrKWlmKHJbb109PT10aGlzKXtyLnNwbGljZShvLDEpO2JyZWFrfX19LGUuZW5xdWV1ZU11dGF0aW9uPWEsZS5yZWdpc3RlclRyYW5zaWVudE9ic2VydmVycz1vLGUud3JhcHBlcnMuTXV0YXRpb25PYnNlcnZlcj1jLGUud3JhcHBlcnMuTXV0YXRpb25SZWNvcmQ9cn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUsdCl7dGhpcy5yb290PWUsdGhpcy5wYXJlbnQ9dH1mdW5jdGlvbiBuKGUsdCl7aWYoZS50cmVlU2NvcGVfIT09dCl7ZS50cmVlU2NvcGVfPXQ7Zm9yKHZhciByPWUuc2hhZG93Um9vdDtyO3I9ci5vbGRlclNoYWRvd1Jvb3Qpci50cmVlU2NvcGVfLnBhcmVudD10O2Zvcih2YXIgbz1lLmZpcnN0Q2hpbGQ7bztvPW8ubmV4dFNpYmxpbmcpbihvLHQpfX1mdW5jdGlvbiByKG4pe2lmKG4gaW5zdGFuY2VvZiBlLndyYXBwZXJzLldpbmRvdyxuLnRyZWVTY29wZV8pcmV0dXJuIG4udHJlZVNjb3BlXzt2YXIgbyxpPW4ucGFyZW50Tm9kZTtyZXR1cm4gbz1pP3IoaSk6bmV3IHQobixudWxsKSxuLnRyZWVTY29wZV89b310LnByb3RvdHlwZT17Z2V0IHJlbmRlcmVyKCl7cmV0dXJuIHRoaXMucm9vdCBpbnN0YW5jZW9mIGUud3JhcHBlcnMuU2hhZG93Um9vdD9lLmdldFJlbmRlcmVyRm9ySG9zdCh0aGlzLnJvb3QuaG9zdCk6bnVsbH0sY29udGFpbnM6ZnVuY3Rpb24oZSl7Zm9yKDtlO2U9ZS5wYXJlbnQpaWYoZT09PXRoaXMpcmV0dXJuITA7cmV0dXJuITF9fSxlLlRyZWVTY29wZT10LGUuZ2V0VHJlZVNjb3BlPXIsZS5zZXRUcmVlU2NvcGU9bn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe3JldHVybiBlIGluc3RhbmNlb2YgRy5TaGFkb3dSb290fWZ1bmN0aW9uIG4oZSl7cmV0dXJuIEEoZSkucm9vdH1mdW5jdGlvbiByKGUscil7dmFyIHM9W10sYz1lO2ZvcihzLnB1c2goYyk7Yzspe3ZhciBsPWEoYyk7aWYobCYmbC5sZW5ndGg+MCl7Zm9yKHZhciB1PTA7dTxsLmxlbmd0aDt1Kyspe3ZhciBwPWxbdV07aWYoaShwKSl7dmFyIGg9bihwKSxmPWgub2xkZXJTaGFkb3dSb290O2YmJnMucHVzaChmKX1zLnB1c2gocCl9Yz1sW2wubGVuZ3RoLTFdfWVsc2UgaWYodChjKSl7aWYoZChlLGMpJiZvKHIpKWJyZWFrO2M9Yy5ob3N0LHMucHVzaChjKX1lbHNlIGM9Yy5wYXJlbnROb2RlLGMmJnMucHVzaChjKX1yZXR1cm4gc31mdW5jdGlvbiBvKGUpe2lmKCFlKXJldHVybiExO3N3aXRjaChlLnR5cGUpe2Nhc2VcImFib3J0XCI6Y2FzZVwiZXJyb3JcIjpjYXNlXCJzZWxlY3RcIjpjYXNlXCJjaGFuZ2VcIjpjYXNlXCJsb2FkXCI6Y2FzZVwicmVzZXRcIjpjYXNlXCJyZXNpemVcIjpjYXNlXCJzY3JvbGxcIjpjYXNlXCJzZWxlY3RzdGFydFwiOnJldHVybiEwfXJldHVybiExfWZ1bmN0aW9uIGkoZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBIVE1MU2hhZG93RWxlbWVudH1mdW5jdGlvbiBhKHQpe3JldHVybiBlLmdldERlc3RpbmF0aW9uSW5zZXJ0aW9uUG9pbnRzKHQpfWZ1bmN0aW9uIHMoZSx0KXtpZigwPT09ZS5sZW5ndGgpcmV0dXJuIHQ7dCBpbnN0YW5jZW9mIEcuV2luZG93JiYodD10LmRvY3VtZW50KTtmb3IodmFyIG49QSh0KSxyPWVbMF0sbz1BKHIpLGk9bChuLG8pLGE9MDthPGUubGVuZ3RoO2ErKyl7dmFyIHM9ZVthXTtpZihBKHMpPT09aSlyZXR1cm4gc31yZXR1cm4gZVtlLmxlbmd0aC0xXX1mdW5jdGlvbiBjKGUpe2Zvcih2YXIgdD1bXTtlO2U9ZS5wYXJlbnQpdC5wdXNoKGUpO3JldHVybiB0fWZ1bmN0aW9uIGwoZSx0KXtmb3IodmFyIG49YyhlKSxyPWModCksbz1udWxsO24ubGVuZ3RoPjAmJnIubGVuZ3RoPjA7KXt2YXIgaT1uLnBvcCgpLGE9ci5wb3AoKTtpZihpIT09YSlicmVhaztvPWl9cmV0dXJuIG99ZnVuY3Rpb24gdShlLHQsbil7dCBpbnN0YW5jZW9mIEcuV2luZG93JiYodD10LmRvY3VtZW50KTt2YXIgbyxpPUEodCksYT1BKG4pLHM9cihuLGUpLG89bChpLGEpO298fChvPWEucm9vdCk7Zm9yKHZhciBjPW87YztjPWMucGFyZW50KWZvcih2YXIgdT0wO3U8cy5sZW5ndGg7dSsrKXt2YXIgZD1zW3VdO2lmKEEoZCk9PT1jKXJldHVybiBkfXJldHVybiBudWxsfWZ1bmN0aW9uIGQoZSx0KXtyZXR1cm4gQShlKT09PUEodCl9ZnVuY3Rpb24gcChlKXtpZighSy5nZXQoZSkmJihLLnNldChlLCEwKSxmKFYoZSksVihlLnRhcmdldCkpLFApKXt2YXIgdD1QO3Rocm93IFA9bnVsbCx0fX1mdW5jdGlvbiBoKGUpe3N3aXRjaChlLnR5cGUpe2Nhc2VcImxvYWRcIjpjYXNlXCJiZWZvcmV1bmxvYWRcIjpjYXNlXCJ1bmxvYWRcIjpyZXR1cm4hMH1yZXR1cm4hMX1mdW5jdGlvbiBmKHQsbil7aWYoJC5nZXQodCkpdGhyb3cgbmV3IEVycm9yKFwiSW52YWxpZFN0YXRlRXJyb3JcIik7JC5zZXQodCwhMCksZS5yZW5kZXJBbGxQZW5kaW5nKCk7dmFyIG8saSxhO2lmKGgodCkmJiF0LmJ1YmJsZXMpe3ZhciBzPW47cyBpbnN0YW5jZW9mIEcuRG9jdW1lbnQmJihhPXMuZGVmYXVsdFZpZXcpJiYoaT1zLG89W10pfWlmKCFvKWlmKG4gaW5zdGFuY2VvZiBHLldpbmRvdylhPW4sbz1bXTtlbHNlIGlmKG89cihuLHQpLCFoKHQpKXt2YXIgcz1vW28ubGVuZ3RoLTFdO3MgaW5zdGFuY2VvZiBHLkRvY3VtZW50JiYoYT1zLmRlZmF1bHRWaWV3KX1yZXR1cm4gbmUuc2V0KHQsbyksbSh0LG8sYSxpKSYmdyh0LG8sYSxpKSYmdih0LG8sYSxpKSxKLnNldCh0LHJlKSxZW1wiZGVsZXRlXCJdKHQsbnVsbCksJFtcImRlbGV0ZVwiXSh0KSx0LmRlZmF1bHRQcmV2ZW50ZWR9ZnVuY3Rpb24gbShlLHQsbixyKXt2YXIgbz1vZTtpZihuJiYhZyhuLGUsbyx0LHIpKXJldHVybiExO2Zvcih2YXIgaT10Lmxlbmd0aC0xO2k+MDtpLS0paWYoIWcodFtpXSxlLG8sdCxyKSlyZXR1cm4hMTtyZXR1cm4hMH1mdW5jdGlvbiB3KGUsdCxuLHIpe3ZhciBvPWllLGk9dFswXXx8bjtyZXR1cm4gZyhpLGUsbyx0LHIpfWZ1bmN0aW9uIHYoZSx0LG4scil7Zm9yKHZhciBvPWFlLGk9MTtpPHQubGVuZ3RoO2krKylpZighZyh0W2ldLGUsbyx0LHIpKXJldHVybjtuJiZ0Lmxlbmd0aD4wJiZnKG4sZSxvLHQscil9ZnVuY3Rpb24gZyhlLHQsbixyLG8pe3ZhciBpPXouZ2V0KGUpO2lmKCFpKXJldHVybiEwO3ZhciBhPW98fHMocixlKTtpZihhPT09ZSl7aWYobj09PW9lKXJldHVybiEwO249PT1hZSYmKG49aWUpfWVsc2UgaWYobj09PWFlJiYhdC5idWJibGVzKXJldHVybiEwO2lmKFwicmVsYXRlZFRhcmdldFwiaW4gdCl7dmFyIGM9Qih0KSxsPWMucmVsYXRlZFRhcmdldDtpZihsKXtpZihsIGluc3RhbmNlb2YgT2JqZWN0JiZsLmFkZEV2ZW50TGlzdGVuZXIpe3ZhciBkPVYobCkscD11KHQsZSxkKTtpZihwPT09YSlyZXR1cm4hMH1lbHNlIHA9bnVsbDtaLnNldCh0LHApfX1KLnNldCh0LG4pO3ZhciBoPXQudHlwZSxmPSExO1guc2V0KHQsYSksWS5zZXQodCxlKSxpLmRlcHRoKys7Zm9yKHZhciBtPTAsdz1pLmxlbmd0aDt3Pm07bSsrKXt2YXIgdj1pW21dO2lmKHYucmVtb3ZlZClmPSEwO2Vsc2UgaWYoISh2LnR5cGUhPT1ofHwhdi5jYXB0dXJlJiZuPT09b2V8fHYuY2FwdHVyZSYmbj09PWFlKSl0cnl7aWYoXCJmdW5jdGlvblwiPT10eXBlb2Ygdi5oYW5kbGVyP3YuaGFuZGxlci5jYWxsKGUsdCk6di5oYW5kbGVyLmhhbmRsZUV2ZW50KHQpLGVlLmdldCh0KSlyZXR1cm4hMX1jYXRjaChnKXtQfHwoUD1nKX19aWYoaS5kZXB0aC0tLGYmJjA9PT1pLmRlcHRoKXt2YXIgYj1pLnNsaWNlKCk7aS5sZW5ndGg9MDtmb3IodmFyIG09MDttPGIubGVuZ3RoO20rKyliW21dLnJlbW92ZWR8fGkucHVzaChiW21dKX1yZXR1cm4hUS5nZXQodCl9ZnVuY3Rpb24gYihlLHQsbil7dGhpcy50eXBlPWUsdGhpcy5oYW5kbGVyPXQsdGhpcy5jYXB0dXJlPUJvb2xlYW4obil9ZnVuY3Rpb24geShlLHQpe2lmKCEoZSBpbnN0YW5jZW9mIHNlKSlyZXR1cm4gVihUKHNlLFwiRXZlbnRcIixlLHQpKTt2YXIgbj1lO3JldHVybiBnZXx8XCJiZWZvcmV1bmxvYWRcIiE9PW4udHlwZXx8dGhpcyBpbnN0YW5jZW9mIE0/dm9pZCBVKG4sdGhpcyk6bmV3IE0obil9ZnVuY3Rpb24gRShlKXtyZXR1cm4gZSYmZS5yZWxhdGVkVGFyZ2V0P09iamVjdC5jcmVhdGUoZSx7cmVsYXRlZFRhcmdldDp7dmFsdWU6QihlLnJlbGF0ZWRUYXJnZXQpfX0pOmV9ZnVuY3Rpb24gXyhlLHQsbil7dmFyIHI9d2luZG93W2VdLG89ZnVuY3Rpb24odCxuKXtyZXR1cm4gdCBpbnN0YW5jZW9mIHI/dm9pZCBVKHQsdGhpcyk6VihUKHIsZSx0LG4pKX07aWYoby5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh0LnByb3RvdHlwZSksbiYmVyhvLnByb3RvdHlwZSxuKSxyKXRyeXtGKHIsbyxuZXcgcihcInRlbXBcIikpfWNhdGNoKGkpe0YocixvLGRvY3VtZW50LmNyZWF0ZUV2ZW50KGUpKX1yZXR1cm4gb31mdW5jdGlvbiBTKGUsdCl7cmV0dXJuIGZ1bmN0aW9uKCl7YXJndW1lbnRzW3RdPUIoYXJndW1lbnRzW3RdKTt2YXIgbj1CKHRoaXMpO25bZV0uYXBwbHkobixhcmd1bWVudHMpfX1mdW5jdGlvbiBUKGUsdCxuLHIpe2lmKHdlKXJldHVybiBuZXcgZShuLEUocikpO3ZhciBvPUIoZG9jdW1lbnQuY3JlYXRlRXZlbnQodCkpLGk9bWVbdF0sYT1bbl07cmV0dXJuIE9iamVjdC5rZXlzKGkpLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9bnVsbCE9ciYmZSBpbiByP3JbZV06aVtlXTtcInJlbGF0ZWRUYXJnZXRcIj09PWUmJih0PUIodCkpLGEucHVzaCh0KX0pLG9bXCJpbml0XCIrdF0uYXBwbHkobyxhKSxvfWZ1bmN0aW9uIE0oZSl7eS5jYWxsKHRoaXMsZSl9ZnVuY3Rpb24gTyhlKXtyZXR1cm5cImZ1bmN0aW9uXCI9PXR5cGVvZiBlPyEwOmUmJmUuaGFuZGxlRXZlbnR9ZnVuY3Rpb24gTChlKXtzd2l0Y2goZSl7Y2FzZVwiRE9NQXR0ck1vZGlmaWVkXCI6Y2FzZVwiRE9NQXR0cmlidXRlTmFtZUNoYW5nZWRcIjpjYXNlXCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWRcIjpjYXNlXCJET01FbGVtZW50TmFtZUNoYW5nZWRcIjpjYXNlXCJET01Ob2RlSW5zZXJ0ZWRcIjpjYXNlXCJET01Ob2RlSW5zZXJ0ZWRJbnRvRG9jdW1lbnRcIjpjYXNlXCJET01Ob2RlUmVtb3ZlZFwiOmNhc2VcIkRPTU5vZGVSZW1vdmVkRnJvbURvY3VtZW50XCI6Y2FzZVwiRE9NU3VidHJlZU1vZGlmaWVkXCI6cmV0dXJuITB9cmV0dXJuITF9ZnVuY3Rpb24gTihlKXtVKGUsdGhpcyl9ZnVuY3Rpb24gQyhlKXtyZXR1cm4gZSBpbnN0YW5jZW9mIEcuU2hhZG93Um9vdCYmKGU9ZS5ob3N0KSxCKGUpfWZ1bmN0aW9uIGooZSx0KXt2YXIgbj16LmdldChlKTtpZihuKWZvcih2YXIgcj0wO3I8bi5sZW5ndGg7cisrKWlmKCFuW3JdLnJlbW92ZWQmJm5bcl0udHlwZT09PXQpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gRChlLHQpe2Zvcih2YXIgbj1CKGUpO247bj1uLnBhcmVudE5vZGUpaWYoaihWKG4pLHQpKXJldHVybiEwO3JldHVybiExfWZ1bmN0aW9uIEgoZSl7ayhlLHllKX1mdW5jdGlvbiB4KHQsbixvLGkpe2UucmVuZGVyQWxsUGVuZGluZygpO3ZhciBhPVYoRWUuY2FsbChxKG4pLG8saSkpO2lmKCFhKXJldHVybiBudWxsO3ZhciBjPXIoYSxudWxsKSxsPWMubGFzdEluZGV4T2YodCk7cmV0dXJuLTE9PWw/bnVsbDooYz1jLnNsaWNlKDAsbCkscyhjLHQpKX1mdW5jdGlvbiBSKGUpe3JldHVybiBmdW5jdGlvbigpe3ZhciB0PXRlLmdldCh0aGlzKTtyZXR1cm4gdCYmdFtlXSYmdFtlXS52YWx1ZXx8bnVsbH19ZnVuY3Rpb24gSShlKXt2YXIgdD1lLnNsaWNlKDIpO3JldHVybiBmdW5jdGlvbihuKXt2YXIgcj10ZS5nZXQodGhpcyk7cnx8KHI9T2JqZWN0LmNyZWF0ZShudWxsKSx0ZS5zZXQodGhpcyxyKSk7dmFyIG89cltlXTtpZihvJiZ0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXIodCxvLndyYXBwZWQsITEpLFwiZnVuY3Rpb25cIj09dHlwZW9mIG4pe3ZhciBpPWZ1bmN0aW9uKHQpe3ZhciByPW4uY2FsbCh0aGlzLHQpO3I9PT0hMT90LnByZXZlbnREZWZhdWx0KCk6XCJvbmJlZm9yZXVubG9hZFwiPT09ZSYmXCJzdHJpbmdcIj09dHlwZW9mIHImJih0LnJldHVyblZhbHVlPXIpfTt0aGlzLmFkZEV2ZW50TGlzdGVuZXIodCxpLCExKSxyW2VdPXt2YWx1ZTpuLHdyYXBwZWQ6aX19fX12YXIgUCxrPWUuZm9yd2FyZE1ldGhvZHNUb1dyYXBwZXIsQT1lLmdldFRyZWVTY29wZSxXPWUubWl4aW4sRj1lLnJlZ2lzdGVyV3JhcHBlcixVPWUuc2V0V3JhcHBlcixxPWUudW5zYWZlVW53cmFwLEI9ZS51bndyYXAsVj1lLndyYXAsRz1lLndyYXBwZXJzLHo9KG5ldyBXZWFrTWFwLG5ldyBXZWFrTWFwKSxLPW5ldyBXZWFrTWFwLCQ9bmV3IFdlYWtNYXAsWD1uZXcgV2Vha01hcCxZPW5ldyBXZWFrTWFwLFo9bmV3IFdlYWtNYXAsSj1uZXcgV2Vha01hcCxRPW5ldyBXZWFrTWFwLGVlPW5ldyBXZWFrTWFwLHRlPW5ldyBXZWFrTWFwLG5lPW5ldyBXZWFrTWFwLHJlPTAsb2U9MSxpZT0yLGFlPTM7Yi5wcm90b3R5cGU9e2VxdWFsczpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5oYW5kbGVyPT09ZS5oYW5kbGVyJiZ0aGlzLnR5cGU9PT1lLnR5cGUmJnRoaXMuY2FwdHVyZT09PWUuY2FwdHVyZX0sZ2V0IHJlbW92ZWQoKXtyZXR1cm4gbnVsbD09PXRoaXMuaGFuZGxlcn0scmVtb3ZlOmZ1bmN0aW9uKCl7dGhpcy5oYW5kbGVyPW51bGx9fTt2YXIgc2U9d2luZG93LkV2ZW50O3NlLnByb3RvdHlwZS5wb2x5bWVyQmxhY2tMaXN0Xz17cmV0dXJuVmFsdWU6ITAsa2V5TG9jYXRpb246ITB9LHkucHJvdG90eXBlPXtnZXQgdGFyZ2V0KCl7cmV0dXJuIFguZ2V0KHRoaXMpfSxnZXQgY3VycmVudFRhcmdldCgpe3JldHVybiBZLmdldCh0aGlzKX0sZ2V0IGV2ZW50UGhhc2UoKXtyZXR1cm4gSi5nZXQodGhpcyl9LGdldCBwYXRoKCl7dmFyIGU9bmUuZ2V0KHRoaXMpO3JldHVybiBlP2Uuc2xpY2UoKTpbXX0sc3RvcFByb3BhZ2F0aW9uOmZ1bmN0aW9uKCl7US5zZXQodGhpcywhMCl9LHN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbjpmdW5jdGlvbigpe1Euc2V0KHRoaXMsITApLGVlLnNldCh0aGlzLCEwKX19LEYoc2UseSxkb2N1bWVudC5jcmVhdGVFdmVudChcIkV2ZW50XCIpKTt2YXIgY2U9XyhcIlVJRXZlbnRcIix5KSxsZT1fKFwiQ3VzdG9tRXZlbnRcIix5KSx1ZT17Z2V0IHJlbGF0ZWRUYXJnZXQoKXt2YXIgZT1aLmdldCh0aGlzKTtyZXR1cm4gdm9pZCAwIT09ZT9lOlYoQih0aGlzKS5yZWxhdGVkVGFyZ2V0KX19LGRlPVcoe2luaXRNb3VzZUV2ZW50OlMoXCJpbml0TW91c2VFdmVudFwiLDE0KX0sdWUpLHBlPVcoe2luaXRGb2N1c0V2ZW50OlMoXCJpbml0Rm9jdXNFdmVudFwiLDUpfSx1ZSksaGU9XyhcIk1vdXNlRXZlbnRcIixjZSxkZSksZmU9XyhcIkZvY3VzRXZlbnRcIixjZSxwZSksbWU9T2JqZWN0LmNyZWF0ZShudWxsKSx3ZT1mdW5jdGlvbigpe3RyeXtuZXcgd2luZG93LkZvY3VzRXZlbnQoXCJmb2N1c1wiKX1jYXRjaChlKXtyZXR1cm4hMX1yZXR1cm4hMH0oKTtpZighd2Upe3ZhciB2ZT1mdW5jdGlvbihlLHQsbil7aWYobil7dmFyIHI9bWVbbl07dD1XKFcoe30sciksdCl9bWVbZV09dH07dmUoXCJFdmVudFwiLHtidWJibGVzOiExLGNhbmNlbGFibGU6ITF9KSx2ZShcIkN1c3RvbUV2ZW50XCIse2RldGFpbDpudWxsfSxcIkV2ZW50XCIpLHZlKFwiVUlFdmVudFwiLHt2aWV3Om51bGwsZGV0YWlsOjB9LFwiRXZlbnRcIiksdmUoXCJNb3VzZUV2ZW50XCIse3NjcmVlblg6MCxzY3JlZW5ZOjAsY2xpZW50WDowLGNsaWVudFk6MCxjdHJsS2V5OiExLGFsdEtleTohMSxzaGlmdEtleTohMSxtZXRhS2V5OiExLGJ1dHRvbjowLHJlbGF0ZWRUYXJnZXQ6bnVsbH0sXCJVSUV2ZW50XCIpLHZlKFwiRm9jdXNFdmVudFwiLHtyZWxhdGVkVGFyZ2V0Om51bGx9LFwiVUlFdmVudFwiKX12YXIgZ2U9d2luZG93LkJlZm9yZVVubG9hZEV2ZW50O00ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoeS5wcm90b3R5cGUpLFcoTS5wcm90b3R5cGUse2dldCByZXR1cm5WYWx1ZSgpe3JldHVybiBxKHRoaXMpLnJldHVyblZhbHVlfSxzZXQgcmV0dXJuVmFsdWUoZSl7cSh0aGlzKS5yZXR1cm5WYWx1ZT1lfX0pLGdlJiZGKGdlLE0pO3ZhciBiZT13aW5kb3cuRXZlbnRUYXJnZXQseWU9W1wiYWRkRXZlbnRMaXN0ZW5lclwiLFwicmVtb3ZlRXZlbnRMaXN0ZW5lclwiLFwiZGlzcGF0Y2hFdmVudFwiXTtbTm9kZSxXaW5kb3ddLmZvckVhY2goZnVuY3Rpb24oZSl7dmFyIHQ9ZS5wcm90b3R5cGU7eWUuZm9yRWFjaChmdW5jdGlvbihlKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodCxlK1wiX1wiLHt2YWx1ZTp0W2VdfSl9KX0pLE4ucHJvdG90eXBlPXthZGRFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGUsdCxuKXtpZihPKHQpJiYhTChlKSl7dmFyIHI9bmV3IGIoZSx0LG4pLG89ei5nZXQodGhpcyk7aWYobyl7Zm9yKHZhciBpPTA7aTxvLmxlbmd0aDtpKyspaWYoci5lcXVhbHMob1tpXSkpcmV0dXJufWVsc2Ugbz1bXSxvLmRlcHRoPTAsei5zZXQodGhpcyxvKTtvLnB1c2gocik7dmFyIGE9Qyh0aGlzKTthLmFkZEV2ZW50TGlzdGVuZXJfKGUscCwhMCl9fSxyZW1vdmVFdmVudExpc3RlbmVyOmZ1bmN0aW9uKGUsdCxuKXtuPUJvb2xlYW4obik7dmFyIHI9ei5nZXQodGhpcyk7aWYocil7Zm9yKHZhciBvPTAsaT0hMSxhPTA7YTxyLmxlbmd0aDthKyspclthXS50eXBlPT09ZSYmclthXS5jYXB0dXJlPT09biYmKG8rKyxyW2FdLmhhbmRsZXI9PT10JiYoaT0hMCxyW2FdLnJlbW92ZSgpKSk7aWYoaSYmMT09PW8pe3ZhciBzPUModGhpcyk7cy5yZW1vdmVFdmVudExpc3RlbmVyXyhlLHAsITApfX19LGRpc3BhdGNoRXZlbnQ6ZnVuY3Rpb24odCl7dmFyIG49Qih0KSxyPW4udHlwZTtLLnNldChuLCExKSxlLnJlbmRlckFsbFBlbmRpbmcoKTt2YXIgbztEKHRoaXMscil8fChvPWZ1bmN0aW9uKCl7fSx0aGlzLmFkZEV2ZW50TGlzdGVuZXIocixvLCEwKSk7dHJ5e3JldHVybiBCKHRoaXMpLmRpc3BhdGNoRXZlbnRfKG4pfWZpbmFsbHl7byYmdGhpcy5yZW1vdmVFdmVudExpc3RlbmVyKHIsbywhMCl9fX0sYmUmJkYoYmUsTik7dmFyIEVlPWRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQ7ZS5lbGVtZW50RnJvbVBvaW50PXgsZS5nZXRFdmVudEhhbmRsZXJHZXR0ZXI9UixlLmdldEV2ZW50SGFuZGxlclNldHRlcj1JLGUud3JhcEV2ZW50VGFyZ2V0TWV0aG9kcz1ILGUud3JhcHBlcnMuQmVmb3JlVW5sb2FkRXZlbnQ9TSxlLndyYXBwZXJzLkN1c3RvbUV2ZW50PWxlLGUud3JhcHBlcnMuRXZlbnQ9eSxlLndyYXBwZXJzLkV2ZW50VGFyZ2V0PU4sZS53cmFwcGVycy5Gb2N1c0V2ZW50PWZlLGUud3JhcHBlcnMuTW91c2VFdmVudD1oZSxlLndyYXBwZXJzLlVJRXZlbnQ9Y2V9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlLHQpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShlLHQsbSl9ZnVuY3Rpb24gbihlKXtsKGUsdGhpcyl9ZnVuY3Rpb24gcigpe3RoaXMubGVuZ3RoPTAsdCh0aGlzLFwibGVuZ3RoXCIpfWZ1bmN0aW9uIG8oZSl7Zm9yKHZhciB0PW5ldyByLG89MDtvPGUubGVuZ3RoO28rKyl0W29dPW5ldyBuKGVbb10pO3JldHVybiB0Lmxlbmd0aD1vLHR9ZnVuY3Rpb24gaShlKXthLmNhbGwodGhpcyxlKX12YXIgYT1lLndyYXBwZXJzLlVJRXZlbnQscz1lLm1peGluLGM9ZS5yZWdpc3RlcldyYXBwZXIsbD1lLnNldFdyYXBwZXIsdT1lLnVuc2FmZVVud3JhcCxkPWUud3JhcCxwPXdpbmRvdy5Ub3VjaEV2ZW50O2lmKHApe3ZhciBoO3RyeXtoPWRvY3VtZW50LmNyZWF0ZUV2ZW50KFwiVG91Y2hFdmVudFwiKX1jYXRjaChmKXtyZXR1cm59dmFyIG09e2VudW1lcmFibGU6ITF9O24ucHJvdG90eXBlPXtnZXQgdGFyZ2V0KCl7cmV0dXJuIGQodSh0aGlzKS50YXJnZXQpfX07dmFyIHc9e2NvbmZpZ3VyYWJsZTohMCxlbnVtZXJhYmxlOiEwLGdldDpudWxsfTtbXCJjbGllbnRYXCIsXCJjbGllbnRZXCIsXCJzY3JlZW5YXCIsXCJzY3JlZW5ZXCIsXCJwYWdlWFwiLFwicGFnZVlcIixcImlkZW50aWZpZXJcIixcIndlYmtpdFJhZGl1c1hcIixcIndlYmtpdFJhZGl1c1lcIixcIndlYmtpdFJvdGF0aW9uQW5nbGVcIixcIndlYmtpdEZvcmNlXCJdLmZvckVhY2goZnVuY3Rpb24oZSl7dy5nZXQ9ZnVuY3Rpb24oKXtyZXR1cm4gdSh0aGlzKVtlXX0sT2JqZWN0LmRlZmluZVByb3BlcnR5KG4ucHJvdG90eXBlLGUsdyl9KSxyLnByb3RvdHlwZT17aXRlbTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpc1tlXX19LGkucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYS5wcm90b3R5cGUpLHMoaS5wcm90b3R5cGUse2dldCB0b3VjaGVzKCl7cmV0dXJuIG8odSh0aGlzKS50b3VjaGVzKX0sZ2V0IHRhcmdldFRvdWNoZXMoKXtyZXR1cm4gbyh1KHRoaXMpLnRhcmdldFRvdWNoZXMpfSxnZXQgY2hhbmdlZFRvdWNoZXMoKXtyZXR1cm4gbyh1KHRoaXMpLmNoYW5nZWRUb3VjaGVzKX0saW5pdFRvdWNoRXZlbnQ6ZnVuY3Rpb24oKXt0aHJvdyBuZXcgRXJyb3IoXCJOb3QgaW1wbGVtZW50ZWRcIil9fSksYyhwLGksaCksZS53cmFwcGVycy5Ub3VjaD1uLGUud3JhcHBlcnMuVG91Y2hFdmVudD1pLGUud3JhcHBlcnMuVG91Y2hMaXN0PXJ9fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSx0KXtPYmplY3QuZGVmaW5lUHJvcGVydHkoZSx0LHMpfWZ1bmN0aW9uIG4oKXt0aGlzLmxlbmd0aD0wLHQodGhpcyxcImxlbmd0aFwiKX1mdW5jdGlvbiByKGUpe2lmKG51bGw9PWUpcmV0dXJuIGU7Zm9yKHZhciB0PW5ldyBuLHI9MCxvPWUubGVuZ3RoO28+cjtyKyspdFtyXT1hKGVbcl0pO3JldHVybiB0Lmxlbmd0aD1vLHR9ZnVuY3Rpb24gbyhlLHQpe2UucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7cmV0dXJuIHIoaSh0aGlzKVt0XS5hcHBseShpKHRoaXMpLGFyZ3VtZW50cykpfX12YXIgaT1lLnVuc2FmZVVud3JhcCxhPWUud3JhcCxzPXtlbnVtZXJhYmxlOiExfTtuLnByb3RvdHlwZT17aXRlbTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpc1tlXX19LHQobi5wcm90b3R5cGUsXCJpdGVtXCIpLGUud3JhcHBlcnMuTm9kZUxpc3Q9bixlLmFkZFdyYXBOb2RlTGlzdE1ldGhvZD1vLGUud3JhcE5vZGVMaXN0PXJ9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZS53cmFwSFRNTENvbGxlY3Rpb249ZS53cmFwTm9kZUxpc3QsZS53cmFwcGVycy5IVE1MQ29sbGVjdGlvbj1lLndyYXBwZXJzLk5vZGVMaXN0fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7TyhlIGluc3RhbmNlb2YgXyl9ZnVuY3Rpb24gbihlKXt2YXIgdD1uZXcgVDtyZXR1cm4gdFswXT1lLHQubGVuZ3RoPTEsdH1mdW5jdGlvbiByKGUsdCxuKXtOKHQsXCJjaGlsZExpc3RcIix7cmVtb3ZlZE5vZGVzOm4scHJldmlvdXNTaWJsaW5nOmUucHJldmlvdXNTaWJsaW5nLG5leHRTaWJsaW5nOmUubmV4dFNpYmxpbmd9KX1mdW5jdGlvbiBvKGUsdCl7TihlLFwiY2hpbGRMaXN0XCIse3JlbW92ZWROb2Rlczp0fSl9ZnVuY3Rpb24gaShlLHQscixvKXtpZihlIGluc3RhbmNlb2YgRG9jdW1lbnRGcmFnbWVudCl7dmFyIGk9cyhlKTtVPSEwO2Zvcih2YXIgYT1pLmxlbmd0aC0xO2E+PTA7YS0tKWUucmVtb3ZlQ2hpbGQoaVthXSksaVthXS5wYXJlbnROb2RlXz10O1U9ITE7Zm9yKHZhciBhPTA7YTxpLmxlbmd0aDthKyspaVthXS5wcmV2aW91c1NpYmxpbmdfPWlbYS0xXXx8cixpW2FdLm5leHRTaWJsaW5nXz1pW2ErMV18fG87cmV0dXJuIHImJihyLm5leHRTaWJsaW5nXz1pWzBdKSxvJiYoby5wcmV2aW91c1NpYmxpbmdfPWlbaS5sZW5ndGgtMV0pLGl9dmFyIGk9bihlKSxjPWUucGFyZW50Tm9kZTtyZXR1cm4gYyYmYy5yZW1vdmVDaGlsZChlKSxlLnBhcmVudE5vZGVfPXQsZS5wcmV2aW91c1NpYmxpbmdfPXIsZS5uZXh0U2libGluZ189byxyJiYoci5uZXh0U2libGluZ189ZSksbyYmKG8ucHJldmlvdXNTaWJsaW5nXz1lKSxpfWZ1bmN0aW9uIGEoZSl7aWYoZSBpbnN0YW5jZW9mIERvY3VtZW50RnJhZ21lbnQpcmV0dXJuIHMoZSk7dmFyIHQ9bihlKSxvPWUucGFyZW50Tm9kZTtyZXR1cm4gbyYmcihlLG8sdCksdH1mdW5jdGlvbiBzKGUpe2Zvcih2YXIgdD1uZXcgVCxuPTAscj1lLmZpcnN0Q2hpbGQ7cjtyPXIubmV4dFNpYmxpbmcpdFtuKytdPXI7cmV0dXJuIHQubGVuZ3RoPW4sbyhlLHQpLHR9ZnVuY3Rpb24gYyhlKXtyZXR1cm4gZX1mdW5jdGlvbiBsKGUsdCl7UihlLHQpLGUubm9kZUlzSW5zZXJ0ZWRfKCl9ZnVuY3Rpb24gdShlLHQpe2Zvcih2YXIgbj1DKHQpLHI9MDtyPGUubGVuZ3RoO3IrKylsKGVbcl0sbil9ZnVuY3Rpb24gZChlKXtSKGUsbmV3IE0oZSxudWxsKSl9ZnVuY3Rpb24gcChlKXtmb3IodmFyIHQ9MDt0PGUubGVuZ3RoO3QrKylkKGVbdF0pfWZ1bmN0aW9uIGgoZSx0KXt2YXIgbj1lLm5vZGVUeXBlPT09Xy5ET0NVTUVOVF9OT0RFP2U6ZS5vd25lckRvY3VtZW50O24hPT10Lm93bmVyRG9jdW1lbnQmJm4uYWRvcHROb2RlKHQpfWZ1bmN0aW9uIGYodCxuKXtpZihuLmxlbmd0aCl7dmFyIHI9dC5vd25lckRvY3VtZW50O2lmKHIhPT1uWzBdLm93bmVyRG9jdW1lbnQpZm9yKHZhciBvPTA7bzxuLmxlbmd0aDtvKyspZS5hZG9wdE5vZGVOb1JlbW92ZShuW29dLHIpfX1mdW5jdGlvbiBtKGUsdCl7ZihlLHQpO3ZhciBuPXQubGVuZ3RoO2lmKDE9PT1uKXJldHVybiBQKHRbMF0pO2Zvcih2YXIgcj1QKGUub3duZXJEb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpLG89MDtuPm87bysrKXIuYXBwZW5kQ2hpbGQoUCh0W29dKSk7cmV0dXJuIHJ9ZnVuY3Rpb24gdyhlKXtpZih2b2lkIDAhPT1lLmZpcnN0Q2hpbGRfKWZvcih2YXIgdD1lLmZpcnN0Q2hpbGRfO3Q7KXt2YXIgbj10O3Q9dC5uZXh0U2libGluZ18sbi5wYXJlbnROb2RlXz1uLnByZXZpb3VzU2libGluZ189bi5uZXh0U2libGluZ189dm9pZCAwfWUuZmlyc3RDaGlsZF89ZS5sYXN0Q2hpbGRfPXZvaWQgMH1mdW5jdGlvbiB2KGUpe2lmKGUuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCkpe2Zvcih2YXIgdD1lLmZpcnN0Q2hpbGQ7dDspe08odC5wYXJlbnROb2RlPT09ZSk7dmFyIG49dC5uZXh0U2libGluZyxyPVAodCksbz1yLnBhcmVudE5vZGU7byYmWC5jYWxsKG8sciksdC5wcmV2aW91c1NpYmxpbmdfPXQubmV4dFNpYmxpbmdfPXQucGFyZW50Tm9kZV89bnVsbCx0PW59ZS5maXJzdENoaWxkXz1lLmxhc3RDaGlsZF89bnVsbH1lbHNlIGZvcih2YXIgbixpPVAoZSksYT1pLmZpcnN0Q2hpbGQ7YTspbj1hLm5leHRTaWJsaW5nLFguY2FsbChpLGEpLGE9bn1mdW5jdGlvbiBnKGUpe3ZhciB0PWUucGFyZW50Tm9kZTtyZXR1cm4gdCYmdC5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKX1mdW5jdGlvbiBiKGUpe2Zvcih2YXIgdCxuPTA7bjxlLmxlbmd0aDtuKyspdD1lW25dLHQucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0KX1mdW5jdGlvbiB5KGUsdCxuKXt2YXIgcjtpZihyPUEobj9xLmNhbGwobixJKGUpLCExKTpCLmNhbGwoSShlKSwhMSkpLHQpe2Zvcih2YXIgbz1lLmZpcnN0Q2hpbGQ7bztvPW8ubmV4dFNpYmxpbmcpci5hcHBlbmRDaGlsZCh5KG8sITAsbikpO2lmKGUgaW5zdGFuY2VvZiBGLkhUTUxUZW1wbGF0ZUVsZW1lbnQpZm9yKHZhciBpPXIuY29udGVudCxvPWUuY29udGVudC5maXJzdENoaWxkO287bz1vLm5leHRTaWJsaW5nKWkuYXBwZW5kQ2hpbGQoeShvLCEwLG4pKX1yZXR1cm4gcn1mdW5jdGlvbiBFKGUsdCl7aWYoIXR8fEMoZSkhPT1DKHQpKXJldHVybiExO2Zvcih2YXIgbj10O247bj1uLnBhcmVudE5vZGUpaWYobj09PWUpcmV0dXJuITA7cmV0dXJuITF9ZnVuY3Rpb24gXyhlKXtPKGUgaW5zdGFuY2VvZiBWKSxTLmNhbGwodGhpcyxlKSx0aGlzLnBhcmVudE5vZGVfPXZvaWQgMCx0aGlzLmZpcnN0Q2hpbGRfPXZvaWQgMCx0aGlzLmxhc3RDaGlsZF89dm9pZCAwLHRoaXMubmV4dFNpYmxpbmdfPXZvaWQgMCx0aGlzLnByZXZpb3VzU2libGluZ189dm9pZCAwLHRoaXMudHJlZVNjb3BlXz12b2lkIDB9dmFyIFM9ZS53cmFwcGVycy5FdmVudFRhcmdldCxUPWUud3JhcHBlcnMuTm9kZUxpc3QsTT1lLlRyZWVTY29wZSxPPWUuYXNzZXJ0LEw9ZS5kZWZpbmVXcmFwR2V0dGVyLE49ZS5lbnF1ZXVlTXV0YXRpb24sQz1lLmdldFRyZWVTY29wZSxqPWUuaXNXcmFwcGVyLEQ9ZS5taXhpbixIPWUucmVnaXN0ZXJUcmFuc2llbnRPYnNlcnZlcnMseD1lLnJlZ2lzdGVyV3JhcHBlcixSPWUuc2V0VHJlZVNjb3BlLEk9ZS51bnNhZmVVbndyYXAsUD1lLnVud3JhcCxrPWUudW53cmFwSWZOZWVkZWQsQT1lLndyYXAsVz1lLndyYXBJZk5lZWRlZCxGPWUud3JhcHBlcnMsVT0hMSxxPWRvY3VtZW50LmltcG9ydE5vZGUsQj13aW5kb3cuTm9kZS5wcm90b3R5cGUuY2xvbmVOb2RlLFY9d2luZG93Lk5vZGUsRz13aW5kb3cuRG9jdW1lbnRGcmFnbWVudCx6PShWLnByb3RvdHlwZS5hcHBlbmRDaGlsZCxWLnByb3RvdHlwZS5jb21wYXJlRG9jdW1lbnRQb3NpdGlvbiksSz1WLnByb3RvdHlwZS5pc0VxdWFsTm9kZSwkPVYucHJvdG90eXBlLmluc2VydEJlZm9yZSxYPVYucHJvdG90eXBlLnJlbW92ZUNoaWxkLFk9Vi5wcm90b3R5cGUucmVwbGFjZUNoaWxkLFo9L1RyaWRlbnR8RWRnZS8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KSxKPVo/ZnVuY3Rpb24oZSx0KXt0cnl7WC5jYWxsKGUsdCl9Y2F0Y2gobil7aWYoIShlIGluc3RhbmNlb2YgRykpdGhyb3cgbn19OmZ1bmN0aW9uKGUsdCl7WC5jYWxsKGUsdCl9O18ucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoUy5wcm90b3R5cGUpLEQoXy5wcm90b3R5cGUse2FwcGVuZENoaWxkOmZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLmluc2VydEJlZm9yZShlLG51bGwpfSxpbnNlcnRCZWZvcmU6ZnVuY3Rpb24oZSxuKXt0KGUpO3ZhciByO24/aihuKT9yPVAobik6KHI9bixuPUEocikpOihuPW51bGwscj1udWxsKSxuJiZPKG4ucGFyZW50Tm9kZT09PXRoaXMpO3ZhciBvLHM9bj9uLnByZXZpb3VzU2libGluZzp0aGlzLmxhc3RDaGlsZCxjPSF0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpJiYhZyhlKTtpZihvPWM/YShlKTppKGUsdGhpcyxzLG4pLGMpaCh0aGlzLGUpLHcodGhpcyksJC5jYWxsKEkodGhpcyksUChlKSxyKTtlbHNle3N8fCh0aGlzLmZpcnN0Q2hpbGRfPW9bMF0pLG58fCh0aGlzLmxhc3RDaGlsZF89b1tvLmxlbmd0aC0xXSx2b2lkIDA9PT10aGlzLmZpcnN0Q2hpbGRfJiYodGhpcy5maXJzdENoaWxkXz10aGlzLmZpcnN0Q2hpbGQpKTt2YXIgbD1yP3IucGFyZW50Tm9kZTpJKHRoaXMpO2w/JC5jYWxsKGwsbSh0aGlzLG8pLHIpOmYodGhpcyxvKX1yZXR1cm4gTih0aGlzLFwiY2hpbGRMaXN0XCIse2FkZGVkTm9kZXM6byxuZXh0U2libGluZzpuLHByZXZpb3VzU2libGluZzpzfSksdShvLHRoaXMpLGV9LHJlbW92ZUNoaWxkOmZ1bmN0aW9uKGUpe2lmKHQoZSksZS5wYXJlbnROb2RlIT09dGhpcyl7Zm9yKHZhciByPSExLG89KHRoaXMuY2hpbGROb2Rlcyx0aGlzLmZpcnN0Q2hpbGQpO287bz1vLm5leHRTaWJsaW5nKWlmKG89PT1lKXtyPSEwO2JyZWFrfWlmKCFyKXRocm93IG5ldyBFcnJvcihcIk5vdEZvdW5kRXJyb3JcIil9dmFyIGk9UChlKSxhPWUubmV4dFNpYmxpbmcscz1lLnByZXZpb3VzU2libGluZztpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXt2YXIgYz10aGlzLmZpcnN0Q2hpbGQsbD10aGlzLmxhc3RDaGlsZCx1PWkucGFyZW50Tm9kZTt1JiZKKHUsaSksYz09PWUmJih0aGlzLmZpcnN0Q2hpbGRfPWEpLGw9PT1lJiYodGhpcy5sYXN0Q2hpbGRfPXMpLHMmJihzLm5leHRTaWJsaW5nXz1hKSxhJiYoYS5wcmV2aW91c1NpYmxpbmdfPXMpLGUucHJldmlvdXNTaWJsaW5nXz1lLm5leHRTaWJsaW5nXz1lLnBhcmVudE5vZGVfPXZvaWQgMH1lbHNlIHcodGhpcyksSihJKHRoaXMpLGkpO3JldHVybiBVfHxOKHRoaXMsXCJjaGlsZExpc3RcIix7cmVtb3ZlZE5vZGVzOm4oZSksbmV4dFNpYmxpbmc6YSxwcmV2aW91c1NpYmxpbmc6c30pLEgodGhpcyxlKSxlfSxyZXBsYWNlQ2hpbGQ6ZnVuY3Rpb24oZSxyKXt0KGUpO3ZhciBvO2lmKGoocik/bz1QKHIpOihvPXIscj1BKG8pKSxyLnBhcmVudE5vZGUhPT10aGlzKXRocm93IG5ldyBFcnJvcihcIk5vdEZvdW5kRXJyb3JcIik7dmFyIHMsYz1yLm5leHRTaWJsaW5nLGw9ci5wcmV2aW91c1NpYmxpbmcscD0hdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKSYmIWcoZSk7cmV0dXJuIHA/cz1hKGUpOihjPT09ZSYmKGM9ZS5uZXh0U2libGluZykscz1pKGUsdGhpcyxsLGMpKSxwPyhoKHRoaXMsZSksdyh0aGlzKSxZLmNhbGwoSSh0aGlzKSxQKGUpLG8pKToodGhpcy5maXJzdENoaWxkPT09ciYmKHRoaXMuZmlyc3RDaGlsZF89c1swXSksdGhpcy5sYXN0Q2hpbGQ9PT1yJiYodGhpcy5sYXN0Q2hpbGRfPXNbcy5sZW5ndGgtMV0pLHIucHJldmlvdXNTaWJsaW5nXz1yLm5leHRTaWJsaW5nXz1yLnBhcmVudE5vZGVfPXZvaWQgMCxvLnBhcmVudE5vZGUmJlkuY2FsbChvLnBhcmVudE5vZGUsbSh0aGlzLHMpLG8pKSxOKHRoaXMsXCJjaGlsZExpc3RcIix7YWRkZWROb2RlczpzLHJlbW92ZWROb2RlczpuKHIpLG5leHRTaWJsaW5nOmMscHJldmlvdXNTaWJsaW5nOmx9KSxkKHIpLHUocyx0aGlzKSxyfSxub2RlSXNJbnNlcnRlZF86ZnVuY3Rpb24oKXtmb3IodmFyIGU9dGhpcy5maXJzdENoaWxkO2U7ZT1lLm5leHRTaWJsaW5nKWUubm9kZUlzSW5zZXJ0ZWRfKCl9LGhhc0NoaWxkTm9kZXM6ZnVuY3Rpb24oKXtyZXR1cm4gbnVsbCE9PXRoaXMuZmlyc3RDaGlsZH0sZ2V0IHBhcmVudE5vZGUoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5wYXJlbnROb2RlXz90aGlzLnBhcmVudE5vZGVfOkEoSSh0aGlzKS5wYXJlbnROb2RlKX0sZ2V0IGZpcnN0Q2hpbGQoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5maXJzdENoaWxkXz90aGlzLmZpcnN0Q2hpbGRfOkEoSSh0aGlzKS5maXJzdENoaWxkKX0sZ2V0IGxhc3RDaGlsZCgpe3JldHVybiB2b2lkIDAhPT10aGlzLmxhc3RDaGlsZF8/dGhpcy5sYXN0Q2hpbGRfOkEoSSh0aGlzKS5sYXN0Q2hpbGQpfSxnZXQgbmV4dFNpYmxpbmcoKXtyZXR1cm4gdm9pZCAwIT09dGhpcy5uZXh0U2libGluZ18/dGhpcy5uZXh0U2libGluZ186QShJKHRoaXMpLm5leHRTaWJsaW5nKX0sZ2V0IHByZXZpb3VzU2libGluZygpe3JldHVybiB2b2lkIDAhPT10aGlzLnByZXZpb3VzU2libGluZ18/dGhpcy5wcmV2aW91c1NpYmxpbmdfOkEoSSh0aGlzKS5wcmV2aW91c1NpYmxpbmcpfSxnZXQgcGFyZW50RWxlbWVudCgpe2Zvcih2YXIgZT10aGlzLnBhcmVudE5vZGU7ZSYmZS5ub2RlVHlwZSE9PV8uRUxFTUVOVF9OT0RFOyllPWUucGFyZW50Tm9kZTtyZXR1cm4gZX0sZ2V0IHRleHRDb250ZW50KCl7Zm9yKHZhciBlPVwiXCIsdD10aGlzLmZpcnN0Q2hpbGQ7dDt0PXQubmV4dFNpYmxpbmcpdC5ub2RlVHlwZSE9Xy5DT01NRU5UX05PREUmJihlKz10LnRleHRDb250ZW50KTtyZXR1cm4gZX0sc2V0IHRleHRDb250ZW50KGUpe251bGw9PWUmJihlPVwiXCIpO3ZhciB0PWModGhpcy5jaGlsZE5vZGVzKTtpZih0aGlzLmludmFsaWRhdGVTaGFkb3dSZW5kZXJlcigpKXtpZih2KHRoaXMpLFwiXCIhPT1lKXt2YXIgbj1JKHRoaXMpLm93bmVyRG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoZSk7dGhpcy5hcHBlbmRDaGlsZChuKX19ZWxzZSB3KHRoaXMpLEkodGhpcykudGV4dENvbnRlbnQ9ZTt2YXIgcj1jKHRoaXMuY2hpbGROb2Rlcyk7Tih0aGlzLFwiY2hpbGRMaXN0XCIse2FkZGVkTm9kZXM6cixyZW1vdmVkTm9kZXM6dH0pLHAodCksdShyLHRoaXMpfSxnZXQgY2hpbGROb2Rlcygpe2Zvcih2YXIgZT1uZXcgVCx0PTAsbj10aGlzLmZpcnN0Q2hpbGQ7bjtuPW4ubmV4dFNpYmxpbmcpZVt0KytdPW47cmV0dXJuIGUubGVuZ3RoPXQsZX0sY2xvbmVOb2RlOmZ1bmN0aW9uKGUpe3JldHVybiB5KHRoaXMsZSl9LGNvbnRhaW5zOmZ1bmN0aW9uKGUpe3JldHVybiBFKHRoaXMsVyhlKSl9LGNvbXBhcmVEb2N1bWVudFBvc2l0aW9uOmZ1bmN0aW9uKGUpe3JldHVybiB6LmNhbGwoSSh0aGlzKSxrKGUpKX0saXNFcXVhbE5vZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIEsuY2FsbChJKHRoaXMpLGsoZSkpfSxub3JtYWxpemU6ZnVuY3Rpb24oKXtmb3IodmFyIGUsdCxuPWModGhpcy5jaGlsZE5vZGVzKSxyPVtdLG89XCJcIixpPTA7aTxuLmxlbmd0aDtpKyspdD1uW2ldLHQubm9kZVR5cGU9PT1fLlRFWFRfTk9ERT9lfHx0LmRhdGEubGVuZ3RoP2U/KG8rPXQuZGF0YSxyLnB1c2godCkpOmU9dDp0aGlzLnJlbW92ZUNoaWxkKHQpOihlJiZyLmxlbmd0aCYmKGUuZGF0YSs9byxiKHIpKSxyPVtdLG89XCJcIixlPW51bGwsdC5jaGlsZE5vZGVzLmxlbmd0aCYmdC5ub3JtYWxpemUoKSk7ZSYmci5sZW5ndGgmJihlLmRhdGErPW8sYihyKSl9fSksTChfLFwib3duZXJEb2N1bWVudFwiKSx4KFYsXyxkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpLGRlbGV0ZSBfLnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yLGRlbGV0ZSBfLnByb3RvdHlwZS5xdWVyeVNlbGVjdG9yQWxsLF8ucHJvdG90eXBlPUQoT2JqZWN0LmNyZWF0ZShTLnByb3RvdHlwZSksXy5wcm90b3R5cGUpLGUuY2xvbmVOb2RlPXksZS5ub2RlV2FzQWRkZWQ9bCxlLm5vZGVXYXNSZW1vdmVkPWQsZS5ub2Rlc1dlcmVBZGRlZD11LGUubm9kZXNXZXJlUmVtb3ZlZD1wLGUub3JpZ2luYWxJbnNlcnRCZWZvcmU9JCxlLm9yaWdpbmFsUmVtb3ZlQ2hpbGQ9WCxlLnNuYXBzaG90Tm9kZUxpc3Q9YyxlLndyYXBwZXJzLk5vZGU9X30od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KHQsbixyLG8pe2Zvcih2YXIgaT1udWxsLGE9bnVsbCxzPTAsYz10Lmxlbmd0aDtjPnM7cysrKWk9Yih0W3NdKSwhbyYmKGE9dihpKS5yb290KSYmYSBpbnN0YW5jZW9mIGUud3JhcHBlcnMuU2hhZG93Um9vdHx8KHJbbisrXT1pKTtyZXR1cm4gbn1mdW5jdGlvbiBuKGUpe3JldHVybiBTdHJpbmcoZSkucmVwbGFjZSgvXFwvZGVlcFxcL3w6OnNoYWRvd3w+Pj4vZyxcIiBcIil9ZnVuY3Rpb24gcihlKXtyZXR1cm4gU3RyaW5nKGUpLnJlcGxhY2UoLzpob3N0XFwoKFteXFxzXSspXFwpL2csXCIkMVwiKS5yZXBsYWNlKC8oW15cXHNdKTpob3N0L2csXCIkMVwiKS5yZXBsYWNlKFwiOmhvc3RcIixcIipcIikucmVwbGFjZSgvXFxefFxcL3NoYWRvd1xcL3xcXC9zaGFkb3ctZGVlcFxcL3w6OnNoYWRvd3xcXC9kZWVwXFwvfDo6Y29udGVudHw+Pj4vZyxcIiBcIil9ZnVuY3Rpb24gbyhlLHQpe2Zvcih2YXIgbixyPWUuZmlyc3RFbGVtZW50Q2hpbGQ7cjspe2lmKHIubWF0Y2hlcyh0KSlyZXR1cm4gcjtpZihuPW8ocix0KSlyZXR1cm4gbjtyPXIubmV4dEVsZW1lbnRTaWJsaW5nfXJldHVybiBudWxsfWZ1bmN0aW9uIGkoZSx0KXtyZXR1cm4gZS5tYXRjaGVzKHQpfWZ1bmN0aW9uIGEoZSx0LG4pe3ZhciByPWUubG9jYWxOYW1lO3JldHVybiByPT09dHx8cj09PW4mJmUubmFtZXNwYWNlVVJJPT09an1mdW5jdGlvbiBzKCl7cmV0dXJuITB9ZnVuY3Rpb24gYyhlLHQsbil7cmV0dXJuIGUubG9jYWxOYW1lPT09bn1mdW5jdGlvbiBsKGUsdCl7cmV0dXJuIGUubmFtZXNwYWNlVVJJPT09dH1mdW5jdGlvbiB1KGUsdCxuKXtyZXR1cm4gZS5uYW1lc3BhY2VVUkk9PT10JiZlLmxvY2FsTmFtZT09PW59ZnVuY3Rpb24gZChlLHQsbixyLG8saSl7Zm9yKHZhciBhPWUuZmlyc3RFbGVtZW50Q2hpbGQ7YTspcihhLG8saSkmJihuW3QrK109YSksdD1kKGEsdCxuLHIsbyxpKSxhPWEubmV4dEVsZW1lbnRTaWJsaW5nO3JldHVybiB0fWZ1bmN0aW9uIHAobixyLG8saSxhKXt2YXIgcyxjPWcodGhpcyksbD12KHRoaXMpLnJvb3Q7aWYobCBpbnN0YW5jZW9mIGUud3JhcHBlcnMuU2hhZG93Um9vdClyZXR1cm4gZCh0aGlzLHIsbyxuLGksbnVsbCk7aWYoYyBpbnN0YW5jZW9mIE4pcz1TLmNhbGwoYyxpKTtlbHNle2lmKCEoYyBpbnN0YW5jZW9mIEMpKXJldHVybiBkKHRoaXMscixvLG4saSxudWxsKTtzPV8uY2FsbChjLGkpfXJldHVybiB0KHMscixvLGEpfWZ1bmN0aW9uIGgobixyLG8saSxhKXt2YXIgcyxjPWcodGhpcyksbD12KHRoaXMpLnJvb3Q7aWYobCBpbnN0YW5jZW9mIGUud3JhcHBlcnMuU2hhZG93Um9vdClyZXR1cm4gZCh0aGlzLHIsbyxuLGksYSk7aWYoYyBpbnN0YW5jZW9mIE4pcz1NLmNhbGwoYyxpLGEpO2Vsc2V7aWYoIShjIGluc3RhbmNlb2YgQykpcmV0dXJuIGQodGhpcyxyLG8sbixpLGEpO3M9VC5jYWxsKGMsaSxhKX1yZXR1cm4gdChzLHIsbywhMSl9ZnVuY3Rpb24gZihuLHIsbyxpLGEpe3ZhciBzLGM9Zyh0aGlzKSxsPXYodGhpcykucm9vdDtpZihsIGluc3RhbmNlb2YgZS53cmFwcGVycy5TaGFkb3dSb290KXJldHVybiBkKHRoaXMscixvLG4saSxhKTtpZihjIGluc3RhbmNlb2YgTilzPUwuY2FsbChjLGksYSk7ZWxzZXtpZighKGMgaW5zdGFuY2VvZiBDKSlyZXR1cm4gZCh0aGlzLHIsbyxuLGksYSk7cz1PLmNhbGwoYyxpLGEpfXJldHVybiB0KHMscixvLCExKX12YXIgbT1lLndyYXBwZXJzLkhUTUxDb2xsZWN0aW9uLHc9ZS53cmFwcGVycy5Ob2RlTGlzdCx2PWUuZ2V0VHJlZVNjb3BlLGc9ZS51bnNhZmVVbndyYXAsYj1lLndyYXAseT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yLEU9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IsXz1kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsLFM9ZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3JBbGwsVD1kb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSxNPWRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZSxPPWRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lTlMsTD1kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWVOUyxOPXdpbmRvdy5FbGVtZW50LEM9d2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50LGo9XCJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hodG1sXCIsRD17cXVlcnlTZWxlY3RvcjpmdW5jdGlvbih0KXt2YXIgcj1uKHQpLGk9ciE9PXQ7dD1yO3ZhciBhLHM9Zyh0aGlzKSxjPXYodGhpcykucm9vdDtpZihjIGluc3RhbmNlb2YgZS53cmFwcGVycy5TaGFkb3dSb290KXJldHVybiBvKHRoaXMsdCk7aWYocyBpbnN0YW5jZW9mIE4pYT1iKEUuY2FsbChzLHQpKTtlbHNle1xuaWYoIShzIGluc3RhbmNlb2YgQykpcmV0dXJuIG8odGhpcyx0KTthPWIoeS5jYWxsKHMsdCkpfXJldHVybiBhJiYhaSYmKGM9dihhKS5yb290KSYmYyBpbnN0YW5jZW9mIGUud3JhcHBlcnMuU2hhZG93Um9vdD9vKHRoaXMsdCk6YX0scXVlcnlTZWxlY3RvckFsbDpmdW5jdGlvbihlKXt2YXIgdD1uKGUpLHI9dCE9PWU7ZT10O3ZhciBvPW5ldyB3O3JldHVybiBvLmxlbmd0aD1wLmNhbGwodGhpcyxpLDAsbyxlLHIpLG99fSxIPXttYXRjaGVzOmZ1bmN0aW9uKHQpe3JldHVybiB0PXIodCksZS5vcmlnaW5hbE1hdGNoZXMuY2FsbChnKHRoaXMpLHQpfX0seD17Z2V0RWxlbWVudHNCeVRhZ05hbWU6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IG0sbj1cIipcIj09PWU/czphO3JldHVybiB0Lmxlbmd0aD1oLmNhbGwodGhpcyxuLDAsdCxlLGUudG9Mb3dlckNhc2UoKSksdH0sZ2V0RWxlbWVudHNCeUNsYXNzTmFtZTpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5xdWVyeVNlbGVjdG9yQWxsKFwiLlwiK2UpfSxnZXRFbGVtZW50c0J5VGFnTmFtZU5TOmZ1bmN0aW9uKGUsdCl7dmFyIG49bmV3IG0scj1udWxsO3JldHVybiByPVwiKlwiPT09ZT9cIipcIj09PXQ/czpjOlwiKlwiPT09dD9sOnUsbi5sZW5ndGg9Zi5jYWxsKHRoaXMsciwwLG4sZXx8bnVsbCx0KSxufX07ZS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlPXgsZS5TZWxlY3RvcnNJbnRlcmZhY2U9RCxlLk1hdGNoZXNJbnRlcmZhY2U9SH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe2Zvcig7ZSYmZS5ub2RlVHlwZSE9PU5vZGUuRUxFTUVOVF9OT0RFOyllPWUubmV4dFNpYmxpbmc7cmV0dXJuIGV9ZnVuY3Rpb24gbihlKXtmb3IoO2UmJmUubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspZT1lLnByZXZpb3VzU2libGluZztyZXR1cm4gZX12YXIgcj1lLndyYXBwZXJzLk5vZGVMaXN0LG89e2dldCBmaXJzdEVsZW1lbnRDaGlsZCgpe3JldHVybiB0KHRoaXMuZmlyc3RDaGlsZCl9LGdldCBsYXN0RWxlbWVudENoaWxkKCl7cmV0dXJuIG4odGhpcy5sYXN0Q2hpbGQpfSxnZXQgY2hpbGRFbGVtZW50Q291bnQoKXtmb3IodmFyIGU9MCx0PXRoaXMuZmlyc3RFbGVtZW50Q2hpbGQ7dDt0PXQubmV4dEVsZW1lbnRTaWJsaW5nKWUrKztyZXR1cm4gZX0sZ2V0IGNoaWxkcmVuKCl7Zm9yKHZhciBlPW5ldyByLHQ9MCxuPXRoaXMuZmlyc3RFbGVtZW50Q2hpbGQ7bjtuPW4ubmV4dEVsZW1lbnRTaWJsaW5nKWVbdCsrXT1uO3JldHVybiBlLmxlbmd0aD10LGV9LHJlbW92ZTpmdW5jdGlvbigpe3ZhciBlPXRoaXMucGFyZW50Tm9kZTtlJiZlLnJlbW92ZUNoaWxkKHRoaXMpfX0saT17Z2V0IG5leHRFbGVtZW50U2libGluZygpe3JldHVybiB0KHRoaXMubmV4dFNpYmxpbmcpfSxnZXQgcHJldmlvdXNFbGVtZW50U2libGluZygpe3JldHVybiBuKHRoaXMucHJldmlvdXNTaWJsaW5nKX19LGE9e2dldEVsZW1lbnRCeUlkOmZ1bmN0aW9uKGUpe3JldHVybi9bIFxcdFxcblxcclxcZl0vLnRlc3QoZSk/bnVsbDp0aGlzLnF1ZXJ5U2VsZWN0b3IoJ1tpZD1cIicrZSsnXCJdJyl9fTtlLkNoaWxkTm9kZUludGVyZmFjZT1pLGUuTm9uRWxlbWVudFBhcmVudE5vZGVJbnRlcmZhY2U9YSxlLlBhcmVudE5vZGVJbnRlcmZhY2U9b30od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe3IuY2FsbCh0aGlzLGUpfXZhciBuPWUuQ2hpbGROb2RlSW50ZXJmYWNlLHI9ZS53cmFwcGVycy5Ob2RlLG89ZS5lbnF1ZXVlTXV0YXRpb24saT1lLm1peGluLGE9ZS5yZWdpc3RlcldyYXBwZXIscz1lLnVuc2FmZVVud3JhcCxjPXdpbmRvdy5DaGFyYWN0ZXJEYXRhO3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoci5wcm90b3R5cGUpLGkodC5wcm90b3R5cGUse2dldCBub2RlVmFsdWUoKXtyZXR1cm4gdGhpcy5kYXRhfSxzZXQgbm9kZVZhbHVlKGUpe3RoaXMuZGF0YT1lfSxnZXQgdGV4dENvbnRlbnQoKXtyZXR1cm4gdGhpcy5kYXRhfSxzZXQgdGV4dENvbnRlbnQoZSl7dGhpcy5kYXRhPWV9LGdldCBkYXRhKCl7cmV0dXJuIHModGhpcykuZGF0YX0sc2V0IGRhdGEoZSl7dmFyIHQ9cyh0aGlzKS5kYXRhO28odGhpcyxcImNoYXJhY3RlckRhdGFcIix7b2xkVmFsdWU6dH0pLHModGhpcykuZGF0YT1lfX0pLGkodC5wcm90b3R5cGUsbiksYShjLHQsZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoXCJcIikpLGUud3JhcHBlcnMuQ2hhcmFjdGVyRGF0YT10fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7cmV0dXJuIGU+Pj4wfWZ1bmN0aW9uIG4oZSl7ci5jYWxsKHRoaXMsZSl9dmFyIHI9ZS53cmFwcGVycy5DaGFyYWN0ZXJEYXRhLG89KGUuZW5xdWV1ZU11dGF0aW9uLGUubWl4aW4pLGk9ZS5yZWdpc3RlcldyYXBwZXIsYT13aW5kb3cuVGV4dDtuLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHIucHJvdG90eXBlKSxvKG4ucHJvdG90eXBlLHtzcGxpdFRleHQ6ZnVuY3Rpb24oZSl7ZT10KGUpO3ZhciBuPXRoaXMuZGF0YTtpZihlPm4ubGVuZ3RoKXRocm93IG5ldyBFcnJvcihcIkluZGV4U2l6ZUVycm9yXCIpO3ZhciByPW4uc2xpY2UoMCxlKSxvPW4uc2xpY2UoZSk7dGhpcy5kYXRhPXI7dmFyIGk9dGhpcy5vd25lckRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG8pO3JldHVybiB0aGlzLnBhcmVudE5vZGUmJnRoaXMucGFyZW50Tm9kZS5pbnNlcnRCZWZvcmUoaSx0aGlzLm5leHRTaWJsaW5nKSxpfX0pLGkoYSxuLGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKFwiXCIpKSxlLndyYXBwZXJzLlRleHQ9bn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe3JldHVybiBpKGUpLmdldEF0dHJpYnV0ZShcImNsYXNzXCIpfWZ1bmN0aW9uIG4oZSx0KXthKGUsXCJhdHRyaWJ1dGVzXCIse25hbWU6XCJjbGFzc1wiLG5hbWVzcGFjZTpudWxsLG9sZFZhbHVlOnR9KX1mdW5jdGlvbiByKHQpe2UuaW52YWxpZGF0ZVJlbmRlcmVyQmFzZWRPbkF0dHJpYnV0ZSh0LFwiY2xhc3NcIil9ZnVuY3Rpb24gbyhlLG8saSl7dmFyIGE9ZS5vd25lckVsZW1lbnRfO2lmKG51bGw9PWEpcmV0dXJuIG8uYXBwbHkoZSxpKTt2YXIgcz10KGEpLGM9by5hcHBseShlLGkpO3JldHVybiB0KGEpIT09cyYmKG4oYSxzKSxyKGEpKSxjfWlmKCF3aW5kb3cuRE9NVG9rZW5MaXN0KXJldHVybiB2b2lkIGNvbnNvbGUud2FybihcIk1pc3NpbmcgRE9NVG9rZW5MaXN0IHByb3RvdHlwZSwgcGxlYXNlIGluY2x1ZGUgYSBjb21wYXRpYmxlIGNsYXNzTGlzdCBwb2x5ZmlsbCBzdWNoIGFzIGh0dHA6Ly9nb28uZ2wvdVRjZXBILlwiKTt2YXIgaT1lLnVuc2FmZVVud3JhcCxhPWUuZW5xdWV1ZU11dGF0aW9uLHM9RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5hZGQ7RE9NVG9rZW5MaXN0LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24oKXtvKHRoaXMscyxhcmd1bWVudHMpfTt2YXIgYz1ET01Ub2tlbkxpc3QucHJvdG90eXBlLnJlbW92ZTtET01Ub2tlbkxpc3QucHJvdG90eXBlLnJlbW92ZT1mdW5jdGlvbigpe28odGhpcyxjLGFyZ3VtZW50cyl9O3ZhciBsPURPTVRva2VuTGlzdC5wcm90b3R5cGUudG9nZ2xlO0RPTVRva2VuTGlzdC5wcm90b3R5cGUudG9nZ2xlPWZ1bmN0aW9uKCl7cmV0dXJuIG8odGhpcyxsLGFyZ3VtZW50cyl9fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQodCxuKXt2YXIgcj10LnBhcmVudE5vZGU7aWYociYmci5zaGFkb3dSb290KXt2YXIgbz1lLmdldFJlbmRlcmVyRm9ySG9zdChyKTtvLmRlcGVuZHNPbkF0dHJpYnV0ZShuKSYmby5pbnZhbGlkYXRlKCl9fWZ1bmN0aW9uIG4oZSx0LG4pe3UoZSxcImF0dHJpYnV0ZXNcIix7bmFtZTp0LG5hbWVzcGFjZTpudWxsLG9sZFZhbHVlOm59KX1mdW5jdGlvbiByKGUpe2EuY2FsbCh0aGlzLGUpfXZhciBvPWUuQ2hpbGROb2RlSW50ZXJmYWNlLGk9ZS5HZXRFbGVtZW50c0J5SW50ZXJmYWNlLGE9ZS53cmFwcGVycy5Ob2RlLHM9ZS5QYXJlbnROb2RlSW50ZXJmYWNlLGM9ZS5TZWxlY3RvcnNJbnRlcmZhY2UsbD1lLk1hdGNoZXNJbnRlcmZhY2UsdT0oZS5hZGRXcmFwTm9kZUxpc3RNZXRob2QsZS5lbnF1ZXVlTXV0YXRpb24pLGQ9ZS5taXhpbixwPShlLm9uZU9mLGUucmVnaXN0ZXJXcmFwcGVyKSxoPWUudW5zYWZlVW53cmFwLGY9ZS53cmFwcGVycyxtPXdpbmRvdy5FbGVtZW50LHc9W1wibWF0Y2hlc1wiLFwibW96TWF0Y2hlc1NlbGVjdG9yXCIsXCJtc01hdGNoZXNTZWxlY3RvclwiLFwid2Via2l0TWF0Y2hlc1NlbGVjdG9yXCJdLmZpbHRlcihmdW5jdGlvbihlKXtyZXR1cm4gbS5wcm90b3R5cGVbZV19KSx2PXdbMF0sZz1tLnByb3RvdHlwZVt2XSxiPW5ldyBXZWFrTWFwO3IucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoYS5wcm90b3R5cGUpLGQoci5wcm90b3R5cGUse2NyZWF0ZVNoYWRvd1Jvb3Q6ZnVuY3Rpb24oKXt2YXIgdD1uZXcgZi5TaGFkb3dSb290KHRoaXMpO2godGhpcykucG9seW1lclNoYWRvd1Jvb3RfPXQ7dmFyIG49ZS5nZXRSZW5kZXJlckZvckhvc3QodGhpcyk7cmV0dXJuIG4uaW52YWxpZGF0ZSgpLHR9LGdldCBzaGFkb3dSb290KCl7cmV0dXJuIGgodGhpcykucG9seW1lclNoYWRvd1Jvb3RffHxudWxsfSxzZXRBdHRyaWJ1dGU6ZnVuY3Rpb24oZSxyKXt2YXIgbz1oKHRoaXMpLmdldEF0dHJpYnV0ZShlKTtoKHRoaXMpLnNldEF0dHJpYnV0ZShlLHIpLG4odGhpcyxlLG8pLHQodGhpcyxlKX0scmVtb3ZlQXR0cmlidXRlOmZ1bmN0aW9uKGUpe3ZhciByPWgodGhpcykuZ2V0QXR0cmlidXRlKGUpO2godGhpcykucmVtb3ZlQXR0cmlidXRlKGUpLG4odGhpcyxlLHIpLHQodGhpcyxlKX0sZ2V0IGNsYXNzTGlzdCgpe3ZhciBlPWIuZ2V0KHRoaXMpO2lmKCFlKXtpZihlPWgodGhpcykuY2xhc3NMaXN0LCFlKXJldHVybjtlLm93bmVyRWxlbWVudF89dGhpcyxiLnNldCh0aGlzLGUpfXJldHVybiBlfSxnZXQgY2xhc3NOYW1lKCl7cmV0dXJuIGgodGhpcykuY2xhc3NOYW1lfSxzZXQgY2xhc3NOYW1lKGUpe3RoaXMuc2V0QXR0cmlidXRlKFwiY2xhc3NcIixlKX0sZ2V0IGlkKCl7cmV0dXJuIGgodGhpcykuaWR9LHNldCBpZChlKXt0aGlzLnNldEF0dHJpYnV0ZShcImlkXCIsZSl9fSksdy5mb3JFYWNoKGZ1bmN0aW9uKGUpe1wibWF0Y2hlc1wiIT09ZSYmKHIucHJvdG90eXBlW2VdPWZ1bmN0aW9uKGUpe3JldHVybiB0aGlzLm1hdGNoZXMoZSl9KX0pLG0ucHJvdG90eXBlLndlYmtpdENyZWF0ZVNoYWRvd1Jvb3QmJihyLnByb3RvdHlwZS53ZWJraXRDcmVhdGVTaGFkb3dSb290PXIucHJvdG90eXBlLmNyZWF0ZVNoYWRvd1Jvb3QpLGQoci5wcm90b3R5cGUsbyksZChyLnByb3RvdHlwZSxpKSxkKHIucHJvdG90eXBlLHMpLGQoci5wcm90b3R5cGUsYyksZChyLnByb3RvdHlwZSxsKSxwKG0scixkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMobnVsbCxcInhcIikpLGUuaW52YWxpZGF0ZVJlbmRlcmVyQmFzZWRPbkF0dHJpYnV0ZT10LGUubWF0Y2hlc05hbWVzPXcsZS5vcmlnaW5hbE1hdGNoZXM9ZyxlLndyYXBwZXJzLkVsZW1lbnQ9cn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe3N3aXRjaChlKXtjYXNlXCImXCI6cmV0dXJuXCImYW1wO1wiO2Nhc2VcIjxcIjpyZXR1cm5cIiZsdDtcIjtjYXNlXCI+XCI6cmV0dXJuXCImZ3Q7XCI7Y2FzZSdcIic6cmV0dXJuXCImcXVvdDtcIjtjYXNlXCLCoFwiOnJldHVyblwiJm5ic3A7XCJ9fWZ1bmN0aW9uIG4oZSl7cmV0dXJuIGUucmVwbGFjZShMLHQpfWZ1bmN0aW9uIHIoZSl7cmV0dXJuIGUucmVwbGFjZShOLHQpfWZ1bmN0aW9uIG8oZSl7Zm9yKHZhciB0PXt9LG49MDtuPGUubGVuZ3RoO24rKyl0W2Vbbl1dPSEwO3JldHVybiB0fWZ1bmN0aW9uIGkoZSl7aWYoZS5uYW1lc3BhY2VVUkkhPT1EKXJldHVybiEwO3ZhciB0PWUub3duZXJEb2N1bWVudC5kb2N0eXBlO3JldHVybiB0JiZ0LnB1YmxpY0lkJiZ0LnN5c3RlbUlkfWZ1bmN0aW9uIGEoZSx0KXtzd2l0Y2goZS5ub2RlVHlwZSl7Y2FzZSBOb2RlLkVMRU1FTlRfTk9ERTpmb3IodmFyIG8sYT1lLnRhZ05hbWUudG9Mb3dlckNhc2UoKSxjPVwiPFwiK2EsbD1lLmF0dHJpYnV0ZXMsdT0wO289bFt1XTt1KyspYys9XCIgXCIrby5uYW1lKyc9XCInK24oby52YWx1ZSkrJ1wiJztyZXR1cm4gQ1thXT8oaShlKSYmKGMrPVwiL1wiKSxjK1wiPlwiKTpjK1wiPlwiK3MoZSkrXCI8L1wiK2ErXCI+XCI7Y2FzZSBOb2RlLlRFWFRfTk9ERTp2YXIgZD1lLmRhdGE7cmV0dXJuIHQmJmpbdC5sb2NhbE5hbWVdP2Q6cihkKTtjYXNlIE5vZGUuQ09NTUVOVF9OT0RFOnJldHVyblwiPCEtLVwiK2UuZGF0YStcIi0tPlwiO2RlZmF1bHQ6dGhyb3cgY29uc29sZS5lcnJvcihlKSxuZXcgRXJyb3IoXCJub3QgaW1wbGVtZW50ZWRcIil9fWZ1bmN0aW9uIHMoZSl7ZSBpbnN0YW5jZW9mIE8uSFRNTFRlbXBsYXRlRWxlbWVudCYmKGU9ZS5jb250ZW50KTtmb3IodmFyIHQ9XCJcIixuPWUuZmlyc3RDaGlsZDtuO249bi5uZXh0U2libGluZyl0Kz1hKG4sZSk7cmV0dXJuIHR9ZnVuY3Rpb24gYyhlLHQsbil7dmFyIHI9bnx8XCJkaXZcIjtlLnRleHRDb250ZW50PVwiXCI7dmFyIG89VChlLm93bmVyRG9jdW1lbnQuY3JlYXRlRWxlbWVudChyKSk7by5pbm5lckhUTUw9dDtmb3IodmFyIGk7aT1vLmZpcnN0Q2hpbGQ7KWUuYXBwZW5kQ2hpbGQoTShpKSl9ZnVuY3Rpb24gbChlKXttLmNhbGwodGhpcyxlKX1mdW5jdGlvbiB1KGUsdCl7dmFyIG49VChlLmNsb25lTm9kZSghMSkpO24uaW5uZXJIVE1MPXQ7Zm9yKHZhciByLG89VChkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCkpO3I9bi5maXJzdENoaWxkOylvLmFwcGVuZENoaWxkKHIpO3JldHVybiBNKG8pfWZ1bmN0aW9uIGQodCl7cmV0dXJuIGZ1bmN0aW9uKCl7cmV0dXJuIGUucmVuZGVyQWxsUGVuZGluZygpLFModGhpcylbdF19fWZ1bmN0aW9uIHAoZSl7dyhsLGUsZChlKSl9ZnVuY3Rpb24gaCh0KXtPYmplY3QuZGVmaW5lUHJvcGVydHkobC5wcm90b3R5cGUsdCx7Z2V0OmQodCksc2V0OmZ1bmN0aW9uKG4pe2UucmVuZGVyQWxsUGVuZGluZygpLFModGhpcylbdF09bn0sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9KX1mdW5jdGlvbiBmKHQpe09iamVjdC5kZWZpbmVQcm9wZXJ0eShsLnByb3RvdHlwZSx0LHt2YWx1ZTpmdW5jdGlvbigpe3JldHVybiBlLnJlbmRlckFsbFBlbmRpbmcoKSxTKHRoaXMpW3RdLmFwcGx5KFModGhpcyksYXJndW1lbnRzKX0sY29uZmlndXJhYmxlOiEwLGVudW1lcmFibGU6ITB9KX12YXIgbT1lLndyYXBwZXJzLkVsZW1lbnQsdz1lLmRlZmluZUdldHRlcix2PWUuZW5xdWV1ZU11dGF0aW9uLGc9ZS5taXhpbixiPWUubm9kZXNXZXJlQWRkZWQseT1lLm5vZGVzV2VyZVJlbW92ZWQsRT1lLnJlZ2lzdGVyV3JhcHBlcixfPWUuc25hcHNob3ROb2RlTGlzdCxTPWUudW5zYWZlVW53cmFwLFQ9ZS51bndyYXAsTT1lLndyYXAsTz1lLndyYXBwZXJzLEw9L1smXFx1MDBBMFwiXS9nLE49L1smXFx1MDBBMDw+XS9nLEM9byhbXCJhcmVhXCIsXCJiYXNlXCIsXCJiclwiLFwiY29sXCIsXCJjb21tYW5kXCIsXCJlbWJlZFwiLFwiaHJcIixcImltZ1wiLFwiaW5wdXRcIixcImtleWdlblwiLFwibGlua1wiLFwibWV0YVwiLFwicGFyYW1cIixcInNvdXJjZVwiLFwidHJhY2tcIixcIndiclwiXSksaj1vKFtcInN0eWxlXCIsXCJzY3JpcHRcIixcInhtcFwiLFwiaWZyYW1lXCIsXCJub2VtYmVkXCIsXCJub2ZyYW1lc1wiLFwicGxhaW50ZXh0XCIsXCJub3NjcmlwdFwiXSksRD1cImh0dHA6Ly93d3cudzMub3JnLzE5OTkveGh0bWxcIixIPS9NU0lFLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLHg9d2luZG93LkhUTUxFbGVtZW50LFI9d2luZG93LkhUTUxUZW1wbGF0ZUVsZW1lbnQ7bC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShtLnByb3RvdHlwZSksZyhsLnByb3RvdHlwZSx7Z2V0IGlubmVySFRNTCgpe3JldHVybiBzKHRoaXMpfSxzZXQgaW5uZXJIVE1MKGUpe2lmKEgmJmpbdGhpcy5sb2NhbE5hbWVdKXJldHVybiB2b2lkKHRoaXMudGV4dENvbnRlbnQ9ZSk7dmFyIHQ9Xyh0aGlzLmNoaWxkTm9kZXMpO3RoaXMuaW52YWxpZGF0ZVNoYWRvd1JlbmRlcmVyKCk/dGhpcyBpbnN0YW5jZW9mIE8uSFRNTFRlbXBsYXRlRWxlbWVudD9jKHRoaXMuY29udGVudCxlKTpjKHRoaXMsZSx0aGlzLnRhZ05hbWUpOiFSJiZ0aGlzIGluc3RhbmNlb2YgTy5IVE1MVGVtcGxhdGVFbGVtZW50P2ModGhpcy5jb250ZW50LGUpOlModGhpcykuaW5uZXJIVE1MPWU7dmFyIG49Xyh0aGlzLmNoaWxkTm9kZXMpO3YodGhpcyxcImNoaWxkTGlzdFwiLHthZGRlZE5vZGVzOm4scmVtb3ZlZE5vZGVzOnR9KSx5KHQpLGIobix0aGlzKX0sZ2V0IG91dGVySFRNTCgpe3JldHVybiBhKHRoaXMsdGhpcy5wYXJlbnROb2RlKX0sc2V0IG91dGVySFRNTChlKXt2YXIgdD10aGlzLnBhcmVudE5vZGU7aWYodCl7dC5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKTt2YXIgbj11KHQsZSk7dC5yZXBsYWNlQ2hpbGQobix0aGlzKX19LGluc2VydEFkamFjZW50SFRNTDpmdW5jdGlvbihlLHQpe3ZhciBuLHI7c3dpdGNoKFN0cmluZyhlKS50b0xvd2VyQ2FzZSgpKXtjYXNlXCJiZWZvcmViZWdpblwiOm49dGhpcy5wYXJlbnROb2RlLHI9dGhpczticmVhaztjYXNlXCJhZnRlcmVuZFwiOm49dGhpcy5wYXJlbnROb2RlLHI9dGhpcy5uZXh0U2libGluZzticmVhaztjYXNlXCJhZnRlcmJlZ2luXCI6bj10aGlzLHI9dGhpcy5maXJzdENoaWxkO2JyZWFrO2Nhc2VcImJlZm9yZWVuZFwiOm49dGhpcyxyPW51bGw7YnJlYWs7ZGVmYXVsdDpyZXR1cm59dmFyIG89dShuLHQpO24uaW5zZXJ0QmVmb3JlKG8scil9LGdldCBoaWRkZW4oKXtyZXR1cm4gdGhpcy5oYXNBdHRyaWJ1dGUoXCJoaWRkZW5cIil9LHNldCBoaWRkZW4oZSl7ZT90aGlzLnNldEF0dHJpYnV0ZShcImhpZGRlblwiLFwiXCIpOnRoaXMucmVtb3ZlQXR0cmlidXRlKFwiaGlkZGVuXCIpfX0pLFtcImNsaWVudEhlaWdodFwiLFwiY2xpZW50TGVmdFwiLFwiY2xpZW50VG9wXCIsXCJjbGllbnRXaWR0aFwiLFwib2Zmc2V0SGVpZ2h0XCIsXCJvZmZzZXRMZWZ0XCIsXCJvZmZzZXRUb3BcIixcIm9mZnNldFdpZHRoXCIsXCJzY3JvbGxIZWlnaHRcIixcInNjcm9sbFdpZHRoXCJdLmZvckVhY2gocCksW1wic2Nyb2xsTGVmdFwiLFwic2Nyb2xsVG9wXCJdLmZvckVhY2goaCksW1wiZ2V0Qm91bmRpbmdDbGllbnRSZWN0XCIsXCJnZXRDbGllbnRSZWN0c1wiLFwic2Nyb2xsSW50b1ZpZXdcIl0uZm9yRWFjaChmKSxFKHgsbCxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYlwiKSksZS53cmFwcGVycy5IVE1MRWxlbWVudD1sLGUuZ2V0SW5uZXJIVE1MPXMsZS5zZXRJbm5lckhUTUw9Y30od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe24uY2FsbCh0aGlzLGUpfXZhciBuPWUud3JhcHBlcnMuSFRNTEVsZW1lbnQscj1lLm1peGluLG89ZS5yZWdpc3RlcldyYXBwZXIsaT1lLnVuc2FmZVVud3JhcCxhPWUud3JhcCxzPXdpbmRvdy5IVE1MQ2FudmFzRWxlbWVudDt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxyKHQucHJvdG90eXBlLHtnZXRDb250ZXh0OmZ1bmN0aW9uKCl7dmFyIGU9aSh0aGlzKS5nZXRDb250ZXh0LmFwcGx5KGkodGhpcyksYXJndW1lbnRzKTtyZXR1cm4gZSYmYShlKX19KSxvKHMsdCxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpKSxlLndyYXBwZXJzLkhUTUxDYW52YXNFbGVtZW50PXR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtuLmNhbGwodGhpcyxlKX12YXIgbj1lLndyYXBwZXJzLkhUTUxFbGVtZW50LHI9ZS5taXhpbixvPWUucmVnaXN0ZXJXcmFwcGVyLGk9d2luZG93LkhUTUxDb250ZW50RWxlbWVudDt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxyKHQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp0LGdldCBzZWxlY3QoKXtyZXR1cm4gdGhpcy5nZXRBdHRyaWJ1dGUoXCJzZWxlY3RcIil9LHNldCBzZWxlY3QoZSl7dGhpcy5zZXRBdHRyaWJ1dGUoXCJzZWxlY3RcIixlKX0sc2V0QXR0cmlidXRlOmZ1bmN0aW9uKGUsdCl7bi5wcm90b3R5cGUuc2V0QXR0cmlidXRlLmNhbGwodGhpcyxlLHQpLFwic2VsZWN0XCI9PT1TdHJpbmcoZSkudG9Mb3dlckNhc2UoKSYmdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoITApfX0pLGkmJm8oaSx0KSxlLndyYXBwZXJzLkhUTUxDb250ZW50RWxlbWVudD10fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7bi5jYWxsKHRoaXMsZSl9dmFyIG49ZS53cmFwcGVycy5IVE1MRWxlbWVudCxyPWUubWl4aW4sbz1lLnJlZ2lzdGVyV3JhcHBlcixpPWUud3JhcEhUTUxDb2xsZWN0aW9uLGE9ZS51bndyYXAscz13aW5kb3cuSFRNTEZvcm1FbGVtZW50O3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLHIodC5wcm90b3R5cGUse2dldCBlbGVtZW50cygpe3JldHVybiBpKGEodGhpcykuZWxlbWVudHMpfX0pLG8ocyx0LGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJmb3JtXCIpKSxlLndyYXBwZXJzLkhUTUxGb3JtRWxlbWVudD10fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7ci5jYWxsKHRoaXMsZSl9ZnVuY3Rpb24gbihlLHQpe2lmKCEodGhpcyBpbnN0YW5jZW9mIG4pKXRocm93IG5ldyBUeXBlRXJyb3IoXCJET00gb2JqZWN0IGNvbnN0cnVjdG9yIGNhbm5vdCBiZSBjYWxsZWQgYXMgYSBmdW5jdGlvbi5cIik7dmFyIG89aShkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpKTtyLmNhbGwodGhpcyxvKSxhKG8sdGhpcyksdm9pZCAwIT09ZSYmKG8ud2lkdGg9ZSksdm9pZCAwIT09dCYmKG8uaGVpZ2h0PXQpfXZhciByPWUud3JhcHBlcnMuSFRNTEVsZW1lbnQsbz1lLnJlZ2lzdGVyV3JhcHBlcixpPWUudW53cmFwLGE9ZS5yZXdyYXAscz13aW5kb3cuSFRNTEltYWdlRWxlbWVudDt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHIucHJvdG90eXBlKSxvKHMsdCxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaW1nXCIpKSxuLnByb3RvdHlwZT10LnByb3RvdHlwZSxlLndyYXBwZXJzLkhUTUxJbWFnZUVsZW1lbnQ9dCxlLndyYXBwZXJzLkltYWdlPW59KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtuLmNhbGwodGhpcyxlKX12YXIgbj1lLndyYXBwZXJzLkhUTUxFbGVtZW50LHI9KGUubWl4aW4sZS53cmFwcGVycy5Ob2RlTGlzdCxlLnJlZ2lzdGVyV3JhcHBlciksbz13aW5kb3cuSFRNTFNoYWRvd0VsZW1lbnQ7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSksdC5wcm90b3R5cGUuY29uc3RydWN0b3I9dCxvJiZyKG8sdCksZS53cmFwcGVycy5IVE1MU2hhZG93RWxlbWVudD10fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7aWYoIWUuZGVmYXVsdFZpZXcpcmV0dXJuIGU7dmFyIHQ9ZC5nZXQoZSk7aWYoIXQpe2Zvcih0PWUuaW1wbGVtZW50YXRpb24uY3JlYXRlSFRNTERvY3VtZW50KFwiXCIpO3QubGFzdENoaWxkOyl0LnJlbW92ZUNoaWxkKHQubGFzdENoaWxkKTtkLnNldChlLHQpfXJldHVybiB0fWZ1bmN0aW9uIG4oZSl7Zm9yKHZhciBuLHI9dChlLm93bmVyRG9jdW1lbnQpLG89YyhyLmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7bj1lLmZpcnN0Q2hpbGQ7KW8uYXBwZW5kQ2hpbGQobik7cmV0dXJuIG99ZnVuY3Rpb24gcihlKXtpZihvLmNhbGwodGhpcyxlKSwhcCl7dmFyIHQ9bihlKTt1LnNldCh0aGlzLGwodCkpfX12YXIgbz1lLndyYXBwZXJzLkhUTUxFbGVtZW50LGk9ZS5taXhpbixhPWUucmVnaXN0ZXJXcmFwcGVyLHM9ZS51bnNhZmVVbndyYXAsYz1lLnVud3JhcCxsPWUud3JhcCx1PW5ldyBXZWFrTWFwLGQ9bmV3IFdlYWtNYXAscD13aW5kb3cuSFRNTFRlbXBsYXRlRWxlbWVudDtyLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG8ucHJvdG90eXBlKSxpKHIucHJvdG90eXBlLHtjb25zdHJ1Y3RvcjpyLGdldCBjb250ZW50KCl7cmV0dXJuIHA/bChzKHRoaXMpLmNvbnRlbnQpOnUuZ2V0KHRoaXMpfX0pLHAmJmEocCxyKSxlLndyYXBwZXJzLkhUTUxUZW1wbGF0ZUVsZW1lbnQ9cn0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe24uY2FsbCh0aGlzLGUpfXZhciBuPWUud3JhcHBlcnMuSFRNTEVsZW1lbnQscj1lLnJlZ2lzdGVyV3JhcHBlcixvPXdpbmRvdy5IVE1MTWVkaWFFbGVtZW50O28mJih0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxyKG8sdCxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYXVkaW9cIikpLGUud3JhcHBlcnMuSFRNTE1lZGlhRWxlbWVudD10KX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe3IuY2FsbCh0aGlzLGUpfWZ1bmN0aW9uIG4oZSl7aWYoISh0aGlzIGluc3RhbmNlb2YgbikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRPTSBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLlwiKTt2YXIgdD1pKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJhdWRpb1wiKSk7ci5jYWxsKHRoaXMsdCksYSh0LHRoaXMpLHQuc2V0QXR0cmlidXRlKFwicHJlbG9hZFwiLFwiYXV0b1wiKSx2b2lkIDAhPT1lJiZ0LnNldEF0dHJpYnV0ZShcInNyY1wiLGUpfXZhciByPWUud3JhcHBlcnMuSFRNTE1lZGlhRWxlbWVudCxvPWUucmVnaXN0ZXJXcmFwcGVyLGk9ZS51bndyYXAsYT1lLnJld3JhcCxzPXdpbmRvdy5IVE1MQXVkaW9FbGVtZW50O3MmJih0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKHIucHJvdG90eXBlKSxvKHMsdCxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiYXVkaW9cIikpLG4ucHJvdG90eXBlPXQucHJvdG90eXBlLGUud3JhcHBlcnMuSFRNTEF1ZGlvRWxlbWVudD10LGUud3JhcHBlcnMuQXVkaW89bil9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtyZXR1cm4gZS5yZXBsYWNlKC9cXHMrL2csXCIgXCIpLnRyaW0oKX1mdW5jdGlvbiBuKGUpe28uY2FsbCh0aGlzLGUpfWZ1bmN0aW9uIHIoZSx0LG4saSl7aWYoISh0aGlzIGluc3RhbmNlb2YgcikpdGhyb3cgbmV3IFR5cGVFcnJvcihcIkRPTSBvYmplY3QgY29uc3RydWN0b3IgY2Fubm90IGJlIGNhbGxlZCBhcyBhIGZ1bmN0aW9uLlwiKTt2YXIgYT1jKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIikpO28uY2FsbCh0aGlzLGEpLHMoYSx0aGlzKSx2b2lkIDAhPT1lJiYoYS50ZXh0PWUpLHZvaWQgMCE9PXQmJmEuc2V0QXR0cmlidXRlKFwidmFsdWVcIix0KSxuPT09ITAmJmEuc2V0QXR0cmlidXRlKFwic2VsZWN0ZWRcIixcIlwiKSxhLnNlbGVjdGVkPWk9PT0hMH12YXIgbz1lLndyYXBwZXJzLkhUTUxFbGVtZW50LGk9ZS5taXhpbixhPWUucmVnaXN0ZXJXcmFwcGVyLHM9ZS5yZXdyYXAsYz1lLnVud3JhcCxsPWUud3JhcCx1PXdpbmRvdy5IVE1MT3B0aW9uRWxlbWVudDtuLnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG8ucHJvdG90eXBlKSxpKG4ucHJvdG90eXBlLHtnZXQgdGV4dCgpe3JldHVybiB0KHRoaXMudGV4dENvbnRlbnQpfSxzZXQgdGV4dChlKXt0aGlzLnRleHRDb250ZW50PXQoU3RyaW5nKGUpKX0sZ2V0IGZvcm0oKXtyZXR1cm4gbChjKHRoaXMpLmZvcm0pfX0pLGEodSxuLGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJvcHRpb25cIikpLHIucHJvdG90eXBlPW4ucHJvdG90eXBlLGUud3JhcHBlcnMuSFRNTE9wdGlvbkVsZW1lbnQ9bixlLndyYXBwZXJzLk9wdGlvbj1yfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7bi5jYWxsKHRoaXMsZSl9dmFyIG49ZS53cmFwcGVycy5IVE1MRWxlbWVudCxyPWUubWl4aW4sbz1lLnJlZ2lzdGVyV3JhcHBlcixpPWUudW53cmFwLGE9ZS53cmFwLHM9d2luZG93LkhUTUxTZWxlY3RFbGVtZW50O3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLHIodC5wcm90b3R5cGUse2FkZDpmdW5jdGlvbihlLHQpe1wib2JqZWN0XCI9PXR5cGVvZiB0JiYodD1pKHQpKSxpKHRoaXMpLmFkZChpKGUpLHQpfSxyZW1vdmU6ZnVuY3Rpb24oZSl7cmV0dXJuIHZvaWQgMD09PWU/dm9pZCBuLnByb3RvdHlwZS5yZW1vdmUuY2FsbCh0aGlzKTooXCJvYmplY3RcIj09dHlwZW9mIGUmJihlPWkoZSkpLHZvaWQgaSh0aGlzKS5yZW1vdmUoZSkpfSxnZXQgZm9ybSgpe3JldHVybiBhKGkodGhpcykuZm9ybSl9fSksbyhzLHQsZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInNlbGVjdFwiKSksZS53cmFwcGVycy5IVE1MU2VsZWN0RWxlbWVudD10fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7bi5jYWxsKHRoaXMsZSl9dmFyIG49ZS53cmFwcGVycy5IVE1MRWxlbWVudCxyPWUubWl4aW4sbz1lLnJlZ2lzdGVyV3JhcHBlcixpPWUudW53cmFwLGE9ZS53cmFwLHM9ZS53cmFwSFRNTENvbGxlY3Rpb24sYz13aW5kb3cuSFRNTFRhYmxlRWxlbWVudDt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxyKHQucHJvdG90eXBlLHtnZXQgY2FwdGlvbigpe3JldHVybiBhKGkodGhpcykuY2FwdGlvbil9LGNyZWF0ZUNhcHRpb246ZnVuY3Rpb24oKXtyZXR1cm4gYShpKHRoaXMpLmNyZWF0ZUNhcHRpb24oKSl9LGdldCB0SGVhZCgpe3JldHVybiBhKGkodGhpcykudEhlYWQpfSxjcmVhdGVUSGVhZDpmdW5jdGlvbigpe3JldHVybiBhKGkodGhpcykuY3JlYXRlVEhlYWQoKSl9LGNyZWF0ZVRGb290OmZ1bmN0aW9uKCl7cmV0dXJuIGEoaSh0aGlzKS5jcmVhdGVURm9vdCgpKX0sZ2V0IHRGb290KCl7cmV0dXJuIGEoaSh0aGlzKS50Rm9vdCl9LGdldCB0Qm9kaWVzKCl7cmV0dXJuIHMoaSh0aGlzKS50Qm9kaWVzKX0sY3JlYXRlVEJvZHk6ZnVuY3Rpb24oKXtyZXR1cm4gYShpKHRoaXMpLmNyZWF0ZVRCb2R5KCkpfSxnZXQgcm93cygpe3JldHVybiBzKGkodGhpcykucm93cyl9LGluc2VydFJvdzpmdW5jdGlvbihlKXtyZXR1cm4gYShpKHRoaXMpLmluc2VydFJvdyhlKSl9fSksbyhjLHQsZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcInRhYmxlXCIpKSxlLndyYXBwZXJzLkhUTUxUYWJsZUVsZW1lbnQ9dH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe24uY2FsbCh0aGlzLGUpfXZhciBuPWUud3JhcHBlcnMuSFRNTEVsZW1lbnQscj1lLm1peGluLG89ZS5yZWdpc3RlcldyYXBwZXIsaT1lLndyYXBIVE1MQ29sbGVjdGlvbixhPWUudW53cmFwLHM9ZS53cmFwLGM9d2luZG93LkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50O3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLHIodC5wcm90b3R5cGUse2NvbnN0cnVjdG9yOnQsZ2V0IHJvd3MoKXtyZXR1cm4gaShhKHRoaXMpLnJvd3MpfSxpbnNlcnRSb3c6ZnVuY3Rpb24oZSl7cmV0dXJuIHMoYSh0aGlzKS5pbnNlcnRSb3coZSkpfX0pLG8oYyx0LGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0aGVhZFwiKSksZS53cmFwcGVycy5IVE1MVGFibGVTZWN0aW9uRWxlbWVudD10fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7bi5jYWxsKHRoaXMsZSl9dmFyIG49ZS53cmFwcGVycy5IVE1MRWxlbWVudCxyPWUubWl4aW4sbz1lLnJlZ2lzdGVyV3JhcHBlcixpPWUud3JhcEhUTUxDb2xsZWN0aW9uLGE9ZS51bndyYXAscz1lLndyYXAsYz13aW5kb3cuSFRNTFRhYmxlUm93RWxlbWVudDt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxyKHQucHJvdG90eXBlLHtnZXQgY2VsbHMoKXtyZXR1cm4gaShhKHRoaXMpLmNlbGxzKX0saW5zZXJ0Q2VsbDpmdW5jdGlvbihlKXtyZXR1cm4gcyhhKHRoaXMpLmluc2VydENlbGwoZSkpfX0pLG8oYyx0LGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJ0clwiKSksZS53cmFwcGVycy5IVE1MVGFibGVSb3dFbGVtZW50PXR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtzd2l0Y2goZS5sb2NhbE5hbWUpe2Nhc2VcImNvbnRlbnRcIjpyZXR1cm4gbmV3IG4oZSk7Y2FzZVwic2hhZG93XCI6cmV0dXJuIG5ldyBvKGUpO2Nhc2VcInRlbXBsYXRlXCI6cmV0dXJuIG5ldyBpKGUpfXIuY2FsbCh0aGlzLGUpfXZhciBuPWUud3JhcHBlcnMuSFRNTENvbnRlbnRFbGVtZW50LHI9ZS53cmFwcGVycy5IVE1MRWxlbWVudCxvPWUud3JhcHBlcnMuSFRNTFNoYWRvd0VsZW1lbnQsaT1lLndyYXBwZXJzLkhUTUxUZW1wbGF0ZUVsZW1lbnQsYT0oZS5taXhpbixlLnJlZ2lzdGVyV3JhcHBlcikscz13aW5kb3cuSFRNTFVua25vd25FbGVtZW50O3QucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoci5wcm90b3R5cGUpLGEocyx0KSxlLndyYXBwZXJzLkhUTUxVbmtub3duRWxlbWVudD10fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7bi5jYWxsKHRoaXMsZSl9dmFyIG49ZS53cmFwcGVycy5FbGVtZW50LHI9ZS53cmFwcGVycy5IVE1MRWxlbWVudCxvPWUucmVnaXN0ZXJXcmFwcGVyLGk9KGUuZGVmaW5lV3JhcEdldHRlcixlLnVuc2FmZVVud3JhcCksYT1lLndyYXAscz1lLm1peGluLGM9XCJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2Z1wiLGw9d2luZG93LlNWR0VsZW1lbnQsdT1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoYyxcInRpdGxlXCIpO2lmKCEoXCJjbGFzc0xpc3RcImluIHUpKXt2YXIgZD1PYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKG4ucHJvdG90eXBlLFwiY2xhc3NMaXN0XCIpO09iamVjdC5kZWZpbmVQcm9wZXJ0eShyLnByb3RvdHlwZSxcImNsYXNzTGlzdFwiLGQpLGRlbGV0ZSBuLnByb3RvdHlwZS5jbGFzc0xpc3R9dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSkscyh0LnByb3RvdHlwZSx7Z2V0IG93bmVyU1ZHRWxlbWVudCgpe3JldHVybiBhKGkodGhpcykub3duZXJTVkdFbGVtZW50KX19KSxvKGwsdCxkb2N1bWVudC5jcmVhdGVFbGVtZW50TlMoYyxcInRpdGxlXCIpKSxlLndyYXBwZXJzLlNWR0VsZW1lbnQ9dH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe3AuY2FsbCh0aGlzLGUpfXZhciBuPWUubWl4aW4scj1lLnJlZ2lzdGVyV3JhcHBlcixvPWUudW53cmFwLGk9ZS53cmFwLGE9d2luZG93LlNWR1VzZUVsZW1lbnQscz1cImh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnXCIsYz1pKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUyhzLFwiZ1wiKSksbD1kb2N1bWVudC5jcmVhdGVFbGVtZW50TlMocyxcInVzZVwiKSx1PWMuY29uc3RydWN0b3IsZD1PYmplY3QuZ2V0UHJvdG90eXBlT2YodS5wcm90b3R5cGUpLHA9ZC5jb25zdHJ1Y3Rvcjt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKGQpLFwiaW5zdGFuY2VSb290XCJpbiBsJiZuKHQucHJvdG90eXBlLHtnZXQgaW5zdGFuY2VSb290KCl7cmV0dXJuIGkobyh0aGlzKS5pbnN0YW5jZVJvb3QpfSxnZXQgYW5pbWF0ZWRJbnN0YW5jZVJvb3QoKXtyZXR1cm4gaShvKHRoaXMpLmFuaW1hdGVkSW5zdGFuY2VSb290KX19KSxyKGEsdCxsKSxlLndyYXBwZXJzLlNWR1VzZUVsZW1lbnQ9dH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe24uY2FsbCh0aGlzLGUpfXZhciBuPWUud3JhcHBlcnMuRXZlbnRUYXJnZXQscj1lLm1peGluLG89ZS5yZWdpc3RlcldyYXBwZXIsaT1lLnVuc2FmZVVud3JhcCxhPWUud3JhcCxzPXdpbmRvdy5TVkdFbGVtZW50SW5zdGFuY2U7cyYmKHQucHJvdG90eXBlPU9iamVjdC5jcmVhdGUobi5wcm90b3R5cGUpLHIodC5wcm90b3R5cGUse2dldCBjb3JyZXNwb25kaW5nRWxlbWVudCgpe3JldHVybiBhKGkodGhpcykuY29ycmVzcG9uZGluZ0VsZW1lbnQpfSxnZXQgY29ycmVzcG9uZGluZ1VzZUVsZW1lbnQoKXtyZXR1cm4gYShpKHRoaXMpLmNvcnJlc3BvbmRpbmdVc2VFbGVtZW50KX0sZ2V0IHBhcmVudE5vZGUoKXtyZXR1cm4gYShpKHRoaXMpLnBhcmVudE5vZGUpfSxnZXQgY2hpbGROb2Rlcygpe3Rocm93IG5ldyBFcnJvcihcIk5vdCBpbXBsZW1lbnRlZFwiKX0sZ2V0IGZpcnN0Q2hpbGQoKXtyZXR1cm4gYShpKHRoaXMpLmZpcnN0Q2hpbGQpfSxnZXQgbGFzdENoaWxkKCl7cmV0dXJuIGEoaSh0aGlzKS5sYXN0Q2hpbGQpfSxnZXQgcHJldmlvdXNTaWJsaW5nKCl7cmV0dXJuIGEoaSh0aGlzKS5wcmV2aW91c1NpYmxpbmcpfSxnZXQgbmV4dFNpYmxpbmcoKXtyZXR1cm4gYShpKHRoaXMpLm5leHRTaWJsaW5nKX19KSxvKHMsdCksZS53cmFwcGVycy5TVkdFbGVtZW50SW5zdGFuY2U9dCl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtvKGUsdGhpcyl9dmFyIG49ZS5taXhpbixyPWUucmVnaXN0ZXJXcmFwcGVyLG89ZS5zZXRXcmFwcGVyLGk9ZS51bnNhZmVVbndyYXAsYT1lLnVud3JhcCxzPWUudW53cmFwSWZOZWVkZWQsYz1lLndyYXAsbD13aW5kb3cuQ2FudmFzUmVuZGVyaW5nQ29udGV4dDJEO24odC5wcm90b3R5cGUse2dldCBjYW52YXMoKXtyZXR1cm4gYyhpKHRoaXMpLmNhbnZhcyl9LGRyYXdJbWFnZTpmdW5jdGlvbigpe2FyZ3VtZW50c1swXT1zKGFyZ3VtZW50c1swXSksaSh0aGlzKS5kcmF3SW1hZ2UuYXBwbHkoaSh0aGlzKSxhcmd1bWVudHMpfSxjcmVhdGVQYXR0ZXJuOmZ1bmN0aW9uKCl7cmV0dXJuIGFyZ3VtZW50c1swXT1hKGFyZ3VtZW50c1swXSksaSh0aGlzKS5jcmVhdGVQYXR0ZXJuLmFwcGx5KGkodGhpcyksYXJndW1lbnRzKX19KSxyKGwsdCxkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpLmdldENvbnRleHQoXCIyZFwiKSksZS53cmFwcGVycy5DYW52YXNSZW5kZXJpbmdDb250ZXh0MkQ9dH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe28oZSx0aGlzKX12YXIgbj1lLm1peGluLHI9ZS5yZWdpc3RlcldyYXBwZXIsbz1lLnNldFdyYXBwZXIsaT1lLnVuc2FmZVVud3JhcCxhPWUudW53cmFwSWZOZWVkZWQscz1lLndyYXAsYz13aW5kb3cuV2ViR0xSZW5kZXJpbmdDb250ZXh0O2lmKGMpe24odC5wcm90b3R5cGUse2dldCBjYW52YXMoKXtyZXR1cm4gcyhpKHRoaXMpLmNhbnZhcyl9LHRleEltYWdlMkQ6ZnVuY3Rpb24oKXthcmd1bWVudHNbNV09YShhcmd1bWVudHNbNV0pLGkodGhpcykudGV4SW1hZ2UyRC5hcHBseShpKHRoaXMpLGFyZ3VtZW50cyl9LHRleFN1YkltYWdlMkQ6ZnVuY3Rpb24oKXthcmd1bWVudHNbNl09YShhcmd1bWVudHNbNl0pLGkodGhpcykudGV4U3ViSW1hZ2UyRC5hcHBseShpKHRoaXMpLGFyZ3VtZW50cyl9fSk7dmFyIGw9L1dlYktpdC8udGVzdChuYXZpZ2F0b3IudXNlckFnZW50KT97ZHJhd2luZ0J1ZmZlckhlaWdodDpudWxsLGRyYXdpbmdCdWZmZXJXaWR0aDpudWxsfTp7fTtyKGMsdCxsKSxlLndyYXBwZXJzLldlYkdMUmVuZGVyaW5nQ29udGV4dD10fX0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe24uY2FsbCh0aGlzLGUpfXZhciBuPWUud3JhcHBlcnMuTm9kZSxyPWUuR2V0RWxlbWVudHNCeUludGVyZmFjZSxvPWUuTm9uRWxlbWVudFBhcmVudE5vZGVJbnRlcmZhY2UsaT1lLlBhcmVudE5vZGVJbnRlcmZhY2UsYT1lLlNlbGVjdG9yc0ludGVyZmFjZSxzPWUubWl4aW4sYz1lLnJlZ2lzdGVyT2JqZWN0LGw9ZS5yZWdpc3RlcldyYXBwZXIsdT13aW5kb3cuRG9jdW1lbnRGcmFnbWVudDt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxzKHQucHJvdG90eXBlLGkpLHModC5wcm90b3R5cGUsYSkscyh0LnByb3RvdHlwZSxyKSxzKHQucHJvdG90eXBlLG8pLGwodSx0LGRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSksZS53cmFwcGVycy5Eb2N1bWVudEZyYWdtZW50PXQ7dmFyIGQ9Yyhkb2N1bWVudC5jcmVhdGVDb21tZW50KFwiXCIpKTtlLndyYXBwZXJzLkNvbW1lbnQ9ZH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe3ZhciB0PWQodShlKS5vd25lckRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKSk7bi5jYWxsKHRoaXMsdCksYyh0LHRoaXMpO3ZhciBvPWUuc2hhZG93Um9vdDtoLnNldCh0aGlzLG8pLHRoaXMudHJlZVNjb3BlXz1uZXcgcih0aGlzLGEob3x8ZSkpLHAuc2V0KHRoaXMsZSl9dmFyIG49ZS53cmFwcGVycy5Eb2N1bWVudEZyYWdtZW50LHI9ZS5UcmVlU2NvcGUsbz1lLmVsZW1lbnRGcm9tUG9pbnQsaT1lLmdldElubmVySFRNTCxhPWUuZ2V0VHJlZVNjb3BlLHM9ZS5taXhpbixjPWUucmV3cmFwLGw9ZS5zZXRJbm5lckhUTUwsdT1lLnVuc2FmZVVud3JhcCxkPWUudW53cmFwLHA9bmV3IFdlYWtNYXAsaD1uZXcgV2Vha01hcDt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSxzKHQucHJvdG90eXBlLHtjb25zdHJ1Y3Rvcjp0LGdldCBpbm5lckhUTUwoKXtyZXR1cm4gaSh0aGlzKX0sc2V0IGlubmVySFRNTChlKXtsKHRoaXMsZSksdGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKX0sZ2V0IG9sZGVyU2hhZG93Um9vdCgpe3JldHVybiBoLmdldCh0aGlzKXx8bnVsbH0sZ2V0IGhvc3QoKXtyZXR1cm4gcC5nZXQodGhpcyl8fG51bGx9LGludmFsaWRhdGVTaGFkb3dSZW5kZXJlcjpmdW5jdGlvbigpe3JldHVybiBwLmdldCh0aGlzKS5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKX0sZWxlbWVudEZyb21Qb2ludDpmdW5jdGlvbihlLHQpe3JldHVybiBvKHRoaXMsdGhpcy5vd25lckRvY3VtZW50LGUsdCl9fSksZS53cmFwcGVycy5TaGFkb3dSb290PXR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXt2YXIgdD1kKGUpLnJvb3Q7cmV0dXJuIHQgaW5zdGFuY2VvZiBoP3QuaG9zdDpudWxsfWZ1bmN0aW9uIG4odCxuKXtpZih0LnNoYWRvd1Jvb3Qpe249TWF0aC5taW4odC5jaGlsZE5vZGVzLmxlbmd0aC0xLG4pO3ZhciByPXQuY2hpbGROb2Rlc1tuXTtpZihyKXt2YXIgbz1lLmdldERlc3RpbmF0aW9uSW5zZXJ0aW9uUG9pbnRzKHIpO2lmKG8ubGVuZ3RoPjApe3ZhciBpPW9bMF0ucGFyZW50Tm9kZTtpLm5vZGVUeXBlPT1Ob2RlLkVMRU1FTlRfTk9ERSYmKHQ9aSl9fX1yZXR1cm4gdH1mdW5jdGlvbiByKGUpe3JldHVybiBlPXUoZSksdChlKXx8ZX1mdW5jdGlvbiBvKGUpe2EoZSx0aGlzKX12YXIgaT1lLnJlZ2lzdGVyV3JhcHBlcixhPWUuc2V0V3JhcHBlcixzPWUudW5zYWZlVW53cmFwLGM9ZS51bndyYXAsbD1lLnVud3JhcElmTmVlZGVkLHU9ZS53cmFwLGQ9ZS5nZXRUcmVlU2NvcGUscD13aW5kb3cuUmFuZ2UsaD1lLndyYXBwZXJzLlNoYWRvd1Jvb3Q7by5wcm90b3R5cGU9e2dldCBzdGFydENvbnRhaW5lcigpe3JldHVybiByKHModGhpcykuc3RhcnRDb250YWluZXIpfSxnZXQgZW5kQ29udGFpbmVyKCl7cmV0dXJuIHIocyh0aGlzKS5lbmRDb250YWluZXIpfSxnZXQgY29tbW9uQW5jZXN0b3JDb250YWluZXIoKXtyZXR1cm4gcihzKHRoaXMpLmNvbW1vbkFuY2VzdG9yQ29udGFpbmVyKX0sc2V0U3RhcnQ6ZnVuY3Rpb24oZSx0KXtlPW4oZSx0KSxzKHRoaXMpLnNldFN0YXJ0KGwoZSksdCl9LHNldEVuZDpmdW5jdGlvbihlLHQpe2U9bihlLHQpLHModGhpcykuc2V0RW5kKGwoZSksdCl9LHNldFN0YXJ0QmVmb3JlOmZ1bmN0aW9uKGUpe3ModGhpcykuc2V0U3RhcnRCZWZvcmUobChlKSl9LHNldFN0YXJ0QWZ0ZXI6ZnVuY3Rpb24oZSl7cyh0aGlzKS5zZXRTdGFydEFmdGVyKGwoZSkpfSxzZXRFbmRCZWZvcmU6ZnVuY3Rpb24oZSl7cyh0aGlzKS5zZXRFbmRCZWZvcmUobChlKSl9LHNldEVuZEFmdGVyOmZ1bmN0aW9uKGUpe3ModGhpcykuc2V0RW5kQWZ0ZXIobChlKSl9LHNlbGVjdE5vZGU6ZnVuY3Rpb24oZSl7cyh0aGlzKS5zZWxlY3ROb2RlKGwoZSkpfSxzZWxlY3ROb2RlQ29udGVudHM6ZnVuY3Rpb24oZSl7cyh0aGlzKS5zZWxlY3ROb2RlQ29udGVudHMobChlKSl9LGNvbXBhcmVCb3VuZGFyeVBvaW50czpmdW5jdGlvbihlLHQpe3JldHVybiBzKHRoaXMpLmNvbXBhcmVCb3VuZGFyeVBvaW50cyhlLGModCkpfSxleHRyYWN0Q29udGVudHM6ZnVuY3Rpb24oKXtyZXR1cm4gdShzKHRoaXMpLmV4dHJhY3RDb250ZW50cygpKX0sY2xvbmVDb250ZW50czpmdW5jdGlvbigpe3JldHVybiB1KHModGhpcykuY2xvbmVDb250ZW50cygpKX0saW5zZXJ0Tm9kZTpmdW5jdGlvbihlKXtzKHRoaXMpLmluc2VydE5vZGUobChlKSl9LHN1cnJvdW5kQ29udGVudHM6ZnVuY3Rpb24oZSl7cyh0aGlzKS5zdXJyb3VuZENvbnRlbnRzKGwoZSkpfSxjbG9uZVJhbmdlOmZ1bmN0aW9uKCl7cmV0dXJuIHUocyh0aGlzKS5jbG9uZVJhbmdlKCkpfSxpc1BvaW50SW5SYW5nZTpmdW5jdGlvbihlLHQpe3JldHVybiBzKHRoaXMpLmlzUG9pbnRJblJhbmdlKGwoZSksdCl9LGNvbXBhcmVQb2ludDpmdW5jdGlvbihlLHQpe3JldHVybiBzKHRoaXMpLmNvbXBhcmVQb2ludChsKGUpLHQpfSxpbnRlcnNlY3RzTm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gcyh0aGlzKS5pbnRlcnNlY3RzTm9kZShsKGUpKX0sdG9TdHJpbmc6ZnVuY3Rpb24oKXtyZXR1cm4gcyh0aGlzKS50b1N0cmluZygpfX0scC5wcm90b3R5cGUuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50JiYoby5wcm90b3R5cGUuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50PWZ1bmN0aW9uKGUpe3JldHVybiB1KHModGhpcykuY3JlYXRlQ29udGV4dHVhbEZyYWdtZW50KGUpKX0pLGkod2luZG93LlJhbmdlLG8sZG9jdW1lbnQuY3JlYXRlUmFuZ2UoKSksZS53cmFwcGVycy5SYW5nZT1vfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7ZS5wcmV2aW91c1NpYmxpbmdfPWUucHJldmlvdXNTaWJsaW5nLGUubmV4dFNpYmxpbmdfPWUubmV4dFNpYmxpbmcsZS5wYXJlbnROb2RlXz1lLnBhcmVudE5vZGV9ZnVuY3Rpb24gbihuLG8saSl7dmFyIGE9eChuKSxzPXgobyksYz1pP3goaSk6bnVsbDtpZihyKG8pLHQobyksaSluLmZpcnN0Q2hpbGQ9PT1pJiYobi5maXJzdENoaWxkXz1pKSxpLnByZXZpb3VzU2libGluZ189aS5wcmV2aW91c1NpYmxpbmc7ZWxzZXtuLmxhc3RDaGlsZF89bi5sYXN0Q2hpbGQsbi5sYXN0Q2hpbGQ9PT1uLmZpcnN0Q2hpbGQmJihuLmZpcnN0Q2hpbGRfPW4uZmlyc3RDaGlsZCk7dmFyIGw9UihhLmxhc3RDaGlsZCk7bCYmKGwubmV4dFNpYmxpbmdfPWwubmV4dFNpYmxpbmcpfWUub3JpZ2luYWxJbnNlcnRCZWZvcmUuY2FsbChhLHMsYyl9ZnVuY3Rpb24gcihuKXt2YXIgcj14KG4pLG89ci5wYXJlbnROb2RlO2lmKG8pe3ZhciBpPVIobyk7dChuKSxuLnByZXZpb3VzU2libGluZyYmKG4ucHJldmlvdXNTaWJsaW5nLm5leHRTaWJsaW5nXz1uKSxuLm5leHRTaWJsaW5nJiYobi5uZXh0U2libGluZy5wcmV2aW91c1NpYmxpbmdfPW4pLGkubGFzdENoaWxkPT09biYmKGkubGFzdENoaWxkXz1uKSxpLmZpcnN0Q2hpbGQ9PT1uJiYoaS5maXJzdENoaWxkXz1uKSxlLm9yaWdpbmFsUmVtb3ZlQ2hpbGQuY2FsbChvLHIpfX1mdW5jdGlvbiBvKGUpe1Auc2V0KGUsW10pfWZ1bmN0aW9uIGkoZSl7dmFyIHQ9UC5nZXQoZSk7cmV0dXJuIHR8fFAuc2V0KGUsdD1bXSksdH1mdW5jdGlvbiBhKGUpe2Zvcih2YXIgdD1bXSxuPTAscj1lLmZpcnN0Q2hpbGQ7cjtyPXIubmV4dFNpYmxpbmcpdFtuKytdPXI7cmV0dXJuIHR9ZnVuY3Rpb24gcygpe2Zvcih2YXIgZT0wO2U8Ri5sZW5ndGg7ZSsrKXt2YXIgdD1GW2VdLG49dC5wYXJlbnRSZW5kZXJlcjtuJiZuLmRpcnR5fHx0LnJlbmRlcigpfUY9W119ZnVuY3Rpb24gYygpe1Q9bnVsbCxzKCl9ZnVuY3Rpb24gbChlKXt2YXIgdD1BLmdldChlKTtyZXR1cm4gdHx8KHQ9bmV3IGgoZSksQS5zZXQoZSx0KSksdH1mdW5jdGlvbiB1KGUpe3ZhciB0PWooZSkucm9vdDtyZXR1cm4gdCBpbnN0YW5jZW9mIEM/dDpudWxsfWZ1bmN0aW9uIGQoZSl7cmV0dXJuIGwoZS5ob3N0KX1mdW5jdGlvbiBwKGUpe3RoaXMuc2tpcD0hMSx0aGlzLm5vZGU9ZSx0aGlzLmNoaWxkTm9kZXM9W119ZnVuY3Rpb24gaChlKXt0aGlzLmhvc3Q9ZSx0aGlzLmRpcnR5PSExLHRoaXMuaW52YWxpZGF0ZUF0dHJpYnV0ZXMoKSx0aGlzLmFzc29jaWF0ZU5vZGUoZSl9ZnVuY3Rpb24gZihlKXtmb3IodmFyIHQ9W10sbj1lLmZpcnN0Q2hpbGQ7bjtuPW4ubmV4dFNpYmxpbmcpRShuKT90LnB1c2guYXBwbHkodCxpKG4pKTp0LnB1c2gobik7cmV0dXJuIHR9ZnVuY3Rpb24gbShlKXtpZihlIGluc3RhbmNlb2YgTClyZXR1cm4gZTtpZihlIGluc3RhbmNlb2YgTylyZXR1cm4gbnVsbDtmb3IodmFyIHQ9ZS5maXJzdENoaWxkO3Q7dD10Lm5leHRTaWJsaW5nKXt2YXIgbj1tKHQpO2lmKG4pcmV0dXJuIG59cmV0dXJuIG51bGx9ZnVuY3Rpb24gdyhlLHQpe2kodCkucHVzaChlKTt2YXIgbj1rLmdldChlKTtuP24ucHVzaCh0KTprLnNldChlLFt0XSl9ZnVuY3Rpb24gdihlKXtyZXR1cm4gay5nZXQoZSl9ZnVuY3Rpb24gZyhlKXtrLnNldChlLHZvaWQgMCl9ZnVuY3Rpb24gYihlLHQpe3ZhciBuPXQuZ2V0QXR0cmlidXRlKFwic2VsZWN0XCIpO2lmKCFuKXJldHVybiEwO2lmKG49bi50cmltKCksIW4pcmV0dXJuITA7aWYoIShlIGluc3RhbmNlb2YgTSkpcmV0dXJuITE7aWYoIXEudGVzdChuKSlyZXR1cm4hMTt0cnl7cmV0dXJuIGUubWF0Y2hlcyhuKX1jYXRjaChyKXtyZXR1cm4hMX19ZnVuY3Rpb24geShlLHQpe3ZhciBuPXYodCk7cmV0dXJuIG4mJm5bbi5sZW5ndGgtMV09PT1lfWZ1bmN0aW9uIEUoZSl7cmV0dXJuIGUgaW5zdGFuY2VvZiBPfHxlIGluc3RhbmNlb2YgTH1mdW5jdGlvbiBfKGUpe3JldHVybiBlLnNoYWRvd1Jvb3R9ZnVuY3Rpb24gUyhlKXtmb3IodmFyIHQ9W10sbj1lLnNoYWRvd1Jvb3Q7bjtuPW4ub2xkZXJTaGFkb3dSb290KXQucHVzaChuKTtyZXR1cm4gdH12YXIgVCxNPWUud3JhcHBlcnMuRWxlbWVudCxPPWUud3JhcHBlcnMuSFRNTENvbnRlbnRFbGVtZW50LEw9ZS53cmFwcGVycy5IVE1MU2hhZG93RWxlbWVudCxOPWUud3JhcHBlcnMuTm9kZSxDPWUud3JhcHBlcnMuU2hhZG93Um9vdCxqPShlLmFzc2VydCxlLmdldFRyZWVTY29wZSksRD0oZS5taXhpbixlLm9uZU9mKSxIPWUudW5zYWZlVW53cmFwLHg9ZS51bndyYXAsUj1lLndyYXAsST1lLkFycmF5U3BsaWNlLFA9bmV3IFdlYWtNYXAsaz1uZXcgV2Vha01hcCxBPW5ldyBXZWFrTWFwLFc9RCh3aW5kb3csW1wicmVxdWVzdEFuaW1hdGlvbkZyYW1lXCIsXCJtb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWVcIixcIndlYmtpdFJlcXVlc3RBbmltYXRpb25GcmFtZVwiLFwic2V0VGltZW91dFwiXSksRj1bXSxVPW5ldyBJO1UuZXF1YWxzPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIHgoZS5ub2RlKT09PXR9LHAucHJvdG90eXBlPXthcHBlbmQ6ZnVuY3Rpb24oZSl7dmFyIHQ9bmV3IHAoZSk7cmV0dXJuIHRoaXMuY2hpbGROb2Rlcy5wdXNoKHQpLHR9LHN5bmM6ZnVuY3Rpb24oZSl7aWYoIXRoaXMuc2tpcCl7Zm9yKHZhciB0PXRoaXMubm9kZSxvPXRoaXMuY2hpbGROb2RlcyxpPWEoeCh0KSkscz1lfHxuZXcgV2Vha01hcCxjPVUuY2FsY3VsYXRlU3BsaWNlcyhvLGkpLGw9MCx1PTAsZD0wLHA9MDtwPGMubGVuZ3RoO3ArKyl7Zm9yKHZhciBoPWNbcF07ZDxoLmluZGV4O2QrKyl1Kyssb1tsKytdLnN5bmMocyk7Zm9yKHZhciBmPWgucmVtb3ZlZC5sZW5ndGgsbT0wO2Y+bTttKyspe3ZhciB3PVIoaVt1KytdKTtzLmdldCh3KXx8cih3KX1mb3IodmFyIHY9aC5hZGRlZENvdW50LGc9aVt1XSYmUihpW3VdKSxtPTA7dj5tO20rKyl7dmFyIGI9b1tsKytdLHk9Yi5ub2RlO24odCx5LGcpLHMuc2V0KHksITApLGIuc3luYyhzKX1kKz12fWZvcih2YXIgcD1kO3A8by5sZW5ndGg7cCsrKW9bcF0uc3luYyhzKX19fSxoLnByb3RvdHlwZT17cmVuZGVyOmZ1bmN0aW9uKGUpe2lmKHRoaXMuZGlydHkpe3RoaXMuaW52YWxpZGF0ZUF0dHJpYnV0ZXMoKTt2YXIgdD10aGlzLmhvc3Q7dGhpcy5kaXN0cmlidXRpb24odCk7dmFyIG49ZXx8bmV3IHAodCk7dGhpcy5idWlsZFJlbmRlclRyZWUobix0KTt2YXIgcj0hZTtyJiZuLnN5bmMoKSx0aGlzLmRpcnR5PSExfX0sZ2V0IHBhcmVudFJlbmRlcmVyKCl7cmV0dXJuIGoodGhpcy5ob3N0KS5yZW5kZXJlcn0saW52YWxpZGF0ZTpmdW5jdGlvbigpe2lmKCF0aGlzLmRpcnR5KXt0aGlzLmRpcnR5PSEwO3ZhciBlPXRoaXMucGFyZW50UmVuZGVyZXI7aWYoZSYmZS5pbnZhbGlkYXRlKCksRi5wdXNoKHRoaXMpLFQpcmV0dXJuO1Q9d2luZG93W1ddKGMsMCl9fSxkaXN0cmlidXRpb246ZnVuY3Rpb24oZSl7dGhpcy5yZXNldEFsbFN1YnRyZWVzKGUpLHRoaXMuZGlzdHJpYnV0aW9uUmVzb2x1dGlvbihlKX0scmVzZXRBbGw6ZnVuY3Rpb24oZSl7RShlKT9vKGUpOmcoZSksdGhpcy5yZXNldEFsbFN1YnRyZWVzKGUpfSxyZXNldEFsbFN1YnRyZWVzOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lLmZpcnN0Q2hpbGQ7dDt0PXQubmV4dFNpYmxpbmcpdGhpcy5yZXNldEFsbCh0KTtlLnNoYWRvd1Jvb3QmJnRoaXMucmVzZXRBbGwoZS5zaGFkb3dSb290KSxlLm9sZGVyU2hhZG93Um9vdCYmdGhpcy5yZXNldEFsbChlLm9sZGVyU2hhZG93Um9vdCl9LGRpc3RyaWJ1dGlvblJlc29sdXRpb246ZnVuY3Rpb24oZSl7aWYoXyhlKSl7Zm9yKHZhciB0PWUsbj1mKHQpLHI9Uyh0KSxvPTA7bzxyLmxlbmd0aDtvKyspdGhpcy5wb29sRGlzdHJpYnV0aW9uKHJbb10sbik7Zm9yKHZhciBvPXIubGVuZ3RoLTE7bz49MDtvLS0pe3ZhciBpPXJbb10sYT1tKGkpO2lmKGEpe3ZhciBzPWkub2xkZXJTaGFkb3dSb290O3MmJihuPWYocykpO2Zvcih2YXIgYz0wO2M8bi5sZW5ndGg7YysrKXcobltjXSxhKX10aGlzLmRpc3RyaWJ1dGlvblJlc29sdXRpb24oaSl9fWZvcih2YXIgbD1lLmZpcnN0Q2hpbGQ7bDtsPWwubmV4dFNpYmxpbmcpdGhpcy5kaXN0cmlidXRpb25SZXNvbHV0aW9uKGwpfSxwb29sRGlzdHJpYnV0aW9uOmZ1bmN0aW9uKGUsdCl7aWYoIShlIGluc3RhbmNlb2YgTCkpaWYoZSBpbnN0YW5jZW9mIE8pe3ZhciBuPWU7dGhpcy51cGRhdGVEZXBlbmRlbnRBdHRyaWJ1dGVzKG4uZ2V0QXR0cmlidXRlKFwic2VsZWN0XCIpKTtmb3IodmFyIHI9ITEsbz0wO288dC5sZW5ndGg7bysrKXt2YXIgZT10W29dO2UmJmIoZSxuKSYmKHcoZSxuKSx0W29dPXZvaWQgMCxyPSEwKX1pZighcilmb3IodmFyIGk9bi5maXJzdENoaWxkO2k7aT1pLm5leHRTaWJsaW5nKXcoaSxuKX1lbHNlIGZvcih2YXIgaT1lLmZpcnN0Q2hpbGQ7aTtpPWkubmV4dFNpYmxpbmcpdGhpcy5wb29sRGlzdHJpYnV0aW9uKGksdCl9LGJ1aWxkUmVuZGVyVHJlZTpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbj10aGlzLmNvbXBvc2UodCkscj0wO3I8bi5sZW5ndGg7cisrKXt2YXIgbz1uW3JdLGk9ZS5hcHBlbmQobyk7dGhpcy5idWlsZFJlbmRlclRyZWUoaSxvKX1pZihfKHQpKXt2YXIgYT1sKHQpO2EuZGlydHk9ITF9fSxjb21wb3NlOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1bXSxuPWUuc2hhZG93Um9vdHx8ZSxyPW4uZmlyc3RDaGlsZDtyO3I9ci5uZXh0U2libGluZylpZihFKHIpKXt0aGlzLmFzc29jaWF0ZU5vZGUobik7Zm9yKHZhciBvPWkociksYT0wO2E8by5sZW5ndGg7YSsrKXt2YXIgcz1vW2FdO3kocixzKSYmdC5wdXNoKHMpfX1lbHNlIHQucHVzaChyKTtyZXR1cm4gdH0saW52YWxpZGF0ZUF0dHJpYnV0ZXM6ZnVuY3Rpb24oKXt0aGlzLmF0dHJpYnV0ZXM9T2JqZWN0LmNyZWF0ZShudWxsKX0sdXBkYXRlRGVwZW5kZW50QXR0cmlidXRlczpmdW5jdGlvbihlKXtpZihlKXt2YXIgdD10aGlzLmF0dHJpYnV0ZXM7L1xcLlxcdysvLnRlc3QoZSkmJih0W1wiY2xhc3NcIl09ITApLC8jXFx3Ky8udGVzdChlKSYmKHQuaWQ9ITApLGUucmVwbGFjZSgvXFxbXFxzKihbXlxccz1cXHx+XFxdXSspL2csZnVuY3Rpb24oZSxuKXt0W25dPSEwfSl9fSxkZXBlbmRzT25BdHRyaWJ1dGU6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuYXR0cmlidXRlc1tlXX0sYXNzb2NpYXRlTm9kZTpmdW5jdGlvbihlKXtIKGUpLnBvbHltZXJTaGFkb3dSZW5kZXJlcl89dGhpc319O3ZhciBxPS9eKDpub3RcXCgpP1sqLiNbYS16QS1aX3xdLztOLnByb3RvdHlwZS5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXI9ZnVuY3Rpb24oZSl7dmFyIHQ9SCh0aGlzKS5wb2x5bWVyU2hhZG93UmVuZGVyZXJfO3JldHVybiB0Pyh0LmludmFsaWRhdGUoKSwhMCk6ITF9LE8ucHJvdG90eXBlLmdldERpc3RyaWJ1dGVkTm9kZXM9TC5wcm90b3R5cGUuZ2V0RGlzdHJpYnV0ZWROb2Rlcz1mdW5jdGlvbigpe3JldHVybiBzKCksaSh0aGlzKX0sTS5wcm90b3R5cGUuZ2V0RGVzdGluYXRpb25JbnNlcnRpb25Qb2ludHM9ZnVuY3Rpb24oKXtyZXR1cm4gcygpLHYodGhpcyl8fFtdfSxPLnByb3RvdHlwZS5ub2RlSXNJbnNlcnRlZF89TC5wcm90b3R5cGUubm9kZUlzSW5zZXJ0ZWRfPWZ1bmN0aW9uKCl7dGhpcy5pbnZhbGlkYXRlU2hhZG93UmVuZGVyZXIoKTt2YXIgZSx0PXUodGhpcyk7dCYmKGU9ZCh0KSksSCh0aGlzKS5wb2x5bWVyU2hhZG93UmVuZGVyZXJfPWUsZSYmZS5pbnZhbGlkYXRlKCl9LGUuZ2V0UmVuZGVyZXJGb3JIb3N0PWwsZS5nZXRTaGFkb3dUcmVlcz1TLGUucmVuZGVyQWxsUGVuZGluZz1zLGUuZ2V0RGVzdGluYXRpb25JbnNlcnRpb25Qb2ludHM9dixlLnZpc3VhbD17aW5zZXJ0QmVmb3JlOm4scmVtb3ZlOnJ9fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQodCl7aWYod2luZG93W3RdKXtyKCFlLndyYXBwZXJzW3RdKTt2YXIgYz1mdW5jdGlvbihlKXtuLmNhbGwodGhpcyxlKX07Yy5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZShuLnByb3RvdHlwZSksbyhjLnByb3RvdHlwZSx7Z2V0IGZvcm0oKXtyZXR1cm4gcyhhKHRoaXMpLmZvcm0pfX0pLGkod2luZG93W3RdLGMsZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0LnNsaWNlKDQsLTcpKSksZS53cmFwcGVyc1t0XT1jfX12YXIgbj1lLndyYXBwZXJzLkhUTUxFbGVtZW50LHI9ZS5hc3NlcnQsbz1lLm1peGluLGk9ZS5yZWdpc3RlcldyYXBwZXIsYT1lLnVud3JhcCxzPWUud3JhcCxjPVtcIkhUTUxCdXR0b25FbGVtZW50XCIsXCJIVE1MRmllbGRTZXRFbGVtZW50XCIsXCJIVE1MSW5wdXRFbGVtZW50XCIsXCJIVE1MS2V5Z2VuRWxlbWVudFwiLFwiSFRNTExhYmVsRWxlbWVudFwiLFwiSFRNTExlZ2VuZEVsZW1lbnRcIixcIkhUTUxPYmplY3RFbGVtZW50XCIsXCJIVE1MT3V0cHV0RWxlbWVudFwiLFwiSFRNTFRleHRBcmVhRWxlbWVudFwiXTtjLmZvckVhY2godCl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtyKGUsdGhpcyl9dmFyIG49ZS5yZWdpc3RlcldyYXBwZXIscj1lLnNldFdyYXBwZXIsbz1lLnVuc2FmZVVud3JhcCxpPWUudW53cmFwLGE9ZS51bndyYXBJZk5lZWRlZCxzPWUud3JhcCxjPXdpbmRvdy5TZWxlY3Rpb247dC5wcm90b3R5cGU9e2dldCBhbmNob3JOb2RlKCl7cmV0dXJuIHMobyh0aGlzKS5hbmNob3JOb2RlKX0sZ2V0IGZvY3VzTm9kZSgpe3JldHVybiBzKG8odGhpcykuZm9jdXNOb2RlKX0sYWRkUmFuZ2U6ZnVuY3Rpb24oZSl7byh0aGlzKS5hZGRSYW5nZShhKGUpKX0sY29sbGFwc2U6ZnVuY3Rpb24oZSx0KXtvKHRoaXMpLmNvbGxhcHNlKGEoZSksdCl9LGNvbnRhaW5zTm9kZTpmdW5jdGlvbihlLHQpe3JldHVybiBvKHRoaXMpLmNvbnRhaW5zTm9kZShhKGUpLHQpfSxnZXRSYW5nZUF0OmZ1bmN0aW9uKGUpe3JldHVybiBzKG8odGhpcykuZ2V0UmFuZ2VBdChlKSl9LHJlbW92ZVJhbmdlOmZ1bmN0aW9uKGUpe28odGhpcykucmVtb3ZlUmFuZ2UoaShlKSl9LHNlbGVjdEFsbENoaWxkcmVuOmZ1bmN0aW9uKGUpe28odGhpcykuc2VsZWN0QWxsQ2hpbGRyZW4oYShlKSl9LHRvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIG8odGhpcykudG9TdHJpbmcoKX19LGMucHJvdG90eXBlLmV4dGVuZCYmKHQucHJvdG90eXBlLmV4dGVuZD1mdW5jdGlvbihlLHQpe28odGhpcykuZXh0ZW5kKGEoZSksdCl9KSxuKHdpbmRvdy5TZWxlY3Rpb24sdCx3aW5kb3cuZ2V0U2VsZWN0aW9uKCkpLGUud3JhcHBlcnMuU2VsZWN0aW9uPXR9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXtyKGUsdGhpcyl9dmFyIG49ZS5yZWdpc3RlcldyYXBwZXIscj1lLnNldFdyYXBwZXIsbz1lLnVuc2FmZVVud3JhcCxpPWUudW53cmFwSWZOZWVkZWQsYT1lLndyYXAscz13aW5kb3cuVHJlZVdhbGtlcjt0LnByb3RvdHlwZT17Z2V0IHJvb3QoKXtyZXR1cm4gYShvKHRoaXMpLnJvb3QpfSxnZXQgY3VycmVudE5vZGUoKXtyZXR1cm4gYShvKHRoaXMpLmN1cnJlbnROb2RlKX0sc2V0IGN1cnJlbnROb2RlKGUpe28odGhpcykuY3VycmVudE5vZGU9aShlKX0sZ2V0IGZpbHRlcigpe3JldHVybiBvKHRoaXMpLmZpbHRlcn0scGFyZW50Tm9kZTpmdW5jdGlvbigpe3JldHVybiBhKG8odGhpcykucGFyZW50Tm9kZSgpKX0sZmlyc3RDaGlsZDpmdW5jdGlvbigpe3JldHVybiBhKG8odGhpcykuZmlyc3RDaGlsZCgpKX0sbGFzdENoaWxkOmZ1bmN0aW9uKCl7cmV0dXJuIGEobyh0aGlzKS5sYXN0Q2hpbGQoKSl9LHByZXZpb3VzU2libGluZzpmdW5jdGlvbigpe3JldHVybiBhKG8odGhpcykucHJldmlvdXNTaWJsaW5nKCkpfSxwcmV2aW91c05vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gYShvKHRoaXMpLnByZXZpb3VzTm9kZSgpKX0sbmV4dE5vZGU6ZnVuY3Rpb24oKXtyZXR1cm4gYShvKHRoaXMpLm5leHROb2RlKCkpfX0sbihzLHQpLGUud3JhcHBlcnMuVHJlZVdhbGtlcj10fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7dS5jYWxsKHRoaXMsZSksdGhpcy50cmVlU2NvcGVfPW5ldyB3KHRoaXMsbnVsbCl9ZnVuY3Rpb24gbihlKXt2YXIgbj1kb2N1bWVudFtlXTt0LnByb3RvdHlwZVtlXT1mdW5jdGlvbigpe3JldHVybiBDKG4uYXBwbHkoTCh0aGlzKSxhcmd1bWVudHMpKX19ZnVuY3Rpb24gcihlLHQpe0guY2FsbChMKHQpLE4oZSkpLG8oZSx0KX1mdW5jdGlvbiBvKGUsdCl7ZS5zaGFkb3dSb290JiZ0LmFkb3B0Tm9kZShlLnNoYWRvd1Jvb3QpLGUgaW5zdGFuY2VvZiBtJiZpKGUsdCk7Zm9yKHZhciBuPWUuZmlyc3RDaGlsZDtuO249bi5uZXh0U2libGluZylvKG4sdCl9ZnVuY3Rpb24gaShlLHQpe3ZhciBuPWUub2xkZXJTaGFkb3dSb290O24mJnQuYWRvcHROb2RlKG4pfWZ1bmN0aW9uIGEoZSl7TyhlLHRoaXMpfWZ1bmN0aW9uIHMoZSx0KXt2YXIgbj1kb2N1bWVudC5pbXBsZW1lbnRhdGlvblt0XTtlLnByb3RvdHlwZVt0XT1mdW5jdGlvbigpe3JldHVybiBDKG4uYXBwbHkoTCh0aGlzKSxhcmd1bWVudHMpKX19ZnVuY3Rpb24gYyhlLHQpe3ZhciBuPWRvY3VtZW50LmltcGxlbWVudGF0aW9uW3RdO2UucHJvdG90eXBlW3RdPWZ1bmN0aW9uKCl7cmV0dXJuIG4uYXBwbHkoTCh0aGlzKSxhcmd1bWVudHMpfX12YXIgbD1lLkdldEVsZW1lbnRzQnlJbnRlcmZhY2UsdT1lLndyYXBwZXJzLk5vZGUsZD1lLlBhcmVudE5vZGVJbnRlcmZhY2UscD1lLk5vbkVsZW1lbnRQYXJlbnROb2RlSW50ZXJmYWNlLGg9ZS53cmFwcGVycy5TZWxlY3Rpb24sZj1lLlNlbGVjdG9yc0ludGVyZmFjZSxtPWUud3JhcHBlcnMuU2hhZG93Um9vdCx3PWUuVHJlZVNjb3BlLHY9ZS5jbG9uZU5vZGUsZz1lLmRlZmluZVdyYXBHZXR0ZXIsYj1lLmVsZW1lbnRGcm9tUG9pbnQseT1lLmZvcndhcmRNZXRob2RzVG9XcmFwcGVyLEU9ZS5tYXRjaGVzTmFtZXMsXz1lLm1peGluLFM9ZS5yZWdpc3RlcldyYXBwZXIsVD1lLnJlbmRlckFsbFBlbmRpbmcsTT1lLnJld3JhcCxPPWUuc2V0V3JhcHBlcixMPWUudW5zYWZlVW53cmFwLE49ZS51bndyYXAsQz1lLndyYXAsaj1lLndyYXBFdmVudFRhcmdldE1ldGhvZHMsRD0oZS53cmFwTm9kZUxpc3QsXG5uZXcgV2Vha01hcCk7dC5wcm90b3R5cGU9T2JqZWN0LmNyZWF0ZSh1LnByb3RvdHlwZSksZyh0LFwiZG9jdW1lbnRFbGVtZW50XCIpLGcodCxcImJvZHlcIiksZyh0LFwiaGVhZFwiKSxbXCJjcmVhdGVDb21tZW50XCIsXCJjcmVhdGVEb2N1bWVudEZyYWdtZW50XCIsXCJjcmVhdGVFbGVtZW50XCIsXCJjcmVhdGVFbGVtZW50TlNcIixcImNyZWF0ZUV2ZW50XCIsXCJjcmVhdGVFdmVudE5TXCIsXCJjcmVhdGVSYW5nZVwiLFwiY3JlYXRlVGV4dE5vZGVcIl0uZm9yRWFjaChuKTt2YXIgSD1kb2N1bWVudC5hZG9wdE5vZGUseD1kb2N1bWVudC5nZXRTZWxlY3Rpb247Xyh0LnByb3RvdHlwZSx7YWRvcHROb2RlOmZ1bmN0aW9uKGUpe3JldHVybiBlLnBhcmVudE5vZGUmJmUucGFyZW50Tm9kZS5yZW1vdmVDaGlsZChlKSxyKGUsdGhpcyksZX0sZWxlbWVudEZyb21Qb2ludDpmdW5jdGlvbihlLHQpe3JldHVybiBiKHRoaXMsdGhpcyxlLHQpfSxpbXBvcnROb2RlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIHYoZSx0LEwodGhpcykpfSxnZXRTZWxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gVCgpLG5ldyBoKHguY2FsbChOKHRoaXMpKSl9LGdldEVsZW1lbnRzQnlOYW1lOmZ1bmN0aW9uKGUpe3JldHVybiBmLnF1ZXJ5U2VsZWN0b3JBbGwuY2FsbCh0aGlzLFwiW25hbWU9XCIrSlNPTi5zdHJpbmdpZnkoU3RyaW5nKGUpKStcIl1cIil9fSk7dmFyIFI9ZG9jdW1lbnQuY3JlYXRlVHJlZVdhbGtlcixJPWUud3JhcHBlcnMuVHJlZVdhbGtlcjtpZih0LnByb3RvdHlwZS5jcmVhdGVUcmVlV2Fsa2VyPWZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBvPW51bGw7cmV0dXJuIG4mJihuLmFjY2VwdE5vZGUmJlwiZnVuY3Rpb25cIj09dHlwZW9mIG4uYWNjZXB0Tm9kZT9vPXthY2NlcHROb2RlOmZ1bmN0aW9uKGUpe3JldHVybiBuLmFjY2VwdE5vZGUoQyhlKSl9fTpcImZ1bmN0aW9uXCI9PXR5cGVvZiBuJiYobz1mdW5jdGlvbihlKXtyZXR1cm4gbihDKGUpKX0pKSxuZXcgSShSLmNhbGwoTih0aGlzKSxOKGUpLHQsbyxyKSl9LGRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudCl7dmFyIFA9ZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50O3QucHJvdG90eXBlLnJlZ2lzdGVyRWxlbWVudD1mdW5jdGlvbih0LG4pe2Z1bmN0aW9uIHIoZSl7cmV0dXJuIGU/dm9pZCBPKGUsdGhpcyk6aT9kb2N1bWVudC5jcmVhdGVFbGVtZW50KGksdCk6ZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0KX12YXIgbyxpO2lmKHZvaWQgMCE9PW4mJihvPW4ucHJvdG90eXBlLGk9bltcImV4dGVuZHNcIl0pLG98fChvPU9iamVjdC5jcmVhdGUoSFRNTEVsZW1lbnQucHJvdG90eXBlKSksZS5uYXRpdmVQcm90b3R5cGVUYWJsZS5nZXQobykpdGhyb3cgbmV3IEVycm9yKFwiTm90U3VwcG9ydGVkRXJyb3JcIik7Zm9yKHZhciBhLHM9T2JqZWN0LmdldFByb3RvdHlwZU9mKG8pLGM9W107cyYmIShhPWUubmF0aXZlUHJvdG90eXBlVGFibGUuZ2V0KHMpKTspYy5wdXNoKHMpLHM9T2JqZWN0LmdldFByb3RvdHlwZU9mKHMpO2lmKCFhKXRocm93IG5ldyBFcnJvcihcIk5vdFN1cHBvcnRlZEVycm9yXCIpO2Zvcih2YXIgbD1PYmplY3QuY3JlYXRlKGEpLHU9Yy5sZW5ndGgtMTt1Pj0wO3UtLSlsPU9iamVjdC5jcmVhdGUobCk7W1wiY3JlYXRlZENhbGxiYWNrXCIsXCJhdHRhY2hlZENhbGxiYWNrXCIsXCJkZXRhY2hlZENhbGxiYWNrXCIsXCJhdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2tcIl0uZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgdD1vW2VdO3QmJihsW2VdPWZ1bmN0aW9uKCl7Qyh0aGlzKWluc3RhbmNlb2Ygcnx8TSh0aGlzKSx0LmFwcGx5KEModGhpcyksYXJndW1lbnRzKX0pfSk7dmFyIGQ9e3Byb3RvdHlwZTpsfTtpJiYoZFtcImV4dGVuZHNcIl09aSksci5wcm90b3R5cGU9byxyLnByb3RvdHlwZS5jb25zdHJ1Y3Rvcj1yLGUuY29uc3RydWN0b3JUYWJsZS5zZXQobCxyKSxlLm5hdGl2ZVByb3RvdHlwZVRhYmxlLnNldChvLGwpO1AuY2FsbChOKHRoaXMpLHQsZCk7cmV0dXJuIHJ9LHkoW3dpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudF0sW1wicmVnaXN0ZXJFbGVtZW50XCJdKX15KFt3aW5kb3cuSFRNTEJvZHlFbGVtZW50LHdpbmRvdy5IVE1MRG9jdW1lbnR8fHdpbmRvdy5Eb2N1bWVudCx3aW5kb3cuSFRNTEhlYWRFbGVtZW50LHdpbmRvdy5IVE1MSHRtbEVsZW1lbnRdLFtcImFwcGVuZENoaWxkXCIsXCJjb21wYXJlRG9jdW1lbnRQb3NpdGlvblwiLFwiY29udGFpbnNcIixcImdldEVsZW1lbnRzQnlDbGFzc05hbWVcIixcImdldEVsZW1lbnRzQnlUYWdOYW1lXCIsXCJnZXRFbGVtZW50c0J5VGFnTmFtZU5TXCIsXCJpbnNlcnRCZWZvcmVcIixcInF1ZXJ5U2VsZWN0b3JcIixcInF1ZXJ5U2VsZWN0b3JBbGxcIixcInJlbW92ZUNoaWxkXCIsXCJyZXBsYWNlQ2hpbGRcIl0pLHkoW3dpbmRvdy5IVE1MQm9keUVsZW1lbnQsd2luZG93LkhUTUxIZWFkRWxlbWVudCx3aW5kb3cuSFRNTEh0bWxFbGVtZW50XSxFKSx5KFt3aW5kb3cuSFRNTERvY3VtZW50fHx3aW5kb3cuRG9jdW1lbnRdLFtcImFkb3B0Tm9kZVwiLFwiaW1wb3J0Tm9kZVwiLFwiY29udGFpbnNcIixcImNyZWF0ZUNvbW1lbnRcIixcImNyZWF0ZURvY3VtZW50RnJhZ21lbnRcIixcImNyZWF0ZUVsZW1lbnRcIixcImNyZWF0ZUVsZW1lbnROU1wiLFwiY3JlYXRlRXZlbnRcIixcImNyZWF0ZUV2ZW50TlNcIixcImNyZWF0ZVJhbmdlXCIsXCJjcmVhdGVUZXh0Tm9kZVwiLFwiY3JlYXRlVHJlZVdhbGtlclwiLFwiZWxlbWVudEZyb21Qb2ludFwiLFwiZ2V0RWxlbWVudEJ5SWRcIixcImdldEVsZW1lbnRzQnlOYW1lXCIsXCJnZXRTZWxlY3Rpb25cIl0pLF8odC5wcm90b3R5cGUsbCksXyh0LnByb3RvdHlwZSxkKSxfKHQucHJvdG90eXBlLGYpLF8odC5wcm90b3R5cGUscCksXyh0LnByb3RvdHlwZSx7Z2V0IGltcGxlbWVudGF0aW9uKCl7dmFyIGU9RC5nZXQodGhpcyk7cmV0dXJuIGU/ZTooZT1uZXcgYShOKHRoaXMpLmltcGxlbWVudGF0aW9uKSxELnNldCh0aGlzLGUpLGUpfSxnZXQgZGVmYXVsdFZpZXcoKXtyZXR1cm4gQyhOKHRoaXMpLmRlZmF1bHRWaWV3KX19KSxTKHdpbmRvdy5Eb2N1bWVudCx0LGRvY3VtZW50LmltcGxlbWVudGF0aW9uLmNyZWF0ZUhUTUxEb2N1bWVudChcIlwiKSksd2luZG93LkhUTUxEb2N1bWVudCYmUyh3aW5kb3cuSFRNTERvY3VtZW50LHQpLGooW3dpbmRvdy5IVE1MQm9keUVsZW1lbnQsd2luZG93LkhUTUxEb2N1bWVudHx8d2luZG93LkRvY3VtZW50LHdpbmRvdy5IVE1MSGVhZEVsZW1lbnRdKTt2YXIgaz1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVEb2N1bWVudDthLnByb3RvdHlwZS5jcmVhdGVEb2N1bWVudD1mdW5jdGlvbigpe3JldHVybiBhcmd1bWVudHNbMl09Tihhcmd1bWVudHNbMl0pLEMoay5hcHBseShMKHRoaXMpLGFyZ3VtZW50cykpfSxzKGEsXCJjcmVhdGVEb2N1bWVudFR5cGVcIikscyhhLFwiY3JlYXRlSFRNTERvY3VtZW50XCIpLGMoYSxcImhhc0ZlYXR1cmVcIiksUyh3aW5kb3cuRE9NSW1wbGVtZW50YXRpb24sYSkseShbd2luZG93LkRPTUltcGxlbWVudGF0aW9uXSxbXCJjcmVhdGVEb2N1bWVudFwiLFwiY3JlYXRlRG9jdW1lbnRUeXBlXCIsXCJjcmVhdGVIVE1MRG9jdW1lbnRcIixcImhhc0ZlYXR1cmVcIl0pLGUuYWRvcHROb2RlTm9SZW1vdmU9cixlLndyYXBwZXJzLkRPTUltcGxlbWVudGF0aW9uPWEsZS53cmFwcGVycy5Eb2N1bWVudD10fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7bi5jYWxsKHRoaXMsZSl9dmFyIG49ZS53cmFwcGVycy5FdmVudFRhcmdldCxyPWUud3JhcHBlcnMuU2VsZWN0aW9uLG89ZS5taXhpbixpPWUucmVnaXN0ZXJXcmFwcGVyLGE9ZS5yZW5kZXJBbGxQZW5kaW5nLHM9ZS51bndyYXAsYz1lLnVud3JhcElmTmVlZGVkLGw9ZS53cmFwLHU9d2luZG93LldpbmRvdyxkPXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlLHA9d2luZG93LmdldERlZmF1bHRDb21wdXRlZFN0eWxlLGg9d2luZG93LmdldFNlbGVjdGlvbjt0LnByb3RvdHlwZT1PYmplY3QuY3JlYXRlKG4ucHJvdG90eXBlKSx1LnByb3RvdHlwZS5nZXRDb21wdXRlZFN0eWxlPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGwodGhpc3x8d2luZG93KS5nZXRDb21wdXRlZFN0eWxlKGMoZSksdCl9LHAmJih1LnByb3RvdHlwZS5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZT1mdW5jdGlvbihlLHQpe3JldHVybiBsKHRoaXN8fHdpbmRvdykuZ2V0RGVmYXVsdENvbXB1dGVkU3R5bGUoYyhlKSx0KX0pLHUucHJvdG90eXBlLmdldFNlbGVjdGlvbj1mdW5jdGlvbigpe3JldHVybiBsKHRoaXN8fHdpbmRvdykuZ2V0U2VsZWN0aW9uKCl9LGRlbGV0ZSB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSxkZWxldGUgd2luZG93LmdldERlZmF1bHRDb21wdXRlZFN0eWxlLGRlbGV0ZSB3aW5kb3cuZ2V0U2VsZWN0aW9uLFtcImFkZEV2ZW50TGlzdGVuZXJcIixcInJlbW92ZUV2ZW50TGlzdGVuZXJcIixcImRpc3BhdGNoRXZlbnRcIl0uZm9yRWFjaChmdW5jdGlvbihlKXt1LnByb3RvdHlwZVtlXT1mdW5jdGlvbigpe3ZhciB0PWwodGhpc3x8d2luZG93KTtyZXR1cm4gdFtlXS5hcHBseSh0LGFyZ3VtZW50cyl9LGRlbGV0ZSB3aW5kb3dbZV19KSxvKHQucHJvdG90eXBlLHtnZXRDb21wdXRlZFN0eWxlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGEoKSxkLmNhbGwocyh0aGlzKSxjKGUpLHQpfSxnZXRTZWxlY3Rpb246ZnVuY3Rpb24oKXtyZXR1cm4gYSgpLG5ldyByKGguY2FsbChzKHRoaXMpKSl9LGdldCBkb2N1bWVudCgpe3JldHVybiBsKHModGhpcykuZG9jdW1lbnQpfX0pLHAmJih0LnByb3RvdHlwZS5nZXREZWZhdWx0Q29tcHV0ZWRTdHlsZT1mdW5jdGlvbihlLHQpe3JldHVybiBhKCkscC5jYWxsKHModGhpcyksYyhlKSx0KX0pLGkodSx0LHdpbmRvdyksZS53cmFwcGVycy5XaW5kb3c9dH0od2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjt2YXIgdD1lLnVud3JhcCxuPXdpbmRvdy5EYXRhVHJhbnNmZXJ8fHdpbmRvdy5DbGlwYm9hcmQscj1uLnByb3RvdHlwZS5zZXREcmFnSW1hZ2U7ciYmKG4ucHJvdG90eXBlLnNldERyYWdJbWFnZT1mdW5jdGlvbihlLG4sbyl7ci5jYWxsKHRoaXMsdChlKSxuLG8pfSl9KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbCksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7ZnVuY3Rpb24gdChlKXt2YXIgdDt0PWUgaW5zdGFuY2VvZiBpP2U6bmV3IGkoZSYmbyhlKSkscih0LHRoaXMpfXZhciBuPWUucmVnaXN0ZXJXcmFwcGVyLHI9ZS5zZXRXcmFwcGVyLG89ZS51bndyYXAsaT13aW5kb3cuRm9ybURhdGE7aSYmKG4oaSx0LG5ldyBpKSxlLndyYXBwZXJzLkZvcm1EYXRhPXQpfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO3ZhciB0PWUudW53cmFwSWZOZWVkZWQsbj1YTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUuc2VuZDtYTUxIdHRwUmVxdWVzdC5wcm90b3R5cGUuc2VuZD1mdW5jdGlvbihlKXtyZXR1cm4gbi5jYWxsKHRoaXMsdChlKSl9fSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe1widXNlIHN0cmljdFwiO2Z1bmN0aW9uIHQoZSl7dmFyIHQ9bltlXSxyPXdpbmRvd1t0XTtpZihyKXt2YXIgbz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KGUpLGk9by5jb25zdHJ1Y3Rvcjt3aW5kb3dbdF09aX19dmFyIG49KGUuaXNXcmFwcGVyRm9yLHthOlwiSFRNTEFuY2hvckVsZW1lbnRcIixhcmVhOlwiSFRNTEFyZWFFbGVtZW50XCIsYXVkaW86XCJIVE1MQXVkaW9FbGVtZW50XCIsYmFzZTpcIkhUTUxCYXNlRWxlbWVudFwiLGJvZHk6XCJIVE1MQm9keUVsZW1lbnRcIixicjpcIkhUTUxCUkVsZW1lbnRcIixidXR0b246XCJIVE1MQnV0dG9uRWxlbWVudFwiLGNhbnZhczpcIkhUTUxDYW52YXNFbGVtZW50XCIsY2FwdGlvbjpcIkhUTUxUYWJsZUNhcHRpb25FbGVtZW50XCIsY29sOlwiSFRNTFRhYmxlQ29sRWxlbWVudFwiLGNvbnRlbnQ6XCJIVE1MQ29udGVudEVsZW1lbnRcIixkYXRhOlwiSFRNTERhdGFFbGVtZW50XCIsZGF0YWxpc3Q6XCJIVE1MRGF0YUxpc3RFbGVtZW50XCIsZGVsOlwiSFRNTE1vZEVsZW1lbnRcIixkaXI6XCJIVE1MRGlyZWN0b3J5RWxlbWVudFwiLGRpdjpcIkhUTUxEaXZFbGVtZW50XCIsZGw6XCJIVE1MRExpc3RFbGVtZW50XCIsZW1iZWQ6XCJIVE1MRW1iZWRFbGVtZW50XCIsZmllbGRzZXQ6XCJIVE1MRmllbGRTZXRFbGVtZW50XCIsZm9udDpcIkhUTUxGb250RWxlbWVudFwiLGZvcm06XCJIVE1MRm9ybUVsZW1lbnRcIixmcmFtZTpcIkhUTUxGcmFtZUVsZW1lbnRcIixmcmFtZXNldDpcIkhUTUxGcmFtZVNldEVsZW1lbnRcIixoMTpcIkhUTUxIZWFkaW5nRWxlbWVudFwiLGhlYWQ6XCJIVE1MSGVhZEVsZW1lbnRcIixocjpcIkhUTUxIUkVsZW1lbnRcIixodG1sOlwiSFRNTEh0bWxFbGVtZW50XCIsaWZyYW1lOlwiSFRNTElGcmFtZUVsZW1lbnRcIixpbWc6XCJIVE1MSW1hZ2VFbGVtZW50XCIsaW5wdXQ6XCJIVE1MSW5wdXRFbGVtZW50XCIsa2V5Z2VuOlwiSFRNTEtleWdlbkVsZW1lbnRcIixsYWJlbDpcIkhUTUxMYWJlbEVsZW1lbnRcIixsZWdlbmQ6XCJIVE1MTGVnZW5kRWxlbWVudFwiLGxpOlwiSFRNTExJRWxlbWVudFwiLGxpbms6XCJIVE1MTGlua0VsZW1lbnRcIixtYXA6XCJIVE1MTWFwRWxlbWVudFwiLG1hcnF1ZWU6XCJIVE1MTWFycXVlZUVsZW1lbnRcIixtZW51OlwiSFRNTE1lbnVFbGVtZW50XCIsbWVudWl0ZW06XCJIVE1MTWVudUl0ZW1FbGVtZW50XCIsbWV0YTpcIkhUTUxNZXRhRWxlbWVudFwiLG1ldGVyOlwiSFRNTE1ldGVyRWxlbWVudFwiLG9iamVjdDpcIkhUTUxPYmplY3RFbGVtZW50XCIsb2w6XCJIVE1MT0xpc3RFbGVtZW50XCIsb3B0Z3JvdXA6XCJIVE1MT3B0R3JvdXBFbGVtZW50XCIsb3B0aW9uOlwiSFRNTE9wdGlvbkVsZW1lbnRcIixvdXRwdXQ6XCJIVE1MT3V0cHV0RWxlbWVudFwiLHA6XCJIVE1MUGFyYWdyYXBoRWxlbWVudFwiLHBhcmFtOlwiSFRNTFBhcmFtRWxlbWVudFwiLHByZTpcIkhUTUxQcmVFbGVtZW50XCIscHJvZ3Jlc3M6XCJIVE1MUHJvZ3Jlc3NFbGVtZW50XCIscTpcIkhUTUxRdW90ZUVsZW1lbnRcIixzY3JpcHQ6XCJIVE1MU2NyaXB0RWxlbWVudFwiLHNlbGVjdDpcIkhUTUxTZWxlY3RFbGVtZW50XCIsc2hhZG93OlwiSFRNTFNoYWRvd0VsZW1lbnRcIixzb3VyY2U6XCJIVE1MU291cmNlRWxlbWVudFwiLHNwYW46XCJIVE1MU3BhbkVsZW1lbnRcIixzdHlsZTpcIkhUTUxTdHlsZUVsZW1lbnRcIix0YWJsZTpcIkhUTUxUYWJsZUVsZW1lbnRcIix0Ym9keTpcIkhUTUxUYWJsZVNlY3Rpb25FbGVtZW50XCIsdGVtcGxhdGU6XCJIVE1MVGVtcGxhdGVFbGVtZW50XCIsdGV4dGFyZWE6XCJIVE1MVGV4dEFyZWFFbGVtZW50XCIsdGhlYWQ6XCJIVE1MVGFibGVTZWN0aW9uRWxlbWVudFwiLHRpbWU6XCJIVE1MVGltZUVsZW1lbnRcIix0aXRsZTpcIkhUTUxUaXRsZUVsZW1lbnRcIix0cjpcIkhUTUxUYWJsZVJvd0VsZW1lbnRcIix0cmFjazpcIkhUTUxUcmFja0VsZW1lbnRcIix1bDpcIkhUTUxVTGlzdEVsZW1lbnRcIix2aWRlbzpcIkhUTUxWaWRlb0VsZW1lbnRcIn0pO09iamVjdC5rZXlzKG4pLmZvckVhY2godCksT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoZS53cmFwcGVycykuZm9yRWFjaChmdW5jdGlvbih0KXt3aW5kb3dbdF09ZS53cmFwcGVyc1t0XX0pfSh3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSx0KXt2YXIgbj1cIlwiO3JldHVybiBBcnJheS5wcm90b3R5cGUuZm9yRWFjaC5jYWxsKGUsZnVuY3Rpb24oZSl7bis9ZS50ZXh0Q29udGVudCtcIlxcblxcblwifSksdHx8KG49bi5yZXBsYWNlKGQsXCJcIikpLG59ZnVuY3Rpb24gbihlKXt2YXIgdD1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7cmV0dXJuIHQudGV4dENvbnRlbnQ9ZSx0fWZ1bmN0aW9uIHIoZSl7dmFyIHQ9bihlKTtkb2N1bWVudC5oZWFkLmFwcGVuZENoaWxkKHQpO3ZhciByPVtdO2lmKHQuc2hlZXQpdHJ5e3I9dC5zaGVldC5jc3NSdWxlc31jYXRjaChvKXt9ZWxzZSBjb25zb2xlLndhcm4oXCJzaGVldCBub3QgZm91bmRcIix0KTtyZXR1cm4gdC5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKHQpLHJ9ZnVuY3Rpb24gbygpe0MuaW5pdGlhbGl6ZWQ9ITAsZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChDKTt2YXIgZT1DLmNvbnRlbnREb2N1bWVudCx0PWUuY3JlYXRlRWxlbWVudChcImJhc2VcIik7dC5ocmVmPWRvY3VtZW50LmJhc2VVUkksZS5oZWFkLmFwcGVuZENoaWxkKHQpfWZ1bmN0aW9uIGkoZSl7Qy5pbml0aWFsaXplZHx8bygpLGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoQyksZShDLmNvbnRlbnREb2N1bWVudCksZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChDKX1mdW5jdGlvbiBhKGUsdCl7aWYodCl7dmFyIG87aWYoZS5tYXRjaChcIkBpbXBvcnRcIikmJkQpe3ZhciBhPW4oZSk7aShmdW5jdGlvbihlKXtlLmhlYWQuYXBwZW5kQ2hpbGQoYS5pbXBsKSxvPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGEuc2hlZXQuY3NzUnVsZXMsMCksdChvKX0pfWVsc2Ugbz1yKGUpLHQobyl9fWZ1bmN0aW9uIHMoZSl7ZSYmbCgpLmFwcGVuZENoaWxkKGRvY3VtZW50LmNyZWF0ZVRleHROb2RlKGUpKX1mdW5jdGlvbiBjKGUsdCl7dmFyIHI9bihlKTtyLnNldEF0dHJpYnV0ZSh0LFwiXCIpLHIuc2V0QXR0cmlidXRlKHgsXCJcIiksZG9jdW1lbnQuaGVhZC5hcHBlbmRDaGlsZChyKX1mdW5jdGlvbiBsKCl7cmV0dXJuIGp8fChqPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKSxqLnNldEF0dHJpYnV0ZSh4LFwiXCIpLGpbeF09ITApLGp9dmFyIHU9e3N0cmljdFN0eWxpbmc6ITEscmVnaXN0cnk6e30sc2hpbVN0eWxpbmc6ZnVuY3Rpb24oZSxuLHIpe3ZhciBvPXRoaXMucHJlcGFyZVJvb3QoZSxuLHIpLGk9dGhpcy5pc1R5cGVFeHRlbnNpb24ociksYT10aGlzLm1ha2VTY29wZVNlbGVjdG9yKG4saSkscz10KG8sITApO3M9dGhpcy5zY29wZUNzc1RleHQocyxhKSxlJiYoZS5zaGltbWVkU3R5bGU9cyksdGhpcy5hZGRDc3NUb0RvY3VtZW50KHMsbil9LHNoaW1TdHlsZTpmdW5jdGlvbihlLHQpe3JldHVybiB0aGlzLnNoaW1Dc3NUZXh0KGUudGV4dENvbnRlbnQsdCl9LHNoaW1Dc3NUZXh0OmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU9dGhpcy5pbnNlcnREaXJlY3RpdmVzKGUpLHRoaXMuc2NvcGVDc3NUZXh0KGUsdCl9LG1ha2VTY29wZVNlbGVjdG9yOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIGU/dD9cIltpcz1cIitlK1wiXVwiOmU6XCJcIn0saXNUeXBlRXh0ZW5zaW9uOmZ1bmN0aW9uKGUpe3JldHVybiBlJiZlLmluZGV4T2YoXCItXCIpPDB9LHByZXBhcmVSb290OmZ1bmN0aW9uKGUsdCxuKXt2YXIgcj10aGlzLnJlZ2lzdGVyUm9vdChlLHQsbik7cmV0dXJuIHRoaXMucmVwbGFjZVRleHRJblN0eWxlcyhyLnJvb3RTdHlsZXMsdGhpcy5pbnNlcnREaXJlY3RpdmVzKSx0aGlzLnJlbW92ZVN0eWxlcyhlLHIucm9vdFN0eWxlcyksdGhpcy5zdHJpY3RTdHlsaW5nJiZ0aGlzLmFwcGx5U2NvcGVUb0NvbnRlbnQoZSx0KSxyLnNjb3BlU3R5bGVzfSxyZW1vdmVTdHlsZXM6ZnVuY3Rpb24oZSx0KXtmb3IodmFyIG4scj0wLG89dC5sZW5ndGg7bz5yJiYobj10W3JdKTtyKyspbi5wYXJlbnROb2RlLnJlbW92ZUNoaWxkKG4pfSxyZWdpc3RlclJvb3Q6ZnVuY3Rpb24oZSx0LG4pe3ZhciByPXRoaXMucmVnaXN0cnlbdF09e3Jvb3Q6ZSxuYW1lOnQsZXh0ZW5kc05hbWU6bn0sbz10aGlzLmZpbmRTdHlsZXMoZSk7ci5yb290U3R5bGVzPW8sci5zY29wZVN0eWxlcz1yLnJvb3RTdHlsZXM7dmFyIGk9dGhpcy5yZWdpc3RyeVtyLmV4dGVuZHNOYW1lXTtyZXR1cm4gaSYmKHIuc2NvcGVTdHlsZXM9aS5zY29wZVN0eWxlcy5jb25jYXQoci5zY29wZVN0eWxlcykpLHJ9LGZpbmRTdHlsZXM6ZnVuY3Rpb24oZSl7aWYoIWUpcmV0dXJuW107dmFyIHQ9ZS5xdWVyeVNlbGVjdG9yQWxsKFwic3R5bGVcIik7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5maWx0ZXIuY2FsbCh0LGZ1bmN0aW9uKGUpe3JldHVybiFlLmhhc0F0dHJpYnV0ZShSKX0pfSxhcHBseVNjb3BlVG9Db250ZW50OmZ1bmN0aW9uKGUsdCl7ZSYmKEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZS5xdWVyeVNlbGVjdG9yQWxsKFwiKlwiKSxmdW5jdGlvbihlKXtlLnNldEF0dHJpYnV0ZSh0LFwiXCIpfSksQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlLnF1ZXJ5U2VsZWN0b3JBbGwoXCJ0ZW1wbGF0ZVwiKSxmdW5jdGlvbihlKXt0aGlzLmFwcGx5U2NvcGVUb0NvbnRlbnQoZS5jb250ZW50LHQpfSx0aGlzKSl9LGluc2VydERpcmVjdGl2ZXM6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9dGhpcy5pbnNlcnRQb2x5ZmlsbERpcmVjdGl2ZXNJbkNzc1RleHQoZSksdGhpcy5pbnNlcnRQb2x5ZmlsbFJ1bGVzSW5Dc3NUZXh0KGUpfSxpbnNlcnRQb2x5ZmlsbERpcmVjdGl2ZXNJbkNzc1RleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZS5yZXBsYWNlKHAsZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zbGljZSgwLC0yKStcIntcIn0pLGUucmVwbGFjZShoLGZ1bmN0aW9uKGUsdCl7cmV0dXJuIHQrXCIge1wifSl9LGluc2VydFBvbHlmaWxsUnVsZXNJbkNzc1RleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZS5yZXBsYWNlKGYsZnVuY3Rpb24oZSx0KXtyZXR1cm4gdC5zbGljZSgwLC0xKX0pLGUucmVwbGFjZShtLGZ1bmN0aW9uKGUsdCxuLHIpe3ZhciBvPWUucmVwbGFjZSh0LFwiXCIpLnJlcGxhY2UobixcIlwiKTtyZXR1cm4gcitvfSl9LHNjb3BlQ3NzVGV4dDpmdW5jdGlvbihlLHQpe3ZhciBuPXRoaXMuZXh0cmFjdFVuc2NvcGVkUnVsZXNGcm9tQ3NzVGV4dChlKTtpZihlPXRoaXMuaW5zZXJ0UG9seWZpbGxIb3N0SW5Dc3NUZXh0KGUpLGU9dGhpcy5jb252ZXJ0Q29sb25Ib3N0KGUpLGU9dGhpcy5jb252ZXJ0Q29sb25Ib3N0Q29udGV4dChlKSxlPXRoaXMuY29udmVydFNoYWRvd0RPTVNlbGVjdG9ycyhlKSx0KXt2YXIgZSxyPXRoaXM7YShlLGZ1bmN0aW9uKG4pe2U9ci5zY29wZVJ1bGVzKG4sdCl9KX1yZXR1cm4gZT1lK1wiXFxuXCIrbixlLnRyaW0oKX0sZXh0cmFjdFVuc2NvcGVkUnVsZXNGcm9tQ3NzVGV4dDpmdW5jdGlvbihlKXtmb3IodmFyIHQsbj1cIlwiO3Q9dy5leGVjKGUpOyluKz10WzFdLnNsaWNlKDAsLTEpK1wiXFxuXFxuXCI7Zm9yKDt0PXYuZXhlYyhlKTspbis9dFswXS5yZXBsYWNlKHRbMl0sXCJcIikucmVwbGFjZSh0WzFdLHRbM10pK1wiXFxuXFxuXCI7cmV0dXJuIG59LGNvbnZlcnRDb2xvbkhvc3Q6ZnVuY3Rpb24oZSl7cmV0dXJuIHRoaXMuY29udmVydENvbG9uUnVsZShlLEUsdGhpcy5jb2xvbkhvc3RQYXJ0UmVwbGFjZXIpfSxjb252ZXJ0Q29sb25Ib3N0Q29udGV4dDpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5jb252ZXJ0Q29sb25SdWxlKGUsXyx0aGlzLmNvbG9uSG9zdENvbnRleHRQYXJ0UmVwbGFjZXIpfSxjb252ZXJ0Q29sb25SdWxlOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZS5yZXBsYWNlKHQsZnVuY3Rpb24oZSx0LHIsbyl7aWYodD1PLHIpe2Zvcih2YXIgaSxhPXIuc3BsaXQoXCIsXCIpLHM9W10sYz0wLGw9YS5sZW5ndGg7bD5jJiYoaT1hW2NdKTtjKyspaT1pLnRyaW0oKSxzLnB1c2gobih0LGksbykpO3JldHVybiBzLmpvaW4oXCIsXCIpfXJldHVybiB0K299KX0sY29sb25Ib3N0Q29udGV4dFBhcnRSZXBsYWNlcjpmdW5jdGlvbihlLHQsbil7cmV0dXJuIHQubWF0Y2goZyk/dGhpcy5jb2xvbkhvc3RQYXJ0UmVwbGFjZXIoZSx0LG4pOmUrdCtuK1wiLCBcIit0K1wiIFwiK2Urbn0sY29sb25Ib3N0UGFydFJlcGxhY2VyOmZ1bmN0aW9uKGUsdCxuKXtyZXR1cm4gZSt0LnJlcGxhY2UoZyxcIlwiKStufSxjb252ZXJ0U2hhZG93RE9NU2VsZWN0b3JzOmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD0wO3Q8Ti5sZW5ndGg7dCsrKWU9ZS5yZXBsYWNlKE5bdF0sXCIgXCIpO3JldHVybiBlfSxzY29wZVJ1bGVzOmZ1bmN0aW9uKGUsdCl7dmFyIG49XCJcIjtyZXR1cm4gZSYmQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChlLGZ1bmN0aW9uKGUpe2lmKGUuc2VsZWN0b3JUZXh0JiZlLnN0eWxlJiZ2b2lkIDAhPT1lLnN0eWxlLmNzc1RleHQpbis9dGhpcy5zY29wZVNlbGVjdG9yKGUuc2VsZWN0b3JUZXh0LHQsdGhpcy5zdHJpY3RTdHlsaW5nKStcIiB7XFxuIFwiLG4rPXRoaXMucHJvcGVydGllc0Zyb21SdWxlKGUpK1wiXFxufVxcblxcblwiO2Vsc2UgaWYoZS50eXBlPT09Q1NTUnVsZS5NRURJQV9SVUxFKW4rPVwiQG1lZGlhIFwiK2UubWVkaWEubWVkaWFUZXh0K1wiIHtcXG5cIixuKz10aGlzLnNjb3BlUnVsZXMoZS5jc3NSdWxlcyx0KSxuKz1cIlxcbn1cXG5cXG5cIjtlbHNlIHRyeXtlLmNzc1RleHQmJihuKz1lLmNzc1RleHQrXCJcXG5cXG5cIil9Y2F0Y2gocil7ZS50eXBlPT09Q1NTUnVsZS5LRVlGUkFNRVNfUlVMRSYmZS5jc3NSdWxlcyYmKG4rPXRoaXMuaWVTYWZlQ3NzVGV4dEZyb21LZXlGcmFtZVJ1bGUoZSkpfX0sdGhpcyksbn0saWVTYWZlQ3NzVGV4dEZyb21LZXlGcmFtZVJ1bGU6ZnVuY3Rpb24oZSl7dmFyIHQ9XCJAa2V5ZnJhbWVzIFwiK2UubmFtZStcIiB7XCI7cmV0dXJuIEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZS5jc3NSdWxlcyxmdW5jdGlvbihlKXt0Kz1cIiBcIitlLmtleVRleHQrXCIge1wiK2Uuc3R5bGUuY3NzVGV4dCtcIn1cIn0pLHQrPVwiIH1cIn0sc2NvcGVTZWxlY3RvcjpmdW5jdGlvbihlLHQsbil7dmFyIHI9W10sbz1lLnNwbGl0KFwiLFwiKTtyZXR1cm4gby5mb3JFYWNoKGZ1bmN0aW9uKGUpe2U9ZS50cmltKCksdGhpcy5zZWxlY3Rvck5lZWRzU2NvcGluZyhlLHQpJiYoZT1uJiYhZS5tYXRjaChPKT90aGlzLmFwcGx5U3RyaWN0U2VsZWN0b3JTY29wZShlLHQpOnRoaXMuYXBwbHlTZWxlY3RvclNjb3BlKGUsdCkpLHIucHVzaChlKX0sdGhpcyksci5qb2luKFwiLCBcIil9LHNlbGVjdG9yTmVlZHNTY29waW5nOmZ1bmN0aW9uKGUsdCl7aWYoQXJyYXkuaXNBcnJheSh0KSlyZXR1cm4hMDt2YXIgbj10aGlzLm1ha2VTY29wZU1hdGNoZXIodCk7cmV0dXJuIWUubWF0Y2gobil9LG1ha2VTY29wZU1hdGNoZXI6ZnVuY3Rpb24oZSl7cmV0dXJuIGU9ZS5yZXBsYWNlKC9cXFsvZyxcIlxcXFxbXCIpLnJlcGxhY2UoL1xcXS9nLFwiXFxcXF1cIiksbmV3IFJlZ0V4cChcIl4oXCIrZStcIilcIitTLFwibVwiKX0sYXBwbHlTZWxlY3RvclNjb3BlOmZ1bmN0aW9uKGUsdCl7cmV0dXJuIEFycmF5LmlzQXJyYXkodCk/dGhpcy5hcHBseVNlbGVjdG9yU2NvcGVMaXN0KGUsdCk6dGhpcy5hcHBseVNpbXBsZVNlbGVjdG9yU2NvcGUoZSx0KX0sYXBwbHlTZWxlY3RvclNjb3BlTGlzdDpmdW5jdGlvbihlLHQpe2Zvcih2YXIgbixyPVtdLG89MDtuPXRbb107bysrKXIucHVzaCh0aGlzLmFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZShlLG4pKTtyZXR1cm4gci5qb2luKFwiLCBcIil9LGFwcGx5U2ltcGxlU2VsZWN0b3JTY29wZTpmdW5jdGlvbihlLHQpe3JldHVybiBlLm1hdGNoKEwpPyhlPWUucmVwbGFjZShPLHQpLGUucmVwbGFjZShMLHQrXCIgXCIpKTp0K1wiIFwiK2V9LGFwcGx5U3RyaWN0U2VsZWN0b3JTY29wZTpmdW5jdGlvbihlLHQpe3Q9dC5yZXBsYWNlKC9cXFtpcz0oW15cXF1dKilcXF0vZyxcIiQxXCIpO3ZhciBuPVtcIiBcIixcIj5cIixcIitcIixcIn5cIl0scj1lLG89XCJbXCIrdCtcIl1cIjtyZXR1cm4gbi5mb3JFYWNoKGZ1bmN0aW9uKGUpe3ZhciB0PXIuc3BsaXQoZSk7cj10Lm1hcChmdW5jdGlvbihlKXt2YXIgdD1lLnRyaW0oKS5yZXBsYWNlKEwsXCJcIik7cmV0dXJuIHQmJm4uaW5kZXhPZih0KTwwJiZ0LmluZGV4T2Yobyk8MCYmKGU9dC5yZXBsYWNlKC8oW146XSopKDoqKSguKikvLFwiJDFcIitvK1wiJDIkM1wiKSksZX0pLmpvaW4oZSl9KSxyfSxpbnNlcnRQb2x5ZmlsbEhvc3RJbkNzc1RleHQ6ZnVuY3Rpb24oZSl7cmV0dXJuIGUucmVwbGFjZShNLGIpLnJlcGxhY2UoVCxnKX0scHJvcGVydGllc0Zyb21SdWxlOmZ1bmN0aW9uKGUpe3ZhciB0PWUuc3R5bGUuY3NzVGV4dDtlLnN0eWxlLmNvbnRlbnQmJiFlLnN0eWxlLmNvbnRlbnQubWF0Y2goL1snXCJdK3xhdHRyLykmJih0PXQucmVwbGFjZSgvY29udGVudDpbXjtdKjsvZyxcImNvbnRlbnQ6ICdcIitlLnN0eWxlLmNvbnRlbnQrXCInO1wiKSk7dmFyIG49ZS5zdHlsZTtmb3IodmFyIHIgaW4gbilcImluaXRpYWxcIj09PW5bcl0mJih0Kz1yK1wiOiBpbml0aWFsOyBcIik7cmV0dXJuIHR9LHJlcGxhY2VUZXh0SW5TdHlsZXM6ZnVuY3Rpb24oZSx0KXtlJiZ0JiYoZSBpbnN0YW5jZW9mIEFycmF5fHwoZT1bZV0pLEFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwoZSxmdW5jdGlvbihlKXtlLnRleHRDb250ZW50PXQuY2FsbCh0aGlzLGUudGV4dENvbnRlbnQpfSx0aGlzKSl9LGFkZENzc1RvRG9jdW1lbnQ6ZnVuY3Rpb24oZSx0KXtlLm1hdGNoKFwiQGltcG9ydFwiKT9jKGUsdCk6cyhlKX19LGQ9L1xcL1xcKlteKl0qXFwqKyhbXi8qXVteKl0qXFwqKykqXFwvL2dpbSxwPS9cXC9cXCpcXHMqQHBvbHlmaWxsIChbXipdKlxcKisoW14vKl1bXipdKlxcKispKlxcLykoW157XSo/KXsvZ2ltLGg9L3BvbHlmaWxsLW5leHQtc2VsZWN0b3JbXn1dKmNvbnRlbnRcXDpbXFxzXSo/WydcIl0oLio/KVsnXCJdWztcXHNdKn0oW157XSo/KXsvZ2ltLGY9L1xcL1xcKlxcc0Bwb2x5ZmlsbC1ydWxlKFteKl0qXFwqKyhbXi8qXVteKl0qXFwqKykqKVxcLy9naW0sbT0vKHBvbHlmaWxsLXJ1bGUpW159XSooY29udGVudFxcOltcXHNdKlsnXCJdKC4qPylbJ1wiXSlbO1xcc10qW159XSp9L2dpbSx3PS9cXC9cXCpcXHNAcG9seWZpbGwtdW5zY29wZWQtcnVsZShbXipdKlxcKisoW14vKl1bXipdKlxcKispKilcXC8vZ2ltLHY9Lyhwb2x5ZmlsbC11bnNjb3BlZC1ydWxlKVtefV0qKGNvbnRlbnRcXDpbXFxzXSpbJ1wiXSguKj8pWydcIl0pWztcXHNdKltefV0qfS9naW0sZz1cIi1zaGFkb3djc3Nob3N0XCIsYj1cIi1zaGFkb3djc3Njb250ZXh0XCIseT1cIikoPzpcXFxcKCgoPzpcXFxcKFteKShdKlxcXFwpfFteKShdKikrPylcXFxcKSk/KFteLHtdKilcIixFPW5ldyBSZWdFeHAoXCIoXCIrZyt5LFwiZ2ltXCIpLF89bmV3IFJlZ0V4cChcIihcIitiK3ksXCJnaW1cIiksUz1cIihbPlxcXFxzfitbLix7Ol1bXFxcXHNcXFxcU10qKT8kXCIsVD0vXFw6aG9zdC9naW0sTT0vXFw6aG9zdC1jb250ZXh0L2dpbSxPPWcrXCItbm8tY29tYmluYXRvclwiLEw9bmV3IFJlZ0V4cChnLFwiZ2ltXCIpLE49KG5ldyBSZWdFeHAoYixcImdpbVwiKSxbLz4+Pi9nLC86OnNoYWRvdy9nLC86OmNvbnRlbnQvZywvXFwvZGVlcFxcLy9nLC9cXC9zaGFkb3dcXC8vZywvXFwvc2hhZG93LWRlZXBcXC8vZywvXFxeXFxeL2csL1xcXi9nXSksQz1kb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiaWZyYW1lXCIpO0Muc3R5bGUuZGlzcGxheT1cIm5vbmVcIjt2YXIgaixEPW5hdmlnYXRvci51c2VyQWdlbnQubWF0Y2goXCJDaHJvbWVcIiksSD1cInNoaW0tc2hhZG93ZG9tXCIseD1cInNoaW0tc2hhZG93ZG9tLWNzc1wiLFI9XCJuby1zaGltXCI7aWYod2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKXtzKFwic3R5bGUgeyBkaXNwbGF5OiBub25lICFpbXBvcnRhbnQ7IH1cXG5cIik7dmFyIEk9U2hhZG93RE9NUG9seWZpbGwud3JhcChkb2N1bWVudCksUD1JLnF1ZXJ5U2VsZWN0b3IoXCJoZWFkXCIpO1AuaW5zZXJ0QmVmb3JlKGwoKSxQLmNoaWxkTm9kZXNbMF0pLGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJET01Db250ZW50TG9hZGVkXCIsZnVuY3Rpb24oKXtlLnVybFJlc29sdmVyO2lmKHdpbmRvdy5IVE1MSW1wb3J0cyYmIUhUTUxJbXBvcnRzLnVzZU5hdGl2ZSl7dmFyIHQ9XCJsaW5rW3JlbD1zdHlsZXNoZWV0XVtcIitIK1wiXVwiLG49XCJzdHlsZVtcIitIK1wiXVwiO0hUTUxJbXBvcnRzLmltcG9ydGVyLmRvY3VtZW50UHJlbG9hZFNlbGVjdG9ycys9XCIsXCIrdCxIVE1MSW1wb3J0cy5pbXBvcnRlci5pbXBvcnRzUHJlbG9hZFNlbGVjdG9ycys9XCIsXCIrdCxIVE1MSW1wb3J0cy5wYXJzZXIuZG9jdW1lbnRTZWxlY3RvcnM9W0hUTUxJbXBvcnRzLnBhcnNlci5kb2N1bWVudFNlbGVjdG9ycyx0LG5dLmpvaW4oXCIsXCIpO3ZhciByPUhUTUxJbXBvcnRzLnBhcnNlci5wYXJzZUdlbmVyaWM7SFRNTEltcG9ydHMucGFyc2VyLnBhcnNlR2VuZXJpYz1mdW5jdGlvbihlKXtpZighZVt4XSl7dmFyIHQ9ZS5fX2ltcG9ydEVsZW1lbnR8fGU7aWYoIXQuaGFzQXR0cmlidXRlKEgpKXJldHVybiB2b2lkIHIuY2FsbCh0aGlzLGUpO2UuX19yZXNvdXJjZSYmKHQ9ZS5vd25lckRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKSx0LnRleHRDb250ZW50PWUuX19yZXNvdXJjZSksSFRNTEltcG9ydHMucGF0aC5yZXNvbHZlVXJsc0luU3R5bGUodCxlLmhyZWYpLHQudGV4dENvbnRlbnQ9dS5zaGltU3R5bGUodCksdC5yZW1vdmVBdHRyaWJ1dGUoSCxcIlwiKSx0LnNldEF0dHJpYnV0ZSh4LFwiXCIpLHRbeF09ITAsdC5wYXJlbnROb2RlIT09UCYmKGUucGFyZW50Tm9kZT09PVA/UC5yZXBsYWNlQ2hpbGQodCxlKTp0aGlzLmFkZEVsZW1lbnRUb0RvY3VtZW50KHQpKSx0Ll9faW1wb3J0UGFyc2VkPSEwLHRoaXMubWFya1BhcnNpbmdDb21wbGV0ZShlKSx0aGlzLnBhcnNlTmV4dCgpfX07dmFyIG89SFRNTEltcG9ydHMucGFyc2VyLmhhc1Jlc291cmNlO0hUTUxJbXBvcnRzLnBhcnNlci5oYXNSZXNvdXJjZT1mdW5jdGlvbihlKXtyZXR1cm5cImxpbmtcIj09PWUubG9jYWxOYW1lJiZcInN0eWxlc2hlZXRcIj09PWUucmVsJiZlLmhhc0F0dHJpYnV0ZShIKT9lLl9fcmVzb3VyY2U6by5jYWxsKHRoaXMsZSl9fX0pfWUuU2hhZG93Q1NTPXV9KHdpbmRvdy5XZWJDb21wb25lbnRzKSksZnVuY3Rpb24oZSl7d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsPyh3aW5kb3cud3JhcD1TaGFkb3dET01Qb2x5ZmlsbC53cmFwSWZOZWVkZWQsd2luZG93LnVud3JhcD1TaGFkb3dET01Qb2x5ZmlsbC51bndyYXBJZk5lZWRlZCk6d2luZG93LndyYXA9d2luZG93LnVud3JhcD1mdW5jdGlvbihlKXtyZXR1cm4gZX19KHdpbmRvdy5XZWJDb21wb25lbnRzKSxmdW5jdGlvbihlKXtcInVzZSBzdHJpY3RcIjtmdW5jdGlvbiB0KGUpe3JldHVybiB2b2lkIDAhPT1wW2VdfWZ1bmN0aW9uIG4oKXtzLmNhbGwodGhpcyksdGhpcy5faXNJbnZhbGlkPSEwfWZ1bmN0aW9uIHIoZSl7cmV0dXJuXCJcIj09ZSYmbi5jYWxsKHRoaXMpLGUudG9Mb3dlckNhc2UoKX1mdW5jdGlvbiBvKGUpe3ZhciB0PWUuY2hhckNvZGVBdCgwKTtyZXR1cm4gdD4zMiYmMTI3PnQmJi0xPT1bMzQsMzUsNjAsNjIsNjMsOTZdLmluZGV4T2YodCk/ZTplbmNvZGVVUklDb21wb25lbnQoZSl9ZnVuY3Rpb24gaShlKXt2YXIgdD1lLmNoYXJDb2RlQXQoMCk7cmV0dXJuIHQ+MzImJjEyNz50JiYtMT09WzM0LDM1LDYwLDYyLDk2XS5pbmRleE9mKHQpP2U6ZW5jb2RlVVJJQ29tcG9uZW50KGUpfWZ1bmN0aW9uIGEoZSxhLHMpe2Z1bmN0aW9uIGMoZSl7Yi5wdXNoKGUpfXZhciBsPWF8fFwic2NoZW1lIHN0YXJ0XCIsdT0wLGQ9XCJcIix2PSExLGc9ITEsYj1bXTtlOmZvcig7KGVbdS0xXSE9Znx8MD09dSkmJiF0aGlzLl9pc0ludmFsaWQ7KXt2YXIgeT1lW3VdO3N3aXRjaChsKXtjYXNlXCJzY2hlbWUgc3RhcnRcIjppZigheXx8IW0udGVzdCh5KSl7aWYoYSl7YyhcIkludmFsaWQgc2NoZW1lLlwiKTticmVhayBlfWQ9XCJcIixsPVwibm8gc2NoZW1lXCI7Y29udGludWV9ZCs9eS50b0xvd2VyQ2FzZSgpLGw9XCJzY2hlbWVcIjticmVhaztjYXNlXCJzY2hlbWVcIjppZih5JiZ3LnRlc3QoeSkpZCs9eS50b0xvd2VyQ2FzZSgpO2Vsc2V7aWYoXCI6XCIhPXkpe2lmKGEpe2lmKGY9PXkpYnJlYWsgZTtjKFwiQ29kZSBwb2ludCBub3QgYWxsb3dlZCBpbiBzY2hlbWU6IFwiK3kpO2JyZWFrIGV9ZD1cIlwiLHU9MCxsPVwibm8gc2NoZW1lXCI7Y29udGludWV9aWYodGhpcy5fc2NoZW1lPWQsZD1cIlwiLGEpYnJlYWsgZTt0KHRoaXMuX3NjaGVtZSkmJih0aGlzLl9pc1JlbGF0aXZlPSEwKSxsPVwiZmlsZVwiPT10aGlzLl9zY2hlbWU/XCJyZWxhdGl2ZVwiOnRoaXMuX2lzUmVsYXRpdmUmJnMmJnMuX3NjaGVtZT09dGhpcy5fc2NoZW1lP1wicmVsYXRpdmUgb3IgYXV0aG9yaXR5XCI6dGhpcy5faXNSZWxhdGl2ZT9cImF1dGhvcml0eSBmaXJzdCBzbGFzaFwiOlwic2NoZW1lIGRhdGFcIn1icmVhaztjYXNlXCJzY2hlbWUgZGF0YVwiOlwiP1wiPT15Pyh0aGlzLl9xdWVyeT1cIj9cIixsPVwicXVlcnlcIik6XCIjXCI9PXk/KHRoaXMuX2ZyYWdtZW50PVwiI1wiLGw9XCJmcmFnbWVudFwiKTpmIT15JiZcIiBcIiE9eSYmXCJcXG5cIiE9eSYmXCJcXHJcIiE9eSYmKHRoaXMuX3NjaGVtZURhdGErPW8oeSkpO2JyZWFrO2Nhc2VcIm5vIHNjaGVtZVwiOmlmKHMmJnQocy5fc2NoZW1lKSl7bD1cInJlbGF0aXZlXCI7Y29udGludWV9YyhcIk1pc3Npbmcgc2NoZW1lLlwiKSxuLmNhbGwodGhpcyk7YnJlYWs7Y2FzZVwicmVsYXRpdmUgb3IgYXV0aG9yaXR5XCI6aWYoXCIvXCIhPXl8fFwiL1wiIT1lW3UrMV0pe2MoXCJFeHBlY3RlZCAvLCBnb3Q6IFwiK3kpLGw9XCJyZWxhdGl2ZVwiO2NvbnRpbnVlfWw9XCJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXNcIjticmVhaztjYXNlXCJyZWxhdGl2ZVwiOmlmKHRoaXMuX2lzUmVsYXRpdmU9ITAsXCJmaWxlXCIhPXRoaXMuX3NjaGVtZSYmKHRoaXMuX3NjaGVtZT1zLl9zY2hlbWUpLGY9PXkpe3RoaXMuX2hvc3Q9cy5faG9zdCx0aGlzLl9wb3J0PXMuX3BvcnQsdGhpcy5fcGF0aD1zLl9wYXRoLnNsaWNlKCksdGhpcy5fcXVlcnk9cy5fcXVlcnksdGhpcy5fdXNlcm5hbWU9cy5fdXNlcm5hbWUsdGhpcy5fcGFzc3dvcmQ9cy5fcGFzc3dvcmQ7YnJlYWsgZX1pZihcIi9cIj09eXx8XCJcXFxcXCI9PXkpXCJcXFxcXCI9PXkmJmMoXCJcXFxcIGlzIGFuIGludmFsaWQgY29kZSBwb2ludC5cIiksbD1cInJlbGF0aXZlIHNsYXNoXCI7ZWxzZSBpZihcIj9cIj09eSl0aGlzLl9ob3N0PXMuX2hvc3QsdGhpcy5fcG9ydD1zLl9wb3J0LHRoaXMuX3BhdGg9cy5fcGF0aC5zbGljZSgpLHRoaXMuX3F1ZXJ5PVwiP1wiLHRoaXMuX3VzZXJuYW1lPXMuX3VzZXJuYW1lLHRoaXMuX3Bhc3N3b3JkPXMuX3Bhc3N3b3JkLGw9XCJxdWVyeVwiO2Vsc2V7aWYoXCIjXCIhPXkpe3ZhciBFPWVbdSsxXSxfPWVbdSsyXTsoXCJmaWxlXCIhPXRoaXMuX3NjaGVtZXx8IW0udGVzdCh5KXx8XCI6XCIhPUUmJlwifFwiIT1FfHxmIT1fJiZcIi9cIiE9XyYmXCJcXFxcXCIhPV8mJlwiP1wiIT1fJiZcIiNcIiE9XykmJih0aGlzLl9ob3N0PXMuX2hvc3QsdGhpcy5fcG9ydD1zLl9wb3J0LHRoaXMuX3VzZXJuYW1lPXMuX3VzZXJuYW1lLHRoaXMuX3Bhc3N3b3JkPXMuX3Bhc3N3b3JkLHRoaXMuX3BhdGg9cy5fcGF0aC5zbGljZSgpLHRoaXMuX3BhdGgucG9wKCkpLGw9XCJyZWxhdGl2ZSBwYXRoXCI7Y29udGludWV9dGhpcy5faG9zdD1zLl9ob3N0LHRoaXMuX3BvcnQ9cy5fcG9ydCx0aGlzLl9wYXRoPXMuX3BhdGguc2xpY2UoKSx0aGlzLl9xdWVyeT1zLl9xdWVyeSx0aGlzLl9mcmFnbWVudD1cIiNcIix0aGlzLl91c2VybmFtZT1zLl91c2VybmFtZSx0aGlzLl9wYXNzd29yZD1zLl9wYXNzd29yZCxsPVwiZnJhZ21lbnRcIn1icmVhaztjYXNlXCJyZWxhdGl2ZSBzbGFzaFwiOmlmKFwiL1wiIT15JiZcIlxcXFxcIiE9eSl7XCJmaWxlXCIhPXRoaXMuX3NjaGVtZSYmKHRoaXMuX2hvc3Q9cy5faG9zdCx0aGlzLl9wb3J0PXMuX3BvcnQsdGhpcy5fdXNlcm5hbWU9cy5fdXNlcm5hbWUsdGhpcy5fcGFzc3dvcmQ9cy5fcGFzc3dvcmQpLGw9XCJyZWxhdGl2ZSBwYXRoXCI7Y29udGludWV9XCJcXFxcXCI9PXkmJmMoXCJcXFxcIGlzIGFuIGludmFsaWQgY29kZSBwb2ludC5cIiksbD1cImZpbGVcIj09dGhpcy5fc2NoZW1lP1wiZmlsZSBob3N0XCI6XCJhdXRob3JpdHkgaWdub3JlIHNsYXNoZXNcIjticmVhaztjYXNlXCJhdXRob3JpdHkgZmlyc3Qgc2xhc2hcIjppZihcIi9cIiE9eSl7YyhcIkV4cGVjdGVkICcvJywgZ290OiBcIit5KSxsPVwiYXV0aG9yaXR5IGlnbm9yZSBzbGFzaGVzXCI7Y29udGludWV9bD1cImF1dGhvcml0eSBzZWNvbmQgc2xhc2hcIjticmVhaztjYXNlXCJhdXRob3JpdHkgc2Vjb25kIHNsYXNoXCI6aWYobD1cImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlc1wiLFwiL1wiIT15KXtjKFwiRXhwZWN0ZWQgJy8nLCBnb3Q6IFwiK3kpO2NvbnRpbnVlfWJyZWFrO2Nhc2VcImF1dGhvcml0eSBpZ25vcmUgc2xhc2hlc1wiOmlmKFwiL1wiIT15JiZcIlxcXFxcIiE9eSl7bD1cImF1dGhvcml0eVwiO2NvbnRpbnVlfWMoXCJFeHBlY3RlZCBhdXRob3JpdHksIGdvdDogXCIreSk7YnJlYWs7Y2FzZVwiYXV0aG9yaXR5XCI6aWYoXCJAXCI9PXkpe3YmJihjKFwiQCBhbHJlYWR5IHNlZW4uXCIpLGQrPVwiJTQwXCIpLHY9ITA7Zm9yKHZhciBTPTA7UzxkLmxlbmd0aDtTKyspe3ZhciBUPWRbU107aWYoXCIgICBcIiE9VCYmXCJcXG5cIiE9VCYmXCJcXHJcIiE9VClpZihcIjpcIiE9VHx8bnVsbCE9PXRoaXMuX3Bhc3N3b3JkKXt2YXIgTT1vKFQpO251bGwhPT10aGlzLl9wYXNzd29yZD90aGlzLl9wYXNzd29yZCs9TTp0aGlzLl91c2VybmFtZSs9TX1lbHNlIHRoaXMuX3Bhc3N3b3JkPVwiXCI7ZWxzZSBjKFwiSW52YWxpZCB3aGl0ZXNwYWNlIGluIGF1dGhvcml0eS5cIil9ZD1cIlwifWVsc2V7aWYoZj09eXx8XCIvXCI9PXl8fFwiXFxcXFwiPT15fHxcIj9cIj09eXx8XCIjXCI9PXkpe3UtPWQubGVuZ3RoLGQ9XCJcIixsPVwiaG9zdFwiO2NvbnRpbnVlfWQrPXl9YnJlYWs7Y2FzZVwiZmlsZSBob3N0XCI6aWYoZj09eXx8XCIvXCI9PXl8fFwiXFxcXFwiPT15fHxcIj9cIj09eXx8XCIjXCI9PXkpezIhPWQubGVuZ3RofHwhbS50ZXN0KGRbMF0pfHxcIjpcIiE9ZFsxXSYmXCJ8XCIhPWRbMV0/MD09ZC5sZW5ndGg/bD1cInJlbGF0aXZlIHBhdGggc3RhcnRcIjoodGhpcy5faG9zdD1yLmNhbGwodGhpcyxkKSxkPVwiXCIsbD1cInJlbGF0aXZlIHBhdGggc3RhcnRcIik6bD1cInJlbGF0aXZlIHBhdGhcIjtjb250aW51ZX1cIiAgXCI9PXl8fFwiXFxuXCI9PXl8fFwiXFxyXCI9PXk/YyhcIkludmFsaWQgd2hpdGVzcGFjZSBpbiBmaWxlIGhvc3QuXCIpOmQrPXk7YnJlYWs7Y2FzZVwiaG9zdFwiOmNhc2VcImhvc3RuYW1lXCI6aWYoXCI6XCIhPXl8fGcpe2lmKGY9PXl8fFwiL1wiPT15fHxcIlxcXFxcIj09eXx8XCI/XCI9PXl8fFwiI1wiPT15KXtpZih0aGlzLl9ob3N0PXIuY2FsbCh0aGlzLGQpLGQ9XCJcIixsPVwicmVsYXRpdmUgcGF0aCBzdGFydFwiLGEpYnJlYWsgZTtjb250aW51ZX1cIiAgICBcIiE9eSYmXCJcXG5cIiE9eSYmXCJcXHJcIiE9eT8oXCJbXCI9PXk/Zz0hMDpcIl1cIj09eSYmKGc9ITEpLGQrPXkpOmMoXCJJbnZhbGlkIGNvZGUgcG9pbnQgaW4gaG9zdC9ob3N0bmFtZTogXCIreSl9ZWxzZSBpZih0aGlzLl9ob3N0PXIuY2FsbCh0aGlzLGQpLGQ9XCJcIixsPVwicG9ydFwiLFwiaG9zdG5hbWVcIj09YSlicmVhayBlO2JyZWFrO2Nhc2VcInBvcnRcIjppZigvWzAtOV0vLnRlc3QoeSkpZCs9eTtlbHNle2lmKGY9PXl8fFwiL1wiPT15fHxcIlxcXFxcIj09eXx8XCI/XCI9PXl8fFwiI1wiPT15fHxhKXtpZihcIlwiIT1kKXt2YXIgTz1wYXJzZUludChkLDEwKTtPIT1wW3RoaXMuX3NjaGVtZV0mJih0aGlzLl9wb3J0PU8rXCJcIiksZD1cIlwifWlmKGEpYnJlYWsgZTtsPVwicmVsYXRpdmUgcGF0aCBzdGFydFwiO2NvbnRpbnVlfVwiICAgIFwiPT15fHxcIlxcblwiPT15fHxcIlxcclwiPT15P2MoXCJJbnZhbGlkIGNvZGUgcG9pbnQgaW4gcG9ydDogXCIreSk6bi5jYWxsKHRoaXMpfWJyZWFrO2Nhc2VcInJlbGF0aXZlIHBhdGggc3RhcnRcIjppZihcIlxcXFxcIj09eSYmYyhcIidcXFxcJyBub3QgYWxsb3dlZCBpbiBwYXRoLlwiKSxsPVwicmVsYXRpdmUgcGF0aFwiLFwiL1wiIT15JiZcIlxcXFxcIiE9eSljb250aW51ZTticmVhaztjYXNlXCJyZWxhdGl2ZSBwYXRoXCI6aWYoZiE9eSYmXCIvXCIhPXkmJlwiXFxcXFwiIT15JiYoYXx8XCI/XCIhPXkmJlwiI1wiIT15KSlcIiBcIiE9eSYmXCJcXG5cIiE9eSYmXCJcXHJcIiE9eSYmKGQrPW8oeSkpO2Vsc2V7XCJcXFxcXCI9PXkmJmMoXCJcXFxcIG5vdCBhbGxvd2VkIGluIHJlbGF0aXZlIHBhdGguXCIpO3ZhciBMOyhMPWhbZC50b0xvd2VyQ2FzZSgpXSkmJihkPUwpLFwiLi5cIj09ZD8odGhpcy5fcGF0aC5wb3AoKSxcIi9cIiE9eSYmXCJcXFxcXCIhPXkmJnRoaXMuX3BhdGgucHVzaChcIlwiKSk6XCIuXCI9PWQmJlwiL1wiIT15JiZcIlxcXFxcIiE9eT90aGlzLl9wYXRoLnB1c2goXCJcIik6XCIuXCIhPWQmJihcImZpbGVcIj09dGhpcy5fc2NoZW1lJiYwPT10aGlzLl9wYXRoLmxlbmd0aCYmMj09ZC5sZW5ndGgmJm0udGVzdChkWzBdKSYmXCJ8XCI9PWRbMV0mJihkPWRbMF0rXCI6XCIpLHRoaXMuX3BhdGgucHVzaChkKSksZD1cIlwiLFwiP1wiPT15Pyh0aGlzLl9xdWVyeT1cIj9cIixsPVwicXVlcnlcIik6XCIjXCI9PXkmJih0aGlzLl9mcmFnbWVudD1cIiNcIixsPVwiZnJhZ21lbnRcIil9YnJlYWs7Y2FzZVwicXVlcnlcIjphfHxcIiNcIiE9eT9mIT15JiZcIiBcIiE9eSYmXCJcXG5cIiE9eSYmXCJcXHJcIiE9eSYmKHRoaXMuX3F1ZXJ5Kz1pKHkpKToodGhpcy5fZnJhZ21lbnQ9XCIjXCIsbD1cImZyYWdtZW50XCIpO2JyZWFrO2Nhc2VcImZyYWdtZW50XCI6ZiE9eSYmXCIgIFwiIT15JiZcIlxcblwiIT15JiZcIlxcclwiIT15JiYodGhpcy5fZnJhZ21lbnQrPXkpfXUrK319ZnVuY3Rpb24gcygpe3RoaXMuX3NjaGVtZT1cIlwiLHRoaXMuX3NjaGVtZURhdGE9XCJcIix0aGlzLl91c2VybmFtZT1cIlwiLHRoaXMuX3Bhc3N3b3JkPW51bGwsdGhpcy5faG9zdD1cIlwiLHRoaXMuX3BvcnQ9XCJcIix0aGlzLl9wYXRoPVtdLHRoaXMuX3F1ZXJ5PVwiXCIsdGhpcy5fZnJhZ21lbnQ9XCJcIix0aGlzLl9pc0ludmFsaWQ9ITEsdGhpcy5faXNSZWxhdGl2ZT0hMX1mdW5jdGlvbiBjKGUsdCl7dm9pZCAwPT09dHx8dCBpbnN0YW5jZW9mIGN8fCh0PW5ldyBjKFN0cmluZyh0KSkpLHRoaXMuX3VybD1lLHMuY2FsbCh0aGlzKTt2YXIgbj1lLnJlcGxhY2UoL15bIFxcdFxcclxcblxcZl0rfFsgXFx0XFxyXFxuXFxmXSskL2csXCJcIik7YS5jYWxsKHRoaXMsbixudWxsLHQpfXZhciBsPSExO2lmKCFlLmZvcmNlSlVSTCl0cnl7dmFyIHU9bmV3IFVSTChcImJcIixcImh0dHA6Ly9hXCIpO3UucGF0aG5hbWU9XCJjJTIwZFwiLGw9XCJodHRwOi8vYS9jJTIwZFwiPT09dS5ocmVmfWNhdGNoKGQpe31pZighbCl7dmFyIHA9T2JqZWN0LmNyZWF0ZShudWxsKTtwLmZ0cD0yMSxwLmZpbGU9MCxwLmdvcGhlcj03MCxwLmh0dHA9ODAscC5odHRwcz00NDMscC53cz04MCxwLndzcz00NDM7dmFyIGg9T2JqZWN0LmNyZWF0ZShudWxsKTtoW1wiJTJlXCJdPVwiLlwiLGhbXCIuJTJlXCJdPVwiLi5cIixoW1wiJTJlLlwiXT1cIi4uXCIsaFtcIiUyZSUyZVwiXT1cIi4uXCI7dmFyIGY9dm9pZCAwLG09L1thLXpBLVpdLyx3PS9bYS16QS1aMC05XFwrXFwtXFwuXS87Yy5wcm90b3R5cGU9e3RvU3RyaW5nOmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuaHJlZn0sZ2V0IGhyZWYoKXtpZih0aGlzLl9pc0ludmFsaWQpcmV0dXJuIHRoaXMuX3VybDt2YXIgZT1cIlwiO3JldHVybihcIlwiIT10aGlzLl91c2VybmFtZXx8bnVsbCE9dGhpcy5fcGFzc3dvcmQpJiYoZT10aGlzLl91c2VybmFtZSsobnVsbCE9dGhpcy5fcGFzc3dvcmQ/XCI6XCIrdGhpcy5fcGFzc3dvcmQ6XCJcIikrXCJAXCIpLHRoaXMucHJvdG9jb2wrKHRoaXMuX2lzUmVsYXRpdmU/XCIvL1wiK2UrdGhpcy5ob3N0OlwiXCIpK3RoaXMucGF0aG5hbWUrdGhpcy5fcXVlcnkrdGhpcy5fZnJhZ21lbnR9LHNldCBocmVmKGUpe3MuY2FsbCh0aGlzKSxhLmNhbGwodGhpcyxlKX0sZ2V0IHByb3RvY29sKCl7cmV0dXJuIHRoaXMuX3NjaGVtZStcIjpcIn0sc2V0IHByb3RvY29sKGUpe3RoaXMuX2lzSW52YWxpZHx8YS5jYWxsKHRoaXMsZStcIjpcIixcInNjaGVtZSBzdGFydFwiKX0sZ2V0IGhvc3QoKXtyZXR1cm4gdGhpcy5faXNJbnZhbGlkP1wiXCI6dGhpcy5fcG9ydD90aGlzLl9ob3N0K1wiOlwiK3RoaXMuX3BvcnQ6dGhpcy5faG9zdH0sc2V0IGhvc3QoZSl7IXRoaXMuX2lzSW52YWxpZCYmdGhpcy5faXNSZWxhdGl2ZSYmYS5jYWxsKHRoaXMsZSxcImhvc3RcIil9LGdldCBob3N0bmFtZSgpe3JldHVybiB0aGlzLl9ob3N0fSxzZXQgaG9zdG5hbWUoZSl7IXRoaXMuX2lzSW52YWxpZCYmdGhpcy5faXNSZWxhdGl2ZSYmYS5jYWxsKHRoaXMsZSxcImhvc3RuYW1lXCIpfSxnZXQgcG9ydCgpe3JldHVybiB0aGlzLl9wb3J0fSxzZXQgcG9ydChlKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiZhLmNhbGwodGhpcyxlLFwicG9ydFwiKX0sZ2V0IHBhdGhuYW1lKCl7cmV0dXJuIHRoaXMuX2lzSW52YWxpZD9cIlwiOnRoaXMuX2lzUmVsYXRpdmU/XCIvXCIrdGhpcy5fcGF0aC5qb2luKFwiL1wiKTp0aGlzLl9zY2hlbWVEYXRhfSxzZXQgcGF0aG5hbWUoZSl7IXRoaXMuX2lzSW52YWxpZCYmdGhpcy5faXNSZWxhdGl2ZSYmKHRoaXMuX3BhdGg9W10sYS5jYWxsKHRoaXMsZSxcInJlbGF0aXZlIHBhdGggc3RhcnRcIikpfSxnZXQgc2VhcmNoKCl7cmV0dXJuIHRoaXMuX2lzSW52YWxpZHx8IXRoaXMuX3F1ZXJ5fHxcIj9cIj09dGhpcy5fcXVlcnk/XCJcIjp0aGlzLl9xdWVyeX0sc2V0IHNlYXJjaChlKXshdGhpcy5faXNJbnZhbGlkJiZ0aGlzLl9pc1JlbGF0aXZlJiYodGhpcy5fcXVlcnk9XCI/XCIsXCI/XCI9PWVbMF0mJihlPWUuc2xpY2UoMSkpLGEuY2FsbCh0aGlzLGUsXCJxdWVyeVwiKSl9LGdldCBoYXNoKCl7cmV0dXJuIHRoaXMuX2lzSW52YWxpZHx8IXRoaXMuX2ZyYWdtZW50fHxcIiNcIj09dGhpcy5fZnJhZ21lbnQ/XCJcIjp0aGlzLl9mcmFnbWVudH0sc2V0IGhhc2goZSl7dGhpcy5faXNJbnZhbGlkfHwodGhpcy5fZnJhZ21lbnQ9XCIjXCIsXCIjXCI9PWVbMF0mJihlPWUuc2xpY2UoMSkpLGEuY2FsbCh0aGlzLGUsXCJmcmFnbWVudFwiKSl9LGdldCBvcmlnaW4oKXt2YXIgZTtpZih0aGlzLl9pc0ludmFsaWR8fCF0aGlzLl9zY2hlbWUpcmV0dXJuXCJcIjtzd2l0Y2godGhpcy5fc2NoZW1lKXtjYXNlXCJkYXRhXCI6Y2FzZVwiZmlsZVwiOmNhc2VcImphdmFzY3JpcHRcIjpjYXNlXCJtYWlsdG9cIjpyZXR1cm5cIm51bGxcIn1yZXR1cm4gZT10aGlzLmhvc3QsZT90aGlzLl9zY2hlbWUrXCI6Ly9cIitlOlwiXCJ9fTt2YXIgdj1lLlVSTDt2JiYoYy5jcmVhdGVPYmplY3RVUkw9ZnVuY3Rpb24oZSl7cmV0dXJuIHYuY3JlYXRlT2JqZWN0VVJMLmFwcGx5KHYsYXJndW1lbnRzKX0sYy5yZXZva2VPYmplY3RVUkw9ZnVuY3Rpb24oZSl7di5yZXZva2VPYmplY3RVUkwoZSl9KSxlLlVSTD1jfX0oc2VsZiksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlKXt5LnB1c2goZSksYnx8KGI9ITAsbShyKSl9ZnVuY3Rpb24gbihlKXtyZXR1cm4gd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsJiZ3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwud3JhcElmTmVlZGVkKGUpfHxlfWZ1bmN0aW9uIHIoKXtiPSExO3ZhciBlPXk7eT1bXSxlLnNvcnQoZnVuY3Rpb24oZSx0KXtyZXR1cm4gZS51aWRfLXQudWlkX30pO3ZhciB0PSExO2UuZm9yRWFjaChmdW5jdGlvbihlKXt2YXIgbj1lLnRha2VSZWNvcmRzKCk7byhlKSxuLmxlbmd0aCYmKGUuY2FsbGJhY2tfKG4sZSksdD0hMCl9KSx0JiZyKCl9ZnVuY3Rpb24gbyhlKXtlLm5vZGVzXy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3ZhciBuPXcuZ2V0KHQpO24mJm4uZm9yRWFjaChmdW5jdGlvbih0KXt0Lm9ic2VydmVyPT09ZSYmdC5yZW1vdmVUcmFuc2llbnRPYnNlcnZlcnMoKX0pfSl9ZnVuY3Rpb24gaShlLHQpe2Zvcih2YXIgbj1lO247bj1uLnBhcmVudE5vZGUpe3ZhciByPXcuZ2V0KG4pO2lmKHIpZm9yKHZhciBvPTA7bzxyLmxlbmd0aDtvKyspe3ZhciBpPXJbb10sYT1pLm9wdGlvbnM7aWYobj09PWV8fGEuc3VidHJlZSl7dmFyIHM9dChhKTtzJiZpLmVucXVldWUocyl9fX19ZnVuY3Rpb24gYShlKXt0aGlzLmNhbGxiYWNrXz1lLHRoaXMubm9kZXNfPVtdLHRoaXMucmVjb3Jkc189W10sdGhpcy51aWRfPSsrRX1mdW5jdGlvbiBzKGUsdCl7dGhpcy50eXBlPWUsdGhpcy50YXJnZXQ9dCx0aGlzLmFkZGVkTm9kZXM9W10sdGhpcy5yZW1vdmVkTm9kZXM9W10sdGhpcy5wcmV2aW91c1NpYmxpbmc9bnVsbCx0aGlzLm5leHRTaWJsaW5nPW51bGwsdGhpcy5hdHRyaWJ1dGVOYW1lPW51bGwsdGhpcy5hdHRyaWJ1dGVOYW1lc3BhY2U9bnVsbCx0aGlzLm9sZFZhbHVlPW51bGx9ZnVuY3Rpb24gYyhlKXt2YXIgdD1uZXcgcyhlLnR5cGUsZS50YXJnZXQpO3JldHVybiB0LmFkZGVkTm9kZXM9ZS5hZGRlZE5vZGVzLnNsaWNlKCksdC5yZW1vdmVkTm9kZXM9ZS5yZW1vdmVkTm9kZXMuc2xpY2UoKSx0LnByZXZpb3VzU2libGluZz1lLnByZXZpb3VzU2libGluZyx0Lm5leHRTaWJsaW5nPWUubmV4dFNpYmxpbmcsdC5hdHRyaWJ1dGVOYW1lPWUuYXR0cmlidXRlTmFtZSx0LmF0dHJpYnV0ZU5hbWVzcGFjZT1lLmF0dHJpYnV0ZU5hbWVzcGFjZSx0Lm9sZFZhbHVlPWUub2xkVmFsdWUsdH1mdW5jdGlvbiBsKGUsdCl7cmV0dXJuIF89bmV3IHMoZSx0KX1mdW5jdGlvbiB1KGUpe3JldHVybiBTP1M6KFM9YyhfKSxTLm9sZFZhbHVlPWUsUyl9ZnVuY3Rpb24gZCgpe189Uz12b2lkIDB9ZnVuY3Rpb24gcChlKXtyZXR1cm4gZT09PVN8fGU9PT1ffWZ1bmN0aW9uIGgoZSx0KXtyZXR1cm4gZT09PXQ/ZTpTJiZwKGUpP1M6bnVsbH1mdW5jdGlvbiBmKGUsdCxuKXt0aGlzLm9ic2VydmVyPWUsdGhpcy50YXJnZXQ9dCx0aGlzLm9wdGlvbnM9bix0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM9W119dmFyIG0sdz1uZXcgV2Vha01hcDtpZigvVHJpZGVudHxFZGdlLy50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpKW09c2V0VGltZW91dDtlbHNlIGlmKHdpbmRvdy5zZXRJbW1lZGlhdGUpbT13aW5kb3cuc2V0SW1tZWRpYXRlO2Vsc2V7dmFyIHY9W10sZz1TdHJpbmcoTWF0aC5yYW5kb20oKSk7d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXCJtZXNzYWdlXCIsZnVuY3Rpb24oZSl7aWYoZS5kYXRhPT09Zyl7dmFyIHQ9djt2PVtdLHQuZm9yRWFjaChmdW5jdGlvbihlKXtlKCl9KX19KSxtPWZ1bmN0aW9uKGUpe3YucHVzaChlKSx3aW5kb3cucG9zdE1lc3NhZ2UoZyxcIipcIil9fXZhciBiPSExLHk9W10sRT0wO2EucHJvdG90eXBlPXtvYnNlcnZlOmZ1bmN0aW9uKGUsdCl7aWYoZT1uKGUpLCF0LmNoaWxkTGlzdCYmIXQuYXR0cmlidXRlcyYmIXQuY2hhcmFjdGVyRGF0YXx8dC5hdHRyaWJ1dGVPbGRWYWx1ZSYmIXQuYXR0cmlidXRlc3x8dC5hdHRyaWJ1dGVGaWx0ZXImJnQuYXR0cmlidXRlRmlsdGVyLmxlbmd0aCYmIXQuYXR0cmlidXRlc3x8dC5jaGFyYWN0ZXJEYXRhT2xkVmFsdWUmJiF0LmNoYXJhY3RlckRhdGEpdGhyb3cgbmV3IFN5bnRheEVycm9yO3ZhciByPXcuZ2V0KGUpO3J8fHcuc2V0KGUscj1bXSk7Zm9yKHZhciBvLGk9MDtpPHIubGVuZ3RoO2krKylpZihyW2ldLm9ic2VydmVyPT09dGhpcyl7bz1yW2ldLG8ucmVtb3ZlTGlzdGVuZXJzKCksby5vcHRpb25zPXQ7YnJlYWt9b3x8KG89bmV3IGYodGhpcyxlLHQpLHIucHVzaChvKSx0aGlzLm5vZGVzXy5wdXNoKGUpKSxvLmFkZExpc3RlbmVycygpfSxkaXNjb25uZWN0OmZ1bmN0aW9uKCl7dGhpcy5ub2Rlc18uZm9yRWFjaChmdW5jdGlvbihlKXtmb3IodmFyIHQ9dy5nZXQoZSksbj0wO248dC5sZW5ndGg7bisrKXt2YXIgcj10W25dO2lmKHIub2JzZXJ2ZXI9PT10aGlzKXtyLnJlbW92ZUxpc3RlbmVycygpLHQuc3BsaWNlKG4sMSk7YnJlYWt9fX0sdGhpcyksdGhpcy5yZWNvcmRzXz1bXX0sdGFrZVJlY29yZHM6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLnJlY29yZHNfO3JldHVybiB0aGlzLnJlY29yZHNfPVtdLGV9fTt2YXIgXyxTO2YucHJvdG90eXBlPXtlbnF1ZXVlOmZ1bmN0aW9uKGUpe3ZhciBuPXRoaXMub2JzZXJ2ZXIucmVjb3Jkc18scj1uLmxlbmd0aDtpZihuLmxlbmd0aD4wKXt2YXIgbz1uW3ItMV0saT1oKG8sZSk7aWYoaSlyZXR1cm4gdm9pZChuW3ItMV09aSl9ZWxzZSB0KHRoaXMub2JzZXJ2ZXIpO25bcl09ZX0sYWRkTGlzdGVuZXJzOmZ1bmN0aW9uKCl7dGhpcy5hZGRMaXN0ZW5lcnNfKHRoaXMudGFyZ2V0KX0sYWRkTGlzdGVuZXJzXzpmdW5jdGlvbihlKXt2YXIgdD10aGlzLm9wdGlvbnM7dC5hdHRyaWJ1dGVzJiZlLmFkZEV2ZW50TGlzdGVuZXIoXCJET01BdHRyTW9kaWZpZWRcIix0aGlzLCEwKSx0LmNoYXJhY3RlckRhdGEmJmUuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTUNoYXJhY3RlckRhdGFNb2RpZmllZFwiLHRoaXMsITApLHQuY2hpbGRMaXN0JiZlLmFkZEV2ZW50TGlzdGVuZXIoXCJET01Ob2RlSW5zZXJ0ZWRcIix0aGlzLCEwKSwodC5jaGlsZExpc3R8fHQuc3VidHJlZSkmJmUuYWRkRXZlbnRMaXN0ZW5lcihcIkRPTU5vZGVSZW1vdmVkXCIsdGhpcywhMCl9LHJlbW92ZUxpc3RlbmVyczpmdW5jdGlvbigpe3RoaXMucmVtb3ZlTGlzdGVuZXJzXyh0aGlzLnRhcmdldCl9LHJlbW92ZUxpc3RlbmVyc186ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5vcHRpb25zO3QuYXR0cmlidXRlcyYmZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NQXR0ck1vZGlmaWVkXCIsdGhpcywhMCksdC5jaGFyYWN0ZXJEYXRhJiZlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01DaGFyYWN0ZXJEYXRhTW9kaWZpZWRcIix0aGlzLCEwKSx0LmNoaWxkTGlzdCYmZS5yZW1vdmVFdmVudExpc3RlbmVyKFwiRE9NTm9kZUluc2VydGVkXCIsdGhpcywhMCksKHQuY2hpbGRMaXN0fHx0LnN1YnRyZWUpJiZlLnJlbW92ZUV2ZW50TGlzdGVuZXIoXCJET01Ob2RlUmVtb3ZlZFwiLHRoaXMsITApfSxhZGRUcmFuc2llbnRPYnNlcnZlcjpmdW5jdGlvbihlKXtpZihlIT09dGhpcy50YXJnZXQpe3RoaXMuYWRkTGlzdGVuZXJzXyhlKSx0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXMucHVzaChlKTt2YXIgdD13LmdldChlKTt0fHx3LnNldChlLHQ9W10pLHQucHVzaCh0aGlzKX19LHJlbW92ZVRyYW5zaWVudE9ic2VydmVyczpmdW5jdGlvbigpe3ZhciBlPXRoaXMudHJhbnNpZW50T2JzZXJ2ZWROb2Rlczt0aGlzLnRyYW5zaWVudE9ic2VydmVkTm9kZXM9W10sZS5mb3JFYWNoKGZ1bmN0aW9uKGUpe3RoaXMucmVtb3ZlTGlzdGVuZXJzXyhlKTtmb3IodmFyIHQ9dy5nZXQoZSksbj0wO248dC5sZW5ndGg7bisrKWlmKHRbbl09PT10aGlzKXt0LnNwbGljZShuLDEpO2JyZWFrfX0sdGhpcyl9LGhhbmRsZUV2ZW50OmZ1bmN0aW9uKGUpe3N3aXRjaChlLnN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbigpLGUudHlwZSl7Y2FzZVwiRE9NQXR0ck1vZGlmaWVkXCI6dmFyIHQ9ZS5hdHRyTmFtZSxuPWUucmVsYXRlZE5vZGUubmFtZXNwYWNlVVJJLHI9ZS50YXJnZXQsbz1uZXcgbChcImF0dHJpYnV0ZXNcIixyKTtvLmF0dHJpYnV0ZU5hbWU9dCxvLmF0dHJpYnV0ZU5hbWVzcGFjZT1uO3ZhciBhPWUuYXR0ckNoYW5nZT09PU11dGF0aW9uRXZlbnQuQURESVRJT04/bnVsbDplLnByZXZWYWx1ZTtpKHIsZnVuY3Rpb24oZSl7cmV0dXJuIWUuYXR0cmlidXRlc3x8ZS5hdHRyaWJ1dGVGaWx0ZXImJmUuYXR0cmlidXRlRmlsdGVyLmxlbmd0aCYmLTE9PT1lLmF0dHJpYnV0ZUZpbHRlci5pbmRleE9mKHQpJiYtMT09PWUuYXR0cmlidXRlRmlsdGVyLmluZGV4T2Yobik/dm9pZCAwOmUuYXR0cmlidXRlT2xkVmFsdWU/dShhKTpvfSk7YnJlYWs7Y2FzZVwiRE9NQ2hhcmFjdGVyRGF0YU1vZGlmaWVkXCI6dmFyIHI9ZS50YXJnZXQsbz1sKFwiY2hhcmFjdGVyRGF0YVwiLHIpLGE9ZS5wcmV2VmFsdWU7aShyLGZ1bmN0aW9uKGUpe3JldHVybiBlLmNoYXJhY3RlckRhdGE/ZS5jaGFyYWN0ZXJEYXRhT2xkVmFsdWU/dShhKTpvOnZvaWQgMH0pO2JyZWFrO2Nhc2VcIkRPTU5vZGVSZW1vdmVkXCI6dGhpcy5hZGRUcmFuc2llbnRPYnNlcnZlcihlLnRhcmdldCk7Y2FzZVwiRE9NTm9kZUluc2VydGVkXCI6dmFyIHMsYyxwPWUudGFyZ2V0O1wiRE9NTm9kZUluc2VydGVkXCI9PT1lLnR5cGU/KHM9W3BdLGM9W10pOihzPVtdLGM9W3BdKTt2YXIgaD1wLnByZXZpb3VzU2libGluZyxmPXAubmV4dFNpYmxpbmcsbz1sKFwiY2hpbGRMaXN0XCIsZS50YXJnZXQucGFyZW50Tm9kZSk7by5hZGRlZE5vZGVzPXMsby5yZW1vdmVkTm9kZXM9YyxvLnByZXZpb3VzU2libGluZz1oLG8ubmV4dFNpYmxpbmc9ZixpKGUucmVsYXRlZE5vZGUsZnVuY3Rpb24oZSl7cmV0dXJuIGUuY2hpbGRMaXN0P286dm9pZCAwfSl9ZCgpfX0sZS5Kc011dGF0aW9uT2JzZXJ2ZXI9YSxlLk11dGF0aW9uT2JzZXJ2ZXJ8fChlLk11dGF0aW9uT2JzZXJ2ZXI9YSl9KHNlbGYpLHdpbmRvdy5IVE1MSW1wb3J0cz13aW5kb3cuSFRNTEltcG9ydHN8fHtmbGFnczp7fX0sZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdChlLHQpe3Q9dHx8ZixyKGZ1bmN0aW9uKCl7aShlLHQpfSx0KX1mdW5jdGlvbiBuKGUpe3JldHVyblwiY29tcGxldGVcIj09PWUucmVhZHlTdGF0ZXx8ZS5yZWFkeVN0YXRlPT09dn1mdW5jdGlvbiByKGUsdCl7aWYobih0KSllJiZlKCk7ZWxzZXt2YXIgbz1mdW5jdGlvbigpeyhcImNvbXBsZXRlXCI9PT10LnJlYWR5U3RhdGV8fHQucmVhZHlTdGF0ZT09PXYpJiYodC5yZW1vdmVFdmVudExpc3RlbmVyKGcsbykscihlLHQpKX07dC5hZGRFdmVudExpc3RlbmVyKGcsbyl9fWZ1bmN0aW9uIG8oZSl7ZS50YXJnZXQuX19sb2FkZWQ9ITB9ZnVuY3Rpb24gaShlLHQpe2Z1bmN0aW9uIG4oKXtjPT1sJiZlJiZlKHthbGxJbXBvcnRzOnMsbG9hZGVkSW1wb3J0czp1LGVycm9ySW1wb3J0czpkfSl9ZnVuY3Rpb24gcihlKXtvKGUpLHUucHVzaCh0aGlzKSxjKyssbigpfWZ1bmN0aW9uIGkoZSl7ZC5wdXNoKHRoaXMpLGMrKyxuKCl9dmFyIHM9dC5xdWVyeVNlbGVjdG9yQWxsKFwibGlua1tyZWw9aW1wb3J0XVwiKSxjPTAsbD1zLmxlbmd0aCx1PVtdLGQ9W107aWYobClmb3IodmFyIHAsaD0wO2w+aCYmKHA9c1toXSk7aCsrKWEocCk/KGMrKyxuKCkpOihwLmFkZEV2ZW50TGlzdGVuZXIoXCJsb2FkXCIscikscC5hZGRFdmVudExpc3RlbmVyKFwiZXJyb3JcIixpKSk7ZWxzZSBuKCl9ZnVuY3Rpb24gYShlKXtyZXR1cm4gZD9lLl9fbG9hZGVkfHxlW1wiaW1wb3J0XCJdJiZcImxvYWRpbmdcIiE9PWVbXCJpbXBvcnRcIl0ucmVhZHlTdGF0ZTplLl9faW1wb3J0UGFyc2VkfWZ1bmN0aW9uIHMoZSl7Zm9yKHZhciB0LG49MCxyPWUubGVuZ3RoO3I+biYmKHQ9ZVtuXSk7bisrKWModCkmJmwodCl9ZnVuY3Rpb24gYyhlKXtyZXR1cm5cImxpbmtcIj09PWUubG9jYWxOYW1lJiZcImltcG9ydFwiPT09ZS5yZWx9ZnVuY3Rpb24gbChlKXt2YXIgdD1lW1wiaW1wb3J0XCJdO3Q/byh7dGFyZ2V0OmV9KTooZS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLG8pLGUuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsbykpfXZhciB1PVwiaW1wb3J0XCIsZD1Cb29sZWFuKHUgaW4gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpbmtcIikpLHA9Qm9vbGVhbih3aW5kb3cuU2hhZG93RE9NUG9seWZpbGwpLGg9ZnVuY3Rpb24oZSl7cmV0dXJuIHA/d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZChlKTplfSxmPWgoZG9jdW1lbnQpLG09e2dldDpmdW5jdGlvbigpe3ZhciBlPXdpbmRvdy5IVE1MSW1wb3J0cy5jdXJyZW50U2NyaXB0fHxkb2N1bWVudC5jdXJyZW50U2NyaXB0fHwoXCJjb21wbGV0ZVwiIT09ZG9jdW1lbnQucmVhZHlTdGF0ZT9kb2N1bWVudC5zY3JpcHRzW2RvY3VtZW50LnNjcmlwdHMubGVuZ3RoLTFdOm51bGwpO3JldHVybiBoKGUpfSxjb25maWd1cmFibGU6ITB9O09iamVjdC5kZWZpbmVQcm9wZXJ0eShkb2N1bWVudCxcIl9jdXJyZW50U2NyaXB0XCIsbSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGYsXCJfY3VycmVudFNjcmlwdFwiLG0pO3ZhciB3PS9UcmlkZW50Ly50ZXN0KG5hdmlnYXRvci51c2VyQWdlbnQpLHY9dz9cImNvbXBsZXRlXCI6XCJpbnRlcmFjdGl2ZVwiLGc9XCJyZWFkeXN0YXRlY2hhbmdlXCI7ZCYmKG5ldyBNdXRhdGlvbk9ic2VydmVyKGZ1bmN0aW9uKGUpe2Zvcih2YXIgdCxuPTAscj1lLmxlbmd0aDtyPm4mJih0PWVbbl0pO24rKyl0LmFkZGVkTm9kZXMmJnModC5hZGRlZE5vZGVzKX0pLm9ic2VydmUoZG9jdW1lbnQuaGVhZCx7Y2hpbGRMaXN0OiEwfSksZnVuY3Rpb24oKXtpZihcImxvYWRpbmdcIj09PWRvY3VtZW50LnJlYWR5U3RhdGUpZm9yKHZhciBlLHQ9ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcImxpbmtbcmVsPWltcG9ydF1cIiksbj0wLHI9dC5sZW5ndGg7cj5uJiYoZT10W25dKTtuKyspbChlKX0oKSksdChmdW5jdGlvbihlKXt3aW5kb3cuSFRNTEltcG9ydHMucmVhZHk9ITAsd2luZG93LkhUTUxJbXBvcnRzLnJlYWR5VGltZT0obmV3IERhdGUpLmdldFRpbWUoKTt2YXIgdD1mLmNyZWF0ZUV2ZW50KFwiQ3VzdG9tRXZlbnRcIik7dC5pbml0Q3VzdG9tRXZlbnQoXCJIVE1MSW1wb3J0c0xvYWRlZFwiLCEwLCEwLGUpLGYuZGlzcGF0Y2hFdmVudCh0KX0pLGUuSU1QT1JUX0xJTktfVFlQRT11LGUudXNlTmF0aXZlPWQsZS5yb290RG9jdW1lbnQ9ZixlLndoZW5SZWFkeT10LGUuaXNJRT13fSh3aW5kb3cuSFRNTEltcG9ydHMpLGZ1bmN0aW9uKGUpe3ZhciB0PVtdLG49ZnVuY3Rpb24oZSl7dC5wdXNoKGUpfSxyPWZ1bmN0aW9uKCl7dC5mb3JFYWNoKGZ1bmN0aW9uKHQpe3QoZSl9KX07ZS5hZGRNb2R1bGU9bixlLmluaXRpYWxpemVNb2R1bGVzPXJ9KHdpbmRvdy5IVE1MSW1wb3J0cyksd2luZG93LkhUTUxJbXBvcnRzLmFkZE1vZHVsZShmdW5jdGlvbihlKXt2YXIgdD0vKHVybFxcKCkoW14pXSopKFxcKSkvZyxuPS8oQGltcG9ydFtcXHNdKyg/IXVybFxcKCkpKFteO10qKSg7KS9nLHI9e3Jlc29sdmVVcmxzSW5TdHlsZTpmdW5jdGlvbihlLHQpe3ZhciBuPWUub3duZXJEb2N1bWVudCxyPW4uY3JlYXRlRWxlbWVudChcImFcIik7cmV0dXJuIGUudGV4dENvbnRlbnQ9dGhpcy5yZXNvbHZlVXJsc0luQ3NzVGV4dChlLnRleHRDb250ZW50LHQsciksZX0scmVzb2x2ZVVybHNJbkNzc1RleHQ6ZnVuY3Rpb24oZSxyLG8pe3ZhciBpPXRoaXMucmVwbGFjZVVybHMoZSxvLHIsdCk7cmV0dXJuIGk9dGhpcy5yZXBsYWNlVXJscyhpLG8scixuKX0scmVwbGFjZVVybHM6ZnVuY3Rpb24oZSx0LG4scil7cmV0dXJuIGUucmVwbGFjZShyLGZ1bmN0aW9uKGUscixvLGkpe3ZhciBhPW8ucmVwbGFjZSgvW1wiJ10vZyxcIlwiKTtyZXR1cm4gbiYmKGE9bmV3IFVSTChhLG4pLmhyZWYpLHQuaHJlZj1hLGE9dC5ocmVmLHIrXCInXCIrYStcIidcIitpfSl9fTtlLnBhdGg9cn0pLHdpbmRvdy5IVE1MSW1wb3J0cy5hZGRNb2R1bGUoZnVuY3Rpb24oZSl7XG52YXIgdD17YXN5bmM6ITAsb2s6ZnVuY3Rpb24oZSl7cmV0dXJuIGUuc3RhdHVzPj0yMDAmJmUuc3RhdHVzPDMwMHx8MzA0PT09ZS5zdGF0dXN8fDA9PT1lLnN0YXR1c30sbG9hZDpmdW5jdGlvbihuLHIsbyl7dmFyIGk9bmV3IFhNTEh0dHBSZXF1ZXN0O3JldHVybihlLmZsYWdzLmRlYnVnfHxlLmZsYWdzLmJ1c3QpJiYobis9XCI/XCIrTWF0aC5yYW5kb20oKSksaS5vcGVuKFwiR0VUXCIsbix0LmFzeW5jKSxpLmFkZEV2ZW50TGlzdGVuZXIoXCJyZWFkeXN0YXRlY2hhbmdlXCIsZnVuY3Rpb24oZSl7aWYoND09PWkucmVhZHlTdGF0ZSl7dmFyIG49aS5nZXRSZXNwb25zZUhlYWRlcihcIkxvY2F0aW9uXCIpLGE9bnVsbDtpZihuKXZhciBhPVwiL1wiPT09bi5zdWJzdHIoMCwxKT9sb2NhdGlvbi5vcmlnaW4rbjpuO3IuY2FsbChvLCF0Lm9rKGkpJiZpLGkucmVzcG9uc2V8fGkucmVzcG9uc2VUZXh0LGEpfX0pLGkuc2VuZCgpLGl9LGxvYWREb2N1bWVudDpmdW5jdGlvbihlLHQsbil7dGhpcy5sb2FkKGUsdCxuKS5yZXNwb25zZVR5cGU9XCJkb2N1bWVudFwifX07ZS54aHI9dH0pLHdpbmRvdy5IVE1MSW1wb3J0cy5hZGRNb2R1bGUoZnVuY3Rpb24oZSl7dmFyIHQ9ZS54aHIsbj1lLmZsYWdzLHI9ZnVuY3Rpb24oZSx0KXt0aGlzLmNhY2hlPXt9LHRoaXMub25sb2FkPWUsdGhpcy5vbmNvbXBsZXRlPXQsdGhpcy5pbmZsaWdodD0wLHRoaXMucGVuZGluZz17fX07ci5wcm90b3R5cGU9e2FkZE5vZGVzOmZ1bmN0aW9uKGUpe3RoaXMuaW5mbGlnaHQrPWUubGVuZ3RoO2Zvcih2YXIgdCxuPTAscj1lLmxlbmd0aDtyPm4mJih0PWVbbl0pO24rKyl0aGlzLnJlcXVpcmUodCk7dGhpcy5jaGVja0RvbmUoKX0sYWRkTm9kZTpmdW5jdGlvbihlKXt0aGlzLmluZmxpZ2h0KyssdGhpcy5yZXF1aXJlKGUpLHRoaXMuY2hlY2tEb25lKCl9LHJlcXVpcmU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZS5zcmN8fGUuaHJlZjtlLl9fbm9kZVVybD10LHRoaXMuZGVkdXBlKHQsZSl8fHRoaXMuZmV0Y2godCxlKX0sZGVkdXBlOmZ1bmN0aW9uKGUsdCl7aWYodGhpcy5wZW5kaW5nW2VdKXJldHVybiB0aGlzLnBlbmRpbmdbZV0ucHVzaCh0KSwhMDtyZXR1cm4gdGhpcy5jYWNoZVtlXT8odGhpcy5vbmxvYWQoZSx0LHRoaXMuY2FjaGVbZV0pLHRoaXMudGFpbCgpLCEwKToodGhpcy5wZW5kaW5nW2VdPVt0XSwhMSl9LGZldGNoOmZ1bmN0aW9uKGUscil7aWYobi5sb2FkJiZjb25zb2xlLmxvZyhcImZldGNoXCIsZSxyKSxlKWlmKGUubWF0Y2goL15kYXRhOi8pKXt2YXIgbz1lLnNwbGl0KFwiLFwiKSxpPW9bMF0sYT1vWzFdO2E9aS5pbmRleE9mKFwiO2Jhc2U2NFwiKT4tMT9hdG9iKGEpOmRlY29kZVVSSUNvbXBvbmVudChhKSxzZXRUaW1lb3V0KGZ1bmN0aW9uKCl7dGhpcy5yZWNlaXZlKGUscixudWxsLGEpfS5iaW5kKHRoaXMpLDApfWVsc2V7dmFyIHM9ZnVuY3Rpb24odCxuLG8pe3RoaXMucmVjZWl2ZShlLHIsdCxuLG8pfS5iaW5kKHRoaXMpO3QubG9hZChlLHMpfWVsc2Ugc2V0VGltZW91dChmdW5jdGlvbigpe3RoaXMucmVjZWl2ZShlLHIse2Vycm9yOlwiaHJlZiBtdXN0IGJlIHNwZWNpZmllZFwifSxudWxsKX0uYmluZCh0aGlzKSwwKX0scmVjZWl2ZTpmdW5jdGlvbihlLHQsbixyLG8pe3RoaXMuY2FjaGVbZV09cjtmb3IodmFyIGksYT10aGlzLnBlbmRpbmdbZV0scz0wLGM9YS5sZW5ndGg7Yz5zJiYoaT1hW3NdKTtzKyspdGhpcy5vbmxvYWQoZSxpLHIsbixvKSx0aGlzLnRhaWwoKTt0aGlzLnBlbmRpbmdbZV09bnVsbH0sdGFpbDpmdW5jdGlvbigpey0tdGhpcy5pbmZsaWdodCx0aGlzLmNoZWNrRG9uZSgpfSxjaGVja0RvbmU6ZnVuY3Rpb24oKXt0aGlzLmluZmxpZ2h0fHx0aGlzLm9uY29tcGxldGUoKX19LGUuTG9hZGVyPXJ9KSx3aW5kb3cuSFRNTEltcG9ydHMuYWRkTW9kdWxlKGZ1bmN0aW9uKGUpe3ZhciB0PWZ1bmN0aW9uKGUpe3RoaXMuYWRkQ2FsbGJhY2s9ZSx0aGlzLm1vPW5ldyBNdXRhdGlvbk9ic2VydmVyKHRoaXMuaGFuZGxlci5iaW5kKHRoaXMpKX07dC5wcm90b3R5cGU9e2hhbmRsZXI6ZnVuY3Rpb24oZSl7Zm9yKHZhciB0LG49MCxyPWUubGVuZ3RoO3I+biYmKHQ9ZVtuXSk7bisrKVwiY2hpbGRMaXN0XCI9PT10LnR5cGUmJnQuYWRkZWROb2Rlcy5sZW5ndGgmJnRoaXMuYWRkZWROb2Rlcyh0LmFkZGVkTm9kZXMpfSxhZGRlZE5vZGVzOmZ1bmN0aW9uKGUpe3RoaXMuYWRkQ2FsbGJhY2smJnRoaXMuYWRkQ2FsbGJhY2soZSk7Zm9yKHZhciB0LG49MCxyPWUubGVuZ3RoO3I+biYmKHQ9ZVtuXSk7bisrKXQuY2hpbGRyZW4mJnQuY2hpbGRyZW4ubGVuZ3RoJiZ0aGlzLmFkZGVkTm9kZXModC5jaGlsZHJlbil9LG9ic2VydmU6ZnVuY3Rpb24oZSl7dGhpcy5tby5vYnNlcnZlKGUse2NoaWxkTGlzdDohMCxzdWJ0cmVlOiEwfSl9fSxlLk9ic2VydmVyPXR9KSx3aW5kb3cuSFRNTEltcG9ydHMuYWRkTW9kdWxlKGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7cmV0dXJuXCJsaW5rXCI9PT1lLmxvY2FsTmFtZSYmZS5yZWw9PT11fWZ1bmN0aW9uIG4oZSl7dmFyIHQ9cihlKTtyZXR1cm5cImRhdGE6dGV4dC9qYXZhc2NyaXB0O2NoYXJzZXQ9dXRmLTgsXCIrZW5jb2RlVVJJQ29tcG9uZW50KHQpfWZ1bmN0aW9uIHIoZSl7cmV0dXJuIGUudGV4dENvbnRlbnQrbyhlKX1mdW5jdGlvbiBvKGUpe3ZhciB0PWUub3duZXJEb2N1bWVudDt0Ll9faW1wb3J0ZWRTY3JpcHRzPXQuX19pbXBvcnRlZFNjcmlwdHN8fDA7dmFyIG49ZS5vd25lckRvY3VtZW50LmJhc2VVUkkscj10Ll9faW1wb3J0ZWRTY3JpcHRzP1wiLVwiK3QuX19pbXBvcnRlZFNjcmlwdHM6XCJcIjtyZXR1cm4gdC5fX2ltcG9ydGVkU2NyaXB0cysrLFwiXFxuLy8jIHNvdXJjZVVSTD1cIituK3IrXCIuanNcXG5cIn1mdW5jdGlvbiBpKGUpe3ZhciB0PWUub3duZXJEb2N1bWVudC5jcmVhdGVFbGVtZW50KFwic3R5bGVcIik7cmV0dXJuIHQudGV4dENvbnRlbnQ9ZS50ZXh0Q29udGVudCxhLnJlc29sdmVVcmxzSW5TdHlsZSh0KSx0fXZhciBhPWUucGF0aCxzPWUucm9vdERvY3VtZW50LGM9ZS5mbGFncyxsPWUuaXNJRSx1PWUuSU1QT1JUX0xJTktfVFlQRSxkPVwibGlua1tyZWw9XCIrdStcIl1cIixwPXtkb2N1bWVudFNlbGVjdG9yczpkLGltcG9ydHNTZWxlY3RvcnM6W2QsXCJsaW5rW3JlbD1zdHlsZXNoZWV0XTpub3QoW3R5cGVdKVwiLFwic3R5bGU6bm90KFt0eXBlXSlcIixcInNjcmlwdDpub3QoW3R5cGVdKVwiLCdzY3JpcHRbdHlwZT1cImFwcGxpY2F0aW9uL2phdmFzY3JpcHRcIl0nLCdzY3JpcHRbdHlwZT1cInRleHQvamF2YXNjcmlwdFwiXSddLmpvaW4oXCIsXCIpLG1hcDp7bGluazpcInBhcnNlTGlua1wiLHNjcmlwdDpcInBhcnNlU2NyaXB0XCIsc3R5bGU6XCJwYXJzZVN0eWxlXCJ9LGR5bmFtaWNFbGVtZW50czpbXSxwYXJzZU5leHQ6ZnVuY3Rpb24oKXt2YXIgZT10aGlzLm5leHRUb1BhcnNlKCk7ZSYmdGhpcy5wYXJzZShlKX0scGFyc2U6ZnVuY3Rpb24oZSl7aWYodGhpcy5pc1BhcnNlZChlKSlyZXR1cm4gdm9pZChjLnBhcnNlJiZjb25zb2xlLmxvZyhcIlslc10gaXMgYWxyZWFkeSBwYXJzZWRcIixlLmxvY2FsTmFtZSkpO3ZhciB0PXRoaXNbdGhpcy5tYXBbZS5sb2NhbE5hbWVdXTt0JiYodGhpcy5tYXJrUGFyc2luZyhlKSx0LmNhbGwodGhpcyxlKSl9LHBhcnNlRHluYW1pYzpmdW5jdGlvbihlLHQpe3RoaXMuZHluYW1pY0VsZW1lbnRzLnB1c2goZSksdHx8dGhpcy5wYXJzZU5leHQoKX0sbWFya1BhcnNpbmc6ZnVuY3Rpb24oZSl7Yy5wYXJzZSYmY29uc29sZS5sb2coXCJwYXJzaW5nXCIsZSksdGhpcy5wYXJzaW5nRWxlbWVudD1lfSxtYXJrUGFyc2luZ0NvbXBsZXRlOmZ1bmN0aW9uKGUpe2UuX19pbXBvcnRQYXJzZWQ9ITAsdGhpcy5tYXJrRHluYW1pY1BhcnNpbmdDb21wbGV0ZShlKSxlLl9faW1wb3J0RWxlbWVudCYmKGUuX19pbXBvcnRFbGVtZW50Ll9faW1wb3J0UGFyc2VkPSEwLHRoaXMubWFya0R5bmFtaWNQYXJzaW5nQ29tcGxldGUoZS5fX2ltcG9ydEVsZW1lbnQpKSx0aGlzLnBhcnNpbmdFbGVtZW50PW51bGwsYy5wYXJzZSYmY29uc29sZS5sb2coXCJjb21wbGV0ZWRcIixlKX0sbWFya0R5bmFtaWNQYXJzaW5nQ29tcGxldGU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5keW5hbWljRWxlbWVudHMuaW5kZXhPZihlKTt0Pj0wJiZ0aGlzLmR5bmFtaWNFbGVtZW50cy5zcGxpY2UodCwxKX0scGFyc2VJbXBvcnQ6ZnVuY3Rpb24oZSl7aWYoZVtcImltcG9ydFwiXT1lLl9fZG9jLHdpbmRvdy5IVE1MSW1wb3J0cy5fX2ltcG9ydHNQYXJzaW5nSG9vayYmd2luZG93LkhUTUxJbXBvcnRzLl9faW1wb3J0c1BhcnNpbmdIb29rKGUpLGVbXCJpbXBvcnRcIl0mJihlW1wiaW1wb3J0XCJdLl9faW1wb3J0UGFyc2VkPSEwKSx0aGlzLm1hcmtQYXJzaW5nQ29tcGxldGUoZSksZS5fX3Jlc291cmNlJiYhZS5fX2Vycm9yP2UuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJsb2FkXCIse2J1YmJsZXM6ITF9KSk6ZS5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcImVycm9yXCIse2J1YmJsZXM6ITF9KSksZS5fX3BlbmRpbmcpZm9yKHZhciB0O2UuX19wZW5kaW5nLmxlbmd0aDspdD1lLl9fcGVuZGluZy5zaGlmdCgpLHQmJnQoe3RhcmdldDplfSk7dGhpcy5wYXJzZU5leHQoKX0scGFyc2VMaW5rOmZ1bmN0aW9uKGUpe3QoZSk/dGhpcy5wYXJzZUltcG9ydChlKTooZS5ocmVmPWUuaHJlZix0aGlzLnBhcnNlR2VuZXJpYyhlKSl9LHBhcnNlU3R5bGU6ZnVuY3Rpb24oZSl7dmFyIHQ9ZTtlPWkoZSksdC5fX2FwcGxpZWRFbGVtZW50PWUsZS5fX2ltcG9ydEVsZW1lbnQ9dCx0aGlzLnBhcnNlR2VuZXJpYyhlKX0scGFyc2VHZW5lcmljOmZ1bmN0aW9uKGUpe3RoaXMudHJhY2tFbGVtZW50KGUpLHRoaXMuYWRkRWxlbWVudFRvRG9jdW1lbnQoZSl9LHJvb3RJbXBvcnRGb3JFbGVtZW50OmZ1bmN0aW9uKGUpe2Zvcih2YXIgdD1lO3Qub3duZXJEb2N1bWVudC5fX2ltcG9ydExpbms7KXQ9dC5vd25lckRvY3VtZW50Ll9faW1wb3J0TGluaztyZXR1cm4gdH0sYWRkRWxlbWVudFRvRG9jdW1lbnQ6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5yb290SW1wb3J0Rm9yRWxlbWVudChlLl9faW1wb3J0RWxlbWVudHx8ZSk7dC5wYXJlbnROb2RlLmluc2VydEJlZm9yZShlLHQpfSx0cmFja0VsZW1lbnQ6ZnVuY3Rpb24oZSx0KXt2YXIgbj10aGlzLHI9ZnVuY3Rpb24obyl7ZS5yZW1vdmVFdmVudExpc3RlbmVyKFwibG9hZFwiLHIpLGUucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsciksdCYmdChvKSxuLm1hcmtQYXJzaW5nQ29tcGxldGUoZSksbi5wYXJzZU5leHQoKX07aWYoZS5hZGRFdmVudExpc3RlbmVyKFwibG9hZFwiLHIpLGUuYWRkRXZlbnRMaXN0ZW5lcihcImVycm9yXCIsciksbCYmXCJzdHlsZVwiPT09ZS5sb2NhbE5hbWUpe3ZhciBvPSExO2lmKC0xPT1lLnRleHRDb250ZW50LmluZGV4T2YoXCJAaW1wb3J0XCIpKW89ITA7ZWxzZSBpZihlLnNoZWV0KXtvPSEwO2Zvcih2YXIgaSxhPWUuc2hlZXQuY3NzUnVsZXMscz1hP2EubGVuZ3RoOjAsYz0wO3M+YyYmKGk9YVtjXSk7YysrKWkudHlwZT09PUNTU1J1bGUuSU1QT1JUX1JVTEUmJihvPW8mJkJvb2xlYW4oaS5zdHlsZVNoZWV0KSl9byYmc2V0VGltZW91dChmdW5jdGlvbigpe2UuZGlzcGF0Y2hFdmVudChuZXcgQ3VzdG9tRXZlbnQoXCJsb2FkXCIse2J1YmJsZXM6ITF9KSl9KX19LHBhcnNlU2NyaXB0OmZ1bmN0aW9uKHQpe3ZhciByPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzY3JpcHRcIik7ci5fX2ltcG9ydEVsZW1lbnQ9dCxyLnNyYz10LnNyYz90LnNyYzpuKHQpLGUuY3VycmVudFNjcmlwdD10LHRoaXMudHJhY2tFbGVtZW50KHIsZnVuY3Rpb24odCl7ci5wYXJlbnROb2RlJiZyLnBhcmVudE5vZGUucmVtb3ZlQ2hpbGQociksZS5jdXJyZW50U2NyaXB0PW51bGx9KSx0aGlzLmFkZEVsZW1lbnRUb0RvY3VtZW50KHIpfSxuZXh0VG9QYXJzZTpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9tYXlQYXJzZT1bXSwhdGhpcy5wYXJzaW5nRWxlbWVudCYmKHRoaXMubmV4dFRvUGFyc2VJbkRvYyhzKXx8dGhpcy5uZXh0VG9QYXJzZUR5bmFtaWMoKSl9LG5leHRUb1BhcnNlSW5Eb2M6ZnVuY3Rpb24oZSxuKXtpZihlJiZ0aGlzLl9tYXlQYXJzZS5pbmRleE9mKGUpPDApe3RoaXMuX21heVBhcnNlLnB1c2goZSk7Zm9yKHZhciByLG89ZS5xdWVyeVNlbGVjdG9yQWxsKHRoaXMucGFyc2VTZWxlY3RvcnNGb3JOb2RlKGUpKSxpPTAsYT1vLmxlbmd0aDthPmkmJihyPW9baV0pO2krKylpZighdGhpcy5pc1BhcnNlZChyKSlyZXR1cm4gdGhpcy5oYXNSZXNvdXJjZShyKT90KHIpP3RoaXMubmV4dFRvUGFyc2VJbkRvYyhyLl9fZG9jLHIpOnI6dm9pZCAwfXJldHVybiBufSxuZXh0VG9QYXJzZUR5bmFtaWM6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5keW5hbWljRWxlbWVudHNbMF19LHBhcnNlU2VsZWN0b3JzRm9yTm9kZTpmdW5jdGlvbihlKXt2YXIgdD1lLm93bmVyRG9jdW1lbnR8fGU7cmV0dXJuIHQ9PT1zP3RoaXMuZG9jdW1lbnRTZWxlY3RvcnM6dGhpcy5pbXBvcnRzU2VsZWN0b3JzfSxpc1BhcnNlZDpmdW5jdGlvbihlKXtyZXR1cm4gZS5fX2ltcG9ydFBhcnNlZH0sbmVlZHNEeW5hbWljUGFyc2luZzpmdW5jdGlvbihlKXtyZXR1cm4gdGhpcy5keW5hbWljRWxlbWVudHMuaW5kZXhPZihlKT49MH0saGFzUmVzb3VyY2U6ZnVuY3Rpb24oZSl7cmV0dXJuIHQoZSkmJnZvaWQgMD09PWUuX19kb2M/ITE6ITB9fTtlLnBhcnNlcj1wLGUuSU1QT1JUX1NFTEVDVE9SPWR9KSx3aW5kb3cuSFRNTEltcG9ydHMuYWRkTW9kdWxlKGZ1bmN0aW9uKGUpe2Z1bmN0aW9uIHQoZSl7cmV0dXJuIG4oZSxhKX1mdW5jdGlvbiBuKGUsdCl7cmV0dXJuXCJsaW5rXCI9PT1lLmxvY2FsTmFtZSYmZS5nZXRBdHRyaWJ1dGUoXCJyZWxcIik9PT10fWZ1bmN0aW9uIHIoZSl7cmV0dXJuISFPYmplY3QuZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yKGUsXCJiYXNlVVJJXCIpfWZ1bmN0aW9uIG8oZSx0KXt2YXIgbj1kb2N1bWVudC5pbXBsZW1lbnRhdGlvbi5jcmVhdGVIVE1MRG9jdW1lbnQoYSk7bi5fVVJMPXQ7dmFyIG89bi5jcmVhdGVFbGVtZW50KFwiYmFzZVwiKTtvLnNldEF0dHJpYnV0ZShcImhyZWZcIix0KSxuLmJhc2VVUkl8fHIobil8fE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuLFwiYmFzZVVSSVwiLHt2YWx1ZTp0fSk7dmFyIGk9bi5jcmVhdGVFbGVtZW50KFwibWV0YVwiKTtyZXR1cm4gaS5zZXRBdHRyaWJ1dGUoXCJjaGFyc2V0XCIsXCJ1dGYtOFwiKSxuLmhlYWQuYXBwZW5kQ2hpbGQoaSksbi5oZWFkLmFwcGVuZENoaWxkKG8pLG4uYm9keS5pbm5lckhUTUw9ZSx3aW5kb3cuSFRNTFRlbXBsYXRlRWxlbWVudCYmSFRNTFRlbXBsYXRlRWxlbWVudC5ib290c3RyYXAmJkhUTUxUZW1wbGF0ZUVsZW1lbnQuYm9vdHN0cmFwKG4pLG59dmFyIGk9ZS5mbGFncyxhPWUuSU1QT1JUX0xJTktfVFlQRSxzPWUuSU1QT1JUX1NFTEVDVE9SLGM9ZS5yb290RG9jdW1lbnQsbD1lLkxvYWRlcix1PWUuT2JzZXJ2ZXIsZD1lLnBhcnNlcixwPXtkb2N1bWVudHM6e30sZG9jdW1lbnRQcmVsb2FkU2VsZWN0b3JzOnMsaW1wb3J0c1ByZWxvYWRTZWxlY3RvcnM6W3NdLmpvaW4oXCIsXCIpLGxvYWROb2RlOmZ1bmN0aW9uKGUpe2guYWRkTm9kZShlKX0sbG9hZFN1YnRyZWU6ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcy5tYXJzaGFsTm9kZXMoZSk7aC5hZGROb2Rlcyh0KX0sbWFyc2hhbE5vZGVzOmZ1bmN0aW9uKGUpe3JldHVybiBlLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5sb2FkU2VsZWN0b3JzRm9yTm9kZShlKSl9LGxvYWRTZWxlY3RvcnNGb3JOb2RlOmZ1bmN0aW9uKGUpe3ZhciB0PWUub3duZXJEb2N1bWVudHx8ZTtyZXR1cm4gdD09PWM/dGhpcy5kb2N1bWVudFByZWxvYWRTZWxlY3RvcnM6dGhpcy5pbXBvcnRzUHJlbG9hZFNlbGVjdG9yc30sbG9hZGVkOmZ1bmN0aW9uKGUsbixyLGEscyl7aWYoaS5sb2FkJiZjb25zb2xlLmxvZyhcImxvYWRlZFwiLGUsbiksbi5fX3Jlc291cmNlPXIsbi5fX2Vycm9yPWEsdChuKSl7dmFyIGM9dGhpcy5kb2N1bWVudHNbZV07dm9pZCAwPT09YyYmKGM9YT9udWxsOm8ocixzfHxlKSxjJiYoYy5fX2ltcG9ydExpbms9bix0aGlzLmJvb3REb2N1bWVudChjKSksdGhpcy5kb2N1bWVudHNbZV09Yyksbi5fX2RvYz1jfWQucGFyc2VOZXh0KCl9LGJvb3REb2N1bWVudDpmdW5jdGlvbihlKXt0aGlzLmxvYWRTdWJ0cmVlKGUpLHRoaXMub2JzZXJ2ZXIub2JzZXJ2ZShlKSxkLnBhcnNlTmV4dCgpfSxsb2FkZWRBbGw6ZnVuY3Rpb24oKXtkLnBhcnNlTmV4dCgpfX0saD1uZXcgbChwLmxvYWRlZC5iaW5kKHApLHAubG9hZGVkQWxsLmJpbmQocCkpO2lmKHAub2JzZXJ2ZXI9bmV3IHUsIWRvY3VtZW50LmJhc2VVUkkpe3ZhciBmPXtnZXQ6ZnVuY3Rpb24oKXt2YXIgZT1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYmFzZVwiKTtyZXR1cm4gZT9lLmhyZWY6d2luZG93LmxvY2F0aW9uLmhyZWZ9LGNvbmZpZ3VyYWJsZTohMH07T2JqZWN0LmRlZmluZVByb3BlcnR5KGRvY3VtZW50LFwiYmFzZVVSSVwiLGYpLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShjLFwiYmFzZVVSSVwiLGYpfWUuaW1wb3J0ZXI9cCxlLmltcG9ydExvYWRlcj1ofSksd2luZG93LkhUTUxJbXBvcnRzLmFkZE1vZHVsZShmdW5jdGlvbihlKXt2YXIgdD1lLnBhcnNlcixuPWUuaW1wb3J0ZXIscj17YWRkZWQ6ZnVuY3Rpb24oZSl7Zm9yKHZhciByLG8saSxhLHM9MCxjPWUubGVuZ3RoO2M+cyYmKGE9ZVtzXSk7cysrKXJ8fChyPWEub3duZXJEb2N1bWVudCxvPXQuaXNQYXJzZWQocikpLGk9dGhpcy5zaG91bGRMb2FkTm9kZShhKSxpJiZuLmxvYWROb2RlKGEpLHRoaXMuc2hvdWxkUGFyc2VOb2RlKGEpJiZvJiZ0LnBhcnNlRHluYW1pYyhhLGkpfSxzaG91bGRMb2FkTm9kZTpmdW5jdGlvbihlKXtyZXR1cm4gMT09PWUubm9kZVR5cGUmJm8uY2FsbChlLG4ubG9hZFNlbGVjdG9yc0Zvck5vZGUoZSkpfSxzaG91bGRQYXJzZU5vZGU6ZnVuY3Rpb24oZSl7cmV0dXJuIDE9PT1lLm5vZGVUeXBlJiZvLmNhbGwoZSx0LnBhcnNlU2VsZWN0b3JzRm9yTm9kZShlKSl9fTtuLm9ic2VydmVyLmFkZENhbGxiYWNrPXIuYWRkZWQuYmluZChyKTt2YXIgbz1IVE1MRWxlbWVudC5wcm90b3R5cGUubWF0Y2hlc3x8SFRNTEVsZW1lbnQucHJvdG90eXBlLm1hdGNoZXNTZWxlY3Rvcnx8SFRNTEVsZW1lbnQucHJvdG90eXBlLndlYmtpdE1hdGNoZXNTZWxlY3Rvcnx8SFRNTEVsZW1lbnQucHJvdG90eXBlLm1vek1hdGNoZXNTZWxlY3Rvcnx8SFRNTEVsZW1lbnQucHJvdG90eXBlLm1zTWF0Y2hlc1NlbGVjdG9yfSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe3dpbmRvdy5IVE1MSW1wb3J0cy5pbXBvcnRlci5ib290RG9jdW1lbnQobyl9dmFyIG49ZS5pbml0aWFsaXplTW9kdWxlcyxyPWUuaXNJRTtpZighZS51c2VOYXRpdmUpe3ImJlwiZnVuY3Rpb25cIiE9dHlwZW9mIHdpbmRvdy5DdXN0b21FdmVudCYmKHdpbmRvdy5DdXN0b21FdmVudD1mdW5jdGlvbihlLHQpe3Q9dHx8e307dmFyIG49ZG9jdW1lbnQuY3JlYXRlRXZlbnQoXCJDdXN0b21FdmVudFwiKTtyZXR1cm4gbi5pbml0Q3VzdG9tRXZlbnQoZSxCb29sZWFuKHQuYnViYmxlcyksQm9vbGVhbih0LmNhbmNlbGFibGUpLHQuZGV0YWlsKSxuLnByZXZlbnREZWZhdWx0PWZ1bmN0aW9uKCl7T2JqZWN0LmRlZmluZVByb3BlcnR5KHRoaXMsXCJkZWZhdWx0UHJldmVudGVkXCIse2dldDpmdW5jdGlvbigpe3JldHVybiEwfX0pfSxufSx3aW5kb3cuQ3VzdG9tRXZlbnQucHJvdG90eXBlPXdpbmRvdy5FdmVudC5wcm90b3R5cGUpLG4oKTt2YXIgbz1lLnJvb3REb2N1bWVudDtcImNvbXBsZXRlXCI9PT1kb2N1bWVudC5yZWFkeVN0YXRlfHxcImludGVyYWN0aXZlXCI9PT1kb2N1bWVudC5yZWFkeVN0YXRlJiYhd2luZG93LmF0dGFjaEV2ZW50P3QoKTpkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwiRE9NQ29udGVudExvYWRlZFwiLHQpfX0od2luZG93LkhUTUxJbXBvcnRzKSx3aW5kb3cuQ3VzdG9tRWxlbWVudHM9d2luZG93LkN1c3RvbUVsZW1lbnRzfHx7ZmxhZ3M6e319LGZ1bmN0aW9uKGUpe3ZhciB0PWUuZmxhZ3Msbj1bXSxyPWZ1bmN0aW9uKGUpe24ucHVzaChlKX0sbz1mdW5jdGlvbigpe24uZm9yRWFjaChmdW5jdGlvbih0KXt0KGUpfSl9O2UuYWRkTW9kdWxlPXIsZS5pbml0aWFsaXplTW9kdWxlcz1vLGUuaGFzTmF0aXZlPUJvb2xlYW4oZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50KSxlLmlzSUU9L1RyaWRlbnQvLnRlc3QobmF2aWdhdG9yLnVzZXJBZ2VudCksZS51c2VOYXRpdmU9IXQucmVnaXN0ZXImJmUuaGFzTmF0aXZlJiYhd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsJiYoIXdpbmRvdy5IVE1MSW1wb3J0c3x8d2luZG93LkhUTUxJbXBvcnRzLnVzZU5hdGl2ZSl9KHdpbmRvdy5DdXN0b21FbGVtZW50cyksd2luZG93LkN1c3RvbUVsZW1lbnRzLmFkZE1vZHVsZShmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCl7bihlLGZ1bmN0aW9uKGUpe3JldHVybiB0KGUpPyEwOnZvaWQgcihlLHQpfSkscihlLHQpfWZ1bmN0aW9uIG4oZSx0LHIpe3ZhciBvPWUuZmlyc3RFbGVtZW50Q2hpbGQ7aWYoIW8pZm9yKG89ZS5maXJzdENoaWxkO28mJm8ubm9kZVR5cGUhPT1Ob2RlLkVMRU1FTlRfTk9ERTspbz1vLm5leHRTaWJsaW5nO2Zvcig7bzspdChvLHIpIT09ITAmJm4obyx0LHIpLG89by5uZXh0RWxlbWVudFNpYmxpbmc7cmV0dXJuIG51bGx9ZnVuY3Rpb24gcihlLG4pe2Zvcih2YXIgcj1lLnNoYWRvd1Jvb3Q7cjspdChyLG4pLHI9ci5vbGRlclNoYWRvd1Jvb3R9ZnVuY3Rpb24gbyhlLHQpe2koZSx0LFtdKX1mdW5jdGlvbiBpKGUsdCxuKXtpZihlPXdpbmRvdy53cmFwKGUpLCEobi5pbmRleE9mKGUpPj0wKSl7bi5wdXNoKGUpO2Zvcih2YXIgcixvPWUucXVlcnlTZWxlY3RvckFsbChcImxpbmtbcmVsPVwiK2ErXCJdXCIpLHM9MCxjPW8ubGVuZ3RoO2M+cyYmKHI9b1tzXSk7cysrKXJbXCJpbXBvcnRcIl0mJmkocltcImltcG9ydFwiXSx0LG4pO3QoZSl9fXZhciBhPXdpbmRvdy5IVE1MSW1wb3J0cz93aW5kb3cuSFRNTEltcG9ydHMuSU1QT1JUX0xJTktfVFlQRTpcIm5vbmVcIjtlLmZvckRvY3VtZW50VHJlZT1vLGUuZm9yU3VidHJlZT10fSksd2luZG93LkN1c3RvbUVsZW1lbnRzLmFkZE1vZHVsZShmdW5jdGlvbihlKXtmdW5jdGlvbiB0KGUsdCl7cmV0dXJuIG4oZSx0KXx8cihlLHQpfWZ1bmN0aW9uIG4odCxuKXtyZXR1cm4gZS51cGdyYWRlKHQsbik/ITA6dm9pZChuJiZhKHQpKX1mdW5jdGlvbiByKGUsdCl7YihlLGZ1bmN0aW9uKGUpe3JldHVybiBuKGUsdCk/ITA6dm9pZCAwfSl9ZnVuY3Rpb24gbyhlKXtTLnB1c2goZSksX3x8KF89ITAsc2V0VGltZW91dChpKSl9ZnVuY3Rpb24gaSgpe189ITE7Zm9yKHZhciBlLHQ9UyxuPTAscj10Lmxlbmd0aDtyPm4mJihlPXRbbl0pO24rKyllKCk7Uz1bXX1mdW5jdGlvbiBhKGUpe0U/byhmdW5jdGlvbigpe3MoZSl9KTpzKGUpfWZ1bmN0aW9uIHMoZSl7ZS5fX3VwZ3JhZGVkX18mJiFlLl9fYXR0YWNoZWQmJihlLl9fYXR0YWNoZWQ9ITAsZS5hdHRhY2hlZENhbGxiYWNrJiZlLmF0dGFjaGVkQ2FsbGJhY2soKSl9ZnVuY3Rpb24gYyhlKXtsKGUpLGIoZSxmdW5jdGlvbihlKXtsKGUpfSl9ZnVuY3Rpb24gbChlKXtFP28oZnVuY3Rpb24oKXt1KGUpfSk6dShlKX1mdW5jdGlvbiB1KGUpe2UuX191cGdyYWRlZF9fJiZlLl9fYXR0YWNoZWQmJihlLl9fYXR0YWNoZWQ9ITEsZS5kZXRhY2hlZENhbGxiYWNrJiZlLmRldGFjaGVkQ2FsbGJhY2soKSl9ZnVuY3Rpb24gZChlKXtmb3IodmFyIHQ9ZSxuPXdpbmRvdy53cmFwKGRvY3VtZW50KTt0Oyl7aWYodD09bilyZXR1cm4hMDt0PXQucGFyZW50Tm9kZXx8dC5ub2RlVHlwZT09PU5vZGUuRE9DVU1FTlRfRlJBR01FTlRfTk9ERSYmdC5ob3N0fX1mdW5jdGlvbiBwKGUpe2lmKGUuc2hhZG93Um9vdCYmIWUuc2hhZG93Um9vdC5fX3dhdGNoZWQpe2cuZG9tJiZjb25zb2xlLmxvZyhcIndhdGNoaW5nIHNoYWRvdy1yb290IGZvcjogXCIsZS5sb2NhbE5hbWUpO2Zvcih2YXIgdD1lLnNoYWRvd1Jvb3Q7dDspbSh0KSx0PXQub2xkZXJTaGFkb3dSb290fX1mdW5jdGlvbiBoKGUsbil7aWYoZy5kb20pe3ZhciByPW5bMF07aWYociYmXCJjaGlsZExpc3RcIj09PXIudHlwZSYmci5hZGRlZE5vZGVzJiZyLmFkZGVkTm9kZXMpe2Zvcih2YXIgbz1yLmFkZGVkTm9kZXNbMF07byYmbyE9PWRvY3VtZW50JiYhby5ob3N0OylvPW8ucGFyZW50Tm9kZTt2YXIgaT1vJiYoby5VUkx8fG8uX1VSTHx8by5ob3N0JiZvLmhvc3QubG9jYWxOYW1lKXx8XCJcIjtpPWkuc3BsaXQoXCIvP1wiKS5zaGlmdCgpLnNwbGl0KFwiL1wiKS5wb3AoKX1jb25zb2xlLmdyb3VwKFwibXV0YXRpb25zICglZCkgWyVzXVwiLG4ubGVuZ3RoLGl8fFwiXCIpfXZhciBhPWQoZSk7bi5mb3JFYWNoKGZ1bmN0aW9uKGUpe1wiY2hpbGRMaXN0XCI9PT1lLnR5cGUmJihUKGUuYWRkZWROb2RlcyxmdW5jdGlvbihlKXtlLmxvY2FsTmFtZSYmdChlLGEpfSksVChlLnJlbW92ZWROb2RlcyxmdW5jdGlvbihlKXtlLmxvY2FsTmFtZSYmYyhlKX0pKX0pLGcuZG9tJiZjb25zb2xlLmdyb3VwRW5kKCl9ZnVuY3Rpb24gZihlKXtmb3IoZT13aW5kb3cud3JhcChlKSxlfHwoZT13aW5kb3cud3JhcChkb2N1bWVudCkpO2UucGFyZW50Tm9kZTspZT1lLnBhcmVudE5vZGU7dmFyIHQ9ZS5fX29ic2VydmVyO3QmJihoKGUsdC50YWtlUmVjb3JkcygpKSxpKCkpfWZ1bmN0aW9uIG0oZSl7aWYoIWUuX19vYnNlcnZlcil7dmFyIHQ9bmV3IE11dGF0aW9uT2JzZXJ2ZXIoaC5iaW5kKHRoaXMsZSkpO3Qub2JzZXJ2ZShlLHtjaGlsZExpc3Q6ITAsc3VidHJlZTohMH0pLGUuX19vYnNlcnZlcj10fX1mdW5jdGlvbiB3KGUpe2U9d2luZG93LndyYXAoZSksZy5kb20mJmNvbnNvbGUuZ3JvdXAoXCJ1cGdyYWRlRG9jdW1lbnQ6IFwiLGUuYmFzZVVSSS5zcGxpdChcIi9cIikucG9wKCkpO3ZhciBuPWU9PT13aW5kb3cud3JhcChkb2N1bWVudCk7dChlLG4pLG0oZSksZy5kb20mJmNvbnNvbGUuZ3JvdXBFbmQoKX1mdW5jdGlvbiB2KGUpe3koZSx3KX12YXIgZz1lLmZsYWdzLGI9ZS5mb3JTdWJ0cmVlLHk9ZS5mb3JEb2N1bWVudFRyZWUsRT0hd2luZG93Lk11dGF0aW9uT2JzZXJ2ZXJ8fHdpbmRvdy5NdXRhdGlvbk9ic2VydmVyPT09d2luZG93LkpzTXV0YXRpb25PYnNlcnZlcjtlLmhhc1BvbHlmaWxsTXV0YXRpb25zPUU7dmFyIF89ITEsUz1bXSxUPUFycmF5LnByb3RvdHlwZS5mb3JFYWNoLmNhbGwuYmluZChBcnJheS5wcm90b3R5cGUuZm9yRWFjaCksTT1FbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290O00mJihFbGVtZW50LnByb3RvdHlwZS5jcmVhdGVTaGFkb3dSb290PWZ1bmN0aW9uKCl7dmFyIGU9TS5jYWxsKHRoaXMpO3JldHVybiB3aW5kb3cuQ3VzdG9tRWxlbWVudHMud2F0Y2hTaGFkb3codGhpcyksZX0pLGUud2F0Y2hTaGFkb3c9cCxlLnVwZ3JhZGVEb2N1bWVudFRyZWU9dixlLnVwZ3JhZGVEb2N1bWVudD13LGUudXBncmFkZVN1YnRyZWU9cixlLnVwZ3JhZGVBbGw9dCxlLmF0dGFjaGVkPWEsZS50YWtlUmVjb3Jkcz1mfSksd2luZG93LkN1c3RvbUVsZW1lbnRzLmFkZE1vZHVsZShmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7aWYoIXQuX191cGdyYWRlZF9fJiZ0Lm5vZGVUeXBlPT09Tm9kZS5FTEVNRU5UX05PREUpe3ZhciBvPXQuZ2V0QXR0cmlidXRlKFwiaXNcIiksaT1lLmdldFJlZ2lzdGVyZWREZWZpbml0aW9uKHQubG9jYWxOYW1lKXx8ZS5nZXRSZWdpc3RlcmVkRGVmaW5pdGlvbihvKTtpZihpJiYobyYmaS50YWc9PXQubG9jYWxOYW1lfHwhbyYmIWlbXCJleHRlbmRzXCJdKSlyZXR1cm4gbih0LGkscil9fWZ1bmN0aW9uIG4odCxuLG8pe3JldHVybiBhLnVwZ3JhZGUmJmNvbnNvbGUuZ3JvdXAoXCJ1cGdyYWRlOlwiLHQubG9jYWxOYW1lKSxuLmlzJiZ0LnNldEF0dHJpYnV0ZShcImlzXCIsbi5pcykscih0LG4pLHQuX191cGdyYWRlZF9fPSEwLGkodCksbyYmZS5hdHRhY2hlZCh0KSxlLnVwZ3JhZGVTdWJ0cmVlKHQsbyksYS51cGdyYWRlJiZjb25zb2xlLmdyb3VwRW5kKCksdH1mdW5jdGlvbiByKGUsdCl7T2JqZWN0Ll9fcHJvdG9fXz9lLl9fcHJvdG9fXz10LnByb3RvdHlwZToobyhlLHQucHJvdG90eXBlLHRbXCJuYXRpdmVcIl0pLGUuX19wcm90b19fPXQucHJvdG90eXBlKX1mdW5jdGlvbiBvKGUsdCxuKXtmb3IodmFyIHI9e30sbz10O28hPT1uJiZvIT09SFRNTEVsZW1lbnQucHJvdG90eXBlOyl7Zm9yKHZhciBpLGE9T2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMobykscz0wO2k9YVtzXTtzKyspcltpXXx8KE9iamVjdC5kZWZpbmVQcm9wZXJ0eShlLGksT2JqZWN0LmdldE93blByb3BlcnR5RGVzY3JpcHRvcihvLGkpKSxyW2ldPTEpO289T2JqZWN0LmdldFByb3RvdHlwZU9mKG8pfX1mdW5jdGlvbiBpKGUpe2UuY3JlYXRlZENhbGxiYWNrJiZlLmNyZWF0ZWRDYWxsYmFjaygpfXZhciBhPWUuZmxhZ3M7ZS51cGdyYWRlPXQsZS51cGdyYWRlV2l0aERlZmluaXRpb249bixlLmltcGxlbWVudFByb3RvdHlwZT1yfSksd2luZG93LkN1c3RvbUVsZW1lbnRzLmFkZE1vZHVsZShmdW5jdGlvbihlKXtmdW5jdGlvbiB0KHQscil7dmFyIGM9cnx8e307aWYoIXQpdGhyb3cgbmV3IEVycm9yKFwiZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50OiBmaXJzdCBhcmd1bWVudCBgbmFtZWAgbXVzdCBub3QgYmUgZW1wdHlcIik7aWYodC5pbmRleE9mKFwiLVwiKTwwKXRocm93IG5ldyBFcnJvcihcImRvY3VtZW50LnJlZ2lzdGVyRWxlbWVudDogZmlyc3QgYXJndW1lbnQgKCduYW1lJykgbXVzdCBjb250YWluIGEgZGFzaCAoJy0nKS4gQXJndW1lbnQgcHJvdmlkZWQgd2FzICdcIitTdHJpbmcodCkrXCInLlwiKTtpZihvKHQpKXRocm93IG5ldyBFcnJvcihcIkZhaWxlZCB0byBleGVjdXRlICdyZWdpc3RlckVsZW1lbnQnIG9uICdEb2N1bWVudCc6IFJlZ2lzdHJhdGlvbiBmYWlsZWQgZm9yIHR5cGUgJ1wiK1N0cmluZyh0KStcIicuIFRoZSB0eXBlIG5hbWUgaXMgaW52YWxpZC5cIik7aWYobCh0KSl0aHJvdyBuZXcgRXJyb3IoXCJEdXBsaWNhdGVEZWZpbml0aW9uRXJyb3I6IGEgdHlwZSB3aXRoIG5hbWUgJ1wiK1N0cmluZyh0KStcIicgaXMgYWxyZWFkeSByZWdpc3RlcmVkXCIpO3JldHVybiBjLnByb3RvdHlwZXx8KGMucHJvdG90eXBlPU9iamVjdC5jcmVhdGUoSFRNTEVsZW1lbnQucHJvdG90eXBlKSksYy5fX25hbWU9dC50b0xvd2VyQ2FzZSgpLGMubGlmZWN5Y2xlPWMubGlmZWN5Y2xlfHx7fSxjLmFuY2VzdHJ5PWkoY1tcImV4dGVuZHNcIl0pLGEoYykscyhjKSxuKGMucHJvdG90eXBlKSx1KGMuX19uYW1lLGMpLGMuY3Rvcj1kKGMpLGMuY3Rvci5wcm90b3R5cGU9Yy5wcm90b3R5cGUsYy5wcm90b3R5cGUuY29uc3RydWN0b3I9Yy5jdG9yLGUucmVhZHkmJnYoZG9jdW1lbnQpLGMuY3Rvcn1mdW5jdGlvbiBuKGUpe2lmKCFlLnNldEF0dHJpYnV0ZS5fcG9seWZpbGxlZCl7dmFyIHQ9ZS5zZXRBdHRyaWJ1dGU7ZS5zZXRBdHRyaWJ1dGU9ZnVuY3Rpb24oZSxuKXtyLmNhbGwodGhpcyxlLG4sdCl9O3ZhciBuPWUucmVtb3ZlQXR0cmlidXRlO2UucmVtb3ZlQXR0cmlidXRlPWZ1bmN0aW9uKGUpe3IuY2FsbCh0aGlzLGUsbnVsbCxuKX0sZS5zZXRBdHRyaWJ1dGUuX3BvbHlmaWxsZWQ9ITB9fWZ1bmN0aW9uIHIoZSx0LG4pe2U9ZS50b0xvd2VyQ2FzZSgpO3ZhciByPXRoaXMuZ2V0QXR0cmlidXRlKGUpO24uYXBwbHkodGhpcyxhcmd1bWVudHMpO3ZhciBvPXRoaXMuZ2V0QXR0cmlidXRlKGUpO3RoaXMuYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrJiZvIT09ciYmdGhpcy5hdHRyaWJ1dGVDaGFuZ2VkQ2FsbGJhY2soZSxyLG8pfWZ1bmN0aW9uIG8oZSl7Zm9yKHZhciB0PTA7dDxfLmxlbmd0aDt0KyspaWYoZT09PV9bdF0pcmV0dXJuITB9ZnVuY3Rpb24gaShlKXt2YXIgdD1sKGUpO3JldHVybiB0P2kodFtcImV4dGVuZHNcIl0pLmNvbmNhdChbdF0pOltdfWZ1bmN0aW9uIGEoZSl7Zm9yKHZhciB0LG49ZVtcImV4dGVuZHNcIl0scj0wO3Q9ZS5hbmNlc3RyeVtyXTtyKyspbj10LmlzJiZ0LnRhZztlLnRhZz1ufHxlLl9fbmFtZSxuJiYoZS5pcz1lLl9fbmFtZSl9ZnVuY3Rpb24gcyhlKXtpZighT2JqZWN0Ll9fcHJvdG9fXyl7dmFyIHQ9SFRNTEVsZW1lbnQucHJvdG90eXBlO2lmKGUuaXMpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoZS50YWcpO3Q9T2JqZWN0LmdldFByb3RvdHlwZU9mKG4pfWZvcih2YXIgcixvPWUucHJvdG90eXBlLGk9ITE7bzspbz09dCYmKGk9ITApLHI9T2JqZWN0LmdldFByb3RvdHlwZU9mKG8pLHImJihvLl9fcHJvdG9fXz1yKSxvPXI7aXx8Y29uc29sZS53YXJuKGUudGFnK1wiIHByb3RvdHlwZSBub3QgZm91bmQgaW4gcHJvdG90eXBlIGNoYWluIGZvciBcIitlLmlzKSxlW1wibmF0aXZlXCJdPXR9fWZ1bmN0aW9uIGMoZSl7cmV0dXJuIGIoTShlLnRhZyksZSl9ZnVuY3Rpb24gbChlKXtyZXR1cm4gZT9TW2UudG9Mb3dlckNhc2UoKV06dm9pZCAwfWZ1bmN0aW9uIHUoZSx0KXtTW2VdPXR9ZnVuY3Rpb24gZChlKXtyZXR1cm4gZnVuY3Rpb24oKXtyZXR1cm4gYyhlKX19ZnVuY3Rpb24gcChlLHQsbil7cmV0dXJuIGU9PT1UP2godCxuKTpPKGUsdCl9ZnVuY3Rpb24gaChlLHQpe2UmJihlPWUudG9Mb3dlckNhc2UoKSksdCYmKHQ9dC50b0xvd2VyQ2FzZSgpKTt2YXIgbj1sKHR8fGUpO2lmKG4pe2lmKGU9PW4udGFnJiZ0PT1uLmlzKXJldHVybiBuZXcgbi5jdG9yO2lmKCF0JiYhbi5pcylyZXR1cm4gbmV3IG4uY3Rvcn12YXIgcjtyZXR1cm4gdD8ocj1oKGUpLHIuc2V0QXR0cmlidXRlKFwiaXNcIix0KSxyKToocj1NKGUpLGUuaW5kZXhPZihcIi1cIik+PTAmJnkocixIVE1MRWxlbWVudCkscil9ZnVuY3Rpb24gZihlLHQpe3ZhciBuPWVbdF07ZVt0XT1mdW5jdGlvbigpe3ZhciBlPW4uYXBwbHkodGhpcyxhcmd1bWVudHMpO3JldHVybiBnKGUpLGV9fXZhciBtLHc9ZS5pc0lFLHY9ZS51cGdyYWRlRG9jdW1lbnRUcmVlLGc9ZS51cGdyYWRlQWxsLGI9ZS51cGdyYWRlV2l0aERlZmluaXRpb24seT1lLmltcGxlbWVudFByb3RvdHlwZSxFPWUudXNlTmF0aXZlLF89W1wiYW5ub3RhdGlvbi14bWxcIixcImNvbG9yLXByb2ZpbGVcIixcImZvbnQtZmFjZVwiLFwiZm9udC1mYWNlLXNyY1wiLFwiZm9udC1mYWNlLXVyaVwiLFwiZm9udC1mYWNlLWZvcm1hdFwiLFwiZm9udC1mYWNlLW5hbWVcIixcIm1pc3NpbmctZ2x5cGhcIl0sUz17fSxUPVwiaHR0cDovL3d3dy53My5vcmcvMTk5OS94aHRtbFwiLE09ZG9jdW1lbnQuY3JlYXRlRWxlbWVudC5iaW5kKGRvY3VtZW50KSxPPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnROUy5iaW5kKGRvY3VtZW50KTttPU9iamVjdC5fX3Byb3RvX198fEU/ZnVuY3Rpb24oZSx0KXtyZXR1cm4gZSBpbnN0YW5jZW9mIHR9OmZ1bmN0aW9uKGUsdCl7aWYoZSBpbnN0YW5jZW9mIHQpcmV0dXJuITA7Zm9yKHZhciBuPWU7bjspe2lmKG49PT10LnByb3RvdHlwZSlyZXR1cm4hMDtuPW4uX19wcm90b19ffXJldHVybiExfSxmKE5vZGUucHJvdG90eXBlLFwiY2xvbmVOb2RlXCIpLGYoZG9jdW1lbnQsXCJpbXBvcnROb2RlXCIpLHcmJiFmdW5jdGlvbigpe3ZhciBlPWRvY3VtZW50LmltcG9ydE5vZGU7ZG9jdW1lbnQuaW1wb3J0Tm9kZT1mdW5jdGlvbigpe3ZhciB0PWUuYXBwbHkoZG9jdW1lbnQsYXJndW1lbnRzKTtpZih0Lm5vZGVUeXBlPT10LkRPQ1VNRU5UX0ZSQUdNRU5UX05PREUpe3ZhciBuPWRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtyZXR1cm4gbi5hcHBlbmRDaGlsZCh0KSxufXJldHVybiB0fX0oKSxkb2N1bWVudC5yZWdpc3RlckVsZW1lbnQ9dCxkb2N1bWVudC5jcmVhdGVFbGVtZW50PWgsZG9jdW1lbnQuY3JlYXRlRWxlbWVudE5TPXAsZS5yZWdpc3RyeT1TLGVbXCJpbnN0YW5jZW9mXCJdPW0sZS5yZXNlcnZlZFRhZ0xpc3Q9XyxlLmdldFJlZ2lzdGVyZWREZWZpbml0aW9uPWwsZG9jdW1lbnQucmVnaXN0ZXI9ZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50fSksZnVuY3Rpb24oZSl7ZnVuY3Rpb24gdCgpe2Eod2luZG93LndyYXAoZG9jdW1lbnQpKSx3aW5kb3cuQ3VzdG9tRWxlbWVudHMucmVhZHk9ITA7dmFyIGU9d2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZXx8ZnVuY3Rpb24oZSl7c2V0VGltZW91dChlLDE2KX07ZShmdW5jdGlvbigpe3NldFRpbWVvdXQoZnVuY3Rpb24oKXt3aW5kb3cuQ3VzdG9tRWxlbWVudHMucmVhZHlUaW1lPURhdGUubm93KCksd2luZG93LkhUTUxJbXBvcnRzJiYod2luZG93LkN1c3RvbUVsZW1lbnRzLmVsYXBzZWQ9d2luZG93LkN1c3RvbUVsZW1lbnRzLnJlYWR5VGltZS13aW5kb3cuSFRNTEltcG9ydHMucmVhZHlUaW1lKSxkb2N1bWVudC5kaXNwYXRjaEV2ZW50KG5ldyBDdXN0b21FdmVudChcIldlYkNvbXBvbmVudHNSZWFkeVwiLHtidWJibGVzOiEwfSkpfSl9KX12YXIgbj1lLnVzZU5hdGl2ZSxyPWUuaW5pdGlhbGl6ZU1vZHVsZXMsbz1lLmlzSUU7aWYobil7dmFyIGk9ZnVuY3Rpb24oKXt9O2Uud2F0Y2hTaGFkb3c9aSxlLnVwZ3JhZGU9aSxlLnVwZ3JhZGVBbGw9aSxlLnVwZ3JhZGVEb2N1bWVudFRyZWU9aSxlLnVwZ3JhZGVTdWJ0cmVlPWksZS50YWtlUmVjb3Jkcz1pLGVbXCJpbnN0YW5jZW9mXCJdPWZ1bmN0aW9uKGUsdCl7cmV0dXJuIGUgaW5zdGFuY2VvZiB0fX1lbHNlIHIoKTt2YXIgYT1lLnVwZ3JhZGVEb2N1bWVudFRyZWUscz1lLnVwZ3JhZGVEb2N1bWVudDtpZih3aW5kb3cud3JhcHx8KHdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbD8od2luZG93LndyYXA9d2luZG93LlNoYWRvd0RPTVBvbHlmaWxsLndyYXBJZk5lZWRlZCx3aW5kb3cudW53cmFwPXdpbmRvdy5TaGFkb3dET01Qb2x5ZmlsbC51bndyYXBJZk5lZWRlZCk6d2luZG93LndyYXA9d2luZG93LnVud3JhcD1mdW5jdGlvbihlKXtyZXR1cm4gZX0pLHdpbmRvdy5IVE1MSW1wb3J0cyYmKHdpbmRvdy5IVE1MSW1wb3J0cy5fX2ltcG9ydHNQYXJzaW5nSG9vaz1mdW5jdGlvbihlKXtlW1wiaW1wb3J0XCJdJiZzKHdyYXAoZVtcImltcG9ydFwiXSkpfSksbyYmXCJmdW5jdGlvblwiIT10eXBlb2Ygd2luZG93LkN1c3RvbUV2ZW50JiYod2luZG93LkN1c3RvbUV2ZW50PWZ1bmN0aW9uKGUsdCl7dD10fHx7fTt2YXIgbj1kb2N1bWVudC5jcmVhdGVFdmVudChcIkN1c3RvbUV2ZW50XCIpO3JldHVybiBuLmluaXRDdXN0b21FdmVudChlLEJvb2xlYW4odC5idWJibGVzKSxCb29sZWFuKHQuY2FuY2VsYWJsZSksdC5kZXRhaWwpLG4ucHJldmVudERlZmF1bHQ9ZnVuY3Rpb24oKXtPYmplY3QuZGVmaW5lUHJvcGVydHkodGhpcyxcImRlZmF1bHRQcmV2ZW50ZWRcIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuITB9fSl9LG59LHdpbmRvdy5DdXN0b21FdmVudC5wcm90b3R5cGU9d2luZG93LkV2ZW50LnByb3RvdHlwZSksXCJjb21wbGV0ZVwiPT09ZG9jdW1lbnQucmVhZHlTdGF0ZXx8ZS5mbGFncy5lYWdlcil0KCk7ZWxzZSBpZihcImludGVyYWN0aXZlXCIhPT1kb2N1bWVudC5yZWFkeVN0YXRlfHx3aW5kb3cuYXR0YWNoRXZlbnR8fHdpbmRvdy5IVE1MSW1wb3J0cyYmIXdpbmRvdy5IVE1MSW1wb3J0cy5yZWFkeSl7dmFyIGM9d2luZG93LkhUTUxJbXBvcnRzJiYhd2luZG93LkhUTUxJbXBvcnRzLnJlYWR5P1wiSFRNTEltcG9ydHNMb2FkZWRcIjpcIkRPTUNvbnRlbnRMb2FkZWRcIjt3aW5kb3cuYWRkRXZlbnRMaXN0ZW5lcihjLHQpfWVsc2UgdCgpfSh3aW5kb3cuQ3VzdG9tRWxlbWVudHMpLGZ1bmN0aW9uKGUpe0Z1bmN0aW9uLnByb3RvdHlwZS5iaW5kfHwoRnVuY3Rpb24ucHJvdG90eXBlLmJpbmQ9ZnVuY3Rpb24oZSl7dmFyIHQ9dGhpcyxuPUFycmF5LnByb3RvdHlwZS5zbGljZS5jYWxsKGFyZ3VtZW50cywxKTtyZXR1cm4gZnVuY3Rpb24oKXt2YXIgcj1uLnNsaWNlKCk7cmV0dXJuIHIucHVzaC5hcHBseShyLGFyZ3VtZW50cyksdC5hcHBseShlLHIpfX0pfSh3aW5kb3cuV2ViQ29tcG9uZW50cyksZnVuY3Rpb24oZSl7XCJ1c2Ugc3RyaWN0XCI7aWYoIXdpbmRvdy5wZXJmb3JtYW5jZSl7dmFyIHQ9RGF0ZS5ub3coKTt3aW5kb3cucGVyZm9ybWFuY2U9e25vdzpmdW5jdGlvbigpe3JldHVybiBEYXRlLm5vdygpLXR9fX13aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lfHwod2luZG93LnJlcXVlc3RBbmltYXRpb25GcmFtZT1mdW5jdGlvbigpe3ZhciBlPXdpbmRvdy53ZWJraXRSZXF1ZXN0QW5pbWF0aW9uRnJhbWV8fHdpbmRvdy5tb3pSZXF1ZXN0QW5pbWF0aW9uRnJhbWU7cmV0dXJuIGU/ZnVuY3Rpb24odCl7cmV0dXJuIGUoZnVuY3Rpb24oKXt0KHBlcmZvcm1hbmNlLm5vdygpKX0pfTpmdW5jdGlvbihlKXtyZXR1cm4gd2luZG93LnNldFRpbWVvdXQoZSwxZTMvNjApfX0oKSksd2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lfHwod2luZG93LmNhbmNlbEFuaW1hdGlvbkZyYW1lPWZ1bmN0aW9uKCl7cmV0dXJuIHdpbmRvdy53ZWJraXRDYW5jZWxBbmltYXRpb25GcmFtZXx8d2luZG93Lm1vekNhbmNlbEFuaW1hdGlvbkZyYW1lfHxmdW5jdGlvbihlKXtjbGVhclRpbWVvdXQoZSl9fSgpKX0od2luZG93LldlYkNvbXBvbmVudHMpLGZ1bmN0aW9uKGUpe3ZhciB0PWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJzdHlsZVwiKTt0LnRleHRDb250ZW50PVwiYm9keSB7dHJhbnNpdGlvbjogb3BhY2l0eSBlYXNlLWluIDAuMnM7IH0gXFxuYm9keVt1bnJlc29sdmVkXSB7b3BhY2l0eTogMDsgZGlzcGxheTogYmxvY2s7IG92ZXJmbG93OiBoaWRkZW47IHBvc2l0aW9uOiByZWxhdGl2ZTsgfSBcXG5cIjt2YXIgbj1kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaGVhZFwiKTtuLmluc2VydEJlZm9yZSh0LG4uZmlyc3RDaGlsZCl9KHdpbmRvdy5XZWJDb21wb25lbnRzKSxmdW5jdGlvbihlKXt3aW5kb3cuUGxhdGZvcm09ZX0od2luZG93LldlYkNvbXBvbmVudHMpOyIsIi8vIENyZWF0ZSBHbG9iYWwgVHJpbyBPYmplY3RcbnZhciBUcmlvID0ge307XG5cbi8vIENyZWF0ZSBnbG9iYWwgc2NvcGUgb2JqZWN0XG52YXIgc2NvcGUgPSB7fTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAvLyBHbG9iYWwgSW50ZXJjZXB0b3IgZm9yIEFKQVggcmVxdWVzdCAgICBcbiAgICB2YXIgR0xPQkFMX0FKQVhfUkVRVUVTVF9JTlRFUkNFUFQgPSBmdW5jdGlvbihyZXEpIHsgXG4gICAgICAgIHJldHVybiByZXE7XG4gICAgfTtcbiAgICB2YXIgR0xPQkFMX0FKQVhfUkVTUE9OU0VfSU5URVJDRVBUID0gZnVuY3Rpb24ocmVzKSB7XG4gICAgICAgIHJldHVybiByZXM7XG4gICAgfTtcblxuICAgIC8vIEFqYXggb2JqZWN0IGNvbnN0cnVjdG9yXG4gICAgLy8gXG4gICAgLy8gRXhhbXBsZTogXG4gICAgLy8gdmFyIHJlcXVlc3QgPSBuZXcgQWpheCh7XG4gICAgLy8gICAgIHR5cGU6ICdHRVQnLFxuICAgIC8vICAgICB1cmw6ICdodHRwOi8vd3d3LnNvbWVhcGkuY29tL2FwaS8nLFxuICAgIC8vICAgICBvbmxvYWQ6IGZ1bmN0aW9uKHJlc3BvbnNlKSB7XG4gICAgLy8gICAgICAgICBjb25zb2xlLmxvZyhyZXNwb25zZSk7XG4gICAgLy8gICAgIH0uYmluZCh0aGlzKVxuICAgIC8vIH0pO1xuICAgIC8vIFxuICAgIC8vIHJlcXVlc3Quc2VuZCgpO1xuICAgIC8vIFxuICAgIC8vIFRoaXMgd2lsbCBsb2cgdGhlIHJlc3BvbnNlIG9iamVjdFxuICAgIHZhciBBamF4ID0gZnVuY3Rpb24ob3B0cykge1xuICAgICAgICAvLyBDcmVhdGUgWEhSIE9iamVjdFxuICAgICAgICB2YXIgeGhyICAgICAgICA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xuXG4gICAgICAgIC8vIEludGVyY2VwdCByZXNwb25zZSB3aXRoIEdsb2JhbCBJbnRlcmNlcHRvclxuICAgICAgICAvLyBhbmQgdGhlbiBpbnZva2Ugb3B0cy5vbmxvYWQgY2FsbGJhY2tcbiAgICAgICAgeGhyLm9ubG9hZCAgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIHZhciByZXNwb25zZSA9IEdMT0JBTF9BSkFYX1JFU1BPTlNFX0lOVEVSQ0VQVCh4aHIpO1xuICAgICAgICAgICAgb3B0cy5vbmxvYWQocmVzcG9uc2UpO1xuICAgICAgICB9O1xuXG4gICAgICAgIHRoaXMudXJsICAgICA9IG9wdHMudXJsO1xuICAgICAgICB0aGlzLnR5cGUgICAgPSBvcHRzLnR5cGUudG9VcHBlckNhc2UoKTtcbiAgICAgICAgdGhpcy5oZWFkZXJzID0ge307XG4gICAgICAgIHRoaXMueGhyICAgICA9IHhocjtcblxuICAgICAgICAvLyBJbnRlcmNlcHQgQWpheCBvYmplY3Qgb24gY3JlYXRpb25cbiAgICAgICAgR0xPQkFMX0FKQVhfUkVRVUVTVF9JTlRFUkNFUFQodGhpcyk7XG4gICAgfTtcblxuICAgIEFqYXgucHJvdG90eXBlLnNldFVybCA9IGZ1bmN0aW9uKHVybCkge1xuICAgICAgICBpZiAoIXVybCkgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3QgcGFyYW1ldGVyOiB1cmwuJyk7XG4gICAgICAgIHRoaXMudXJsID0gdXJsO1xuICAgIH07XG5cbiAgICBBamF4LnByb3RvdHlwZS5zZXRUeXBlID0gZnVuY3Rpb24odHlwZSkge1xuICAgICAgICBpZiAoIXR5cGUpIHRocm93IG5ldyBFcnJvcignRXhwZWN0IHBhcmFtZXRlcjogdHlwZS4nKTtcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZS50b1VwcGVyQ2FzZSgpO1xuICAgIH07XG5cbiAgICBBamF4LnByb3RvdHlwZS5zZXRIZWFkZXIgPSBmdW5jdGlvbihrZXksIHZhbHVlKSB7XG4gICAgICAgIHRoaXMuaGVhZGVyc1trZXldID0gdmFsdWU7XG4gICAgfTtcblxuICAgIC8vIEFkZCByZXF1ZXN0IG1ldGFkYXRhIHRvIFhIUiwgYW5kIHRoZSBzZW5kXG4gICAgQWpheC5wcm90b3R5cGUuc2VuZCA9IGZ1bmN0aW9uKHBheWxvYWQpIHtcbiAgICAgICAgaWYgKCF0aGlzLnVybCkgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3QgcmVxdWVzdCB0byBjb250YWluIHByb3BlcnR5OiB1cmwuJyk7XG4gICAgICAgIGlmICghdGhpcy50eXBlKSB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdCByZXF1ZXN0IHRvIGNvbnRhaW4gcHJvcGVydHk6IHR5cGUuJyk7XG5cbiAgICAgICAgdGhpcy54aHIub3Blbih0aGlzLnR5cGUsIHRoaXMudXJsKTtcblxuICAgICAgICBmb3IgKHZhciBoZWFkZXIgaW4gdGhpcy5oZWFkZXJzKSB7XG4gICAgICAgICAgICB0aGlzLnhoci5zZXRSZXF1ZXN0SGVhZGVyKGhlYWRlciwgdGhpcy5oZWFkZXJzW2hlYWRlcl0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHBheWxvYWQpIHtcbiAgICAgICAgICAgIHRoaXMueGhyLnNlbmQocGF5bG9hZCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aGlzLnhoci5zZW5kKCk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgc2NvcGUuQWpheCA9IEFqYXg7XG5cbiAgICBUcmlvLkFKQVggPSB7XG4gICAgICAgIGludGVyY2VwdEFsbFJlcXVlc3Q6IGZ1bmN0aW9uKGNiKSB7XG4gICAgICAgICAgICBHTE9CQUxfQUpBWF9SRVFVRVNUX0lOVEVSQ0VQVCA9IGNiO1xuICAgICAgICB9LFxuICAgICAgICBpbnRlcmNlcHRBbGxSZXNwb25zZTogZnVuY3Rpb24oY2IpIHtcbiAgICAgICAgICAgIEdMT0JBTF9BSkFYX1JFU1BPTlNFX0lOVEVSQ0VQVCA9IGNiO1xuICAgICAgICB9XG4gICAgfTtcbiAgICBcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgLy8gRXh0ZW5kIGZ1bmN0aW9uIHRvIHRvIGV4dGVuZCBUcmlvIENsYXNzXG4gICAgc2NvcGUuZXh0ZW5kID0gZXh0ZW5kO1xuXG4gICAgZnVuY3Rpb24gZXh0ZW5kKG1ldGhvZHMpIHtcbiAgICAgICAgdmFyIHBhcmVudCA9IHRoaXMuX2NvbnN0cnVjdG9yO1xuXG4gICAgICAgIGlmICghcGFyZW50KSB7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgc3RhdGljQXR0ciA9IHt9O1xuICAgICAgICB2YXIgY2hpbGQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBzdGF0aWNBdHRyKSB7XG4gICAgICAgICAgICAgICAgdGhpc1trZXldID0gc3RhdGljQXR0cltrZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcGFyZW50LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgIH07XG4gICAgICAgIFxuICAgICAgICB2YXIgZXh0ZW5kZWQgPSB7fTtcblxuICAgICAgICBmb3IgKHZhciBwcm9wIGluIHBhcmVudC5wcm90b3R5cGUpIHtcbiAgICAgICAgICAgIGlmIChPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwocGFyZW50LnByb3RvdHlwZSwgcHJvcCkpIHtcbiAgICAgICAgICAgICAgICBleHRlbmRlZFtwcm9wXSA9IHBhcmVudC5wcm90b3R5cGVbcHJvcF07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmb3IgKHZhciBtZXQgaW4gbWV0aG9kcykge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChtZXRob2RzLCBtZXQpKSB7XG4gICAgICAgICAgICAgICAgdmFyIG1ldGhvZCA9IG1ldGhvZHNbbWV0XTtcbiAgICAgICAgICAgICAgICBpZiAodHlwZW9mIG1ldGhvZCA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICBleHRlbmRlZFttZXRdID0gbWV0aG9kc1ttZXRdO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRpY0F0dHJbbWV0XSA9IG1ldGhvZHNbbWV0XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjaGlsZC5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKGV4dGVuZGVkKTtcblxuICAgICAgICByZXR1cm4gY2hpbGQ7XG4gICAgfVxufSkoKTsiLCIoZnVuY3Rpb24oKSB7XG4gICAgLy8gRnVuY3Rpb24gdG8gZ2VuZXJhdGUgdXVpZCBmb3IgVHJpbyBpbnN0YW5jZVxuICAgIFxuICAgIHNjb3BlLmlkR2VuZXJhdG9yID0gaWRHZW5lcmF0b3I7XG4gICAgXG4gICAgZnVuY3Rpb24gaWRHZW5lcmF0b3Ioc3RyKSB7XG4gICAgICAgIHZhciBjb3VudCA9IDE7XG5cbiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgdmFyIGlkID0gc3RyICsgY291bnQ7XG4gICAgICAgICAgICBjb3VudCsrO1xuICAgICAgICAgICAgcmV0dXJuIGlkO1xuICAgICAgICB9O1xuICAgIH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBWb3cgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8gQSBsaWdodC13ZWlnaHQgUHJvbWlzZSBsaWJyYXJ5IGZvciBpbnRlcm5hbCB1c2VcblxuICAgIC8vIFZvdyBzdGF0ZXMgcmVmZXJlbmNlXG4gICAgdmFyIFBFTkRJTkcgICA9IHt9LFxuICAgICAgICBSRVNPTFZFRCAgPSB7fSxcbiAgICAgICAgUkVKRUNURUQgID0ge30sXG4gICAgICAgIEZVTEZJTExFRCA9IHt9O1xuXG4gICAgLy8gVm93IGNvbnN0cnVjdG9yXG4gICAgLy8gXG4gICAgLy8gRXhhbXBsZTpcbiAgICAvLyB2YXIgdm93ID0gVm93KCk7XG4gICAgLy8gXG4gICAgLy8gdm93LnByb21pc2UudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgLy8gICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAvLyB9KTtcbiAgICAvLyBcbiAgICAvLyB2b3cucmVzb2x2ZSgnaGknKTtcbiAgICAvLyBcbiAgICAvLyBUaGlzIGlzIGxvZyAnaGknXG4gICAgdmFyIFZvdyA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdm93ID0ge307XG4gICAgICAgIHZhciBfcHJvbWlzZSA9IFByb21pc2VPYmooKTtcblxuICAgICAgICB2b3cucmVzb2x2ZSA9IF9wcm9taXNlLnJlc29sdmU7XG4gICAgICAgIHZvdy5yZWplY3QgID0gX3Byb21pc2UucmVqZWN0O1xuICAgICAgICB2b3cucHJvbWlzZSA9IHtcbiAgICAgICAgICAgIHRoZW46IF9wcm9taXNlLnRoZW4sXG4gICAgICAgICAgICBjYXRjaDogX3Byb21pc2UuY2F0Y2gsXG4gICAgICAgICAgICBkb25lOiBfcHJvbWlzZS5kb25lXG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIHZvdztcblxuICAgICAgICAvLyBQcm9taXNlIE9iamVjdCBjb25zdHJ1Y3RvclxuICAgICAgICBmdW5jdGlvbiBQcm9taXNlT2JqKCkge1xuICAgICAgICAgICAgdmFyIHN0YXRlID0gUEVORElORztcbiAgICAgICAgICAgIHZhciB2YWx1ZSwgb25SZXNvbHZlZCwgb25SZWplY3RlZCwgb25GdWxsZmlsbGVkLCByZXR1cm5Qcm9taXNlO1xuXG4gICAgICAgICAgICB2YXIgcmV0ID0ge1xuXG4gICAgICAgICAgICAgICAgcmVzb2x2ZTogZnVuY3Rpb24gKHZhbCkge1xuICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IHZhbDtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSBSRVNPTFZFRDtcblxuICAgICAgICAgICAgICAgICAgICBpZiAob25SZXNvbHZlZCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlUmVzb2x2ZShvblJlc29sdmVkKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvbkZ1bGxmaWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZURvbmUob25GdWxsZmlsbGVkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICByZWplY3Q6IGZ1bmN0aW9uIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBlcnI7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlID0gUkVKRUNURUQ7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKG9uUmVqZWN0ZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZVJlamVjdChvblJlamVjdGVkKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvbkZ1bGxmaWxsZWQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZURvbmUob25GdWxsZmlsbGVkKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sXG5cbiAgICAgICAgICAgICAgICB0aGVuOiBmdW5jdGlvbiAoc3VjY2Vzc0NhbGxiYWNrKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVyblByb21pc2UgPSBQcm9taXNlT2JqKCk7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZVJlc29sdmUoc3VjY2Vzc0NhbGxiYWNrKTtcblxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgdGhlbjogcmV0dXJuUHJvbWlzZS50aGVuLFxuICAgICAgICAgICAgICAgICAgICAgICAgY2F0Y2g6IHJldHVyblByb21pc2UuY2F0Y2gsXG4gICAgICAgICAgICAgICAgICAgICAgICBkb25lOiByZXR1cm5Qcm9taXNlLmRvbmVcbiAgICAgICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICB9LFxuXG4gICAgICAgICAgICAgICAgY2F0Y2g6IGZ1bmN0aW9uIChmYWlsQ2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuUHJvbWlzZSA9IFByb21pc2VPYmooKTtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlUmVqZWN0KGZhaWxDYWxsYmFjayk7XG5cbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoZW46IHJldHVyblByb21pc2UudGhlbixcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhdGNoOiByZXR1cm5Qcm9taXNlLmNhdGNoLFxuICAgICAgICAgICAgICAgICAgICAgICAgZG9uZTogcmV0dXJuUHJvbWlzZS5kb25lXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSxcblxuICAgICAgICAgICAgICAgIGRvbmU6IGZ1bmN0aW9uIChmaW5hbGx5Q2FsbGJhY2spIHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlRG9uZShmaW5hbGx5Q2FsbGJhY2spO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJldHVybiByZXQ7XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZURvbmUoZm4pIHtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUgPT09IFBFTkRJTkcpIHtcbiAgICAgICAgICAgICAgICAgICAgb25GdWxsZmlsbGVkID0gZm4gfHwgJ2RvbmUnO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlID09PSBSRVNPTFZFRCAmJiB0eXBlb2YgZm4gPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgICAgICAgICAgc3RhdGUgPSBGVUxGSUxMRUQ7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmbi5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUgPT09IFJFSkVDVEVEKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YXRlID0gRlVMRklMTEVEO1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyB2YWx1ZTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZVJlc29sdmUoZm4pIHtcbiAgICAgICAgICAgICAgICB2YXIgZXJyb3I7XG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlID09PSBQRU5ESU5HKSB7XG4gICAgICAgICAgICAgICAgICAgIG9uUmVzb2x2ZWQgPSBmbjtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUgPT09IFJFU09MVkVEKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSAmJiB0eXBlb2YgdmFsdWUudGhlbiA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUudGhlbihyZXQucmVzb2x2ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBmbi5jYWxsKHRoaXMsIHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB2YWx1ZSA9IGVycjtcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXR1cm5Qcm9taXNlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWVycm9yKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuUHJvbWlzZS5yZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm5Qcm9taXNlLnJlamVjdCh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZVJlamVjdChmbikge1xuICAgICAgICAgICAgICAgIHZhciBlcnJvcjtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUgPT09IFBFTkRJTkcpIHtcbiAgICAgICAgICAgICAgICAgICAgb25SZWplY3RlZCA9IGZuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gUkVKRUNURUQpIHtcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbHVlID0gZm4uY2FsbCh0aGlzLCB2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWUgPSBlcnI7XG4gICAgICAgICAgICAgICAgICAgICAgICBlcnJvciA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgICAgICBpZiAocmV0dXJuUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFlcnJvcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVyblByb21pc2UucmVzb2x2ZSh2YWx1ZSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuUHJvbWlzZS5yZWplY3QodmFsdWUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKHN0YXRlID09PSBSRVNPTFZFRCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAocmV0dXJuUHJvbWlzZSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuUHJvbWlzZS5yZXNvbHZlKHZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBzY29wZS5Wb3cgPSBWb3c7XG5cbn0pKCk7IiwiKGZ1bmN0aW9uKCkge1xuICAgIC8vIFN0b3JhZ2UgdG8gc3RvcmUgYWxsIFNpZ25hbHMgaW5zdGFuY2VzXG4gICAgdmFyIFNJR05BTFNfU1RPUkFHRSA9IHt9O1xuXG4gICAgLy8gQ29uc3RydWN0b3IgZm9yIFNpZ25hbHNcbiAgICAvLyBFeGFtcGxlOlxuICAgIC8vIHZhciBjb250ZXh0ID0ge307XG4gICAgLy8gXG4gICAgLy8gbmV3IFNpZ25hbCgndGVzdCcsIGNvbnRleHQpO1xuICAgIC8vIFxuICAgIC8vIGNvbnRleHQgd2lsbCBub3cgaGF2ZSBTaWduYWwgbWV0aG9kcyB0aGF0IGFyZSBleHBvc2VkXG4gICAgdmFyIFNpZ25hbCA9IGZ1bmN0aW9uKHV1aWQsIG9yaWdpbikge1xuICAgICAgICB0aGlzLnN0b3JhZ2UgICAgICAgICAgPSB7fTtcbiAgICAgICAgdGhpcy5oYW5kbGVBbGwgICAgICAgID0gbnVsbDtcbiAgICAgICAgdGhpcy5jb25uZWN0b3JzICAgICAgID0ge307XG4gICAgICAgIHRoaXMub3JpZ2luICAgICAgICAgICA9IG9yaWdpbjtcbiAgICAgICAgdGhpcy51dWlkICAgICAgICAgICAgID0gdXVpZDtcbiAgICAgICAgU0lHTkFMU19TVE9SQUdFW3V1aWRdID0gdGhpcztcbiAgICAgICAgb3JpZ2luLm9uICAgICAgICAgICAgID0gdGhpcy5vbi5iaW5kKHRoaXMpO1xuICAgICAgICBvcmlnaW4ub2ZmICAgICAgICAgICAgPSB0aGlzLm9mZi5iaW5kKHRoaXMpO1xuICAgICAgICBvcmlnaW4uZW1pdCAgICAgICAgICAgPSB0aGlzLmVtaXQuYmluZCh0aGlzKTtcbiAgICAgICAgb3JpZ2luLmJyb2FkY2FzdCAgICAgID0gdGhpcy5icm9hZGNhc3QuYmluZCh0aGlzKTtcbiAgICAgICAgb3JpZ2luLnJlc2V0ICAgICAgICAgID0gdGhpcy5yZXNldC5iaW5kKHRoaXMpO1xuICAgICAgICBvcmlnaW4uY29ubmVjdCAgICAgICAgPSB0aGlzLmNvbm5lY3QuYmluZCh0aGlzKTtcbiAgICAgICAgb3JpZ2luLmRpc2Nvbm5lY3QgICAgID0gdGhpcy5kaXNjb25uZWN0LmJpbmQodGhpcyk7XG4gICAgfTtcblxuICAgIC8vIEFkZCBsaXN0ZW5lciBmb3IgYSBzcGVjaWZpYyBwdWxzZSB0eXBlXG4gICAgLy8gSWYgb25seSBwYXNzaW5nIGluIGEgZnVuY3Rpb24sIGl0IHdpbGwgc2V0IHRoYXQgZnVuY3Rpb25cbiAgICAvLyBhcyB0aGUgZGVmYXVsdCBoYW5kbGVyIGZvciBhbGwgcHVsc2VzXG4gICAgU2lnbmFsLnByb3RvdHlwZS5vbiA9IGZ1bmN0aW9uKHB1bHNlVHlwZSwgZnVuYykge1xuICAgICAgICBpZiAodHlwZW9mIHB1bHNlVHlwZSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhpcy5oYW5kbGVBbGwgPSBwdWxzZVR5cGU7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXRoaXMuc3RvcmFnZVtwdWxzZVR5cGVdKSB7XG4gICAgICAgICAgICB0aGlzLnN0b3JhZ2VbcHVsc2VUeXBlXSA9IFtdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiBmdW5jICE9PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01pc3NpbmcgY2FsbGJhY2sgZnVuY3Rpb24gb24gJyArIHB1bHNlVHlwZSArICcuJyk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIHRoaXMuc3RvcmFnZVtwdWxzZVR5cGVdLnB1c2goZnVuYyk7XG4gICAgfTtcblxuICAgIC8vIFJlbW92ZSBsaXN0ZW5lciBmb3IgYSBwdWxzZVxuICAgIFNpZ25hbC5wcm90b3R5cGUub2ZmID0gZnVuY3Rpb24ocHVsc2VUeXBlLCBmdW5jKSB7XG4gICAgICAgIHZhciBidWNrZXQgPSB0aGlzLnN0b3JhZ2VbcHVsc2VUeXBlXSB8fCBbXTtcblxuICAgICAgICBidWNrZXQuZm9yRWFjaChmdW5jdGlvbihmbiwgaSkge1xuICAgICAgICAgICAgaWYoZm4gPT09IGZ1bmMpIHtcbiAgICAgICAgICAgICAgICBidWNrZXQuc3BsaWNlKGksIDEpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfTtcblxuICAgIC8vIENyZWF0ZSBwdWxzZSB3aXRoIHB1bHNlVHlwZSBhbmQgZGV0YWlsLCB0aGVuIHRyaWdnZXJcbiAgICAvLyBwdWxzZSB0eXBlIHRvIGFsbCBjb25uZWN0b3JzXG4gICAgU2lnbmFsLnByb3RvdHlwZS5lbWl0ID0gZnVuY3Rpb24ocHVsc2VUeXBlLCBkZXRhaWwpIHtcbiAgICAgICAgdmFyIHB1bHNlLCBjb25uZWN0b3I7XG5cbiAgICAgICAgaWYgKHR5cGVvZiBwdWxzZVR5cGUgPT09ICdvYmplY3QnICYmIHB1bHNlVHlwZS50eXBlKSB7XG4gICAgICAgICAgICBwdWxzZSA9IHB1bHNlVHlwZTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2YgcHVsc2VUeXBlID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgcHVsc2UgPSBNYWtlUHVsc2UocHVsc2VUeXBlLCBkZXRhaWwsIHRoaXMub3JpZ2luKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAodmFyIGlkIGluIHRoaXMuY29ubmVjdG9ycykge1xuICAgICAgICAgICAgY29ubmVjdG9yID0gdGhpcy5jb25uZWN0b3JzW2lkXTtcbiAgICAgICAgICAgIGNvbm5lY3Rvci50cmlnZ2VyKHB1bHNlKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBTaW1pbGFyIHRvIGVtaXQsIGFjY2VwdHMgYSBwdWxzZSBvYmplY3RcbiAgICBTaWduYWwucHJvdG90eXBlLnRyaWdnZXIgPSBmdW5jdGlvbihwdWxzZSkge1xuICAgICAgICBpZiAoIXB1bHNlLnR5cGUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXhwZWN0IHBhcmFtZXRlciB0byBiZSBhIHB1bHNlJyk7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgYnVja2V0ID0gdGhpcy5zdG9yYWdlW3B1bHNlLnR5cGVdIHx8IFtdO1xuICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ1Y2tldC5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgYnVja2V0W2ldKHB1bHNlKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAodGhpcy5oYW5kbGVBbGwpIHtcbiAgICAgICAgICAgIHRoaXMuaGFuZGxlQWxsKHB1bHNlKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBCcm9hZGNhc3QgcHVsc2UgdHlwZSB0byBhbGwgU2lnbmFscyBpbnN0YW5jZXNcbiAgICBTaWduYWwucHJvdG90eXBlLmJyb2FkY2FzdCA9IGZ1bmN0aW9uKHB1bHNlVHlwZSwgZGV0YWlsKSB7XG4gICAgICAgIHZhciBwdWxzZSA9IE1ha2VQdWxzZShwdWxzZVR5cGUsIGRldGFpbCwgdGhpcy5vcmlnaW4pLFxuICAgICAgICAgICAgc2lnbmFsO1xuXG4gICAgICAgIGZvciAodmFyIGlkIGluIFNJR05BTFNfU1RPUkFHRSkge1xuICAgICAgICAgICAgc2lnbmFsID0gU0lHTkFMU19TVE9SQUdFW2lkXTtcbiAgICAgICAgICAgIHNpZ25hbC50cmlnZ2VyKHB1bHNlKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBSZXNldCBhIHNwZWNpZmljIGV2ZW50XG4gICAgLy8gV2hlbiBwYXNzaW5nIGluIG5vIGFyZ3VtZW50LCBpdCB3aWxsIHJlc2V0IFNpZ25hbCB0byBpbml0IHN0YXRlXG4gICAgU2lnbmFsLnByb3RvdHlwZS5yZXNldCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgaWYgKG5hbWUpIHtcbiAgICAgICAgICAgIHRoaXMuc3RvcmFnZVtuYW1lXSA9IFtdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhpcy5zdG9yYWdlID0ge307XG4gICAgICAgICAgICBmb3IgKHZhciBjb25uZWN0b3JJZCBpbiB0aGlzLmNvbm5lY3RvcnMpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmRpc2Nvbm5lY3QoY29ubmVjdG9ySWQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vIENvbm5lY3QgdG8gYSBzaWduYWwgcmVmZXJlbmNlIGJ5IGEgdXVpZC5cbiAgICAvLyBXaGVuIGNvbm5lY3RlZCwgU2lnbmFsIEEgd2lsbCBsaXN0ZW4gdG8gcHVsc2VzIGZyb20gU2lnbmFsIEJcbiAgICBTaWduYWwucHJvdG90eXBlLmNvbm5lY3QgPSBmdW5jdGlvbihjb25uZWN0b3JJZCkge1xuICAgICAgICB2YXIgY29ubmVjdG9yID0gU0lHTkFMU19TVE9SQUdFW2Nvbm5lY3RvcklkXTtcbiAgICAgICAgdGhpcy5hZGRDb25uZWN0b3IoY29ubmVjdG9ySWQpO1xuICAgICAgICBjb25uZWN0b3IuYWRkQ29ubmVjdG9yKHRoaXMudXVpZCk7XG4gICAgfTtcblxuICAgIC8vIEhlbHBlciBtZXRob2QgdG8gYWRkQ29ubmVjdG9yIHRvIGEgc2lnbmxcbiAgICBTaWduYWwucHJvdG90eXBlLmFkZENvbm5lY3RvciA9IGZ1bmN0aW9uKGNvbm5lY3RvcklkKSB7XG4gICAgICAgIHZhciBjb25uZWN0b3IgPSBTSUdOQUxTX1NUT1JBR0VbY29ubmVjdG9ySWRdO1xuICAgICAgICBpZiAoY29ubmVjdG9yKSB7XG4gICAgICAgICAgICB0aGlzLmNvbm5lY3RvcnNbY29ubmVjdG9ySWRdID0gY29ubmVjdG9yO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgZmluZCBjb25uZWN0b3IgJyArIGNvbm5lY3RvcklkICsgJy4nKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICAvLyBEaXNjb25uZWN0IHNpZ25hbCByZWZlcmVuY2UgYnkgYSB1dWlkXG4gICAgU2lnbmFsLnByb3RvdHlwZS5kaXNjb25uZWN0ID0gZnVuY3Rpb24oY29ubmVjdG9ySWQpIHtcbiAgICAgICAgdmFyIGNvbm5lY3RvciA9IFNJR05BTFNfU1RPUkFHRVtjb25uZWN0b3JJZF07XG4gICAgICAgIHRoaXMucmVtb3ZlQ29ubmVjdG9yKGNvbm5lY3RvcklkKTtcbiAgICAgICAgY29ubmVjdG9yLnJlbW92ZUNvbm5lY3Rvcih0aGlzLnV1aWQpO1xuICAgIH07XG5cbiAgICAvLyBIZWxwZXIgbWV0aG9kIHRvIHJlbW92ZUNvbm5lY3RvclxuICAgIFNpZ25hbC5wcm90b3R5cGUucmVtb3ZlQ29ubmVjdG9yID0gZnVuY3Rpb24oY29ubmVjdG9ySWQpIHtcbiAgICAgICAgaWYgKHRoaXMuY29ubmVjdG9yc1tjb25uZWN0b3JJZF0pIHtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNvbm5lY3RvcnNbY29ubmVjdG9ySWRdO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgZmluZCBjb25uZWN0b3IgJyArIGNvbm5lY3RvcklkICsgJy4nKTtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBzY29wZS5TaWduYWwgPSBTaWduYWw7XG5cbiAgICAvLyBDb25zdHJ1Y3RvciB0byBtYWtlIG9uZSBwdWxzZVxuICAgIGZ1bmN0aW9uIE1ha2VQdWxzZSh0eXBlLCBkZXRhaWwsIG9yaWdpbikge1xuICAgICAgICB2YXIgcHVsc2UgPSB7XG4gICAgICAgICAgICB0eXBlOiB0eXBlLFxuICAgICAgICAgICAgZGV0YWlsOiBkZXRhaWwsXG4gICAgICAgICAgICBvcmlnaW46IG9yaWdpblxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBwdWxzZTtcbiAgICB9XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgdmFyIFZvdyA9IHNjb3BlLlZvdztcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBNb2R1bGUgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBNb2R1bGUgbG9hZGVycyB0byBlbmFibGUgY2xlYW4sIG1vZHVsYXJpemVkIGNvZGVcblxuICAgIC8vIFN0b3JhZ2UgdG8gY2FjaGUgYWxsIGxvYWRlZCBtb2R1bGVzXG4gICAgdmFyIE1PRFVMRV9TVE9SRSA9IHt9O1xuXG4gICAgLy8gTW9kdWxlIENvbnN0cnVjdG9yXG4gICAgdmFyIE1vZHVsZSA9IGZ1bmN0aW9uKCkge307XG5cbiAgICAvLyBFeHBvcnQgd2lsbCBpbnZva2UgdGhlIGZ1bmN0aW9uIGFuZCBjYWNoZSBpdHMgcmVzdWx0IGF0XG4gICAgLy8gTU9EVUxFX1NUT1JFIHVzaW5nIHRoZSBwYXNzZWQtaW4ga2V5XG4gICAgLy8gXG4gICAgLy8gRXhhbXBsZTpcbiAgICAvLyBUcmlvLk1vZHVsZS5leHBvcnQoJ2FwcCcsIGZ1bmN0aW9uKCkge1xuICAgIC8vICAgICByZXR1cm4gJ2hpJztcbiAgICAvLyB9KTtcbiAgICAvLyBcbiAgICAvLyBUaGlzIHdpbGwgc3RvcmUgJ2hpJyB0byBNT0RVTEVfU1RPUkUuYXBwXG4gICAgTW9kdWxlLnByb3RvdHlwZS5leHBvcnQgPSBmdW5jdGlvbihrZXksIGZ1bmMpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBrZXkgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01vZHVsZSBuYW1lIGlzIG5vdCBhIHN0cmluZy4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2YgZnVuYyAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdNb2R1bGUgaXMgbm90IGEgZnVuY3Rpb24uJyk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBJbnZva2UgZnVuYyB0byBnZXQgbW9kdWxlIHZhbHVlXG4gICAgICAgIHZhciBtb2R1bGUgPSBmdW5jKCk7XG5cbiAgICAgICAgLy8gU3RvcmUgd3JhcHBlZCB2YWx1ZSBpbiBTdG9yYWdlXG4gICAgICAgIC8vIFlvdSBjYW4gbGF0ZXIgb24gdW53cmFwcGVkIHZhbHVlIGJ5IGRvaW5nOlxuICAgICAgICAvLyBcbiAgICAgICAgLy8gTU9EVUxFX1NUT1JFW2tleV0oZnVuY3Rpb24obW9kdWxlKSB7XG4gICAgICAgIC8vICAgICAgY29uc29sZS5sb2cobW9kdWxlKTtcbiAgICAgICAgLy8gfSk7XG4gICAgICAgIC8vIFxuICAgICAgICAvLyBUaGlzIGlzIG5lY2Vzc2FyeSBhcyB3ZSBuZWVkIHRoaXMgdG8gYmUgdW53cmFwcGVkIGJ5IFxuICAgICAgICAvLyB0aGUgaW1wb3J0IHByb21pc2VzIHJlc29sdmUgbWV0aG9kIGluIG9yZGVyIHRvIGxvYWQgXG4gICAgICAgIC8vIGVhY2ggZmlsZSBpbiB0aGUgY29ycmVjdCBvcmRlclxuICAgICAgICBNT0RVTEVfU1RPUkVba2V5XSA9IGZ1bmN0aW9uKGRvbmUpIHtcbiAgICAgICAgICAgIGRvbmUobW9kdWxlKTtcbiAgICAgICAgfTtcbiAgICB9O1xuXG5cbiAgICAvLyBJbXBvcnQgYWNjZXB0IGFuIG9iamVjdCBjb25zaXN0IG9mIHsgJ01vZHVsZSBOYW1lJzogJ1VSTCBvciBGSUxFUEFUSCcgfSxcbiAgICAvLyBhbmQgd2lsbCBwZXJmb3JtIHRoZSBmb2xsb3dpbmc6XG4gICAgLy8gICAtIElmIG1vZHVsZSBuYW1lIGlzIGluIGNhY2hlXG4gICAgLy8gICAgICBhLiBSZXNvbHZlIHByb21pc2UgYW5kIHBhc3MgaW4gY2FjaGUgdmFsdWUgdG8gdGhlIHByb21pc2UgY2FsbGJhY2tcbiAgICAvLyAgIC0gSWYgbW9kdWxlIG5hbWUgaXMgbm90IGluIGNhY2hlXG4gICAgLy8gICAgICBhLiBMb2FkIHRoZSBVUkwgKGV4cGVjdGluZyBhIGpzIGZpbGUgY29udGFpbmluZyBUcmlvLk1vZHVsZS5leHBvcnQpXG4gICAgLy8gICAgICBiLiBPbiBzdWNjZXNzLCBUcmlvLk1vZHVsZS5leHBvcnQgd2lsbCBjYWNoZSB0aGUgbW9kdWxlIHZhbHVlXG4gICAgLy8gICAgICBjLiBSZXR1cm4gY2FjaGVkIHZhbHVlXG4gICAgLy8gICAgICBcbiAgICAvLyAgRXhhbXBsZTpcbiAgICAvLyAgVHJpby5Nb2R1bGUuaW1wb3J0KHtcbiAgICAvLyAgICAgICdsb2dvJzogJy4uL3NyYy9qcy9sb2dvLmpzJ1xuICAgIC8vICB9KS5hbmQuZXhwb3J0KCdhcHAnLCBmdW5jdGlvbihtb2R1bGVzKSB7XG4gICAgLy8gICAgICBjb25zb2xlLmxvZyhtb2R1bGVzLmxvZ28pO1xuICAgIC8vICB9KTtcbiAgICAvLyAgXG4gICAgLy8gIFRoaXMgd2lsbCBsb2cgdGhlIHJldHVybiB2YWx1ZSBmcm9tIGxvZ28uanNcbiAgICBNb2R1bGUucHJvdG90eXBlLmltcG9ydCA9IGZ1bmN0aW9uKG1vZHVsZXMpIHtcbiAgICAgICAgLy8gR3JhYiBsaXN0IG9mIG1vZHVsZXMga2V5XG4gICAgICAgIHZhciBjb3VudCAgPSBPYmplY3Qua2V5cyhtb2R1bGVzKTtcblxuICAgICAgICAvLyBDcmVhdGUgbWFpbiBwcm9taXNlXG4gICAgICAgIHZhciB2b3cgPSBWb3coKTtcblxuICAgICAgICAvLyBWYWx1ZXMgdG8gYmUgcmVzb2x2ZWRcbiAgICAgICAgdmFyIHJldCA9IHt9O1xuXG4gICAgICAgIHZhciB1cmw7XG5cbiAgICAgICAgX2ltcG9ydChjb3VudC5wb3AoKSwgdm93KTtcblxuICAgICAgICAvLyBFeHBvc2UgYW4gYW5kLmV4cG9ydCBtZXRob2QgZm9yIGNsZWFuZXIgQVBJIHdoZW5cbiAgICAgICAgLy8gaW1wb3J0aW5nIGFuZCBleHBvcnRpbmcgbW9kdWxlcy5cbiAgICAgICAgdm93LnByb21pc2UuYW5kID0ge307XG4gICAgICAgIHZvdy5wcm9taXNlLmFuZC5leHBvcnQgPSBmdW5jdGlvbihrZXksIGZ1bmMpIHtcbiAgICAgICAgICAgIHZhciBtb2R1bGU7XG4gICAgICAgICAgICBNT0RVTEVfU1RPUkVba2V5XSA9IGZ1bmN0aW9uKGRvbmUpIHtcbiAgICAgICAgICAgICAgICBpZiAobW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgICAgIGRvbmUobW9kdWxlKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIHZvdy5wcm9taXNlXG4gICAgICAgICAgICAgICAgICAgIC50aGVuKGZ1bmN0aW9uKHJldCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgbW9kdWxlID0gZnVuYy5jYWxsKHRoaXMsIHJldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gbW9kdWxlO1xuICAgICAgICAgICAgICAgICAgICB9LmJpbmQodGhpcykpXG4gICAgICAgICAgICAgICAgICAgIC5kb25lKGRvbmUpO1xuICAgICAgICAgICAgfTtcbiAgICAgICAgfS5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHZvdy5wcm9taXNlLmFuZC5pbXBvcnQgPSBmdW5jdGlvbihtb2R1bGVzKSB7XG4gICAgICAgICAgICByZXR1cm4gdm93LnByb21pc2UudGhlbih0aGlzLmltcG9ydC5iaW5kKHRoaXMsIG1vZHVsZXMpKTtcbiAgICAgICAgfS5iaW5kKHRoaXMpO1xuXG4gICAgICAgIHJldHVybiB2b3cucHJvbWlzZTtcblxuICAgICAgICAvLyBTdWIgcm91dGluZSBmb3IgaW1wb3J0XG4gICAgICAgIGZ1bmN0aW9uIF9pbXBvcnQoa2V5LCBwcm9taXNlKSB7XG4gICAgICAgICAgICB2YXIgdXJsID0gbW9kdWxlc1trZXldO1xuXG4gICAgICAgICAgICBpZiAodHlwZW9mIGtleSAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ01vZHVsZSBuYW1lIGlzIG5vdCBhIHN0cmluZy4nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHR5cGVvZiB1cmwgIT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdVUkwgaXMgbm90IGEgc3RyaW5nLicpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgbW9kdWxlID0gTU9EVUxFX1NUT1JFW2tleV07XG4gICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIElmIG1vZHVsZSBpcyBub3QgYWxyZWFkeSBjYWNoZWRcbiAgICAgICAgICAgIGlmICghbW9kdWxlKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNjcmlwdCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NjcmlwdCcpO1xuXG4gICAgICAgICAgICAgICAgc2NyaXB0LnR5cGUgPSBcInRleHQvamF2YXNjcmlwdFwiO1xuICAgICAgICAgICAgICAgIHNjcmlwdC5zcmMgPSB1cmw7XG4gICAgICAgICAgICAgICAgc2NyaXB0Lm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgZGVmZXIgPSBWb3coKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnTG9hZGluZyAnICsga2V5ICsgJy4uLicpO1xuXG4gICAgICAgICAgICAgICAgICAgIGRlZmVyLnByb21pc2UudGhlbihmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXRba2V5XSA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY291bnQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbWlzZS5yZXNvbHZlKHJldCk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIF9pbXBvcnQoY291bnQucG9wKCksIHByb21pc2UpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgICAgICBzY3JpcHQucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgICAgIE1PRFVMRV9TVE9SRVtrZXldKGRlZmVyLnJlc29sdmUpO1xuICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzLCBrZXkpO1xuXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChzY3JpcHQpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBtb2R1bGUoZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgICAgICByZXRba2V5XSA9IGRhdGE7XG4gICAgICAgICAgICAgICAgICAgIGlmIChjb3VudC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb21pc2UucmVzb2x2ZShyZXQpO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgX2ltcG9ydChjb3VudC5wb3AoKSwgcHJvbWlzZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBUcmlvLk1vZHVsZSA9IG5ldyBNb2R1bGUoKTtcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgdmFyIGV4dGVuZCA9IHNjb3BlLmV4dGVuZDtcbiAgICB2YXIgU2lnbmFsID0gc2NvcGUuU2lnbmFsO1xuICAgIHZhciBBamF4ID0gc2NvcGUuQWpheDtcblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLy8vLy8vLy8vLyBSZXNvdXJjZSBNYW5hZ2VyIENsYXNzIC8vLy8vLy8vLy8vXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vLyBBIFJlc291cmNlIE1hbmFnZXIgdG8gbWFuYWdlciByZWdpc3RlcmluZyBcbiAgICAvLy8gYW5kIGdldHRpbmcgcmVzb291cmNlc1xuICAgIFxuICAgIHZhciBSZXNvdXJjZU1hbmFnZXIgPSBmdW5jdGlvbigpIHt9O1xuICAgIC8vIFJlc291cmNlcyBTdG9yYWdlXG4gICAgdmFyIFJFU09VUkNFX1NUT1JFID0ge307XG5cbiAgICAvLyBVc2UgVHJpby5SZXNyb3VjZS5yZWdpc3Rlcih7bmFtZTogJ25hbWUnfSkgdG8gXG4gICAgLy8gY3JlYXRlIGFuZCByZWdpc3RlciBSZXNvdXJjZVxuICAgIFJlc291cmNlTWFuYWdlci5wcm90b3R5cGUucmVnaXN0ZXIgPSBmdW5jdGlvbihvcHRzKSB7XG4gICAgICAgIGlmICghb3B0cy5uYW1lKSB0aHJvdyBuZXcgRXJyb3IoJ0V4cGVjdCBwYXJhbWV0ZXIgdG8gaGF2ZSBwcm9wZXJ0eTogbmFtZS4nKTtcbiAgICAgICAgdmFyIFJlcyA9IFJlc291cmNlLmV4dGVuZChvcHRzKTtcbiAgICAgICAgUkVTT1VSQ0VfU1RPUkVbb3B0cy5uYW1lXSA9IG5ldyBSZXMob3B0cyk7XG4gICAgfTtcblxuICAgIC8vIFVzZSBUcmlvLlJlc3JvdWNlLmdldCgnbmFtZScpIHRvIGdldCBhY2Nlc3MgdG8gcmVzb3VyY2VcbiAgICBSZXNvdXJjZU1hbmFnZXIucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICAgICAgdmFyIHJlc291cmNlID0gUkVTT1VSQ0VfU1RPUkVbbmFtZV07XG4gICAgICAgIGlmICghcmVzb3VyY2UpIHRocm93IG5ldyBFcnJvcignUmVzb3VyY2UgJyArIG5hbWUgKyAnIG5vdCBmb3VuZC4nKTtcbiAgICAgICAgcmV0dXJuIHJlc291cmNlO1xuICAgIH07XG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vIFJlc291cmNlIC8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLy8gUmVzb3VyY2UgaXMgYSBjYWNoaW5nIGxheWVyIGJldHdlZW4gYmFja2VuZFxuICAgIC8vLyBhbmQgZnJvbnRlbmQuIEFsbCBBSkFYIHJlcXVlc3Qgc2hvdWxkIGdvIFxuICAgIC8vLyB0aHJvdWdoIHJlc291cmNlIGFuZCBjYWNoZSBhcyBkZXYgc2VlIGZpdC5cbiAgICAvLy8gUmVzb3VyY2Ugd2lsbCBhY3QgYXMgYSBzb3VyY2Ugb2YgdHJ1dGggZm9yIFxuICAgIC8vLyBUcmlvLkZhY3RvcnkgdG8gc3luYyBkYXRhIHdpdGguXG5cbiAgICB2YXIgcmVzb3VyY2VJZEdlbmVyYXRvciA9IHNjb3BlLmlkR2VuZXJhdG9yKCdyZXNvdXJjZScpO1xuICAgIFxuICAgIHZhciBSZXNvdXJjZSA9IHt9O1xuXG4gICAgUmVzb3VyY2UuX2NvbnN0cnVjdG9yID0gZnVuY3Rpb24ob3B0cykge1xuICAgICAgICB2YXIgY2FjaGUgPSBuZXcgTHJ1Q2FjaGUob3B0cy5jYWNoZVNpemUpO1xuICAgICAgICB0aGlzLnV1aWQgPSByZXNvdXJjZUlkR2VuZXJhdG9yKCk7XG4gICAgICAgIG5ldyBTaWduYWwodGhpcy51dWlkLCB0aGlzKTtcblxuICAgICAgICAvLyBFeHBvc2VkIGEgc2V0dGVyIGFuZCBnZXR0ZXIgdG8gaW50ZXJhY3Qgd2l0aCBMUlUgQ2FjaGVcbiAgICAgICAgdGhpcy5zZXQgPSBjYWNoZS5zZXQuYmluZCh0aGlzKTtcbiAgICAgICAgdGhpcy5nZXQgPSBjYWNoZS5nZXQuYmluZCh0aGlzKTtcbiAgICB9O1xuXG4gICAgLy8gRGVjb3JhdGVkIGFqYXggZnVuY3Rpb25cbiAgICBSZXNvdXJjZS5fY29uc3RydWN0b3IucHJvdG90eXBlLnNlbmRSZXF1ZXN0ID0gZnVuY3Rpb24gKG9wdHMsIGNhbGxiYWNrKSB7XG4gICAgICAgIHZhciByZXF1ZXN0ID0gbmV3IEFqYXgoe1xuICAgICAgICAgICAgdHlwZTogb3B0cy50eXBlLFxuICAgICAgICAgICAgdXJsOiBvcHRzLnVybCxcbiAgICAgICAgICAgIG9ubG9hZDogZnVuY3Rpb24ocmVzcG9uc2UpIHtcbiAgICAgICAgICAgICAgICBjYWxsYmFjayh0aGlzLmludGVyY2VwdFJlc3BvbnNlKHJlc3BvbnNlKSk7XG4gICAgICAgICAgICB9LmJpbmQodGhpcylcbiAgICAgICAgfSk7XG5cbiAgICAgICAgdGhpcy5pbnRlcmNlcHRSZXF1ZXN0KHJlcXVlc3QpO1xuICAgICAgICByZXF1ZXN0LnNlbmQob3B0cy5wYXlsb2FkKTtcbiAgICB9O1xuXG4gICAgLy8gSW50ZXJjZXB0IGFsbCBSZXNwb25zZSBhbmQgUmVxdWVzdCB0aHJ1IHJlc291cmNlIGluc3RhbmNlXG4gICAgUmVzb3VyY2UuX2NvbnN0cnVjdG9yLnByb3RvdHlwZS5pbnRlcmNlcHRSZXNwb25zZSA9IGZ1bmN0aW9uKHJlcykgeyByZXR1cm4gcmVzOyB9O1xuICAgIFJlc291cmNlLl9jb25zdHJ1Y3Rvci5wcm90b3R5cGUuaW50ZXJjZXB0UmVxdWVzdCA9IGZ1bmN0aW9uKHJlcSkgeyByZXR1cm4gcmVxOyB9O1xuXG4gICAgLy8gQ29udmVuaWVuY2UgbWV0aG9kIHRvIGVuY29kZSBKU09OIGludG8gVVJMIHBhcmFtXG4gICAgUmVzb3VyY2UuX2NvbnN0cnVjdG9yLnByb3RvdHlwZS5lbmNvZGVVcmxQYXJhbSA9IGZ1bmN0aW9uKHBhcmFtKSB7XG4gICAgICAgIHZhciBlbmNvZGVkU3RyaW5nID0gJyc7XG4gICAgICAgIGZvciAodmFyIHByb3AgaW4gcGFyYW0pIHtcbiAgICAgICAgICAgIGlmIChwYXJhbS5oYXNPd25Qcm9wZXJ0eShwcm9wKSkge1xuICAgICAgICAgICAgICAgIGlmIChlbmNvZGVkU3RyaW5nLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgICAgICAgICAgZW5jb2RlZFN0cmluZyArPSAnJic7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGVuY29kZWRTdHJpbmcgKz0gZW5jb2RlVVJJKHByb3AgKyAnPScgKyBwYXJhbVtwcm9wXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGVuY29kZWRTdHJpbmc7XG4gICAgfTtcblxuICAgIC8vIFdoZW4gdGhpcyBtZXRob2QgaXMgY2FsbGVkLCBhbGwgVHJpbyBGYWN0b3J5IHRoYXQgaXMgc3luY2VkIHdpdGggXG4gICAgLy8gdGhlIHJlc291cmNlIGluc3RhbmNlIHdpbGwgYmUgbm90aWZpZWRcbiAgICBSZXNvdXJjZS5fY29uc3RydWN0b3IucHJvdG90eXBlLmhhc0JlZW5VcGRhdGVkID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgIHRoaXMuZW1pdCgndXBkYXRlOicgKyB0aGlzLnV1aWQsIG51bGwpO1xuICAgIH07XG5cbiAgICBSZXNvdXJjZS5leHRlbmQgPSBleHRlbmQ7XG4gICAgVHJpby5SZXNvdXJjZSA9IG5ldyBSZXNvdXJjZU1hbmFnZXIoKTtcblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8gTFJVIENhY2hlIC8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vLyBMUlUgQ2FjaGUgZGF0YSBzdHJ1Y3R1cmUgY3JlYXRlZCBmb3IgaW50ZXJuYWwgdXNlXG5cbiAgICB2YXIgTHJ1Q2FjaGUgPSBmdW5jdGlvbihzaXplKSB7XG4gICAgICAgIHZhciBtYXAgPSB7fTtcbiAgICAgICAgdmFyIGxpc3QgPSBuZXcgRGJseUxpbmtlZExpc3QoKTtcbiAgICAgICAgdmFyIG1heExlbmd0aCA9IHNpemUgfHwgMDtcbiAgICAgICAgXG4gICAgICAgIHRoaXMuc2V0ID0gZnVuY3Rpb24oa2V5LCBkYXRhKSB7XG4gICAgICAgICAgICB2YXIgbm9kZSA9IG1hcFtrZXldO1xuICAgICAgICAgICAgdmFyIG9sZFRhaWw7XG5cbiAgICAgICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICAgICAgbGlzdC5wdXNoVG9IZWFkKG5vZGUpO1xuICAgICAgICAgICAgICAgIG5vZGUuZGF0YSA9IGRhdGE7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGxpc3QuYWRkVG9IZWFkKGtleSwgZGF0YSk7XG4gICAgICAgICAgICAgICAgbWFwW2tleV0gPSBsaXN0LmhlYWQ7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChtYXhMZW5ndGggIT09IDAgJiYgbGlzdC5sZW5ndGggPiBtYXhMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICBvbGRUYWlsID0gbGlzdC50YWlsO1xuICAgICAgICAgICAgICAgIGxpc3QucmVtb3ZlVGFpbCgpO1xuICAgICAgICAgICAgICAgIGRlbGV0ZSBtYXBbb2xkVGFpbC5rZXldO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgIH07XG5cbiAgICAgICAgdGhpcy5nZXQgPSBmdW5jdGlvbihrZXkpIHtcbiAgICAgICAgICAgIHZhciBub2RlID0gbWFwW2tleV07XG5cbiAgICAgICAgICAgIGlmIChub2RlKSB7XG4gICAgICAgICAgICAgICAgbGlzdC5wdXNoVG9IZWFkKG5vZGUpO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gbm9kZSA/IG5vZGUuZGF0YSA6IG51bGw7XG5cbiAgICAgICAgfTtcblxuICAgIH07XG5cbiAgICB2YXIgRGJseUxpbmtlZExpc3QgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5oZWFkID0gbnVsbDtcbiAgICAgICAgdGhpcy50YWlsID0gbnVsbDtcbiAgICAgICAgdGhpcy5sZW5ndGggPSAwO1xuICAgIH07XG5cbiAgICBEYmx5TGlua2VkTGlzdC5wcm90b3R5cGUuYWRkVG9IZWFkID0gZnVuY3Rpb24oa2V5LCBkYXRhKSB7XG4gICAgICAgIHZhciBub2RlID0gbmV3IERibHlMaW5rZWRMaXN0Tm9kZShrZXksIGRhdGEpO1xuICAgICAgICB2YXIgb2xkSGVhZDtcblxuICAgICAgICBpZiAoIXRoaXMuaGVhZCAmJiAhdGhpcy50YWlsKSB7XG4gICAgICAgICAgICB0aGlzLmhlYWQgPSBub2RlO1xuICAgICAgICAgICAgdGhpcy50YWlsID0gbm9kZTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG9sZEhlYWQgPSB0aGlzLmhlYWQ7XG4gICAgICAgICAgICBvbGRIZWFkLnByZXYgPSBub2RlO1xuICAgICAgICAgICAgbm9kZS5uZXh0ID0gb2xkSGVhZDtcbiAgICAgICAgICAgIHRoaXMuaGVhZCA9IG5vZGU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmxlbmd0aCsrO1xuXG4gICAgfTtcblxuICAgIERibHlMaW5rZWRMaXN0LnByb3RvdHlwZS5wdXNoVG9IZWFkID0gZnVuY3Rpb24obm9kZSkge1xuICAgICAgICB2YXIgb2xkSGVhZCA9IHRoaXMuaGVhZDtcbiAgICAgICAgdmFyIHByZXZOb2RlID0gbm9kZS5wcmV2O1xuICAgICAgICB2YXIgbmV4dE5vZGUgPSBub2RlLm5leHQ7XG5cbiAgICAgICAgaWYgKHRoaXMuaGVhZCA9PT0gbm9kZSkge1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHByZXZOb2RlICYmIG5leHROb2RlKSB7XG4gICAgICAgICAgICAvLyBDb25uZWN0IHByZXYgYW5kIG5leHQgbm9kZXNcbiAgICAgICAgICAgIHByZXZOb2RlLm5leHQgPSBuZXh0Tm9kZTtcbiAgICAgICAgICAgIG5leHROb2RlLnByZXYgPSBwcmV2Tm9kZTtcbiAgICAgICAgfSBlbHNlIGlmICghbmV4dE5vZGUpIHtcbiAgICAgICAgICAgIC8vIFNldCBuZXcgdGFpbFxuICAgICAgICAgICAgdGhpcy50YWlsID0gcHJldk5vZGU7XG4gICAgICAgICAgICB0aGlzLnRhaWwubmV4dCA9IG51bGw7XG4gICAgICAgIH1cblxuICAgICAgICAvLyBQdXNoIG5vZGUgdG8gaGVhZFxuICAgICAgICB0aGlzLmhlYWQgPSBub2RlO1xuICAgICAgICBub2RlLm5leHQgPSBvbGRIZWFkO1xuICAgICAgICBvbGRIZWFkLnByZXYgPSBub2RlO1xuXG4gICAgfTtcblxuICAgIERibHlMaW5rZWRMaXN0LnByb3RvdHlwZS5yZW1vdmVUYWlsID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMudGFpbCA9IHRoaXMudGFpbC5wcmV2O1xuICAgICAgICB0aGlzLnRhaWwubmV4dCA9IG51bGw7XG4gICAgICAgIHRoaXMubGVuZ3RoLS07XG4gICAgfTtcblxuICAgIHZhciBEYmx5TGlua2VkTGlzdE5vZGUgPSBmdW5jdGlvbihrZXksIGRhdGEpIHtcbiAgICAgICAgdGhpcy5wcmV2ID0gbnVsbDtcbiAgICAgICAgdGhpcy5uZXh0ID0gbnVsbDtcbiAgICAgICAgdGhpcy5rZXkgID0ga2V5O1xuICAgICAgICB0aGlzLmRhdGEgPSBkYXRhO1xuICAgIH07XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgdmFyIGZhY3RvcnlJZEdlbmVyYXRvciA9IHNjb3BlLmlkR2VuZXJhdG9yKCdmYWN0b3J5Jyk7XG4gICAgdmFyIFNpZ25hbCA9IHNjb3BlLlNpZ25hbDtcblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8gRmFjdG9yeSAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vLyBTeW5jIGRhdGEgd2l0aCBkaWZmZXJlbnQgcmVzb3VyY2UsIGFuZCBtYW5hZ2UgZGF0YSBcbiAgICAvLy8gYXMgdGhlIHNpbmdsZSBzb3VyY2Ugb2YgdHJ1dGggZm9yIGNvbXBvbmVudHNcblxuICAgIC8vIE5PVEU6XG4gICAgLy8gUGxhbm5lZCBGZWF0dXJlcy0tXG4gICAgLy8gIDEuIFNjaGVtYSBlbmZvcmNlbWVudFxuXG4gICAgdmFyIEZhY3RvcnkgPSB7fTtcblxuICAgIEZhY3RvcnkuX2NvbnN0cnVjdG9yID0gZnVuY3Rpb24ob3B0cykge1xuICAgICAgICB0aGlzLmF0dHJpYnV0ZXMgPSB7fTtcbiAgICAgICAgdGhpcy51dWlkICAgICAgID0gZmFjdG9yeUlkR2VuZXJhdG9yKCk7XG4gICAgICAgIHRoaXMucmVzb3VyY2VzICA9IHt9O1xuICAgICAgICBuZXcgU2lnbmFsKHRoaXMudXVpZCwgdGhpcyk7XG5cbiAgICAgICAgdGhpcy5pbml0aWFsaXplKG9wdHMpO1xuICAgIH07XG5cbiAgICBGYWN0b3J5Ll9jb25zdHJ1Y3Rvci5wcm90b3R5cGUuaW5pdGlhbGl6ZSA9IGZ1bmN0aW9uKCkge307XG5cbiAgICAvKipcbiAgICAgKiBTeW5jIGZhY3Rvcnkgd2l0aCByZXNvdXJjZU5hbWUsIGFuZCBjb25uZWN0IHdpdGggcmVzb3VyY2UncyBzaWduYWwuXG4gICAgICogTWFwIGNhbGxiYWNrIHdpbGwgYmUgaW52b2tlZCB3aXRoIHRoZSByZXNvdXJjZSBvYmplY3QgcGFzc2VkIGluIG9uIGZpcnN0IHN5bmMsIFxuICAgICAqIGFuZCBldmVyeSB0aW1lIHJlc291cmNlIGlzIHVwZGF0ZWQuXG4gICAgICovXG4gICAgRmFjdG9yeS5fY29uc3RydWN0b3IucHJvdG90eXBlLnN5bmMgPSBmdW5jdGlvbihyZXNvdXJjZU5hbWUsIG1hcCkge1xuICAgICAgICB2YXIgcmVzb3VyY2UgPSBUcmlvLlJlc291cmNlLmdldChyZXNvdXJjZU5hbWUpO1xuXG4gICAgICAgIGlmICghcmVzb3VyY2UpIHRocm93IG5ldyBFcnJvcignUmVzb3VyY2UgJyArIHJlc291cmNlTmFtZSArICcgZG9lcyBub3QgZXhpc3QuJyk7XG5cbiAgICAgICAgdGhpcy5yZXNvdXJjZXNbcmVzb3VyY2VOYW1lXSA9IHJlc291cmNlO1xuICAgICAgICB0aGlzLmNvbm5lY3QocmVzb3VyY2UudXVpZCk7XG4gICAgICAgIG1hcC5jYWxsKHRoaXMsIHJlc291cmNlKTtcbiAgICAgICAgdGhpcy5vbigndXBkYXRlOicgKyByZXNvdXJjZS51dWlkLCBtYXAuYmluZCh0aGlzLCByZXNvdXJjZSkpO1xuXG4gICAgfTtcblxuICAgIEZhY3RvcnkuZXh0ZW5kID0gc2NvcGUuZXh0ZW5kO1xuICAgIFRyaW8uRmFjdG9yeSA9IEZhY3Rvcnk7XG5cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgdmFyIHNlcnZpY2VJZEdlbmVyYXRvciA9IHNjb3BlLmlkR2VuZXJhdG9yKCdzZXJ2aWNlJyk7XG4gICAgdmFyIFNpZ25hbCA9IHNjb3BlLlNpZ25hbDtcbiAgICB2YXIgZXh0ZW5kID0gc2NvcGUuZXh0ZW5kO1xuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBTZXJ2aWNlIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8vIFNlcnZpY2UgaXMgYSBsYXllciBmb3IgY29tcG9uZW50cyBhbmQgZmFjdG9yeSB0byBcbiAgICAvLy8gd29yayB3aXRoIGVhY2ggb3RoZXIuIEl0IGV4cG9zZXMgYSBtZXRob2QgY2FsbCBcbiAgICAvLy8gaW1wbGVtZW50IHRvIGNvbm5lY3QgdHdvIG1vZHVsZXMgdG9ndGhlci4gQ29ubmVjdGVkXG4gICAgLy8vIG1vZHVsZSBjYW4gY29tbXVuaWNhdGUgdmlhIFNpZ25hbHMuXG5cbiAgICB2YXIgU2VydmljZSA9IHt9O1xuXG4gICAgU2VydmljZS5fY29uc3RydWN0b3IgPSBmdW5jdGlvbihvcHRzKSB7XG4gICAgICAgIHRoaXMudXVpZCA9IHNlcnZpY2VJZEdlbmVyYXRvcigpO1xuICAgICAgICBuZXcgU2lnbmFsKHRoaXMudXVpZCwgdGhpcyk7XG4gICAgICAgIHRoaXMub25SZWFkeShvcHRzKTtcbiAgICB9O1xuXG4gICAgLy8gSW52b2tlIG9uIGluc3RhbnRpYXRpb24gb2YgU2VydmljZVxuICAgIFNlcnZpY2UuX2NvbnN0cnVjdG9yLnByb3RvdHlwZS5vblJlYWR5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIFRvIGJlIGltcGxlbWVudGVkIGJ5IGluc3RhbmNlXG4gICAgfTtcblxuICAgIC8vIEludm9rZSBvbiBTZXJ2aWNlLnN0YXJ0KClcbiAgICBTZXJ2aWNlLl9jb25zdHJ1Y3Rvci5wcm90b3R5cGUub25TdGFydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAvLyBUbyBiZSBpbXBsZW1lbnRlZCBieSBpbnN0YW5jZVxuICAgIH07XG5cbiAgICAvLyBJbnZva2Ugb24gU2VydmljZS5zdG9wKClcbiAgICBTZXJ2aWNlLl9jb25zdHJ1Y3Rvci5wcm90b3R5cGUub25TdG9wID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vIFRvIGJlIGltcGxlbWVudGVkIGJ5IGluc3RhbmNlXG4gICAgfTtcblxuICAgIFNlcnZpY2UuX2NvbnN0cnVjdG9yLnByb3RvdHlwZS5zdGFydCA9IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICAgICAgdGhpcy5vblN0YXJ0KG9wdHMpO1xuICAgICAgICB0aGlzLm9uKHRoaXMuZW1pdC5iaW5kKHRoaXMpKTtcbiAgICB9O1xuXG4gICAgU2VydmljZS5fY29uc3RydWN0b3IucHJvdG90eXBlLnN0b3AgPSBmdW5jdGlvbihvcHRzKSB7XG4gICAgICAgIHRoaXMub25TdG9wKG9wdHMpO1xuICAgICAgICB0aGlzLnJlc2V0KCk7XG4gICAgfTtcblxuICAgIC8vIEV4cGVjdCB1dWlkIGZyb20gYW4gVHJpbyBtb2R1bGUuIFRoaXMgbWV0aG9kIHdpbGwgbWFrZSBhXG4gICAgLy8gY29ubmVjdGlvbiB3aXRoIHRoZSBvdGhlciBzaWduYWwsIGFuZCBvbiBhbnkgcHVsc2UsIHJlLWVtaXRcbiAgICAvLyBpdCB0byBhbGwgb3RoZXIgaW1wbGVtZW50ZWQgbW9kdWxlcy5cbiAgICBTZXJ2aWNlLl9jb25zdHJ1Y3Rvci5wcm90b3R5cGUuaW1wbGVtZW50ID0gZnVuY3Rpb24oaW5zdCkge1xuICAgICAgICBpZiAoaW5zdCAmJiBpbnN0LnV1aWQpIHtcbiAgICAgICAgICAgIHRoaXMuY29ubmVjdChpbnN0LnV1aWQpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3QgcGFyYW1ldGVyIHRvIGNvbnRhaW5zIHByb3BlcnR5IHV1aWQuJyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgU2VydmljZS5leHRlbmQgPSBleHRlbmQ7XG4gICAgVHJpby5TZXJ2aWNlID0gU2VydmljZTtcbiAgICBcbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBTdHlsaXplciAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8vIFN0eWxpemVyIGlzIHRoZSBDU1MgcmVuZGVyaW5nIGxpYnJhcnkgZm9yIFRyaW8uXG4gICAgLy8vIEl0IGFsbG93cyBkZXYgdG8gZ2VuZXJhdGUgQ1NTIHVzaW5nIGEgc2V0IG9mIFxuICAgIC8vLyBzaW1wbGUgQVBJLiBJdCBoYXMgZnVuY3Rpb25hbGl0eSBzaW1pbGFyIHRvXG4gICAgLy8vIHNvbWUgcHJlLWNvbXBpbGVyLCBzdWNoIGFzIHRoZSBhYmlsaXR5IHRvIHNldCBcbiAgICAvLy8gdmFyaWFibGVzLCBtaXhpbnMsIGFuZCBhdXRvLXByZWZpeC5cbiAgICBcbiAgICAvLyBTdG9yYWdlIGZvciBhbGwgdmFyaWFibGVzIGFuZCBtaXhpbnNcbiAgICB2YXIgTUlYSU5TID0ge307XG4gICAgdmFyIFZBUklBQkxFUyA9IHt9O1xuXG4gICAgLy8gQWxsIHZlbmRvcnMgcHJlZml4ZXMgbmVlZGVkXG4gICAgdmFyIF9BTExWRU5ET1JTID0gWyctd2Via2l0LScsICctbW96LScsICctbXMtJywgJy1vLSddO1xuICAgIC8vIENTUyBQcm9wZXJ0aWVzL0F0dHJpYnV0ZXMgdGhhdCBuZWVkcyBwcmVmaXhlcy4gVGhpcyBsaXN0IHdpbGwgZ3Jvdy5cbiAgICB2YXIgQVRUUklCVVRFU19UT19QUkVGSVggPSBbJ2ZsZXgnLCAndHJhbnNpdGlvbicsICd0cmFuc2Zvcm0nLCAnY2FsYycsICdhbGlnbi1zZWxmJywgJ2ZsZXgtZmxvdycsICdsaW5lYXItZ3JhZGllbnQnXTtcbiAgICAvLyBSZWdleCB0byBtYXRjaCBhbnkgc3RyaW5nIHRoYXQgY29udGFpbnMgd29yZHMgbmVlZCBwcmVmaXhlc1xuICAgIHZhciBJU19QUkVGSVhBQkxFID0gbmV3IFJlZ0V4cChBVFRSSUJVVEVTX1RPX1BSRUZJWC5qb2luKCd8JykpO1xuICAgIC8vIEtleS1wYWlyIGZvciBjb2xvciB0byBoZXhcbiAgICB2YXIgQ09MT1JfTUFQID0ge1xuICAgICAgICAnYmxhY2snOiAnIzAwMDAwMCcsXG4gICAgICAgICd3aGl0ZSc6ICcjZmZmZmZmJyxcbiAgICAgICAgJ2JsdWUnOiAnIzAwMDBmZicsXG4gICAgICAgICd5ZWxsb3cnOiAnI2ZmZmYwMCcsXG4gICAgICAgICdsaWdodC1ncmF5JzogJyNjY2NjY2MnLFxuICAgICAgICAnZGFyay1ncmF5JzogJyMzMzMzMzMnLFxuICAgICAgICAnZ3JheSc6ICcjNjY2NjY2JyxcbiAgICAgICAgJ29yYW5nZSc6ICcjZmZhNTAwJyxcbiAgICAgICAgJ3B1cnBsZSc6ICcjOGEyYmUyJ1xuICAgIH07XG5cbiAgICB2YXIgU3R5bGl6ZXIgPSBmdW5jdGlvbigpIHt9O1xuXG4gICAgU3R5bGl6ZXIucHJvdG90eXBlLmNyZWF0ZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gbmV3IENTU1RlbXBsYXRlKCk7XG4gICAgfTtcblxuICAgIFN0eWxpemVyLnByb3RvdHlwZS5yZWdpc3Rlck1peGluID0gZnVuY3Rpb24oa2V5LCBmdW5jKSB7XG4gICAgICAgIE1JWElOU1trZXldID0gZnVuYztcbiAgICB9O1xuXG4gICAgU3R5bGl6ZXIucHJvdG90eXBlLnJlZ2lzdGVyVmFyaWFibGUgPSBmdW5jdGlvbihrZXksIHZhbCkge1xuICAgICAgICBWQVJJQUJMRVNba2V5XSA9IHZhbDtcbiAgICB9O1xuXG4gICAgU3R5bGl6ZXIucHJvdG90eXBlLmdldFZhcmlhYmxlID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgIGlmICghVkFSSUFCTEVTW2tleV0pIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ1ZhcmlhYmxlICcgKyBrZXkgKyAnIGRvZXMgbm90IGV4aXN0LicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBWQVJJQUJMRVNba2V5XTtcbiAgICB9O1xuXG4gICAgU3R5bGl6ZXIucHJvdG90eXBlLmdldE1peGluID0gZnVuY3Rpb24oa2V5KSB7XG4gICAgICAgIGlmICghTUlYSU5TW2tleV0pIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01peGluICcgKyBrZXkgKyAnIGRvZXMgbm90IGV4aXN0LicpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBNSVhJTlNba2V5XTtcbiAgICB9O1xuXG4gICAgVHJpby5TdHlsaXplciA9IG5ldyBTdHlsaXplcigpO1xuXG4gICAgdmFyIENTU1RlbXBsYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRoaXMuc3R5bGUgPSB7fTtcbiAgICAgICAgdGhpcy5fY29udGV4dCA9IG51bGw7XG4gICAgfTtcblxuICAgIENTU1RlbXBsYXRlLnByb3RvdHlwZS5zZWxlY3QgPSBmdW5jdGlvbihzZWxlY3Rvcikge1xuICAgICAgICBpZiAoIXRoaXMuc3R5bGVbc2VsZWN0b3JdKSB7XG4gICAgICAgICAgICB0aGlzLnN0eWxlW3NlbGVjdG9yXSA9IHt9O1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuX2NvbnRleHQgPSB0aGlzLnN0eWxlW3NlbGVjdG9yXTtcbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfTtcblxuICAgIENTU1RlbXBsYXRlLnByb3RvdHlwZS5jc3MgPSBmdW5jdGlvbihrZXksIGF0dHIpIHtcbiAgICAgICAgaWYgKCF0aGlzLl9jb250ZXh0KSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NTUyBTZWxlY3RvciBub3QgcHJlc2VudC4nKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh0eXBlb2Yga2V5ID09PSAnc3RyaW5nJykge1xuICAgICAgICAgICAgYWRkT25lU3R5bGUoa2V5LCBhdHRyLCB0aGlzLl9jb250ZXh0KTtcbiAgICAgICAgfSBlbHNlIGlmICh0eXBlb2Yga2V5ID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgZm9yICh2YXIgayBpbiBrZXkpIHtcbiAgICAgICAgICAgICAgICBhZGRPbmVTdHlsZShrLCBrZXlba10sIHRoaXMuX2NvbnRleHQpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHRoaXM7XG5cbiAgICAgICAgZnVuY3Rpb24gYWRkT25lU3R5bGUoa2V5LCBhdHRyLCBvYmopIHtcbiAgICAgICAgICAgIG9ialtrZXldID0gYXR0cjtcbiAgICAgICAgfVxuICAgIH07XG5cbiAgICBDU1NUZW1wbGF0ZS5wcm90b3R5cGUudG9DU1MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHJldCA9ICcnO1xuXG4gICAgICAgIGZvciAodmFyIHNlbGVjdG9yIGluIHRoaXMuc3R5bGUpIHtcbiAgICAgICAgICAgIC8vIEVycm9yIGZvciB3aGVuIHN0eWxlIGlzIG5vdCBhIHR3by1sYXllcnMgb2JqZWN0XG4gICAgICAgICAgICAvLyBFeGFtcGxlOlxuICAgICAgICAgICAgLy8gY3NzU2VsZWN0b3IgOiB7XG4gICAgICAgICAgICAvLyAgICAgY3NzUHJvcGVydGllczogY3NzQXR0cmlidXRlc1xuICAgICAgICAgICAgLy8gfVxuICAgICAgICAgICAgaWYgKHR5cGVvZiBzZWxlY3RvciAhPT0gJ3N0cmluZycpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgU3R5bGUgT2JqZWN0Jyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXQgKz0gc2VsZWN0b3IgKyAneyc7XG4gICAgICAgICAgICB2YXIgcHJvcGVydGllcyA9IHRoaXMuc3R5bGVbc2VsZWN0b3JdO1xuICAgICAgICAgICAgZm9yICh2YXIgcHJvcCBpbiBwcm9wZXJ0aWVzKSB7XG4gICAgICAgICAgICAgICAgdmFyIHNldHRpbmcgPSBwcm9wZXJ0aWVzW3Byb3BdO1xuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nID0gcmVwbGFjZVZhcmlhYmxlLmNhbGwodGhpcywgc2V0dGluZyk7XG4gICAgICAgICAgICAgICAgcmV0ICs9IGF1dG9QcmVmaXgocHJvcCwgc2V0dGluZyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXQgPSByZXQuc3Vic3RyaW5nKDAsIHJldC5sZW5ndGggLSAxKTtcbiAgICAgICAgICAgIHJldCArPSAnfSc7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gcmV0O1xuXG4gICAgICAgIC8vIEhlbHBlciBtZXRob2QgdGhhdCByZXR1cm4gY3NzIHN0cmluZyB3aXRoIHByZWZpeGVzIGlmIG5lY2Vzc2FyeVxuICAgICAgICBmdW5jdGlvbiBhdXRvUHJlZml4KHByb3AsIHNldHRpbmcpIHtcbiAgICAgICAgICAgIHZhciBwcmVmaXhlZFN0cmluZyA9ICcnICsgcHJvcCArICc6JyArIHNldHRpbmcgKyAnOyc7XG5cbiAgICAgICAgICAgIGlmIChwcm9wLm1hdGNoKElTX1BSRUZJWEFCTEUpKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBfQUxMVkVORE9SUy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBwcmVmaXhlZFN0cmluZyArPSBfQUxMVkVORE9SU1tpXSArIHByb3AgKyAnOicgKyBzZXR0aW5nICsgJzsnO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKHNldHRpbmcubWF0Y2goSVNfUFJFRklYQUJMRSkpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IF9BTExWRU5ET1JTLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHByZWZpeGVkU3RyaW5nICs9IHByb3AgKyAnOicgKyBfQUxMVkVORE9SU1tqXSArIHNldHRpbmcgKyAnOyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICByZXR1cm4gcHJlZml4ZWRTdHJpbmc7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZXBsYWNlVmFyaWFibGUoc2V0dGluZykge1xuICAgICAgICAgICAgdmFyIHJnYnMgPSBzZXR0aW5nLm1hdGNoKC8oKHJnYnxyZ2JhKVxcKFteKV0qXFwpKS9naSk7XG4gICAgICAgICAgICB2YXIgcmdiLCBuZXdSZ2I7XG4gICAgICAgICAgICB2YXIga2V5LCB2YWw7XG5cbiAgICAgICAgICAgIGlmIChyZ2JzKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaiA9IDA7IGogPCByZ2JzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHJnYiA9IHJnYnNbal07XG4gICAgICAgICAgICAgICAgICAgIG5ld1JnYiA9IHJlcGxhY2VDb2xvci5jYWxsKHRoaXMsIHJnYik7XG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmcgPSBzZXR0aW5nLnJlcGxhY2UocmdiLCBuZXdSZ2IpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgdmFyIFZBUklBQkxFUyA9IHNldHRpbmcubWF0Y2goL1xcJChbXlxcJF1bXlxcc1xcZFxcLFxcKFxcKV0rKS9naSk7XG5cbiAgICAgICAgICAgIGlmIChWQVJJQUJMRVMpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IFZBUklBQkxFUy5sZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgICAgICBrZXkgPSBWQVJJQUJMRVNbaV0uc2xpY2UoMSk7XG4gICAgICAgICAgICAgICAgICAgIHZhbCA9IFN0eWxpemVyLnByb3RvdHlwZS5nZXRWYXJpYWJsZS5jYWxsKHRoaXMsIGtleSk7XG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmcgPSBzZXR0aW5nLnJlcGxhY2UoVkFSSUFCTEVTW2ldLCB2YWwpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIHNldHRpbmc7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiByZXBsYWNlQ29sb3IocmdiKSB7XG4gICAgICAgICAgICB2YXIgY29sb3JzID0gcmdiLm1hdGNoKC9cXCQoW15cXCRdW15cXHNcXGRcXCxcXChcXCldKykvZ2kpO1xuICAgICAgICAgICAgdmFyIGtleSwgdmFsO1xuXG4gICAgICAgICAgICBpZiAoY29sb3JzKSB7XG4gICAgICAgICAgICAgICAga2V5ID0gY29sb3JzWzBdLnNsaWNlKDEpO1xuICAgICAgICAgICAgICAgIHZhbCA9IFN0eWxpemVyLnByb3RvdHlwZS5nZXRWYXJpYWJsZS5jYWxsKHRoaXMsIGtleSk7XG4gICAgICAgICAgICAgICAgdmFsID0gdG9SR0IodmFsKTtcbiAgICAgICAgICAgICAgICByZ2IgPSByZ2IucmVwbGFjZShjb2xvcnNbMF0sIHZhbCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gcmdiO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gdG9SR0IoY29sb3IpIHtcbiAgICAgICAgICAgIGlmIChDT0xPUl9NQVBbY29sb3JdKSB7XG4gICAgICAgICAgICAgICAgY29sb3IgPSBDT0xPUl9NQVBbY29sb3JdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB2YXIgaXNIZXggPSAvXiM/KFthLWZcXGRdezJ9KShbYS1mXFxkXXsyfSkoW2EtZlxcZF17Mn0pJC9pLmV4ZWMoY29sb3IpO1xuICAgICAgICAgICAgdmFyIGlzUkdCID0gLygocmdifHJnYmEpXFwoW14pXSpcXCkpL2kuZXhlYyhjb2xvcik7XG5cbiAgICAgICAgICAgIGlmIChpc0hleCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBbXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGlzSGV4WzFdLCAxNiksXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGlzSGV4WzJdLCAxNiksXG4gICAgICAgICAgICAgICAgICAgIHBhcnNlSW50KGlzSGV4WzNdLCAxNilcbiAgICAgICAgICAgICAgICBdLmpvaW4oJywnKTtcbiAgICAgICAgICAgIH0gXG5cbiAgICAgICAgICAgIGlmIChpc1JHQikge1xuICAgICAgICAgICAgICAgIHJldHVybiBjb2xvci5yZXBsYWNlKC9bYS16XXxcXCh8XFwpL2dpLCAnJylcbiAgICAgICAgICAgICAgICAgICAgLnNwbGl0KCcsJylcbiAgICAgICAgICAgICAgICAgICAgLnNsaWNlKDAsIDMpXG4gICAgICAgICAgICAgICAgICAgIC5qb2luKCcsJyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2xvciBzdHJpbmcuJyk7XG4gICAgICAgIH1cbiAgICB9O1xuXG4gICAgQ1NTVGVtcGxhdGUucHJvdG90eXBlLnRvSGV4ID0gZnVuY3Rpb24ocmdiKSB7XG4gICAgICAgIHJnYiA9IHJnYi5yZXBsYWNlKCcgJywgJycpLnNwbGl0KCcsJyk7XG4gICAgICAgIHJldHVybiBcIiNcIiArIGNvbXBvbmVudFRvSGV4KHJnYlswXSkgKyBjb21wb25lbnRUb0hleChyZ2JbMV0pICsgY29tcG9uZW50VG9IZXgocmdiWzJdKTtcblxuICAgICAgICBmdW5jdGlvbiBjb21wb25lbnRUb0hleChjKSB7XG4gICAgICAgICAgICB2YXIgaGV4ID0gKCtjKS50b1N0cmluZygxNik7XG4gICAgICAgICAgICByZXR1cm4gaGV4Lmxlbmd0aCA9PSAxID8gXCIwXCIgKyBoZXggOiBoZXg7XG4gICAgICAgIH1cbiAgICB9O1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vIFJlbmRlcmVyIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLy8gUmVuZGVyZXIgaXMgdGhlIHJlbmRlcmluZyBsaWJyYXJ5IGZvciBUcmlvLiBJdCBcbiAgICAvLy8gZW1wbG95cyBhIHNldCBvZiBzaW1wbGUgQVBJIGZvciB1c2VyIHRvIGNyZWF0ZSBIVE1MLlxuICAgIC8vLyBJdCBhbHNvIGV4cG9zZXMgYSBwYXRjaCBtZXRob2QgdG8gZGlmZiBnZW5lcmF0ZWQgSFRNTFxuICAgIC8vLyBhbmQgRE9NIGluY3JlbWVudGFsbHksIHVwZGF0aW5nIG9ubHkgd2hhdCBuZWVkcyB0byBiZSBcbiAgICAvLy8gdXBkYXRlLlxuXG4gICAgdmFyIFJlbmRlcmVyID0gZnVuY3Rpb24oKXt9O1xuXG4gICAgUmVuZGVyZXIucHJvdG90eXBlLmNyZWF0ZVRlbXBsYXRlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBuZXcgVGVtcGxhdGUoKTtcbiAgICB9O1xuXG4gICAgVHJpby5SZW5kZXJlciA9IG5ldyBSZW5kZXJlcigpO1xuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBUZW1wbGF0ZSAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vXG4gICAgLy8vIFRlbXBsYXRlIG9iamVjdCB0byBzdG9yZSBjb21tYW5kIGFuZCBvbiByZW5kZXIsXG4gICAgLy8vIHJldHVybiBIVE1MXG5cbiAgICB2YXIgVGVtcGxhdGUgPSBmdW5jdGlvbigpe1xuICAgICAgICB0aGlzLl9xdWV1ZSA9IFtdO1xuICAgIH07XG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLy8vLy8vLy8vLy8vLy8gRE9NIFRlbXBsYXRpbmcgbWV0aG9kcyAvLy8vLy8vLy8vLy8vLy9cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgIC8vIEVhY2ggb2YgdGhlIG1ldGhvZHMgYmVsb3cgcHVzaCBhIGNvbW1hbmQgb2JqZWN0IHRvIGEgY29tbWFuZCBxdWV1ZS5cbiAgICAvLyBUaGUgY29tbWFuZCBxdWV1ZSB3aWxsIGJlIGV4ZWN1dGVkIGJ5IC5yZW5kZXIgdG8gY3JlYXRlIERPTSBmcmFnbWVudHMuXG4gICAgVGVtcGxhdGUucHJvdG90eXBlLm9wZW4gICAgICAgICA9IHF1ZXVlQ29tbWFuZCgnb3BlblRhZycpO1xuICAgIFRlbXBsYXRlLnByb3RvdHlwZS5hZGRDbGFzcyAgICAgPSBxdWV1ZUNvbW1hbmQoJ2FkZENsYXNzJyk7XG4gICAgVGVtcGxhdGUucHJvdG90eXBlLnRleHQgICAgICAgICA9IHF1ZXVlQ29tbWFuZCgndGV4dCcpO1xuICAgIFRlbXBsYXRlLnByb3RvdHlwZS5hdHRyICAgICAgICAgPSBxdWV1ZUNvbW1hbmQoJ2F0dHJpYnV0ZScpO1xuICAgIFRlbXBsYXRlLnByb3RvdHlwZS5zdHlsZSAgICAgICAgPSBxdWV1ZUNvbW1hbmQoJ3N0eWxlJyk7XG4gICAgVGVtcGxhdGUucHJvdG90eXBlLmRhdGEgICAgICAgICA9IHF1ZXVlQ29tbWFuZCgnZGF0YScpO1xuICAgIFRlbXBsYXRlLnByb3RvdHlwZS5jbG9zZSAgICAgICAgPSBxdWV1ZUNvbW1hbmQoJ2Nsb3NlVGFnJyk7XG4gICAgVGVtcGxhdGUucHJvdG90eXBlLmlmICAgICAgICAgICA9IHF1ZXVlQ29tbWFuZCgnaWYnKTtcbiAgICBUZW1wbGF0ZS5wcm90b3R5cGUuZWxzZSAgICAgICAgID0gcXVldWVDb21tYW5kKCdlbHNlJyk7XG4gICAgVGVtcGxhdGUucHJvdG90eXBlLmVhY2ggICAgICAgICA9IHF1ZXVlQ29tbWFuZCgnbG9vcCcpO1xuICAgIFRlbXBsYXRlLnByb3RvdHlwZS5kb25lICAgICAgICAgPSBxdWV1ZUNvbW1hbmQoJ2RvbmUnKTtcbiAgICBUZW1wbGF0ZS5wcm90b3R5cGUueGlmICAgICAgICAgID0gVGVtcGxhdGUucHJvdG90eXBlLmRvbmU7IFxuICAgIFRlbXBsYXRlLnByb3RvdHlwZS54ZWFjaCAgICAgICAgPSBUZW1wbGF0ZS5wcm90b3R5cGUuZG9uZTtcblxuICAgIGZ1bmN0aW9uIHF1ZXVlQ29tbWFuZChjb21tYW5kTmFtZSkge1xuICAgICAgICByZXR1cm4gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB0aGlzLl9xdWV1ZS5wdXNoKHtcbiAgICAgICAgICAgICAgICBhY3Rpb246IGNvbW1hbmROYW1lLFxuICAgICAgICAgICAgICAgIGRldGFpbDogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoYXJndW1lbnRzKVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfTtcbiAgICB9XG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLyBSZW5kZXIgLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgIFRlbXBsYXRlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgIC8vIFJvb3QgZWxlbWVudCB0byBzdG9yZSBET01zXG4gICAgICAgIHZhciByb290ICAgICAgICAgICAgPSBkb2N1bWVudC5jcmVhdGVEb2N1bWVudEZyYWdtZW50KCksXG4gICAgICAgIC8vIFN0YWNrcyB0byByZWZlcmVuY2UgY3VycmVudCBjb250ZXh0XG4gICAgICAgICAgICBlbGVtZW50cyAgICAgICAgPSBbXSxcbiAgICAgICAgICAgIGNvbmRpdGlvbmFscyAgICA9IFtdLFxuICAgICAgICAgICAgbG9vcHMgICAgICAgICAgID0gW10sXG4gICAgICAgICAgICBzdGF0ZXMgICAgICAgICAgPSBbXSxcbiAgICAgICAgLy8gUmVmZXJlbmNlIGluZGV4IGZvciBjdXJyZW50IGV4ZWN1dGlvblxuICAgICAgICAgICAgZXhlY0luZGV4ICAgICAgID0gMCxcbiAgICAgICAgICAgIGVsLCBjb25kaXRpb24sIGxvb3A7XG5cbiAgICAgICAgaGFuZGxlQ29tbWFuZC5jYWxsKHRoaXMsIHRoaXMuX3F1ZXVlW2V4ZWNJbmRleF0sIGRhdGEpO1xuXG4gICAgICAgIHJldHVybiByb290O1xuXG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZUNvbW1hbmQoY29tbWFuZCwgZXhlY0RhdGEpIHtcbiAgICAgICAgICAgIC8vIEdyYWIgY3VycmVudCBzdGF0ZTogTE9PUCwgQ09ORElUSU9OQUwsIG9yIHVuZGVmaW5lZFxuICAgICAgICAgICAgdmFyIHN0YXRlID0gZ2V0TGFzdEZyb20oc3RhdGVzKTtcblxuICAgICAgICAgICAgLy8gQmFzZSBjYXNlOiBleGl0IGlmIG5vIGNvbW1hbmRcbiAgICAgICAgICAgIGlmICghY29tbWFuZCkge1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ2hhbmdlIGRhdGEgaW4gY3VycmVudCBleGVjdWF0aW9uIGlmIGluIGEgbG9vcFxuICAgICAgICAgICAgLy8gRnJvbSBbe2E6ICdhJ30sIHtiOiAnYid9LCB7YzogJ2MnfV0gdG8ge2E6ICdhJ31cbiAgICAgICAgICAgIGlmIChzdGF0ZSA9PT0gJ0xPT1AnKSB7XG4gICAgICAgICAgICAgICAgc2V0RGF0YUNvbnRleHQoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSGFuZGxlIElGLCBFTFNFLCBFQUNILCBvciBET05FXG4gICAgICAgICAgICAvLyBUaGVzZSBtZXRob2RzIGNoYW5nZSBzdGF0ZSBvZiByZW5kZXJpbmdcbiAgICAgICAgICAgIGhhbmRsZVN0YXRlQWN0aW9ucygpO1xuXG4gICAgICAgICAgICAvLyBFeGl0IGlmIGNvbmRpdGlvbiBpcyBub3QgbWV0XG4gICAgICAgICAgICBpZiAoKHN0YXRlID09PSAnQ09ORElUSU9OQUwnICYmICFnZXRMYXN0RnJvbShjb25kaXRpb25hbHMpKSB8fCAoc3RhdGUgPT09ICdMT09QJyAmJiAhZXhlY0RhdGEpKSB7XG4gICAgICAgICAgICAgICAgaGFuZGxlQ29tbWFuZC5jYWxsKHRoaXMsIHRoaXMuX3F1ZXVlWysrZXhlY0luZGV4XSwgZXhlY0RhdGEpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gSGFuZGxlIENSRUFURSwgQVBQRU5ELCBTVFlMRSwgQVRUUiwgVEVYVFxuICAgICAgICAgICAgLy8gVGhlc2UgbWV0aG9kcyBhcmUgcHVyZWx5IHJlbmRlcmluZyBhbmQgZG8gbm90IGNoYW5nZSByZW5kZXJpbmcgc3RhdGVcbiAgICAgICAgICAgIGhhbmRsZUNvbW1vbkFjdGlvbnMoKTtcblxuICAgICAgICAgICAgLy8gSW5jcmVtZW50IGluZGV4IGZvciBuZXh0IGV4ZWN1dGlvblxuICAgICAgICAgICAgZXhlY0luZGV4Kys7XG5cbiAgICAgICAgICAgIC8vIEV4ZWN1dGUgbmV4dCBjb21tYW5kXG4gICAgICAgICAgICBoYW5kbGVDb21tYW5kLmNhbGwodGhpcywgdGhpcy5fcXVldWVbZXhlY0luZGV4XSwgZXhlY0RhdGEpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBmdW5jdGlvbiBzZXREYXRhQ29udGV4dCgpIHtcbiAgICAgICAgICAgICAgICBsb29wID0gZ2V0TGFzdEZyb20obG9vcHMpO1xuICAgICAgICAgICAgICAgIGV4ZWNEYXRhID0gbG9vcC5kYXRhW2xvb3AuaW5kZXhdO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVTdGF0ZUFjdGlvbnMoKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNvbW1hbmQuYWN0aW9uID09PSAnbG9vcCcpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlTG9vcCgpO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGlmIChjb21tYW5kLmFjdGlvbiA9PT0gJ2RvbmUnKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZURvbmUoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgaWYgKGNvbW1hbmQuYWN0aW9uID09PSAnaWYnKSB7XG4gICAgICAgICAgICAgICAgICAgIGhhbmRsZUlmKCk7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgaWYgKGNvbW1hbmQuYWN0aW9uID09PSAnZWxzZScpIHtcbiAgICAgICAgICAgICAgICAgICAgaGFuZGxlRWxzZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gaGFuZGxlTG9vcCgpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZXMucHVzaCgnTE9PUCcpO1xuICAgICAgICAgICAgICAgIGxvb3BzLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBkYXRhOiBldmFsdWF0ZShleGVjRGF0YSwgY29tbWFuZC5kZXRhaWxbMF0pLFxuICAgICAgICAgICAgICAgICAgICBpbmRleDogMCxcbiAgICAgICAgICAgICAgICAgICAgc3RhcnQ6IGV4ZWNJbmRleFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVEb25lKCkge1xuICAgICAgICAgICAgICAgIHN0YXRlcy5wb3AoKTtcbiAgICAgICAgICAgICAgICBpZiAoc3RhdGUgPT09ICdDT05ESVRJT05BTCcpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uZGl0aW9uYWxzLnBvcCgpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoc3RhdGUgPT09ICdMT09QJykge1xuICAgICAgICAgICAgICAgICAgICBsb29wID0gZ2V0TGFzdEZyb20obG9vcHMpO1xuICAgICAgICAgICAgICAgICAgICBsb29wLmluZGV4ID0gbG9vcC5pbmRleCArIDE7XG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGN1cnJlbnQgbG9vcCBpcyBub3QgZG9uZSwgc2V0IHN0YXRlIGJhY2sgdG8gbG9vcFxuICAgICAgICAgICAgICAgICAgICAvLyBhbmQgc2V0IG5leHQgZXhlY3V0aW9uIGF0IHN0YXJ0IG9mIGxvb3BcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxvb3AuaW5kZXggPCBsb29wLmRhdGEubGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBleGVjSW5kZXggPSBsb29wLnN0YXJ0O1xuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdGVzLnB1c2goJ0xPT1AnKTtcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxvb3BzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVJZigpIHtcbiAgICAgICAgICAgICAgICBzdGF0ZXMucHVzaCgnQ09ORElUSU9OQUwnKTtcbiAgICAgICAgICAgICAgICBjb25kaXRpb24gPSBldmFsdWF0ZShleGVjRGF0YSwgY29tbWFuZC5kZXRhaWxbMF0pO1xuICAgICAgICAgICAgICAgIGNvbmRpdGlvbmFscy5wdXNoKGNvbmRpdGlvbik7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIGhhbmRsZUVsc2UoKSB7XG4gICAgICAgICAgICAgICAgY29uZGl0aW9uID0gIWNvbmRpdGlvbmFscy5wb3AoKTtcbiAgICAgICAgICAgICAgICBjb25kaXRpb25hbHMucHVzaChjb25kaXRpb24pO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmdW5jdGlvbiBoYW5kbGVDb21tb25BY3Rpb25zKCkge1xuICAgICAgICAgICAgICAgIHN3aXRjaCAoY29tbWFuZC5hY3Rpb24pIHtcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnb3BlblRhZyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50cy5wdXNoKGNyZWF0ZVRhZy5hcHBseShudWxsLCBjb21tYW5kLmRldGFpbCkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgJ2FkZENsYXNzJzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsID0gZ2V0TGFzdEZyb20oZWxlbWVudHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkQ2xhc3MuYXBwbHkoZWwsIFtldmFsdWF0ZShleGVjRGF0YSwgY29tbWFuZC5kZXRhaWxbMF0pXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnc3R5bGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgZWwgPSBnZXRMYXN0RnJvbShlbGVtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRTdHlsZS5hcHBseShlbCwgW2V2YWx1YXRlKGV4ZWNEYXRhLCBjb21tYW5kLmRldGFpbFswXSksIGV2YWx1YXRlKGV4ZWNEYXRhLCBjb21tYW5kLmRldGFpbFsxXSldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdhdHRyaWJ1dGUnOlxuICAgICAgICAgICAgICAgICAgICAgICAgZWwgPSBnZXRMYXN0RnJvbShlbGVtZW50cyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBhZGRBdHRyaWJ1dGUuYXBwbHkoZWwsIFtldmFsdWF0ZShleGVjRGF0YSwgY29tbWFuZC5kZXRhaWxbMF0pLCBldmFsdWF0ZShleGVjRGF0YSwgY29tbWFuZC5kZXRhaWxbMV0pXSk7XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICAgICAgY2FzZSAnZGF0YSc6XG4gICAgICAgICAgICAgICAgICAgICAgICBlbCA9IGdldExhc3RGcm9tKGVsZW1lbnRzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhdGNoRWxlbWVudC5hcHBseShlbCwgW2V2YWx1YXRlKGV4ZWNEYXRhLCBjb21tYW5kLmRldGFpbFswXSldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICd0ZXh0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGVsID0gZ2V0TGFzdEZyb20oZWxlbWVudHMpO1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkVGV4dC5hcHBseShlbCwgW2V2YWx1YXRlKGV4ZWNEYXRhLCBjb21tYW5kLmRldGFpbFswXSldKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgICAgICAgICBjYXNlICdjbG9zZVRhZyc6XG4gICAgICAgICAgICAgICAgICAgICAgICBlbCA9IGVsZW1lbnRzLnBvcCgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVsZW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvb3QuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZXRMYXN0RnJvbShlbGVtZW50cykuYXBwZW5kQ2hpbGQoZWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vIFBhdGNoIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuICAgIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgVGVtcGxhdGUucHJvdG90eXBlLnBhdGNoID0gZnVuY3Rpb24ocm9vdCwgZGF0YSkge1xuICAgICAgICB2YXIgZnJhZyA9IHRoaXMucmVuZGVyKGRhdGEpO1xuXG4gICAgICAgIF9wYXRjaChyb290LCBmcmFnKTtcblxuICAgICAgICBmdW5jdGlvbiBfcGF0Y2goZnJvbSwgdG8pIHtcbiAgICAgICAgICAgIHZhciBmcm9tTm9kZSwgdG9Ob2RlO1xuICAgICAgICAgICAgdmFyIGxlbmd0aCA9IE1hdGgubWF4KGZyb20uY2hpbGROb2Rlcy5sZW5ndGgsIHRvLmNoaWxkTm9kZXMubGVuZ3RoKTtcblxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgICAgIGZyb21Ob2RlID0gZnJvbS5jaGlsZE5vZGVzW2ldO1xuICAgICAgICAgICAgICAgIHRvTm9kZSAgID0gdG8uY2hpbGROb2Rlc1tpXTtcblxuICAgICAgICAgICAgICAgIGlmICghdG9Ob2RlICYmICEhZnJvbU5vZGUpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQWxsQWZ0ZXIoZnJvbSwgaSk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKCFmcm9tTm9kZSAmJiAhIXRvTm9kZSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgY2xvbmUgPSB0b05vZGUuY2xvbmVOb2RlKHRydWUpO1xuICAgICAgICAgICAgICAgICAgICBmcm9tLmFwcGVuZENoaWxkKGNsb25lKTtcbiAgICAgICAgICAgICAgICAgICAgcGF0Y2hTaGFkb3dSb290KGNsb25lLCB0b05vZGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoZnJvbU5vZGUudGFnTmFtZSAhPT0gdG9Ob2RlLnRhZ05hbWUpIHtcbiAgICAgICAgICAgICAgICAgICAgZnJvbS5yZXBsYWNlQ2hpbGQodG9Ob2RlLmNsb25lTm9kZSh0cnVlKSwgZnJvbU5vZGUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHBhdGNoTm9kZShmcm9tTm9kZSwgdG9Ob2RlKTtcbiAgICAgICAgICAgICAgICAgICAgX3BhdGNoKGZyb21Ob2RlLCB0b05vZGUpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHJlbW92ZUFsbEFmdGVyKG5vZGUsIGluZGV4KSB7XG4gICAgICAgICAgICBmb3IgKHZhciBpID0gbm9kZS5jaGlsZE5vZGVzLmxlbmd0aCAtIDE7IGkgPj0gaW5kZXg7IGktLSkge1xuICAgICAgICAgICAgICAgIG5vZGUuY2hpbGROb2Rlc1tpXS5yZW1vdmUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHBhdGNoTm9kZShmcm9tLCB0bykge1xuICAgICAgICAgICAgcGF0Y2hDbGFzcyhmcm9tLCB0byk7XG4gICAgICAgICAgICBwYXRjaFN0eWxlKGZyb20sIHRvKTtcbiAgICAgICAgICAgIHBhdGNoQXR0cmlidXRlcyhmcm9tLCB0byk7XG4gICAgICAgICAgICBwYXRjaFRleHQoZnJvbSwgdG8pO1xuICAgICAgICAgICAgcGF0Y2hTaGFkb3dSb290KGZyb20sIHRvKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHBhdGNoQ2xhc3MoZnJvbSwgdG8pIHtcbiAgICAgICAgICAgIHZhciBtYXA7XG4gICAgICAgICAgICB2YXIgdG9DbGFzc2VzICAgPSB0byAmJiB0by5jbGFzc05hbWUgPyB0by5jbGFzc05hbWUuc3BsaXQoJyAnKSA6IFtdO1xuICAgICAgICAgICAgdmFyIGZyb21DbGFzc2VzID0gZnJvbSAmJiBmcm9tLmNsYXNzTmFtZSA/IGZyb20uY2xhc3NOYW1lLnNwbGl0KCcgJykgOiBbXTtcbiAgICAgICAgICAgIFxuICAgICAgICAgICAgbWFwID0gdG9DbGFzc2VzLnJlZHVjZShmdW5jdGlvbihhY2N1bXVsYXRvciwgY2xzKSB7XG4gICAgICAgICAgICAgICAgaWYgKGNscyA9PT0gJycpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGFjY3VtdWxhdG9yO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBhZGRDbGFzcy5jYWxsKGZyb20sIGNscyk7XG4gICAgICAgICAgICAgICAgYWNjdW11bGF0b3JbY2xzXSA9IGNscztcbiAgICAgICAgICAgICAgICByZXR1cm4gYWNjdW11bGF0b3I7XG4gICAgICAgICAgICB9LCB7fSk7XG5cbiAgICAgICAgICAgIGZyb21DbGFzc2VzLmZvckVhY2goZnVuY3Rpb24oY2xzKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFtYXBbY2xzXSkge1xuICAgICAgICAgICAgICAgICAgICByZW1vdmVDbGFzcy5jYWxsKGZyb20sIGNscyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwYXRjaFRleHQoZnJvbSwgdG8pIHtcbiAgICAgICAgICAgIGlmIChmcm9tLnRleHRDb250ZW50ICE9PSB0by50ZXh0Q29udGVudCkge1xuICAgICAgICAgICAgICAgIGZyb20udGV4dENvbnRlbnQgPSB0by50ZXh0Q29udGVudDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGZ1bmN0aW9uIHBhdGNoU3R5bGUoZnJvbSwgdG8pIHtcbiAgICAgICAgICAgIHZhciBtYXAgPSB7fTtcbiAgICAgICAgICAgIHZhciBzdHlsZUtleSwgc3R5bGVWYWwsIGZyb21LZXlzO1xuXG4gICAgICAgICAgICBpZiAodG8uc3R5bGUpIHtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRvLnN0eWxlLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlS2V5ID0gdG8uc3R5bGVbaV07XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlVmFsID0gdG8uc3R5bGVbdG8uc3R5bGVbaV1dO1xuICAgICAgICAgICAgICAgICAgICBhZGRTdHlsZS5jYWxsKGZyb20sIHN0eWxlS2V5LCBzdHlsZVZhbCk7XG4gICAgICAgICAgICAgICAgICAgIG1hcFtzdHlsZUtleV0gPSBzdHlsZVZhbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChmcm9tLnN0eWxlKSB7XG4gICAgICAgICAgICAgICAgZnJvbUtleXMgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChmcm9tLnN0eWxlKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGZyb21LZXlzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0eWxlS2V5ID0gZnJvbUtleXNbal07XG4gICAgICAgICAgICAgICAgICAgIGlmICghbWFwW3N0eWxlS2V5XSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgYWRkU3R5bGUuY2FsbChmcm9tLCBzdHlsZUtleSwgJycpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gcGF0Y2hBdHRyaWJ1dGVzKGZyb20sIHRvKSB7XG4gICAgICAgICAgICB2YXIgbWFwID0ge307XG4gICAgICAgICAgICB2YXIgYXR0ciwgYXR0cktleSwgYXR0clZhbCwgZnJvbUtleXM7XG5cbiAgICAgICAgICAgIGlmICh0by5hdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCB0by5hdHRyaWJ1dGVzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGF0dHIgPSB0by5hdHRyaWJ1dGVzW2ldO1xuICAgICAgICAgICAgICAgICAgICBhdHRyS2V5ID0gYXR0ci5uYW1lO1xuICAgICAgICAgICAgICAgICAgICBpZiAoYXR0cktleSAhPT0gJ3N0eWxlJyAmJiBhdHRyS2V5ICE9PSAnY2xhc3MnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmcm9tLnNldEF0dHJpYnV0ZShhdHRyS2V5LCBhdHRyLnZhbHVlKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcFthdHRyS2V5XSA9IGF0dHIudmFsdWU7ICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGZyb20uYXR0cmlidXRlcykge1xuICAgICAgICAgICAgICAgIGZyb21LZXlzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoZnJvbS5hdHRyaWJ1dGVzKTtcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGZyb21LZXlzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIGF0dHIgPSBmcm9tS2V5c1tqXTtcbiAgICAgICAgICAgICAgICAgICAgYXR0cktleSA9IGF0dHIubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGF0dHJLZXkgIT09ICdzdHlsZScgJiYgYXR0cktleSAhPT0gJ2NsYXNzJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtYXBbYXR0cktleV0pIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmcm9tLnNldEF0dHJpYnV0ZShhdHRyS2V5LCAnJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBmdW5jdGlvbiBwYXRjaFNoYWRvd1Jvb3QoZnJvbSwgdG8pIHtcbiAgICAgICAgICAgIGlmKGZyb20uc2hhZG93Um9vdCAmJiB0by5zaGFkb3dSb290KSB7XG4gICAgICAgICAgICAgICAgX3BhdGNoKGZyb20uc2hhZG93Um9vdCwgdG8uc2hhZG93Um9vdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgIH07XG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vIEhlbHBlciBNZXRob2RzIC8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZVRhZyh0YWcpIHtcbiAgICAgICAgdmFyIHRhZ05hbWUgPSBwYXJzZVRhZyh0YWcpO1xuICAgICAgICB2YXIgZWwgICAgICA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQodGFnTmFtZVswXSk7XG5cbiAgICAgICAgaWYgKHRhZ05hbWVbMV0gPT09ICcuJykge1xuICAgICAgICAgICAgZWwuY2xhc3NOYW1lID0gdGFnTmFtZVsyXTtcbiAgICAgICAgfSBlbHNlIGlmICh0YWdOYW1lWzFdID09PSAnIycpIHtcbiAgICAgICAgICAgIGVsLmlkID0gdGFnTmFtZVsyXTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBlbDtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRDbGFzcyhjbGFzc05hbWUpIHtcbiAgICAgICAgdmFyIHNlcGFyYXRvciA9IHRoaXMuY2xhc3NOYW1lLmxlbmd0aCA+IDAgPyAnICcgOiAnJztcbiAgICAgICAgY2xhc3NOYW1lID0gdHlwZW9mIGNsYXNzTmFtZSA9PT0gJ3N0cmluZycgPyBjbGFzc05hbWUgOiAnJztcblxuICAgICAgICBpZiAoIWhhc0NsYXNzKHRoaXMsIGNsYXNzTmFtZSkpIHtcbiAgICAgICAgICAgIHRoaXMuY2xhc3NOYW1lICs9IHNlcGFyYXRvciArIGNsYXNzTmFtZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIHJlbW92ZUNsYXNzKGNsYXNzTmFtZSkge1xuICAgICAgICBpZiAoaGFzQ2xhc3ModGhpcywgY2xhc3NOYW1lKSkge1xuICAgICAgICAgICAgdmFyIG9sZCA9IHRoaXMuY2xhc3NOYW1lO1xuICAgICAgICAgICAgdmFyIG91dCA9IG9sZC5yZXBsYWNlKG5ldyBSZWdFeHAoJyhcXFxcc3xeKScgKyBjbGFzc05hbWUgKyAnKFxcXFxzfCQpJyksICcgJyk7XG4gICAgICAgICAgICB0aGlzLmNsYXNzTmFtZSA9IG91dDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIGZ1bmN0aW9uIGFkZFN0eWxlKGF0dHIsIHZhbCkge1xuICAgICAgICBpZiAodGhpcy5zdHlsZVthdHRyXSAhPT0gdmFsKSB7XG4gICAgICAgICAgICB0aGlzLnN0eWxlW2F0dHJdID0gdmFsO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gYWRkQXR0cmlidXRlKGF0dHIsIHZhbCkge1xuICAgICAgICB0aGlzLnNldEF0dHJpYnV0ZShhdHRyLCB0eXBlb2YgdmFsID09PSAndW5kZWZpbmVkJyA/ICcnIDogdmFsKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBhZGRUZXh0KGNvbnRlbnQpIHtcbiAgICAgICAgdGhpcy50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGF0Y2hFbGVtZW50KGRhdGEpIHtcbiAgICAgICAgaWYgKGRhdGEpIHtcbiAgICAgICAgICAgIHRoaXMucGF0Y2goZGF0YSk7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBnZXRMYXN0RnJvbShhcnJheSkge1xuICAgICAgICByZXR1cm4gYXJyYXlbYXJyYXkubGVuZ3RoIC0gMV07XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaGFzQ2xhc3MoZWwsIGNsYXNzTmFtZSkge1xuICAgICAgcmV0dXJuICEhZWwuY2xhc3NOYW1lLm1hdGNoKG5ldyBSZWdFeHAoJyhcXFxcc3xeKScrY2xhc3NOYW1lKycoXFxcXHN8JCknKSk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcGFyc2VUYWcodGFnKSB7XG4gICAgICAgIHRhZyA9IHRhZy5yZXBsYWNlKC9bLiNdLywgZnVuY3Rpb24oZCkgeyByZXR1cm4gJywnICsgZCArICcsJzt9KVxuICAgICAgICAgICAgICAgICAuc3BsaXQoJywnKTtcbiAgICAgICAgcmV0dXJuIHRhZztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0N1c3RvbUVsZW1lbnQodGFnKSB7XG4gICAgICAgIHJldHVybiAhIXRhZy5tYXRjaCgnLScpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGV2YWx1YXRlKGRhdGEsIGZ1bmNPclZhbCkge1xuICAgICAgICBzd2l0Y2ggKHR5cGVvZiBmdW5jT3JWYWwpIHtcbiAgICAgICAgICAgIGNhc2UgJ2Z1bmN0aW9uJzpcbiAgICAgICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY09yVmFsLmNhbGwodGhpcywgZGF0YSk7XG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJyc7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY09yVmFsO1xuXG4gICAgICAgIH1cbiAgICB9XG59KSgpO1xuIiwiKGZ1bmN0aW9uKCkge1xuICAgIHZhciBpZEdlbmVyYXRvciA9IHNjb3BlLmlkR2VuZXJhdG9yO1xuICAgIHZhciBjb21wb25lbnRJZEdlbmVyYXRvciA9IGlkR2VuZXJhdG9yKCdjb21wb25lbnQnKTtcbiAgICB2YXIgU2lnbmFsID0gc2NvcGUuU2lnbmFsO1xuXG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLy8vLy8vLy8vLy8vLy8vLyBDT01QT05FTlQgTUFOQUdFUiAvLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLy8gQSBDb21wb25lbnQgTWFuYWdlciB0byBhbGxvdyByZWdpc3RlcmluZyBhbmQgZ2V0dGluZ1xuICAgIC8vLyBUcmlvIENvbXBvbmVudHNcblxuICAgIHZhciBDb21wb25lbnRNYW5hZ2VyID0ge307XG4gICAgdmFyIENPTVBPTkVOVF9TVE9SRSA9IHt9O1xuXG4gICAgQ29tcG9uZW50TWFuYWdlci5yZWdpc3RlciA9IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICAgICAgaWYgKENPTVBPTkVOVF9TVE9SRVtvcHRzLnRhZ05hbWVdKSB7XG4gICAgICAgICAgICByZXR1cm4gQ09NUE9ORU5UX1NUT1JFW29wdHMudGFnTmFtZV07XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY29tcG9uZW50ID0gbmV3IENvbXBvbmVudChvcHRzKTtcbiAgICAgICAgQ09NUE9ORU5UX1NUT1JFW29wdHMudGFnTmFtZV0gPSBjb21wb25lbnQ7XG4gICAgICAgIHJldHVybiBjb21wb25lbnQ7XG4gICAgfTtcblxuICAgIENvbXBvbmVudE1hbmFnZXIuZ2V0ID0gZnVuY3Rpb24odGFnTmFtZSkge1xuICAgICAgICByZXR1cm4gQ09NUE9ORU5UX1NUT1JFW3RhZ05hbWVdO1xuICAgIH07XG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8gQ09NUE9ORU5UIC8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLy9cbiAgICBcbiAgICB2YXIgQ09NUE9ORU5UX0RBVEFTVE9SRSA9IHt9O1xuXG4gICAgdmFyIENvbXBvbmVudCA9IGZ1bmN0aW9uKG9wdHMpIHtcbiAgICAgICAgdGhpcy50YWdOYW1lID0gb3B0cy50YWdOYW1lO1xuICAgICAgICB0aGlzLnJlZ2lzdGVyRWxlbWVudChvcHRzKTtcbiAgICAgICAgdGhpcy5kYXRhS2V5Z2VuID0gaWRHZW5lcmF0b3IodGhpcy50YWdOYW1lKTtcbiAgICB9O1xuXG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5zZXREYXRhID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICB2YXIgZGF0YUtleSA9IHRoaXMuZGF0YUtleWdlbigpO1xuICAgICAgICBDT01QT05FTlRfREFUQVNUT1JFW2RhdGFLZXldID0gZGF0YTtcbiAgICAgICAgcmV0dXJuIGRhdGFLZXk7XG4gICAgfTtcblxuICAgIENvbXBvbmVudC5wcm90b3R5cGUuZ2V0RGF0YSA9IGZ1bmN0aW9uKGRhdGFLZXkpIHtcbiAgICAgICAgcmV0dXJuIENPTVBPTkVOVF9EQVRBU1RPUkVbZGF0YUtleV07XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJlbmRlciBIZWxwZXIgTWV0aG9kXG4gICAgICogMS4gSWYgdGhlcmUgaXMgZGF0YSwgc2F2ZSBpdCBpbiBDT01QT05FTlRfREFUQVNUT1JFLCBnZXQgZGF0YUtleVxuICAgICAqIDIuIFJlbmRlciA8Y3VzdG9tLWVsZW1lbnQgZGF0YS1rZXk9J2RhdGFLZXknPjwvY3VzdG9tLWVsZW1lbnQ+XG4gICAgICovXG4gICAgQ29tcG9uZW50LnByb3RvdHlwZS5jcmVhdGVFbGVtZW50ID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICB2YXIgY29tcG9uZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCh0aGlzLnRhZ05hbWUpO1xuICAgICAgICBjb21wb25lbnQucGF0Y2goZGF0YSk7XG4gICAgICAgIHJldHVybiBjb21wb25lbnQ7XG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIFJlZ2lzdGVyIEN1c3RvbSBFbGVtZW50IHVzaW5nIEhUTUw1IEFQSVxuICAgICAqL1xuICAgIENvbXBvbmVudC5wcm90b3R5cGUucmVnaXN0ZXJFbGVtZW50ID0gZnVuY3Rpb24ob3B0cykge1xuICAgICAgICAvLyBTZXQgUHJvdG90eXBlIG9mIGN1c3RvbSBlbGVtZW50XG4gICAgICAgIHZhciBwcm90byA9IE9iamVjdC5jcmVhdGUoSFRNTEVsZW1lbnQucHJvdG90eXBlKTtcbiAgICAgICAgdmFyIHRtcGwgICA9IG9wdHMudGVtcGxhdGUgfHwge307XG5cbiAgICAgICAgcHJvdG8uY3JlYXRlZENhbGxiYWNrID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICB2YXIgc2hhZG93LCBkYXRhS2V5LCBkYXRhLCBmcmFnO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICBpZiAoIXRtcGwucmVuZGVyIHx8ICF0bXBsLnBhdGNoKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUcmlvLlRlbXBsYXRlIGluc3RhbmNlIG5vdCBmb3VuZC4nKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gQ3JlYXRlIHNoYWRvdyByb290XG4gICAgICAgICAgICBzaGFkb3cgPSB0aGlzLmNyZWF0ZVNoYWRvd1Jvb3QoKTtcblxuICAgICAgICAgICAgLy8gR3JhYiBkYXRhIGZyb20gQ09NUE9ORU5UXG4gICAgICAgICAgICBkYXRhS2V5ID0gdGhpcy5nZXRBdHRyaWJ1dGUoJ2RhdGEta2V5Jyk7XG4gICAgICAgICAgICBkYXRhID0gQ09NUE9ORU5UX0RBVEFTVE9SRVtkYXRhS2V5XTtcblxuICAgICAgICAgICAgLy8gQXBwZW5kIHJlbmRlcmVkIGZyYWdtZW50cyBpbnRvIHNoYWRvd1Jvb3RcbiAgICAgICAgICAgIGZyYWcgPSBvcHRzLnRlbXBsYXRlLnJlbmRlcihkYXRhKTtcbiAgICAgICAgICAgIHJlcGxhY2VTdHlsZUhvc3QuY2FsbCh0aGlzLCBmcmFnKTtcblxuICAgICAgICAgICAgc2hhZG93LmFwcGVuZENoaWxkKGZyYWcpO1xuXG4gICAgICAgICAgICBkZWxldGUgQ09NUE9ORU5UX0RBVEFTVE9SRVtkYXRhS2V5XTtcblxuICAgICAgICAgICAgLy8gU2V0IFRyaW8gdXVpZCBhbmQgc2lnbmFsXG4gICAgICAgICAgICB0aGlzLnV1aWQgPSBjb21wb25lbnRJZEdlbmVyYXRvcigpO1xuICAgICAgICAgICAgbmV3IFNpZ25hbCh0aGlzLnV1aWQsIHRoaXMpO1xuXG4gICAgICAgICAgICAvLyBDcmVhdGUgcGF0Y2ggbWV0aG9kXG4gICAgICAgICAgICB0aGlzLnBhdGNoID0gZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHRtcGwucGF0Y2goc2hhZG93LCBkYXRhKTtcbiAgICAgICAgICAgICAgICByZXBsYWNlU3R5bGVIb3N0LmNhbGwodGhpcywgc2hhZG93KTtcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIC8vIEV4dGVuZCBvcHRzIGludG8gZWxlbWVudCBjb250ZXh0XG4gICAgICAgICAgICBfZXh0ZW5kKHRoaXMsIG9wdHMpO1xuXG4gICAgICAgICAgICBpZiAob3B0cy5vbkNyZWF0ZSkge1xuICAgICAgICAgICAgICAgIG9wdHMub25DcmVhdGUuYXBwbHkodGhpcywgYXJndW1lbnRzKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgZnVuY3Rpb24gX2V4dGVuZChvYmosIGV4dGVuZGVkT2JqZWN0KSB7XG4gICAgICAgICAgICAgICAgdmFyIGJsYWNrbGlzdCA9IHtcbiAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIG9uQXR0YWNoOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICBvbkRldGFjaDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgb25DcmVhdGU6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGNyZWF0ZWRDYWxsYmFjazogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgYXR0YWNoZWRDYWxsYmFjazogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgZGV0YWNoZWRDYWxsYmFjazogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgYXR0cmlidXRlQ2hhbmdlZENhbGxiYWNrOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICB0YWdOYW1lOiB0cnVlXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGtleSBpbiBleHRlbmRlZE9iamVjdCkge1xuICAgICAgICAgICAgICAgICAgICBpZiAoIWJsYWNrbGlzdFtrZXldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBvYmpba2V5XSA9IGV4dGVuZGVkT2JqZWN0W2tleV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlcGxhY2VTdHlsZUhvc3Qocm9vdCkge1xuICAgICAgICAgICAgICAgIGlmICh3aW5kb3cgJiYgd2luZG93LlNoYWRvd0RPTVBvbHlmaWxsKSB7XG4gICAgICAgICAgICAgICAgICAgIHZhciBsaXN0ID0gcm9vdC5nZXRFbGVtZW50c0J5VGFnTmFtZSgnc3R5bGUnKTtcbiAgICAgICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLmZvckVhY2guY2FsbChsaXN0LCBmdW5jdGlvbiAoc3R5bGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB0ZXh0ID0gc3R5bGUudGV4dENvbnRlbnRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvOmhvc3RcXGIvZ20sIHRoaXMudGFnTmFtZS50b0xvd2VyQ2FzZSgpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC86OnNoYWRvd1xcYi9nbSwgJyAnKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC86OmNvbnRlbnRcXGIvZ20sICcgJyk7XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZS50ZXh0Q29udGVudCA9IHRleHQ7XG4gICAgICAgICAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHByb3RvLmF0dGFjaGVkQ2FsbGJhY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChvcHRzLm9uQXR0YWNoKSB7XG4gICAgICAgICAgICAgICAgb3B0cy5vbkF0dGFjaC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHByb3RvLmRldGFjaGVkQ2FsbGJhY2sgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGlmIChvcHRzLm9uRGV0YWNoKSB7XG4gICAgICAgICAgICAgICAgb3B0cy5vbkRldGFjaC5hcHBseSh0aGlzLCBhcmd1bWVudHMpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIHByb3RvLmF0dHJpYnV0ZUNoYW5nZWRDYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgaWYgKG9wdHMub25DaGFuZ2UpIHtcbiAgICAgICAgICAgICAgICBvcHRzLm9uQ2hhbmdlLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH07XG5cbiAgICAgICAgZG9jdW1lbnQucmVnaXN0ZXJFbGVtZW50KG9wdHMudGFnTmFtZSwge1xuICAgICAgICAgICAgcHJvdG90eXBlOiBwcm90b1xuICAgICAgICB9KTtcbiAgICB9O1xuXG4gICAgVHJpby5Db21wb25lbnQgPSBDb21wb25lbnRNYW5hZ2VyO1xufSkoKTtcbiIsImlmKCB0eXBlb2YgZXhwb3J0cyAhPT0gJ3VuZGVmaW5lZCcgKSB7XG4gICAgXG4gICAgaWYoIHR5cGVvZiBtb2R1bGUgIT09ICd1bmRlZmluZWQnICYmIG1vZHVsZS5leHBvcnRzICkge1xuICAgICAgICBleHBvcnRzID0gbW9kdWxlLmV4cG9ydHMgPSBUcmlvO1xuICAgIH1cblxuICAgIGV4cG9ydHMuVHJpbyA9IFRyaW87XG5cbn0gZWxzZSB7XG5cbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgd2luZG93LlRyaW8gPSBUcmlvO1xuICAgIH0gZWxzZSBpZiAodHlwZW9mIGdsb2JhbCAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgZ2xvYmFsLlRyaW8gPSBUcmlvO1xuICAgIH1cbn1cbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
